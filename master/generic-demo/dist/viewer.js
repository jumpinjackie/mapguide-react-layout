var MapGuide;!function(){var e,t,n,r={80490:function(e,t,n){"use strict";n.r(t),t.default="./dist/stdassets/images/icons/PoweredBy_en.png"},76171:function(e,t,n){"use strict";n.r(t),t.default="./dist/stdassets/images/icons/about.png"},7847:function(e,t,n){"use strict";n.r(t),t.default="./dist/stdassets/images/icons/application-browser.png"},39029:function(e,t,n){"use strict";n.r(t),t.default="./dist/stdassets/images/icons/back.png"},72040:function(e,t,n){"use strict";n.r(t),t.default="./dist/stdassets/images/icons/buffer.png"},18655:function(e,t,n){"use strict";n.r(t),t.default="./dist/stdassets/images/icons/control-180.png"},68912:function(e,t,n){"use strict";n.r(t),t.default="./dist/stdassets/images/icons/control-stop-180.png"},65904:function(e,t,n){"use strict";n.r(t),t.default="./dist/stdassets/images/icons/control-stop.png"},82055:function(e,t,n){"use strict";n.r(t),t.default="./dist/stdassets/images/icons/control.png"},97609:function(e,t,n){"use strict";n.r(t),t.default="./dist/stdassets/images/icons/coordinate-tracker.png"},24081:function(e,t,n){"use strict";n.r(t),t.default="./dist/stdassets/images/icons/edit-copy.png"},98907:function(e,t,n){"use strict";n.r(t),t.default="./dist/stdassets/images/icons/edit-cut.png"},51729:function(e,t,n){"use strict";n.r(t),t.default="./dist/stdassets/images/icons/edit-duplicate.png"},9765:function(e,t,n){"use strict";n.r(t),t.default="./dist/stdassets/images/icons/edit-paste.png"},58465:function(e,t,n){"use strict";n.r(t),t.default="./dist/stdassets/images/icons/edit-xml.png"},47968:function(e,t,n){"use strict";n.r(t),t.default="./dist/stdassets/images/icons/feature-info.png"},10027:function(e,t,n){"use strict";n.r(t),t.default="./dist/stdassets/images/icons/file-print.png"},72178:function(e,t,n){"use strict";n.r(t),t.default="./dist/stdassets/images/icons/file-save.png"},84801:function(e,t,n){"use strict";n.r(t),t.default="./dist/stdassets/images/icons/folder-horizontal-open.png"},33597:function(e,t,n){"use strict";n.r(t),t.default="./dist/stdassets/images/icons/folder-horizontal.png"},34139:function(e,t,n){"use strict";n.r(t),t.default="./dist/stdassets/images/icons/forward.png"},12011:function(e,t,n){"use strict";n.r(t),t.default="./dist/stdassets/images/icons/geolocation.png"},67551:function(e,t,n){"use strict";n.r(t),t.default="./dist/stdassets/images/icons/globe-share.png"},76480:function(e,t,n){"use strict";n.r(t),t.default="./dist/stdassets/images/icons/globe_add.png"},2677:function(e,t,n){"use strict";n.r(t),t.default="./dist/stdassets/images/icons/help.png"},37852:function(e,t,n){"use strict";n.r(t),t.default="./dist/stdassets/images/icons/iconNavigator.png"},19134:function(e,t,n){"use strict";n.r(t),t.default="./dist/stdassets/images/icons/icon_home.png"},41750:function(e,t,n){"use strict";n.r(t),t.default="./dist/stdassets/images/icons/icon_menuarrow.png"},98119:function(e,t,n){"use strict";n.r(t),t.default="./dist/stdassets/images/icons/icon_menuarrow_disabled.png"},31632:function(e,t,n){"use strict";n.r(t),t.default="./dist/stdassets/images/icons/icon_menuarrowup.png"},25665:function(e,t,n){"use strict";n.r(t),t.default="./dist/stdassets/images/icons/icon_menuarrowup_disabled.png"},18863:function(e,t,n){"use strict";n.r(t),t.default="./dist/stdassets/images/icons/icon_refreshmap.png"},98325:function(e,t,n){"use strict";n.r(t),t.default="./dist/stdassets/images/icons/icon_warning.png"},20234:function(e,t,n){"use strict";n.r(t),t.default="./dist/stdassets/images/icons/icon_zoomselect.png"},9338:function(e,t,n){"use strict";n.r(t),t.default="./dist/stdassets/images/icons/info.png"},73342:function(e,t,n){"use strict";n.r(t),t.default="./dist/stdassets/images/icons/initial-center.png"},3696:function(e,t,n){"use strict";n.r(t),t.default="./dist/stdassets/images/icons/invoke-script.png"},58132:function(e,t,n){"use strict";n.r(t),t.default="./dist/stdassets/images/icons/invoke-url.png"},96140:function(e,t,n){"use strict";n.r(t),t.default="./dist/stdassets/images/icons/layer_add.png"},64763:function(e,t,n){"use strict";n.r(t),t.default="./dist/stdassets/images/icons/lc_unselect.png"},64898:function(e,t,n){"use strict";n.r(t),t.default="./dist/stdassets/images/icons/legend-DWF.png"},86321:function(e,t,n){"use strict";n.r(t),t.default="./dist/stdassets/images/icons/legend-layer.png"},42096:function(e,t,n){"use strict";n.r(t),t.default="./dist/stdassets/images/icons/legend-map.png"},61062:function(e,t,n){"use strict";n.r(t),t.default="./dist/stdassets/images/icons/legend-raster.png"},39788:function(e,t,n){"use strict";n.r(t),t.default="./dist/stdassets/images/icons/legend-theme.png"},42693:function(e,t,n){"use strict";n.r(t),t.default="./dist/stdassets/images/icons/maptip.png"},75981:function(e,t,n){"use strict";n.r(t),t.default="./dist/stdassets/images/icons/measure.png"},9995:function(e,t,n){"use strict";n.r(t),t.default="./dist/stdassets/images/icons/options.png"},45082:function(e,t,n){"use strict";n.r(t),t.default="./dist/stdassets/images/icons/out-of-range.png"},71909:function(e,t,n){"use strict";n.r(t),t.default="./dist/stdassets/images/icons/overview-map.png"},21166:function(e,t,n){"use strict";n.r(t),t.default="./dist/stdassets/images/icons/pan-east.png"},79691:function(e,t,n){"use strict";n.r(t),t.default="./dist/stdassets/images/icons/pan-north.png"},89447:function(e,t,n){"use strict";n.r(t),t.default="./dist/stdassets/images/icons/pan-south.png"},30137:function(e,t,n){"use strict";n.r(t),t.default="./dist/stdassets/images/icons/pan-west.png"},51178:function(e,t,n){"use strict";n.r(t),t.default="./dist/stdassets/images/icons/pan.png"},90649:function(e,t,n){"use strict";n.r(t),t.default="./dist/stdassets/images/icons/preview.png"},74099:function(e,t,n){"use strict";n.r(t),t.default="./dist/stdassets/images/icons/print.png"},26946:function(e,t,n){"use strict";n.r(t),t.default="./dist/stdassets/images/icons/property.png"},25073:function(e,t,n){"use strict";n.r(t),t.default="./dist/stdassets/images/icons/query.png"},69876:function(e,t,n){"use strict";n.r(t),t.default="./dist/stdassets/images/icons/redline.png"},90804:function(e,t,n){"use strict";n.r(t),t.default="./dist/stdassets/images/icons/search.png"},82180:function(e,t,n){"use strict";n.r(t),t.default="./dist/stdassets/images/icons/select-centre.png"},41239:function(e,t,n){"use strict";n.r(t),t.default="./dist/stdassets/images/icons/select-clear.png"},1147:function(e,t,n){"use strict";n.r(t),t.default="./dist/stdassets/images/icons/select-features.png"},27876:function(e,t,n){"use strict";n.r(t),t.default="./dist/stdassets/images/icons/select-polygon.png"},10167:function(e,t,n){"use strict";n.r(t),t.default="./dist/stdassets/images/icons/select-radius.png"},30381:function(e,t,n){"use strict";n.r(t),t.default="./dist/stdassets/images/icons/select-zoom.png"},78333:function(e,t,n){"use strict";n.r(t),t.default="./dist/stdassets/images/icons/select.png"},34927:function(e,t,n){"use strict";n.r(t),t.default="./dist/stdassets/images/icons/theme.png"},58399:function(e,t,n){"use strict";n.r(t),t.default="./dist/stdassets/images/icons/toggle-expand.png"},11181:function(e,t,n){"use strict";n.r(t),t.default="./dist/stdassets/images/icons/toggle.png"},98201:function(e,t,n){"use strict";n.r(t),t.default="./dist/stdassets/images/icons/ui-menu.png"},49145:function(e,t,n){"use strict";n.r(t),t.default="./dist/stdassets/images/icons/view-back.png"},18103:function(e,t,n){"use strict";n.r(t),t.default="./dist/stdassets/images/icons/view-forward.png"},81385:function(e,t,n){"use strict";n.r(t),t.default="./dist/stdassets/images/icons/view-refresh.png"},4744:function(e,t,n){"use strict";n.r(t),t.default="./dist/stdassets/images/icons/zoom-dynamic.png"},73423:function(e,t,n){"use strict";n.r(t),t.default="./dist/stdassets/images/icons/zoom-full.png"},68235:function(e,t,n){"use strict";n.r(t),t.default="./dist/stdassets/images/icons/zoom-in-fixed.png"},26256:function(e,t,n){"use strict";n.r(t),t.default="./dist/stdassets/images/icons/zoom-in.png"},55065:function(e,t,n){"use strict";n.r(t),t.default="./dist/stdassets/images/icons/zoom-out-fixed.png"},53318:function(e,t,n){"use strict";n.r(t),t.default="./dist/stdassets/images/res/slider.png"},80348:function(e,t,n){"use strict";n.r(t),t.default="./dist/stdassets/images/res/sliderscale.png"},81606:function(e,t,n){"use strict";n.r(t),t.default="./dist/stdassets/images/res/spinner.gif"},91708:function(e,t,n){"use strict";n.r(t),t.default="./dist/stdassets/cursors/digitizeCircle.cur"},20893:function(e,t,n){"use strict";n.r(t),t.default="./dist/stdassets/cursors/digitizeLine.cur"},18493:function(e,t,n){"use strict";n.r(t),t.default="./dist/stdassets/cursors/digitizeLineString.cur"},9436:function(e,t,n){"use strict";n.r(t),t.default="./dist/stdassets/cursors/digitizePoint.cur"},34613:function(e,t,n){"use strict";n.r(t),t.default="./dist/stdassets/cursors/digitizePolygon.cur"},59857:function(e,t,n){"use strict";n.r(t),t.default="./dist/stdassets/cursors/digitizeRectangle.cur"},82488:function(e,t,n){"use strict";n.r(t),t.default="./dist/stdassets/cursors/grab.cur"},11325:function(e,t,n){"use strict";n.r(t),t.default="./dist/stdassets/cursors/grabbing.cur"},16241:function(e,t,n){"use strict";n.r(t),t.default="./dist/stdassets/cursors/zoomin.cur"},10571:function(e,t,n){"use strict";n.r(t)},2939:function(e,t){"use strict";var n;Object.defineProperty(t,"__esModule",{value:!0}),t.isGenericSubjectMapLayer=t.GenericSubjectLayerType=void 0,(n=t.GenericSubjectLayerType||(t.GenericSubjectLayerType={})).TileWMS="TileWMS",n.CSV="CSV",n.KML="KML",n.GeoJSON="GeoJSON",n.GeoJSON_Inline="GeoJSON_Inline",n.CustomVector="CustomVector",n.MVT="MVT",n.XYZ="XYZ",n.StaticImage="StaticImage",t.isGenericSubjectMapLayer=function(e){var t;return"string"==typeof(null===(t=e)||void 0===t?void 0:t.type)}},81243:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.closeComponent=t.openComponent=t.closeFlyout=t.openFlyout=t.closeContextMenu=t.openContextMenu=void 0;var r=n(70655),a=n(10737);t.openContextMenu=function(e){return{type:a.ActionType.CONTEXT_MENU_OPEN,payload:(0,r.__assign)({},e)}},t.closeContextMenu=function(){return{type:a.ActionType.CONTEXT_MENU_CLOSE}},t.openFlyout=function(e,t){return{type:a.ActionType.FLYOUT_OPEN,payload:{flyoutId:e,metrics:t}}},t.closeFlyout=function(e){return{type:a.ActionType.FLYOUT_CLOSE,payload:{flyoutId:e}}},t.openComponent=function(e,t,n,r){return{type:a.ActionType.COMPONENT_OPEN,payload:{flyoutId:e,metrics:t,name:n,props:r}}},t.closeComponent=function(e){return{type:a.ActionType.COMPONENT_CLOSE,payload:{flyoutId:e}}}},92255:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ViewerInitCommand=t.isStateless=t.isMapDefinition=t.getMapDefinitionsFromFlexLayout=t.buildSubjectLayerDefn=void 0;var r=n(70655),a=n(61339),i=n(29256),o=n(1744),s=n(41407),l=n(36645),u=n(95348),c=n(48720),p=n(95601),d=n(10737),m=n(87755),f=n(5791),_=n(7275);function E(e){var t={};for(var n in e)(0,_.strStartsWith)(n,"Meta_")&&(t[n.substring("Meta_".length)]=e[n]);return t}function v(e,t){for(var n,a,i=t.Extension.source_type,o=null===(n=t.Extension.initially_visible)||void 0===n||n,s={},l={},u={},c=Object.keys(t.Extension),p=t.Extension.popup_template,d=null===(a=t.Extension.is_selectable)||void 0===a||a,m=0,f=c;m<f.length;m++){var _=f[m],E=_.indexOf("source_param_"),v=_.indexOf("layer_opt_"),g=_.indexOf("meta_");0==E?s[_.substring("source_param_".length)]=t.Extension[_]:0==v?l[_.substring("layer_opt_".length)]=t.Extension[_]:0==g&&(u[_.substring("meta_".length)]=t.Extension[_])}var y={name:e,description:t.Extension.layer_description,displayName:t.Extension.display_name,driverName:t.Extension.driver_name,type:i,layerOptions:l,sourceParams:s,meta:Object.keys(u).length>0?u:void 0,initiallyVisible:o,selectable:d,popupTemplate:p,vectorStyle:t.Extension.vector_layer_style};return t.Extension.cluster&&(y.cluster=(0,r.__assign)({},t.Extension.cluster)),y}function g(e){var t,n=[],r=function(e){var t=[];if(e.MapSet)for(var n=0,r=e.MapSet.MapGroup;n<r.length;n++)for(var a=r[n],i=0,o=a.Map;i<o.length;i++){var s=o[i];"MapGuide"==s.Type&&t.push([a["@id"],s])}return t}(e);if(r.length>0)for(var a=0,i=r;a<i.length;a++){var o=i[a];n.push({name:o[0],mapDef:o[1].Extension.ResourceId,metadata:E(o[1].Extension)})}if(null===(t=e.MapSet)||void 0===t?void 0:t.MapGroup)for(var s=0,l=e.MapSet.MapGroup;s<l.length;s++)for(var u=l[s],c=0,p=u.Map;c<p.length;c++){var d=p[c];if("SubjectLayer"==d.Type){var m=u["@id"];n.push(v(m,d))}}if(0==n.length)throw new f.MgError("No Map Definition or subject layer found in Application Definition");return n}function y(e){return null!=e.mapDef}t.buildSubjectLayerDefn=v,t.getMapDefinitionsFromFlexLayout=g,t.isMapDefinition=y,t.isStateless=function(e){var t;if("true"==(null===(t=e.Extension)||void 0===t?void 0:t.Stateless))return!0;try{for(var n=g(e),r=0,a=n;r<a.length;r++)if(y(a[r]))return!1;return!0}catch(e){return!0}};var h=function(){function e(e){this.dispatch=e}return e.prototype.initLocaleAsync=function(e){return(0,r.__awaiter)(this,void 0,void 0,(function(){var t,n,a;return(0,r.__generator)(this,(function(r){switch(r.label){case 0:return(t=e.locale)==c.DEFAULT_LOCALE?[3,4]:[4,fetch("strings/"+t+".json")];case 1:return(n=r.sent()).ok?[4,n.json()]:[3,3];case 2:return a=r.sent(),(0,c.registerStringBundle)(t,a),this.dispatch({type:d.ActionType.SET_LOCALE,payload:t}),(0,l.info)("Registered string bundle for locale: "+t),[3,4];case 3:(0,l.warn)("Failed to register string bundle for locale: "+t),r.label=4;case 4:return[2]}}))}))},e.prototype.getExtraProjectionsFromFlexLayout=function(e){for(var t=[],n=0,r=e.WidgetSet;n<r.length;n++)for(var a=0,i=r[n].Widget;a<i.length;a++){var o=i[a];if("CoordinateTracker"==o.Type)for(var l=0,u=o.Extension.Projection||[];l<u.length;l++){var c=u[l];t.push(c.split(":")[1])}else if("CursorPosition"==o.Type){var p=o.Extension.DisplayProjection;p&&t.push(p.split(":")[1])}}return(0,s.makeUnique)(t)},e.prototype.initFromAppDefCoreAsync=function(e,t,n,s){return(0,r.__awaiter)(this,void 0,void 0,(function(){var l,d,f,_,E,v,g,y,h,S,T,L,I,A,C,b,N,O,M,P,R,D,w,F,U,V,x,k,B,G,Y,z;return(0,r.__generator)(this,(function(r){for(l=(0,o.parseWidgetsInAppDef)(e,u.registerCommand),d=l.taskPane,f=l.hasTaskBar,_=l.hasStatus,E=l.hasNavigator,v=l.hasSelectionPanel,g=l.hasLegend,y=l.viewSize,h=l.widgetsByKey,S=l.isStateless,T=l.initialTask,L=t.locale,I=t.featureTooltipsEnabled,(A={}).isStateless=S,C={},b=0,N=e.WidgetSet;b<N.length;b++){for(O=N[b],M=0,P=O.Container;M<P.length;M++)R=P[M],D=R.Name,C[D]={items:(0,o.convertFlexLayoutUIItems)(S,R.Item,h,L)};for(w=0,F=O.Widget;w<F.length;w++)"CursorPosition"==(U=F[w]).Type&&(A.coordinateProjection=U.Extension.DisplayProjection,A.coordinateDecimals=U.Extension.Precision,A.coordinateDisplayFormat=U.Extension.Template)}return V=n,x=this.setupMaps(e,V,A,s,L),e.Title&&(document.title=e.Title||document.title),k=this.establishInitialMapNameAndSession(V),B=k[0],G=k[1],Y=(0,o.prepareSubMenus)(C),z=Y[0],Y[1]||s.push((0,c.tr)("INIT_WARNING_NO_CONTEXT_MENU",L,{containerName:p.WEBLAYOUT_CONTEXTMENU})),[2,(0,a.normalizeInitPayload)({activeMapName:B,initialUrl:(0,m.ensureParameters)(T,B,G,L),featureTooltipsEnabled:I,locale:L,maps:x,config:A,capabilities:{hasTaskPane:null!=d,hasTaskBar:f,hasStatusBar:_,hasNavigator:E,hasSelectionPanel:v,hasLegend:g,hasToolbar:Object.keys(C).length>0,hasViewSize:null!=y},toolbars:z,warnings:s,initialActiveTool:i.ActiveMapTool.Pan},t.layout)]}))}))},e}();t.ViewerInitCommand=h},64473:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DefaultViewerInitCommand=void 0;var r=n(70655),a=n(29256),i=n(48720),o=n(7275),s=n(31293),l=n(61339),u=n(61557),c=n(36645),p=n(5791),d=n(89737),m=n(23148),f=(0,r.__importDefault)(n(96280)),_=n(92255),E=n(1744),v=n(31530),g=(0,r.__importStar)(n(14670)),y=n(95601),h=n(95348),S=n(87755),T=n(83467),L=n(42624),I=n(12694),A=n(57600),C=function(e){function t(t){return e.call(this,t)||this}return(0,r.__extends)(t,e),t.prototype.attachClient=function(e){this.client=e},t.prototype.isArbitraryCoordSys=function(e){return!(!e||!(0,I.isRuntimeMap)(e))&&null!=(0,A.tryParseArbitraryCs)(e.CoordinateSystem.MentorCode)},t.prototype.establishInitialMapNameAndSession=function(e){var t="",n="";for(var r in e)if(!t&&!n){var a=e[r];if((0,I.isRuntimeMap)(a)){t=a.Name,n=a.SessionId;break}}return[t,n]},t.prototype.getDesiredTargetMapName=function(e){var t=e.lastIndexOf("/"),n=e.lastIndexOf(".");return t>=0&&n>=0&&n>t?""+e.substring(t+1,n):"Map_"+g.generate()},t.prototype.initFromWebLayoutAsync=function(e,t,n){return(0,r.__awaiter)(this,void 0,void 0,(function(){var i,o,s,l,u,c,p,d,m,f,_,v,g,T,L,I,A,C=this;return(0,r.__generator)(this,(function(r){switch(r.label){case 0:return[4,this.createRuntimeMapsAsync(t,e,!1,(function(e){return[{name:C.getDesiredTargetMapName(e.Map.ResourceId),mapDef:e.Map.ResourceId,metadata:{}}]}),(function(){return[]}),n)];case 1:return i=r.sent(),o=i[0],s=i[1],l=this.options,u=l.locale,c=l.featureTooltipsEnabled,l.externalBaseLayers,p=(0,E.parseCommandsInWebLayout)(e,h.registerCommand),d=e.ToolBar.Visible?(0,E.convertWebLayoutUIItems)(e.ToolBar.Button,p,u):[],m=e.TaskPane.TaskBar.Visible?(0,E.convertWebLayoutUIItems)(e.TaskPane.TaskBar.MenuButton,p,u,!1):[],f=e.ContextMenu.Visible?(0,E.convertWebLayoutUIItems)(e.ContextMenu.MenuItem,p,u,!1):[],_={},null!=e.SelectionColor&&(_.selectionColor=e.SelectionColor),null!=e.MapImageFormat&&(_.imageFormat=e.MapImageFormat),null!=e.SelectionImageFormat&&(_.selectionImageFormat=e.SelectionImageFormat),null!=e.PointSelectionBuffer&&(_.pointSelectionBuffer=e.PointSelectionBuffer),null!=e.Map.InitialView&&(e.Map.InitialView.CenterX,e.Map.InitialView.CenterY,e.Map.InitialView.Scale),""!=e.Title&&(document.title=e.Title||document.title),v={},g=this.establishInitialMapNameAndSession(o),T=g[0],L=g[1],(I={})[y.WEBLAYOUT_TOOLBAR]={items:d},I[y.WEBLAYOUT_TASKMENU]={items:m},I[y.WEBLAYOUT_CONTEXTMENU]={items:f},A=(0,E.prepareSubMenus)(I)[0],[2,{activeMapName:T,featureTooltipsEnabled:c,initialUrl:(0,S.ensureParameters)(e.TaskPane.InitialTask||"server/TaskPane.html",T,L,u),initialTaskPaneWidth:e.TaskPane.Width,initialInfoPaneWidth:e.InformationPane.Width,maps:v,locale:u,config:_,capabilities:{hasTaskPane:e.TaskPane.Visible,hasTaskBar:e.TaskPane.TaskBar.Visible,hasStatusBar:e.StatusBar.Visible,hasNavigator:e.ZoomControl.Visible,hasSelectionPanel:e.InformationPane.Visible&&e.InformationPane.PropertiesVisible,hasLegend:e.InformationPane.Visible&&e.InformationPane.LegendVisible,hasToolbar:e.ToolBar.Visible,hasViewSize:e.StatusBar.Visible},toolbars:A,warnings:s,initialActiveTool:a.ActiveMapTool.Pan}]}}))}))},t.prototype.tryDescribeRuntimeMapAsync=function(e,t,n){return(0,r.__awaiter)(this,void 0,void 0,(function(){var a,i,o,s,l,c,p;return(0,r.__generator)(this,(function(r){switch(r.label){case 0:(0,T.assertIsDefined)(this.client),r.label=1;case 1:return r.trys.push([1,4,,8]),i=(a=this.client).describeRuntimeMap,c={mapname:e,requestedFeatures:u.RuntimeMapFeatureFlags.LayerFeatureSources|u.RuntimeMapFeatureFlags.LayerIcons|u.RuntimeMapFeatureFlags.LayersAndGroups},[4,t.getValueAsync()];case 2:return[4,i.apply(a,[(c.session=r.sent(),c)])];case 3:return[2,r.sent()];case 4:return"MgResourceNotFoundException"!==(o=r.sent()).message?[3,7]:(l=(s=this.client).createRuntimeMap,p={mapDefinition:n,requestedFeatures:u.RuntimeMapFeatureFlags.LayerFeatureSources|u.RuntimeMapFeatureFlags.LayerIcons|u.RuntimeMapFeatureFlags.LayersAndGroups},[4,t.getValueAsync()]);case 5:return[4,l.apply(s,[(p.session=r.sent(),p.targetMapName=e,p)])];case 6:return[2,r.sent()];case 7:throw o;case 8:return[2]}}))}))},t.prototype.createRuntimeMapsAsync=function(e,t,n,a,o,s){return(0,r.__awaiter)(this,void 0,void 0,(function(){var l,E,v,g,y,h,S,I,C,b,N,O,M,P,R,D,w,F,U,V,x,k,B,G,Y,z,W,j,H,K,Z,X,q,Q=this;return(0,r.__generator)(this,(function(J){switch(J.label){case 0:if(l=a(t),E=[],v=[],g=this.options.locale,!n)return[3,5];y=new L.AsyncLazy((function(){return(0,r.__awaiter)(Q,void 0,void 0,(function(){return(0,r.__generator)(this,(function(e){switch(e.label){case 0:return(0,T.assertIsDefined)(this.client),[4,this.client.getSiteVersion()];case 1:return[2,e.sent()]}}))}))})),h=0,S=l,J.label=1;case 1:return h<S.length?(U=S[h],(0,_.isMapDefinition)(U)?[4,y.getValueAsync()]:[3,3]):[3,4];case 2:I=J.sent(),(0,T.assertIsDefined)(this.client),E.push(this.describeRuntimeMapStateless(this.client,I.Version,U)),J.label=3;case 3:return h++,[3,1];case 4:return[3,10];case 5:C=0,b=l,J.label=6;case 6:return C<b.length?(U=b[C],(0,_.isMapDefinition)(U)?s?((0,c.info)("Session ID re-used. Attempting recovery of map state of: "+U.name),E.push(this.tryDescribeRuntimeMapAsync(U.name,e,U.mapDef)),[3,9]):[3,7]:[3,9]):[3,10];case 7:return(0,c.info)("Creating runtime map state ("+U.name+") for: "+U.mapDef),(0,T.assertIsDefined)(this.client),O=(N=E).push,P=(M=this.client).createRuntimeMap,q={mapDefinition:U.mapDef,requestedFeatures:u.RuntimeMapFeatureFlags.LayerFeatureSources|u.RuntimeMapFeatureFlags.LayerIcons|u.RuntimeMapFeatureFlags.LayersAndGroups},[4,e.getValueAsync()];case 8:O.apply(N,[P.apply(M,[(q.session=J.sent(),q.targetMapName=U.name,q)])]),J.label=9;case 9:return C++,[3,6];case 10:return[4,Promise.all(E)];case 11:for(R=J.sent(),D=[],w=0,F=R;w<F.length;w++)if(U=F[w],V=U.CoordinateSystem.EpsgCode,x=U.MapDefinition,!(0,A.tryParseArbitraryCs)(U.CoordinateSystem.MentorCode)){if("0"==V)throw new p.MgError((0,i.tr)("INIT_ERROR_UNSUPPORTED_COORD_SYS",g||i.DEFAULT_LOCALE,{mapDefinition:x}));f.default.defs["EPSG:"+V]||D.push({epsg:V,mapDef:x})}for(k=o(t),B=0,G=k;B<G.length;B++)Y=G[B],D.push({epsg:Y,mapDef:""});return[4,Promise.all(D.map((function(e){return(0,d.resolveProjectionFromEpsgIoAsync)(e.epsg,g,e.mapDef)})))];case 12:for(J.sent(),(0,c.debug)("Register proj4 with OpenLayers"),(0,m.register)(f.default),z={},W=0,j=R;W<j.length;W++)H=j[W],z[H.Name]=H;for(K=0,Z=l;K<Z.length;K++)X=Z[K],(0,_.isMapDefinition)(X)||(z[X.name]=X);return[2,[z,v]]}}))}))},t.prototype.describeRuntimeMapStateless=function(e,t,n){var a,i,s;return(0,r.__awaiter)(this,void 0,void 0,(function(){var l,u,c,p,d,m,f,_,E,v,g,y,h,S,T,L,I,A,C,b,N;return(0,r.__generator)(this,(function(r){switch(r.label){case 0:return l=n.name,u=n.mapDef,c=n.metadata,[4,null===(a=this.client)||void 0===a?void 0:a.getResource(u,{username:"Anonymous"})];case 1:if(!(p=r.sent()))throw new Error("Failed to fetch map def");return d={SessionId:"",Extents:{LowerLeftCoordinate:{X:p.Extents.MinX,Y:p.Extents.MinY},UpperRightCoordinate:{X:p.Extents.MaxX,Y:p.Extents.MaxY}},SiteVersion:t,Name:l,DisplayDpi:96,BackgroundColor:p.BackgroundColor,MapDefinition:u,CoordinateSystem:{MentorCode:c.MentorCode,EpsgCode:c.EpsgCode,MetersPerUnit:c.MetersPerUnit,Wkt:p.CoordinateSystem},IconMimeType:"image/png"},m=[],f=[],p.TileSetSource?(d.TileSetDefinition=p.TileSetSource.ResourceId,[4,e.getResource(p.TileSetSource.ResourceId)]):[3,3];case 2:for("Default"==(_=r.sent()).TileStoreParameters.TileProvider?(E=null===(i=_.TileStoreParameters.Parameter.find((function(e){return"TileWidth"==e.Name})))||void 0===i?void 0:i.Value,v=null===(s=_.TileStoreParameters.Parameter.find((function(e){return"TileHeight"==e.Name})))||void 0===s?void 0:s.Value,(0,o.strIsNullOrEmpty)(E)||(0,o.strIsNullOrEmpty)(v)||(d.TileWidth=parseInt(E,10),d.TileHeight=parseInt(v,10))):"XYZ"==_.TileStoreParameters.TileProvider&&(d.TileHeight=256,d.TileHeight=256),g=0,y=_.BaseMapLayerGroup;g<y.length;g++)for(h=y[g],m.push({Name:h.Name,DisplayInLegend:h.ShowInLegend,LegendLabel:h.LegendLabel,ObjectId:h.Name,ExpandInLegend:h.ExpandInLegend,Visible:h.Visible,ActuallyVisible:h.Visible,Type:3}),S=0,T=h.BaseMapLayer;S<T.length;S++)N=T[S],f.push({Name:N.Name,DisplayInLegend:N.ShowInLegend,Selectable:!1,LegendLabel:N.LegendLabel,ExpandInLegend:N.ExpandInLegend,Visible:!0,ParentId:h.Name,ActuallyVisible:!0,LayerDefinition:N.ResourceId,ObjectId:N.Name,Type:2});r.label=3;case 3:for(L=0,I=p.MapLayerGroup;L<I.length;L++)A=I[L],m.push({Name:A.Name,DisplayInLegend:A.ShowInLegend,LegendLabel:A.LegendLabel,ObjectId:A.Name,ExpandInLegend:A.ExpandInLegend,Visible:A.Visible,ActuallyVisible:A.Visible,Type:1});for(C=0,b=p.MapLayer;C<b.length;C++)N=b[C],f.push({Name:N.Name,DisplayInLegend:N.ShowInLegend,Selectable:!1,LegendLabel:N.LegendLabel,ExpandInLegend:N.ExpandInLegend,Visible:!0,ParentId:N.Group,ActuallyVisible:!0,LayerDefinition:N.ResourceId,ObjectId:N.Name,Type:1});return d.Group=m,d.Layer=f,[2,d]}}))}))},t.prototype.setupMaps=function(e,t,n,r,a){var o={};if(e.MapSet)for(var s=0,u=e.MapSet.MapGroup;s<u.length;s++){for(var c=u[s],p=void 0,d=[],m=[],f=void 0,E=0,v=c.Map;E<v.length;E++)if("MapGuide"===(L=v[E]).Type)for(var g in n.selectionColor||null==L.Extension.SelectionColor||(n.selectionColor=L.Extension.SelectionColor),n.imageFormat||null==L.Extension.ImageFormat||(n.imageFormat=L.Extension.ImageFormat),n.selectionImageFormat||null==L.Extension.SelectionFormat||(n.selectionImageFormat=L.Extension.SelectionFormat),t){var y=t[g];if((0,I.isRuntimeMap)(y)&&y.MapDefinition==L.Extension.ResourceId){p=g,f=y;break}}for(var h=this.isArbitraryCoordSys(f),S=0,T=c.Map;S<T.length;S++){var L;"MapGuide"!=(L=T[S]).Type&&("SubjectLayer"==L.Type?p=c["@id"]:h?r.push((0,i.tr)("INIT_WARNING_ARBITRARY_COORDSYS_INCOMPATIBLE_LAYER",a,{mapId:c["@id"],type:L.Type})):"External"==L.Type?d.push((0,_.buildSubjectLayerDefn)(L.Extension.layer_name,L)):(0,l.processLayerInMapGroup)(L,r,n,e,m))}if(h)for(var A=0,C=e.WidgetSet;A<C.length;A++)for(var b=0,N=C[A].Widget;b<N.length;b++){var O=N[b];switch(O.Type){case"CoordinateTracker":r.push((0,i.tr)("INIT_WARNING_ARBITRARY_COORDSYS_UNSUPPORTED_WIDGET",a,{mapId:c["@id"],widget:O.Type}))}}(0,l.applyInitialBaseLayerVisibility)(m);var M=void 0;c.InitialView&&(M={x:c.InitialView.CenterX,y:c.InitialView.CenterY,scale:c.InitialView.Scale}),p&&(o[p]={mapGroupId:c["@id"],map:t[p],initialView:M,externalBaseLayers:m,initialExternalLayers:d})}return o},t.prototype.initFromAppDefAsync=function(e,t,n){return(0,r.__awaiter)(this,void 0,void 0,(function(){var a,i,o,s=this;return(0,r.__generator)(this,(function(r){switch(r.label){case 0:return[4,this.createRuntimeMapsAsync(t,e,(0,_.isStateless)(e),(function(e){return(0,_.getMapDefinitionsFromFlexLayout)(e)}),(function(e){return s.getExtraProjectionsFromFlexLayout(e)}),n)];case 1:return a=r.sent(),i=a[0],o=a[1],[4,this.initFromAppDefCoreAsync(e,this.options,i,o)];case 2:return[2,r.sent()]}}))}))},t.prototype.sessionAcquiredAsync=function(e,t){return(0,r.__awaiter)(this,void 0,void 0,(function(){var n,a,l,u,c,d,m,f,_,E,v,g,y,h;return(0,r.__generator)(this,(function(r){switch(r.label){case 0:if(n=this.options,a=n.resourceId,l=n.locale,a)return[3,6];v=new s.Client("","mapagent"),r.label=1;case 1:return r.trys.push([1,4,,5]),[4,v.get("appdef.json")];case 2:return g=r.sent(),[4,this.initFromAppDefAsync(g,e,t)];case 3:return[2,r.sent()];case 4:throw r.sent(),new p.MgError((0,i.tr)("INIT_ERROR_MISSING_RESOURCE_PARAM",l));case 5:return[3,25];case 6:return"string"!=typeof a?[3,22]:(0,o.strEndsWith)(a,"WebLayout")?((0,T.assertIsDefined)(this.client),d=(c=this.client).getResource,m=[a],y={},[4,e.getValueAsync()]):[3,10];case 7:return[4,d.apply(c,m.concat([(y.SESSION=r.sent(),y)]))];case 8:return u=r.sent(),[4,this.initFromWebLayoutAsync(u,e,t)];case 9:return[2,r.sent()];case 10:return(0,o.strEndsWith)(a,"ApplicationDefinition")?((0,T.assertIsDefined)(this.client),_=(f=this.client).getResource,E=[a],h={},[4,e.getValueAsync()]):[3,14];case 11:return[4,_.apply(f,E.concat([(h.SESSION=r.sent(),h)]))];case 12:return g=r.sent(),[4,this.initFromAppDefAsync(g,e,t)];case 13:return[2,r.sent()];case 14:if(!(0,o.isResourceId)(a))return[3,15];throw new p.MgError((0,i.tr)("INIT_ERROR_UNKNOWN_RESOURCE_TYPE",l,{resourceId:a}));case 15:return g=void 0,this.client?[3,17]:[4,(v=new s.Client("","mapagent")).get(a)];case 16:return g=r.sent(),[3,19];case 17:return[4,this.client.get(a)];case 18:g=r.sent(),r.label=19;case 19:return[4,this.initFromAppDefAsync(g,e,t)];case 20:return[2,r.sent()];case 21:return[3,25];case 22:return[4,a()];case 23:return g=r.sent(),[4,this.initFromAppDefAsync(g,e,t)];case 24:return[2,r.sent()];case 25:return[2]}}))}))},t.prototype.runAsync=function(e){return(0,r.__awaiter)(this,void 0,void 0,(function(){var t,n,a,i,o,s,l,u,p,d=this;return(0,r.__generator)(this,(function(m){switch(m.label){case 0:return this.options=e,[4,this.initLocaleAsync(this.options)];case 1:return m.sent(),t=!1,this.options.session?((0,c.info)("Re-using session: "+this.options.session),t=!0,n=new L.AsyncLazy((function(){return Promise.resolve(d.options.session)}))):n=new L.AsyncLazy((function(){return(0,r.__awaiter)(d,void 0,void 0,(function(){return(0,r.__generator)(this,(function(e){switch(e.label){case 0:return(0,T.assertIsDefined)(this.client),[4,this.client.createSession("Anonymous","")];case 1:return[2,e.sent()]}}))}))})),[4,this.sessionAcquiredAsync(n,t)];case 2:if(a=m.sent(),!t)return[3,10];for(s in i={},o=[],a.maps)o.push(s);l=0,m.label=3;case 3:return l<o.length?(u=o[l],[4,(0,v.retrieveSelectionSetFromLocalStorage)(n,u)]):[3,6];case 4:(p=m.sent())&&(i[u]=p),m.label=5;case 5:return l++,[3,3];case 6:a.initialSelections=i,m.label=7;case 7:return m.trys.push([7,9,,10]),[4,(0,v.clearSessionStore)()];case 8:case 9:return m.sent(),[3,10];case 10:return[2,a]}}))}))},t}(_.ViewerInitCommand);t.DefaultViewerInitCommand=C},61339:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.acknowledgeInitWarnings=t.initLayout=t.processLayerInMapGroup=t.normalizeInitPayload=t.applyInitialBaseLayerVisibility=void 0;var r=n(70655),a=n(31293),i=n(7275),o=n(10737),s=n(93762),l=n(48720),u=n(52714),c=n(36645);t.applyInitialBaseLayerVisibility=function(e){if(e.length>0){var t=e.find((function(e){return"UTFGrid"!=e.kind}));t&&(t.visible=!0);for(var n=0,r=e.filter((function(e){return"UTFGrid"==e.kind}));n<r.length;n++)r[n].visible=!0}},t.normalizeInitPayload=function(e,t){if(!(0,i.strIsNullOrEmpty)(t)){var n=(0,u.getLayoutCapabilities)(t);n&&(n.hasTaskPane||((0,c.debug)("Overriding hasTaskPane capability to false"),e.capabilities.hasTaskPane=!1))}return e};var p=0;t.processLayerInMapGroup=function(e,t,n,a,o){switch(e.Type){case"Google":t.push((0,l.tr)("INIT_WARNING_UNSUPPORTED_GOOGLE_MAPS",n.locale));break;case"VirtualEarth":var s=e.Extension.Options,u=s.name,c=s.type,d=Array.isArray(u)?u[0]:u,m={},f=!0;switch(S=Array.isArray(c)?c[0]:c){case"Aerial":case"a":m.imagerySet="Aerial";break;case"AerialWithLabels":m.imagerySet="AerialWithLabels";break;case"Road":m.imagerySet="Road";break;default:f=!1,t.push((0,l.tr)("INIT_WARNING_BING_UNKNOWN_LAYER",n.locale,{type:c}))}a.Extension.BingMapKey?m.key=a.Extension.BingMapKey:(f=!1,t.push((0,l.tr)("INIT_WARNING_BING_API_KEY_REQD",n.locale))),f&&o.push({name:d,kind:"BingMaps",options:m});break;case"OpenStreetMap":var _=e.Extension.Options,E=_.name,v=(c=_.type,Array.isArray(E)?E[0]:E);switch(m={},S=Array.isArray(c)?c[0]:c){case"CycleMap":m.url="http://{a-c}.tile.opencyclemap.org/cycle/{z}/{x}/{y}.png";break;case"TransportMap":m.url="http://tile2.opencyclemap.org/transport/{z}/{x}/{y}.png"}o.push({name:v,kind:"OSM",options:m});break;case"Stamen":var g=e.Extension.Options,y=g.name,h=(c=g.type,Array.isArray(y)?y[0]:y),S=Array.isArray(c)?c[0]:c;o.push({name:h,kind:"Stamen",options:{layer:S}});break;case"UTFGrid":o.push({name:"UTFGridSource"+p++,kind:"UTFGrid",options:{tileJSON:{scheme:"xyz",grids:Array.isArray(e.Extension.UrlTemplate)?(0,r.__spreadArray)([],e.Extension.UrlTemplate,!0):[e.Extension.UrlTemplate]}}});break;case"XYZDebug":var T=e.Extension.Options.name,L=Array.isArray(T)?T[0]:T;o.push({name:L,kind:"XYZDebug"});break;case"XYZ":var I=e.Extension.Options,A=I.name,C=(c=I.type,I.attributions),b=Array.isArray(A)?A[0]:A,N=(S=Array.isArray(c)?c[0]:c,1);e.Extension.Options.tilePixelRatio&&(N=parseInt(e.Extension.Options.tilePixelRatio[0],10));var O=(e.Extension.Options.urls||[]).map((function(e){return(0,i.strReplaceAll)(e,"${","{")}));o.push({name:b,kind:"XYZ",options:{layer:S,urls:O,attributions:C,tilePixelRatio:N}})}},t.initLayout=function(e,t){var n=(0,r.__assign)({},t);return function(i,l){var u=l().config;if(u.agentUri&&u.agentKind){var c=new a.Client(u.agentUri,u.agentKind);e.attachClient(c)}e.runAsync(t).then((function(e){var a=e;if(n.initialView&&(a.initialView=(0,r.__assign)({},n.initialView)),n.initialActiveMap&&(a.activeMapName=n.initialActiveMap),a.initialHideGroups=n.initialHideGroups,a.initialHideLayers=n.initialHideLayers,a.initialShowGroups=n.initialShowGroups,a.initialShowLayers=n.initialShowLayers,a.featureTooltipsEnabled=n.featureTooltipsEnabled,i({type:o.ActionType.INIT_APP,payload:e}),t.onInit){var l=(0,s.getViewer)();l&&t.onInit(l)}})).catch((function(e){!function(e,t,n,r){e.stack?n({type:o.ActionType.INIT_ERROR,payload:{error:{message:e.message,stack:(e.stack||"").split("\n")},includeStack:false,options:r}}):n({type:o.ActionType.INIT_ERROR,payload:{error:{message:e.message,stack:[]},includeStack:false,options:r}})}(e,0,i,n)}))}},t.acknowledgeInitWarnings=function(){return{type:o.ActionType.INIT_ACKNOWLEDGE_WARNINGS}}},34169:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.refresh=t.setLayerSelectable=t.setGroupExpanded=t.setLayerVisibility=t.setGroupVisibility=void 0;var r=n(70655),a=n(31293),i=n(61557),o=n(29256),s=n(10737);t.setGroupVisibility=function(e,t){return{type:s.ActionType.LEGEND_SET_GROUP_VISIBILITY,payload:(0,r.__assign)((0,r.__assign)({},t),{mapName:e})}},t.setLayerVisibility=function(e,t){return{type:s.ActionType.LEGEND_SET_LAYER_VISIBILITY,payload:(0,r.__assign)((0,r.__assign)({},t),{mapName:e})}},t.setGroupExpanded=function(e,t){return{type:s.ActionType.LEGEND_SET_GROUP_EXPANDABLE,payload:(0,r.__assign)((0,r.__assign)({},t),{mapName:e})}},t.setLayerSelectable=function(e,t){return{type:s.ActionType.LEGEND_SET_LAYER_SELECTABLE,payload:(0,r.__assign)((0,r.__assign)({},t),{mapName:e})}},t.refresh=function(){return function(e,t){var n=t(),r=n.config;if(!r.viewer.isStateless){var l=(0,o.getRuntimeMap)(n);l&&r.agentUri&&r.agentKind&&new a.Client(r.agentUri,r.agentKind).describeRuntimeMap({mapname:l.Name,session:l.SessionId,requestedFeatures:i.RuntimeMapFeatureFlags.LayerFeatureSources|i.RuntimeMapFeatureFlags.LayerIcons|i.RuntimeMapFeatureFlags.LayersAndGroups}).then((function(t){r.activeMapName&&e({type:s.ActionType.MAP_REFRESH,payload:{mapName:r.activeMapName,map:t}})}))}}}},81876:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.clearClientSelection=t.addClientSelectedFeature=t.removeMapLayerBusyWorker=t.addMapLayerBusyWorker=t.setMapLayerVectorStyle=t.setMapLayerVisibility=t.setHeatmapLayerRadius=t.setHeatmapLayerBlur=t.setMapLayerOpacity=t.setMapLayerIndex=t.removeMapLayer=t.externalLayersReady=t.mapLayerAdded=t.showSelectedFeature=t.setViewRotationEnabled=t.setViewRotation=t.setManualFeatureTooltipsEnabled=t.enableSelectDragPan=t.setFeatureTooltipsEnabled=t.setActiveMap=t.setActiveTool=t.nextView=t.previousView=t.setViewSizeUnits=t.setLayerTransparency=t.setMouseCoordinates=t.setScale=t.setBaseLayer=t.setBusyCount=t.invokeCommand=t.setSelection=t.mapResized=t.setCurrentView=t.queryMapFeatures=void 0;var r=n(70655),a=n(29256),i=n(93762),o=n(65539),s=n(31293),l=n(69648),u=n(41407),c=n(10737),p=n(31530),d=n(17626),m=n(97936);function f(e,t){if(null==e)return t;for(var n={SelectedLayer:[]},r=0,a=e.SelectedLayer;r<a.length;r++){var i=a[r];n.SelectedLayer.push(i)}if(t)for(var o=function(e){var t=e["@id"],r=e["@name"],a=n.SelectedLayer.filter((function(e){return e["@id"]==t&&e["@name"]==r}));0==a.length?n.SelectedLayer.push(e):a[0].Feature=function(e,t){for(var n=[],r=0,a=e;r<a.length;r++){var i=a[r];n.push(i)}for(var o=function(e){0==n.filter((function(t){for(var n=0,r=t.Property;n<r.length;n++)for(var a=r[n],i=0,o=e.Property;i<o.length;i++){var s=o[i];if(a.Name==s.Name&&a.Value!=s.Value)return!1}return!0})).length&&n.push(e)},s=0,l=t;s<l.length;s++)o(i=l[s]);return n}(a[0].Feature,e.Feature)},s=0,l=t.SelectedLayer;s<l.length;s++)o(i=l[s]);return n}function _(e,t){if(null==e)return t;for(var n={Layer:[]},r=0,a=e.Layer;r<a.length;r++){var i=a[r];n.Layer.push(i)}if(t)for(var o=function(e){var t=e["@id"],r=n.Layer.filter((function(e){return e["@id"]==t}));0==r.length?n.Layer.push(e):r[0].Class.ID=(0,u.makeUnique)(r[0].Class.ID.concat(e.Class.ID))},s=0,l=t.Layer;s<l.length;s++)o(i=l[s]);return n}function E(e,t){return{type:c.ActionType.MAP_SET_SELECTION,payload:{mapName:e,selection:t}}}t.queryMapFeatures=function(e,t){return function(n,r){var i=r(),o=i.config,u=(0,a.getRuntimeMap)(i),c=(0,a.getSelectionSet)(i);if(u&&o.agentKind&&o.agentUri){var m=new s.Client(o.agentUri,o.agentKind),v=function(e){null!=t.callback&&t.callback(e)},g=(0,d.getSiteVersion)(u),y=(0,d.canUseQueryMapFeaturesV4)(g)?function(e){return m.queryMapFeatures_v4(e)}:function(e){return m.queryMapFeatures(e)};y(t.options).then((function(r){if(1===t.options.persist)if(!0===t.append){var a=(s=r,(o=c)?{SelectedFeatures:f(o.SelectedFeatures,s.SelectedFeatures),FeatureSet:_(o.FeatureSet,s.FeatureSet),Hyperlink:void 0,InlineSelectionImage:void 0}:s),i=(0,l.buildSelectionXml)(a.FeatureSet);y({session:u.SessionId,mapname:u.Name,persist:1,featurefilter:i}).then((function(){(0,p.persistSelectionSetToLocalStorage)(u.SessionId,e,a),n(E(e,a)),v(a)}))}else(0,p.persistSelectionSetToLocalStorage)(u.SessionId,e,r),n(E(e,r)),v(r);else v(r);var o,s})).catch((function(e){null!=t.errBack&&t.errBack(e)}))}}},t.setCurrentView=function(e){return function(t,n){var i,s,l=n(),u=(0,a.getCurrentView)(l),p=(0,r.__assign)({},e),d=l.config.activeMapName,f=!0;if(u&&d){var _=l.mapState[d],E=null===(s=null===(i=null==_?void 0:_.mapguide)||void 0===i?void 0:i.runtimeMap)||void 0===s?void 0:s.FiniteDisplayScale;if(E&&E.length>0){var v=(0,o.getFiniteScaleIndexForScale)(E,p.scale);p.scale=E[v]}(0,m.areViewsCloseToEqual)(u,p)&&(f=!1)}f&&d&&t({type:c.ActionType.MAP_SET_VIEW,payload:{mapName:d,view:p}})}},t.mapResized=function(e,t){return{type:c.ActionType.MAP_RESIZED,payload:{width:e,height:t}}},t.setSelection=E,t.invokeCommand=function(e,t){return function(n,r){return e.invoke(n,r,(0,i.getViewer)(),t)}},t.setBusyCount=function(e){return{type:c.ActionType.MAP_SET_BUSY_COUNT,payload:e}},t.setBaseLayer=function(e,t){return{type:c.ActionType.MAP_SET_BASE_LAYER,payload:{mapName:e,layerName:t}}},t.setScale=function(e,t){var n,r=(0,i.getViewer)();return r&&(n=r.scaleToResolution(t)),{type:c.ActionType.MAP_SET_SCALE,payload:{mapName:e,scale:t,resolution:n}}},t.setMouseCoordinates=function(e,t){return{type:c.ActionType.UPDATE_MOUSE_COORDINATES,payload:{mapName:e,coord:t}}},t.setLayerTransparency=function(e,t,n){return{type:c.ActionType.MAP_SET_LAYER_TRANSPARENCY,payload:{mapName:e,layerName:t,opacity:n}}},t.setViewSizeUnits=function(e){return{type:c.ActionType.MAP_SET_VIEW_SIZE_UNITS,payload:e}},t.previousView=function(e){return{type:c.ActionType.MAP_PREVIOUS_VIEW,payload:{mapName:e}}},t.nextView=function(e){return{type:c.ActionType.MAP_NEXT_VIEW,payload:{mapName:e}}},t.setActiveTool=function(e){return{type:c.ActionType.MAP_SET_ACTIVE_TOOL,payload:e}},t.setActiveMap=function(e){return{type:c.ActionType.MAP_SET_ACTIVE_MAP,payload:e}},t.setFeatureTooltipsEnabled=function(e){return{type:c.ActionType.MAP_SET_MAPTIP,payload:e}},t.enableSelectDragPan=function(e){return{type:c.ActionType.MAP_ENABLE_SELECT_DRAGPAN,payload:e}},t.setManualFeatureTooltipsEnabled=function(e){return{type:c.ActionType.MAP_SET_MANUAL_MAPTIP,payload:e}},t.setViewRotation=function(e){return{type:c.ActionType.MAP_SET_VIEW_ROTATION,payload:e}},t.setViewRotationEnabled=function(e){return{type:c.ActionType.MAP_SET_VIEW_ROTATION_ENABLED,payload:e}},t.showSelectedFeature=function(e,t,n){return{type:c.ActionType.MAP_SHOW_SELECTED_FEATURE,payload:{mapName:e,layerId:t,selectionKey:n}}},t.mapLayerAdded=function(e,t,n){return{type:c.ActionType.LAYER_ADDED,payload:{mapName:e,layer:t,defaultStyle:n}}},t.externalLayersReady=function(e){return{type:c.ActionType.EXTERNAL_LAYERS_READY,payload:{mapName:e}}},t.removeMapLayer=function(e,t){return{type:c.ActionType.REMOVE_LAYER,payload:{mapName:e,layerName:t}}},t.setMapLayerIndex=function(e,t,n){return{type:c.ActionType.SET_LAYER_INDEX,payload:{mapName:e,layerName:t,index:n}}},t.setMapLayerOpacity=function(e,t,n){return{type:c.ActionType.SET_LAYER_OPACITY,payload:{mapName:e,layerName:t,opacity:n}}},t.setHeatmapLayerBlur=function(e,t,n){return{type:c.ActionType.SET_HEATMAP_LAYER_BLUR,payload:{mapName:e,layerName:t,blur:n}}},t.setHeatmapLayerRadius=function(e,t,n){return{type:c.ActionType.SET_HEATMAP_LAYER_RADIUS,payload:{mapName:e,layerName:t,radius:n}}},t.setMapLayerVisibility=function(e,t,n){return{type:c.ActionType.SET_LAYER_VISIBILITY,payload:{mapName:e,layerName:t,visible:n}}},t.setMapLayerVectorStyle=function(e,t,n,r){return{type:c.ActionType.SET_LAYER_VECTOR_STYLE,payload:{mapName:e,layerName:t,style:n,which:r}}},t.addMapLayerBusyWorker=function(e,t){return{type:c.ActionType.ADD_LAYER_BUSY_WORKER,payload:{mapName:e,layerName:t}}},t.removeMapLayerBusyWorker=function(e,t){return{type:c.ActionType.REMOVE_LAYER_BUSY_WORKER,payload:{mapName:e,layerName:t}}},t.addClientSelectedFeature=function(e,t,n){return{type:c.ActionType.MAP_ADD_CLIENT_SELECTED_FEATURE,payload:{mapName:e,layerName:t,feature:n}}},t.clearClientSelection=function(e){return{type:c.ActionType.MAP_CLEAR_CLIENT_SELECTION,payload:{mapName:e}}}},57270:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.hideModal=t.showModalUrl=t.showModalComponent=void 0;var r=n(70655),a=n(10737);t.showModalComponent=function(e){return{type:a.ActionType.MODAL_SHOW_COMPONENT,payload:(0,r.__assign)({},e)}},t.showModalUrl=function(e){return{type:a.ActionType.MODAL_SHOW_URL,payload:(0,r.__assign)({},e)}},t.hideModal=function(e){return{type:a.ActionType.MODAL_CLOSE,payload:e}}},93903:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.pushUrl=t.goForward=t.goBack=t.goHome=void 0;var r=n(5791),a=n(10737);t.goHome=function(){return function(e,t){if(null==t().taskpane.initialUrl)throw new r.MgError("Case not handled yet: Home action when no initial task URL set");e({type:a.ActionType.TASK_PANE_HOME})}},t.goBack=function(){return{type:a.ActionType.TASK_PANE_BACK}},t.goForward=function(){return{type:a.ActionType.TASK_PANE_FORWARD}},t.pushUrl=function(e,t){return{type:a.ActionType.TASK_PANE_PUSH_URL,payload:{url:e,silent:t}}}},95451:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.setLegendVisibility=t.setSelectionPanelVisibility=t.setTaskPaneVisibility=t.setElementStates=void 0;var r=n(10737);t.setElementStates=function(e){return{type:r.ActionType.FUSION_SET_ELEMENT_STATE,payload:e}},t.setTaskPaneVisibility=function(e){return{type:r.ActionType.FUSION_SET_TASK_PANE_VISIBILITY,payload:e}},t.setSelectionPanelVisibility=function(e){return{type:r.ActionType.FUSION_SET_SELECTION_PANEL_VISIBILITY,payload:e}},t.setLegendVisibility=function(e){return{type:r.ActionType.FUSION_SET_LEGEND_VISIBILITY,payload:e}}},85620:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.BaseLayerSetOL=void 0;var r=(0,n(70655).__importStar)(n(40177)),a=function(){function e(e,t,n,r,a,i){this.externalBaseLayersGroup=e,this.projection=t,this.dpi=n,this.extent=r,this.inPerUnit=a,this.view=i}return e.prototype.getMetersPerUnit=function(){return this.inPerUnit/39.37},e.prototype.scaleToResolution=function(e){return e/this.inPerUnit/this.dpi*r.DEVICE_PIXEL_RATIO},e.prototype.resolutionToScale=function(e){return e*this.dpi*this.inPerUnit/r.DEVICE_PIXEL_RATIO},e.prototype.updateExternalBaseLayers=function(e){this.externalBaseLayersGroup&&this.externalBaseLayersGroup.getLayers().forEach((function(t){var n=(e||[]).filter((function(e){return e.name===t.get("title")}));1==n.length?t.setVisible(!!n[0].visible):t.setVisible(!1)}))},e.prototype.refreshMap=function(e){},e}();t.BaseLayerSetOL=a},40377:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.bootstrap=void 0,t.bootstrap=function(){}},69648:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getActiveSelectedFeatureXml=t.buildSelectionXml=t.deArrayify=t.isQueryMapFeaturesResponse=t.isSiteVersion=t.isTileSet=t.isMapDef=t.isAppDef=t.isWebLayout=void 0;var r=n(5791),a=n(95601);function i(){return function(e,t,n){return void 0===n&&(n="string"),function(e,t,n){if(void 0===n&&(n="string"),!e[t])return null;if(1===e[t].length){var r=e[t][0];switch(n){case"int":return parseInt(r,10);case"float":return parseFloat(r);case"boolean":return"true"===r.toLowerCase();default:return r}}}(e,t,n)}}function o(e){var t=i();return e.map((function(e){return{LegendLabel:t(e,"LegendLabel"),Filter:t(e,"Filter"),Icon:t(e,"Icon")}}))}function s(e){if(!e)return[];var t=i();return e.map((function(e){return{Type:t(e,"Type","int"),Rule:o(e.Rule)}}))}function l(e){if(!e)return[{MinScale:0,MaxScale:a.MDF_INFINITY,FeatureStyle:[]}];var t=i();return e.map((function(e){return{MinScale:t(e,"MinScale","float"),MaxScale:t(e,"MaxScale","float"),FeatureStyle:s(e.FeatureStyle)}}))}function u(e){if(e&&1===e.length){var t=i();return{ResourceId:t(e[0],"ResourceId"),ClassName:t(e[0],"ClassName"),Geometry:t(e[0],"Geometry")}}}function c(e){if(!e)return e;var t=i();return e.map((function(e){var n={Type:t(e,"Type","int"),Selectable:t(e,"Selectable","boolean"),LayerDefinition:t(e,"LayerDefinition"),Name:t(e,"Name"),LegendLabel:t(e,"LegendLabel"),ObjectId:t(e,"ObjectId"),ParentId:t(e,"ParentId"),DisplayInLegend:t(e,"DisplayInLegend","boolean"),ExpandInLegend:t(e,"ExpandInLegend","boolean"),Visible:t(e,"Visible","boolean"),ActuallyVisible:t(e,"ActuallyVisible","boolean"),FeatureSource:u(e.FeatureSource),ScaleRange:l(e.ScaleRange)};return e.ScaleRange||(n.Selectable=!1),n}))}function p(e){if(e){var t=i();return e.map((function(e){return{Type:t(e,"Type","int"),Name:t(e,"Name"),LegendLabel:t(e,"LegendLabel"),ObjectId:t(e,"ObjectId"),ParentId:t(e,"ParentId"),DisplayInLegend:t(e,"DisplayInLegend","boolean"),ExpandInLegend:t(e,"ExpandInLegend","boolean"),Visible:t(e,"Visible","boolean"),ActuallyVisible:t(e,"ActuallyVisible","boolean")}}))}}function d(e){if(!e||1!==e.length)throw new r.MgError("Malformed input. Expected CoordinateSystem element");var t=i();return{Wkt:t(e[0],"Wkt"),MentorCode:t(e[0],"MentorCode"),EpsgCode:t(e[0],"EpsgCode"),MetersPerUnit:t(e[0],"MetersPerUnit","float")}}function m(e){if(!e||1!==e.length)throw new r.MgError("Malformed input. Expected coordinate array");var t=i();return{X:t(e[0],"X","float"),Y:t(e[0],"Y","float")}}function f(e){if(!e||1!==e.length)throw new r.MgError("Malformed input. Expected extent element");return{LowerLeftCoordinate:m(e[0].LowerLeftCoordinate),UpperRightCoordinate:m(e[0].UpperRightCoordinate)}}function _(e){if(e)return e.map(parseFloat)}function E(e){var t=e,n=i();if(1!=t.length)throw new r.MgError("Malformed input. Expected Class element");return{"@id":n(t[0],"@id"),ID:t[0].ID}}function v(e){var t=i();return(e||[]).map((function(e){return{"@id":t(e,"@id"),"@name":t(e,"@name"),Class:E(e.Class)}}))}function g(e){var t=e;if(null!=t&&1==t.length)return{Layer:v(t[0].Layer)}}function y(e){var t=e;if(null!=t&&1==t.length){var n=i();return{MimeType:n(t[0],"MimeType"),Content:n(t[0],"Content")}}}function h(e){var t=i();return(e||[]).map((function(e){return{Name:t(e,"Name"),Value:t(e,"Value")}}))}function S(e){var t=i();return(e||[]).map((function(e){return{Bounds:t(e,"Bounds"),Property:h(e.Property),SelectionKey:t(e,"SelectionKey")}}))}function T(e){var t=i();return(e||[]).map((function(e){return{DisplayName:t(e,"DisplayName"),Name:t(e,"Name"),Type:t(e,"Type","int")}}))}function L(e){var t=e;if(null!=t&&1==t.length)return{Property:T(t[0].Property)}}function I(e){var t=i();return(e||[]).map((function(e){return{"@id":t(e,"@id"),"@name":t(e,"@name"),Feature:S(e.Feature),LayerMetadata:L(e.LayerMetadata)}}))}function A(e){var t=e;if(null!=t&&1==t.length)return{SelectedLayer:I(t[0].SelectedLayer)}}function C(e){var t=e;if(null==t||1!=t.length)throw new r.MgError("Malformed input. Expected control element");return{Visible:i()(t[0],"Visible","boolean")}}function b(e){var t=e;if(null==t||1!=t.length)throw new r.MgError("Malformed input. Expected InformationPane element");var n=i();return{Visible:n(t[0],"Visible","boolean"),Width:n(t[0],"Width","int"),LegendVisible:n(t[0],"LegendVisible","boolean"),PropertiesVisible:n(t[0],"PropertiesVisible","boolean")}}function N(e){var t=e;if(null!=t&&1==t.length){var n=i();return{CenterX:n(t[0],"CenterX","float"),CenterY:n(t[0],"CenterY","float"),Scale:n(t[0],"Scale","float")}}}function O(e){var t=e;if(null==t||1!=t.length)throw new r.MgError("Malformed input. Expected Map element");var n=i();return{ResourceId:n(t[0],"ResourceId"),InitialView:N(t[0].InitialView),HyperlinkTarget:n(t[0],"HyperlinkTarget"),HyperlinkTargetFrame:n(t[0],"HyperlinkTargetFrame")}}function M(e){var t=e;if(null==t||1!=t.length)throw new r.MgError("Malformed input. Expected TaskButton element");var n=i();return{Name:n(t[0],"Name"),Tooltip:n(t[0],"Tooltip"),Description:n(t[0],"Description"),ImageURL:n(t[0],"ImageURL"),DisabledImageURL:n(t[0],"DisabledImageURL")}}function P(e){var t=e;if(null==t||1!=t.length)throw new r.MgError("Malformed input. Expected TaskBar element");var n={Visible:i()(t[0],"Visible","boolean"),Home:M(t[0].Home),Forward:M(t[0].Forward),Back:M(t[0].Back),Tasks:M(t[0].Tasks),MenuButton:[]};if(t[0].MenuButton)for(var a=0,o=t[0].MenuButton;a<o.length;a++){var s=o[a];n.MenuButton.push(D(s))}return n}function R(e){var t=e;if(null==t||1!=t.length)throw new r.MgError("Malformed input. Expected TaskPane element");var n=i();return{Visible:n(t[0],"Visible","boolean"),InitialTask:n(t[0],"InitialTask"),Width:n(t[0],"Width","int"),TaskBar:P(t[0].TaskBar)}}function D(e){var t=e,n=i(),r=n(t,"Function"),a={Function:r};switch(r){case"Command":a.Command=n(t,"Command");break;case"Flyout":a.Label=n(t,"Label"),a.Tooltip=n(t,"Tooltip"),a.Description=n(t,"Description"),a.ImageURL=n(t,"ImageURL"),a.DisabledImageURL=n(t,"DisabledImageURL"),a.SubItem=[];for(var o=0,s=t.SubItem;o<s.length;o++){var l=s[o];a.SubItem.push(D(l))}}return a}function w(e,t){var n=e;if(null==n||1!=n.length)throw new r.MgError("Malformed input. Expected container element");var a=i(),o={};o[t]=[];for(var s=0,l=n[0][t];s<l.length;s++){var u=l[s];o[t].push(D(u))}return void 0!==n[0].Visible&&(o.Visible=a(n[0],"Visible","boolean")),o}function F(e){var t=e,n=i(),a={"@xsi:type":n(t,"@xsi:type"),Name:n(t,"Name"),Label:n(t,"Label"),Tooltip:n(t,"Tooltip"),Description:n(t,"Description"),ImageURL:n(t,"ImageURL"),DisabledImageURL:n(t,"DisabledImageURL"),TargetViewer:n(t,"TargetViewer")};return void 0!==t.Action&&(a.Action=n(t,"Action")),void 0!==t.Target&&(a.Target=n(t,"Target")),void 0!==t.TargetFrame&&(a.TargetFrame=n(t,"TargetFrame")),void 0!==t.Layer&&(a.Layer=n(t,"Layer"),a.Prompt=n(t,"Prompt"),a.ResultColumns=function(e){var t=e;if(null==t||1!=t.length)throw new r.MgError("Malformed input. Expected ResultColumns element");for(var n=i(),a={Column:[]},o=0,s=t[0].Column;o<s.length;o++){var l=s[o];a.Column.push({Name:n(l,"Name"),Property:n(l,"Property")})}return a}(t.ResultColumns),a.Filter=n(t,"Filter"),a.MatchLimit=n(t,"MatchLimit","int")),void 0!==t.URL&&(a.URL=n(t,"URL")),void 0!==t.DisableIfSelectionEmpty&&(a.LayerSet=function(e){var t=e;if(null!=t&&1==t.length)return{Layer:t[0].Layer}}(t.LayerSet),a.AdditionalParameter=function(e){var t=e,n=[];if(!t)return n;for(var r=i(),a=0,o=t;a<o.length;a++){var s=o[a];n.push({Key:r(s,"Key"),Value:r(s,"Value")})}return n}(t.AdditionalParameter),a.DisableIfSelectionEmpty=n(t,"DisableIfSelectionEmpty","boolean")),void 0!==t.Script&&(a.Script=n(t,"Script")),a}function U(e){var t=e;if(null==t||1!=t.length)throw new r.MgError("Malformed input. Expected CommandSet element");var n={Command:[]};if(t[0].Command)for(var a=0,i=t[0].Command;a<i.length;a++){var o=i[a];n.Command.push(F(o))}return n}function V(e){var t=e;if(null==t)throw new r.MgError("Malformed input. Expected MapGroup element");var n=i(),a={"@id":n(t,"@id","string"),InitialView:void 0,Map:[]};if(t.InitialView){var o=t.InitialView[0];a.InitialView={CenterX:n(o,"CenterX","float"),CenterY:n(o,"CenterY","float"),Scale:n(o,"Scale","float")}}if(t.Map)for(var s=0,l=t.Map;s<l.length;s++){var u=l[s];a.Map.push({Type:n(u,"Type","string"),Extension:z(u.Extension)})}return a}function x(e){var t=e;if(null==t||1!=t.length)throw new r.MgError("Malformed input. Expected MapSet element");var n={MapGroup:[]};if(t[0].MapGroup)for(var a=0,i=t[0].MapGroup;a<i.length;a++){var o=i[a];n.MapGroup.push(V(o))}return n}function k(e){var t=[],n=i();if(e&&e.length)for(var r=0,a=e;r<a.length;r++){var o=a[r];switch(n(o,"Function","string")){case"Separator":t.push({Function:"Separator"});break;case"Widget":t.push({Function:"Widget",Widget:n(o,"Widget","string")});break;case"Flyout":t.push({Function:"Flyout",Label:n(o,"Label","string"),Tooltip:n(o,"Tooltip","string"),ImageUrl:n(o,"ImageUrl","string"),ImageClass:n(o,"ImageClass","string"),Item:k(o.Item||[])})}}return t}function B(e){for(var t=[],n=i(),r=0,a=e;r<a.length;r++){var o=a[r];t.push({Name:n(o,"Name","string"),Type:n(o,"Type","string"),Extension:z(o.Extension),Item:k(o.Item)})}return t}function G(e){for(var t=[],n=0,r=e;n<r.length;n++){var a=r[n];if("UiWidgetType"==a["@xsi:type"]){var i=W(a);t.push(i)}else t.push(Y(a))}return t}function Y(e){var t=e;if(null==t)throw new r.MgError("Malformed input. Expected Widget element");var n=i();return{WidgetType:n(t,"@xsi:type","string"),Name:n(t,"Name","string"),Type:n(t,"Type","string"),Extension:z(t.Extension)}}function z(e,t){void 0===t&&(t=!0);var n=e;if(null==n)return null;if(t&&1!=n.length)throw new r.MgError("Malformed input. Expected Extension element");var a=i(),o={};for(var s in n[0])if(Array.isArray(n[0][s]))switch(s){case"AdditionalParameter":for(var l=[],u=0,c=n[0][s];u<c.length;u++){var p=c[u];l.push({Key:a(p,"Key","string"),Value:a(p,"Value","string")})}o[s]=l;break;case"Projection":o[s]=n[0][s];break;default:o[s]=a(n[0],s,"string")}else o[s]=z(n[0][s],!1);return o}function W(e){var t=e;if(null==t)throw new r.MgError("Malformed input. Expected Widget element");var n=i();return{WidgetType:n(t,"@xsi:type","string"),ImageUrl:n(t,"ImageUrl","string"),ImageClass:n(t,"ImageClass","string"),Label:n(t,"Label","string"),Tooltip:n(t,"Tooltip","string"),StatusText:n(t,"StatusText","string"),Disabled:n(t,"Disabled","boolean"),Name:n(t,"Name","string"),Type:n(t,"Type","string"),Extension:z(t.Extension)}}function j(e){var t=e;if(null==t||1!=t.length)throw new r.MgError("Malformed input. Expected MapWidget element");var n=i();return{WidgetType:n(t,"@xsi:type","string"),MapId:n(t,"MapId","string"),Name:n(t,"Name","string"),Type:n(t,"Type","string"),Extension:z(t.Extension)}}function H(e){for(var t=[],n=0,r=e;n<r.length;n++){var a=r[n];t.push({Container:B(a.Container),MapWidget:j(a.MapWidget),Widget:G(a.Widget)})}return t}function K(e){for(var t=[],n=i(),r=0,a=e;r<a.length;r++){var o=a[r];t.push({Name:n(o,"Name"),ExpandInLegend:n(o,"ExpandInLegend","boolean"),ShowInLegend:n(o,"ShowInLegend","boolean"),Visible:n(o,"Visible","boolean"),LegendLabel:n(o,"LegendLabel"),Group:n(o,"Group")})}return t}function Z(e){for(var t=[],n=i(),r=0,a=e;r<a.length;r++){var o=a[r];t.push({Name:n(o,"Name"),ResourceId:n(o,"ResourceId"),ExpandInLegend:n(o,"ExpandInLegend","boolean"),ShowInLegend:n(o,"ShowInLegend","boolean"),Selectable:n(o,"Selectable","boolean"),Visible:n(o,"Visible","boolean"),LegendLabel:n(o,"LegendLabel"),Group:n(o,"Group")})}return t}function X(e){for(var t=i(),n=[],r=0,a=e;r<a.length;r++){var o=a[r];n.push({Name:t(o,"Name"),ResourceId:t(o,"ResourceId"),Selectable:t(o,"Selectable","boolean"),ShowInLegend:t(o,"ShowInLegend","boolean"),LegendLabel:t(o,"LegendLabel"),ExpandInLegend:t(o,"ExpandInLegend","boolean")})}return n}function q(e){for(var t=i(),n=[],r=0,a=e;r<a.length;r++){var o=a[r];n.push({Name:t(o,"Name"),Visible:t(o,"Visible","boolean"),ShowInLegend:t(o,"ShowInLegend","boolean"),ExpandInLegend:t(o,"ExpandInLegend","boolean"),LegendLabel:t(o,"LegendLabel"),BaseMapLayer:X(o.BaseMapLayer)})}return n}function Q(e){for(var t=i(),n=[],r=0,a=e;r<a.length;r++){var o=a[r];n.push({Name:t(o,"Name"),Value:t(o,"Value")})}return n}function J(e){return{TileProvider:i()(e,"TileProvider"),Parameter:Q(e[0].Parameter)}}t.isWebLayout=function(e){return null!=e.CommandSet&&null!=e.ContextMenu&&null!=e.Map},t.isAppDef=function(e){return null!=e.WidgetSet},t.isMapDef=function(e){return null!=e.Extents&&null!=e.BackgroundColor&&null!=e.CoordinateSystem&&null!=e.MapLayer&&null!=e.MapLayerGroup},t.isTileSet=function(e){return null!=e.Extents&&null!=e.TileStoreParameters&&null!=e.BaseMapLayerGroup},t.isSiteVersion=function(e){return null!=e.Version},t.isQueryMapFeaturesResponse=function(e){return null!=e.FeatureSet||null!=e.Hyperlink||null!=e.InlineSelectionImage||null!=e.SelectedFeatures||null!=e.Tooltip},t.deArrayify=function(e){if(e.RuntimeMap)return function(e){var t=e,n=i();return{SessionId:n(t,"SessionId"),SiteVersion:n(t,"SiteVersion"),Name:n(t,"Name"),MapDefinition:n(t,"MapDefinition"),TileSetDefinition:n(t,"TileSetDefinition"),TileWidth:n(t,"TileWidth","int"),TileHeight:n(t,"TileHeight","int"),BackgroundColor:n(t,"BackgroundColor"),DisplayDpi:n(t,"DisplayDpi","int"),IconMimeType:n(t,"IconMimeType"),CoordinateSystem:d(t.CoordinateSystem),Extents:f(t.Extents),Group:p(t.Group),Layer:c(t.Layer),FiniteDisplayScale:_(t.FiniteDisplayScale)}}(e.RuntimeMap);if(e.FeatureInformation)return function(e){var t=e,n=i();return{FeatureSet:g(t.FeatureSet),Hyperlink:n(t,"Hyperlink"),InlineSelectionImage:y(t.InlineSelectionImage),SelectedFeatures:A(t.SelectedFeatures),Tooltip:n(t,"Tooltip")}}(e.FeatureInformation);if(e.WebLayout)return function(e){var t=e,n=i();return{Title:n(t,"Title"),Map:O(t.Map),EnablePingServer:n(t,"EnablePingServer","boolean"),SelectionColor:n(t,"SelectionColor"),PointSelectionBuffer:n(t,"PointSelectionBuffer","int"),MapImageFormat:n(t,"MapImageFormat"),SelectionImageFormat:n(t,"SelectionImageFormat"),StartupScript:n(t,"StartupScript"),ToolBar:w(t.ToolBar,"Button"),InformationPane:b(t.InformationPane),ContextMenu:w(t.ContextMenu,"MenuItem"),TaskPane:R(t.TaskPane),StatusBar:C(t.StatusBar),ZoomControl:C(t.ZoomControl),CommandSet:U(t.CommandSet)}}(e.WebLayout);if(e.ApplicationDefinition)return function(e){var t=e,n=i();return{Title:n(t,"Title"),TemplateUrl:n(t,"TemplateUrl"),MapSet:x(t.MapSet),WidgetSet:H(t.WidgetSet),Extension:z(t.Extension)}}(e.ApplicationDefinition);if(e.MapDefinition)return function(e){var t,n,r=e,a=i(),o=i(),s={BackgroundColor:a(r,"BackgroundColor"),CoordinateSystem:a(r,"CoordinateSystem"),Extents:{MinX:o(r.Extents[0],"MinX","float"),MinY:o(r.Extents[0],"MinY","float"),MaxX:o(r.Extents[0],"MaxX","float"),MaxY:o(r.Extents[0],"MaxY","float")},MapLayer:Z(null!==(t=r.MapLayer)&&void 0!==t?t:[]),MapLayerGroup:K(null!==(n=r.MapLayerGroup)&&void 0!==n?n:[])};if(r.TileSetSource){var l=i();s.TileSetSource={ResourceId:l(r.TileSetSource,"ResourceId")}}return s}(e.MapDefinition);if(e.TileSetDefinition)return function(e){var t=e,n=i();return{Extents:{MinX:n(t.Extents[0],"MinX","float"),MinY:n(t.Extents[0],"MinY","float"),MaxX:n(t.Extents[0],"MaxX","float"),MaxY:n(t.Extents[0],"MaxY","float")},TileStoreParameters:J(e.TileStoreParameters),BaseMapLayerGroup:q(e.BaseMapLayerGroup)}}(e.TileSetDefinition);if(e.SiteVersion)return{Version:e.SiteVersion.Version[0]};var t=[];for(var n in e)t.push(n);throw new r.MgError("Unsure how to process JSON response. Root elements are: ("+t.join(", ")+")")},t.buildSelectionXml=function(e,t){var n='<?xml version="1.0" encoding="utf-8"?>';if(n+='<FeatureSet xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:noNamespaceSchemaLocation="FeatureSet-1.0.0.xsd">',e)for(var r=0,a=e.Layer;r<a.length;r++){var i=a[r],o=i["@id"];if(!(null!=t&&t.indexOf(o)<0)){n+='<Layer id="'+o+'">';var s=i.Class;n+='<Class id="'+s["@id"]+'">';for(var l=0,u=s.ID;l<u.length;l++)n+="<ID>"+u[l]+"</ID>";n+="</Class>",n+="</Layer>"}}return n+"</FeatureSet>"},t.getActiveSelectedFeatureXml=function(e,t){for(var n=0,r=e.Layer;n<r.length;n++){var a=r[n],i=a["@id"];if(i==t.layerId){var o=t.selectionKey,s='<?xml version="1.0" encoding="utf-8"?>';return s+='<FeatureSet xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:noNamespaceSchemaLocation="FeatureSet-1.0.0.xsd">',s+='<Layer id="'+i+'">',s+='<Class id="'+a.Class["@id"]+'">',s+="<ID>"+o+"</ID>",s+="</Class>",(s+="</Layer>")+"</FeatureSet>"}}}},86595:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createRequestBuilder=t.registerRequestBuilder=void 0;var r=n(5791),a={};t.registerRequestBuilder=function(e,t){a[e]=t},t.createRequestBuilder=function(e,t){if(a[t])return a[t](e);throw new r.MgError("Unknown or unsupported client kind: "+t)}},52878:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.MapAgentRequestBuilder=t.serialize=t.isErrorResponse=void 0;var r=n(70655),a=n(5791),i=n(69648),o=n(48720),s=n(61557);function l(e){return!e.ok||559===e.status}function u(e,t){return void 0===t&&(t=!0),Object.keys(e).map((function(n){return encodeURIComponent(t?n.toUpperCase():n)+"="+encodeURIComponent(e[n])})).join("&")}t.isErrorResponse=l,t.serialize=u;var c=function(e){function t(t,n){void 0===n&&(n=o.DEFAULT_LOCALE);var r=e.call(this,t)||this;return r.locale=n,r}return(0,r.__extends)(t,e),t.prototype.get=function(e){return(0,r.__awaiter)(this,void 0,void 0,(function(){var t,n;return(0,r.__generator)(this,(function(r){switch(r.label){case 0:return[4,fetch(e,{headers:{Accept:"application/json","Content-Type":"application/json"},method:"GET"})];case 1:if(!l(t=r.sent()))return[3,2];throw new a.MgError(t.statusText);case 2:return[4,t.json()];case 3:return n=r.sent(),[2,(0,i.deArrayify)(n)]}}))}))},t.prototype.post=function(e,t){return(0,r.__awaiter)(this,void 0,void 0,(function(){var n,o;return(0,r.__generator)(this,(function(r){switch(r.label){case 0:return t.format||(t.format="application/json"),[4,fetch(e,{headers:{"Content-Type":"application/x-www-form-urlencoded; charset=UTF-8"},method:"POST",body:u(t)})];case 1:if(!l(n=r.sent()))return[3,2];throw new a.MgError(n.statusText);case 2:return[4,n.json()];case 3:return o=r.sent(),[2,(0,i.deArrayify)(o)]}}))}))},t.prototype.stringifyGetUrl=function(e){e.version||(e.version="1.0.0"),e.locale||(e.locale=this.locale),e.format||(e.format="application/json");var t=this.agentUri,n=!0;for(var r in e)n?(t+="?"+r.toUpperCase()+"="+e[r],n=!1):t+="&"+r.toUpperCase()+"="+e[r];return t},t.prototype.createSession=function(e,t){return(0,r.__awaiter)(this,void 0,void 0,(function(){var n,i;return(0,r.__generator)(this,(function(r){switch(r.label){case 0:return n=this.agentUri,[4,fetch(n,{headers:{"Content-Type":"application/x-www-form-urlencoded; charset=UTF-8"},method:"POST",body:u({operation:"CREATESESSION",version:"1.0.0",USERNAME:e,PASSWORD:t})})];case 1:if(!l(i=r.sent()))return[3,2];throw new a.MgError(i.statusText);case 2:return[4,i.text()];case 3:return[2,r.sent()]}}))}))},t.prototype.getServerSessionTimeout=function(e){return(0,r.__awaiter)(this,void 0,void 0,(function(){var t,n,i;return(0,r.__generator)(this,(function(r){switch(r.label){case 0:return t=this.agentUri,[4,fetch(t,{headers:{"Content-Type":"application/x-www-form-urlencoded; charset=UTF-8"},method:"POST",body:u({operation:"GETSESSIONTIMEOUT",version:"1.0.0",SESSION:e})})];case 1:if(!l(n=r.sent()))return[3,2];throw new a.MgError(n.statusText);case 2:return[4,n.text()];case 3:return i=r.sent(),[2,parseInt(i,10)]}}))}))},t.prototype.getResource=function(e,t){if(null!=t){var n={operation:"GETRESOURCECONTENT",resourceId:e},a=this.stringifyGetUrl((0,r.__assign)((0,r.__assign)({},t),n));return this.get(a)}return a=this.stringifyGetUrl({operation:"GETRESOURCE",resourceId:e}),this.get(a)},t.prototype.getSiteVersion=function(){var e=this.stringifyGetUrl((0,r.__assign)({},{operation:"GETSITEVERSION",version:"1.0.0",username:"Anonymous"}));return this.get(e)},t.prototype.createRuntimeMap=function(e){var t=this.stringifyGetUrl((0,r.__assign)((0,r.__assign)({},e),{operation:"CREATERUNTIMEMAP",version:"3.0.0"}));return this.get(t)},t.prototype.queryMapFeatures=function(e){return this.post(this.agentUri,(0,r.__assign)((0,r.__assign)({},e),{operation:"QUERYMAPFEATURES",version:"2.6.0"}))},t.prototype.queryMapFeatures_v4=function(e){return this.post(this.agentUri,(0,r.__assign)((0,r.__assign)({},e),{operation:"QUERYMAPFEATURES",version:"4.0.0"}))},t.prototype.describeRuntimeMap=function(e){var t=this.stringifyGetUrl((0,r.__assign)((0,r.__assign)({},e),{operation:"DESCRIBERUNTIMEMAP",version:"3.0.0"}));return this.get(t)},t.prototype.getTileTemplateUrl=function(e,t,n,r,a){return this.agentUri+"?OPERATION=GETTILEIMAGE&VERSION=1.2.0&USERNAME=Anonymous&MAPDEFINITION="+e+"&BASEMAPLAYERGROUPNAME="+t+"&TILECOL="+n+"&TILEROW="+r+"&SCALEINDEX="+a},t}(s.RequestBuilder);t.MapAgentRequestBuilder=c},31293:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Client=void 0;var r=n(70655),a=n(5791),i=n(52878),o=n(86595),s=function(){function e(e,t){this.builder=(0,o.createRequestBuilder)(e,t)}return e.prototype.getText=function(e){return(0,r.__awaiter)(this,void 0,void 0,(function(){var t;return(0,r.__generator)(this,(function(n){switch(n.label){case 0:return[4,fetch(e)];case 1:if(!(t=n.sent()).ok)throw new a.MgError(t.statusText);return[4,t.text()];case 2:return[2,n.sent()]}}))}))},e.prototype.get=function(e){return new Promise((function(t,n){fetch(e,{headers:{Accept:"application/json","Content-Type":"application/json"},method:"GET"}).then((function(e){if((0,i.isErrorResponse)(e))throw new a.MgError(e.statusText);t(e.json())})).catch(n)}))},e.prototype.post=function(e,t){return t.format||(t.format="application/json"),new Promise((function(n,r){fetch(e,{headers:{"Content-Type":"application/x-www-form-urlencoded; charset=UTF-8"},method:"POST",body:(0,i.serialize)(t)}).then((function(e){if((0,i.isErrorResponse)(e))throw new a.MgError(e.statusText);n(e.json())})).catch(r)}))},e.prototype.createSession=function(e,t){return this.builder.createSession(e,t)},e.prototype.getServerSessionTimeout=function(e){return this.builder.getServerSessionTimeout(e)},e.prototype.getSiteVersion=function(){return this.builder.getSiteVersion()},e.prototype.getResource=function(e,t){return this.builder.getResource(e,t)},e.prototype.createRuntimeMap=function(e){return this.builder.createRuntimeMap(e)},e.prototype.describeRuntimeMap=function(e){return this.builder.describeRuntimeMap(e)},e.prototype.queryMapFeatures=function(e){return this.builder.queryMapFeatures(e)},e.prototype.queryMapFeatures_v4=function(e){return this.builder.queryMapFeatures_v4(e)},e.prototype.getTileTemplateUrl=function(e,t,n,r,a){return this.builder.getTileTemplateUrl(e,t,n,r,a)},e}();t.Client=s},29256:function(e,t){"use strict";function n(e){if(e.config.activeMapName)return e.mapState[e.config.activeMapName].mapguide}var r,a,i,o,s,l;Object.defineProperty(t,"__esModule",{value:!0}),t.MgBuiltInLayers=t.MG_BASE_LAYER_GROUP_NAME=t.MG_LAYER_TYPE_NAME=t.MgLayerType=t.SourceProperty=t.LayerProperty=t.getExternalBaseLayers=t.getCurrentView=t.getRuntimeMap=t.getSelectionSet=t.getMapGuideSubState=t.getInitialView=t.ALWAYS_TRUE=t.ALWAYS_FALSE=t.NOOP=t.KC_U=t.KC_ESCAPE=t.DEFAULT_MODAL_SIZE=t.RefreshMode=t.ActiveMapTool=t.UnitOfMeasure=t.BLANK_SIZE=void 0,t.BLANK_SIZE={w:1,h:1},(l=t.UnitOfMeasure||(t.UnitOfMeasure={}))[l.Unknown=0]="Unknown",l[l.Inches=1]="Inches",l[l.Feet=2]="Feet",l[l.Yards=3]="Yards",l[l.Miles=4]="Miles",l[l.NauticalMiles=5]="NauticalMiles",l[l.Millimeters=6]="Millimeters",l[l.Centimeters=7]="Centimeters",l[l.Meters=8]="Meters",l[l.Kilometers=9]="Kilometers",l[l.Degrees=10]="Degrees",l[l.DecimalDegrees=11]="DecimalDegrees",l[l.DMS=12]="DMS",l[l.Pixels=13]="Pixels",(s=t.ActiveMapTool||(t.ActiveMapTool={}))[s.Zoom=0]="Zoom",s[s.Select=1]="Select",s[s.Pan=2]="Pan",s[s.None=3]="None",(o=t.RefreshMode||(t.RefreshMode={}))[o.LayersOnly=1]="LayersOnly",o[o.SelectionOnly=2]="SelectionOnly",t.DEFAULT_MODAL_SIZE=[350,500],t.KC_ESCAPE=27,t.KC_U=85,t.NOOP=function(){},t.ALWAYS_FALSE=function(){return!1},t.ALWAYS_TRUE=function(){return!0},t.getInitialView=function(e){if(e.config.activeMapName)return e.mapState[e.config.activeMapName].initialView},t.getMapGuideSubState=n,t.getSelectionSet=function(e){var t;return null===(t=n(e))||void 0===t?void 0:t.selectionSet},t.getRuntimeMap=function(e){var t;return null===(t=n(e))||void 0===t?void 0:t.runtimeMap},t.getCurrentView=function(e){if(e.config.activeMapName)return e.mapState[e.config.activeMapName].currentView},t.getExternalBaseLayers=function(e,t){if(e.config.activeMapName)return t?e.mapState[e.config.activeMapName].externalBaseLayers:e.mapState[e.config.activeMapName].externalBaseLayers.filter((function(e){return"UTFGrid"!=e.kind}))},(i=t.LayerProperty||(t.LayerProperty={})).LAYER_TYPE="layer_type",i.LAYER_NAME="name",i.LAYER_DISPLAY_NAME="display_name",i.IS_GROUP="is_group",i.IS_EXTERNAL="is_external",i.IS_SELECTABLE="is_selectable",i.IS_SCRATCH="is_scratch",i.HAS_WMS_LEGEND="has_wms_legend",i.VECTOR_STYLE="vector_style",i.WGS84_BBOX="wgs84_bbox",i.BUSY_WORKER_COUNT="busy_worker_count",i.SELECTED_POPUP_CONFIGURATION="popup_config",i.LAYER_DESCRIPTION="layer_description",i.LAYER_METADATA="layer_metadata",i.IS_HOVER_HIGHLIGHT="is_hover_highlight",i.IS_MEASURE="is_measure",i.IS_WMS_SELECTION_OVERLAY="is_wms_selection_overlay",i.IS_HEATMAP="is_heatmap",i.LAYER_DEFN="layer_defn",(t.SourceProperty||(t.SourceProperty={})).SUPPRESS_LOAD_EVENTS="suppress_load_events",(a=t.MgLayerType||(t.MgLayerType={})).Untiled="MapGuide_Untiled",a.Tiled="MapGuide_Tiled",t.MG_LAYER_TYPE_NAME="MapGuide",t.MG_BASE_LAYER_GROUP_NAME="Base Tile Layers",(r=t.MgBuiltInLayers||(t.MgBuiltInLayers={})).Overlay="MapGuide Dynamic Overlay",r.SelectionOverlay="MapGuide Selection Overlay",r.ActiveFeatureSelectionOverlay="MapGuide Active Feature Selection Overlay"},87308:function(e,t){"use strict";function n(e,t){return t[0]<e[0]&&(e[0]=t[0]),t[2]>e[2]&&(e[2]=t[2]),t[1]<e[1]&&(e[1]=t[1]),t[3]>e[3]&&(e[3]=t[3]),e}Object.defineProperty(t,"__esModule",{value:!0}),t.CompositeSelection=t.CompositeSelectionLayer=void 0;var r=function(){function e(e){if(this.layer=e,this.features=[],this.isSelectedLayer(this.layer))for(var t=0,n=this.layer.Feature;t<n.length;t++){var r=n[t];this.features.push(r)}else for(var a=0,i=this.layer.features;a<i.length;a++){r=i[a];var o=[];for(var s in r.properties)o.push({Name:s,Value:r.properties[s]});var l=r.bounds?r.bounds.join(" "):void 0;this.features.push({Bounds:l,Property:o})}}return e.prototype.isSelectedLayer=function(e){return e.Feature&&e["@id"]&&e["@name"]},e.prototype.getBounds=function(){var e;if(this.isSelectedLayer(this.layer))this.layer.Feature.forEach((function(t){var r=t.Bounds?t.Bounds.split(" ").map((function(e){return parseFloat(e)})):void 0;r&&(e=e?n(e,r):r)}));else for(var t=0,r=this.layer.features;t<r.length;t++){var a=r[t];a.bounds&&(e=null==e?a.bounds:n(e,a.bounds))}return e},e.prototype.getLayerId=function(){if(this.isSelectedLayer(this.layer))return this.layer["@id"]},e.prototype.getName=function(){return this.isSelectedLayer(this.layer)?this.layer["@name"]:this.layer.name},e.prototype.getFeatureAt=function(e){return this.features[e]},e.prototype.getFeatureCount=function(){return this.features.length},e.prototype.getLayerMetadata=function(){if(this.isSelectedLayer(this.layer))return this.layer.LayerMetadata},e}();t.CompositeSelectionLayer=r;var a=function(){function e(e,t){if(this.layers=[],e)for(var n=0,a=e.SelectedLayer;n<a.length;n++){var i=a[n];this.layers.push(new r(i))}if(t)for(var o=0,s=t.layers;o<s.length;o++)i=s[o],this.layers.push(new r(i))}return e.prototype.getBounds=function(){if(0!=this.layers.length){for(var e,t=0,r=this.layers;t<r.length;t++){var a=r[t].getBounds();a&&(e=e?n(e,a):a)}return e}},e.prototype.getLayers=function(){return this.layers},e.prototype.getLayerCount=function(){return this.layers.length},e.prototype.getLayerAt=function(e){return this.layers[e]},e.prototype.getFeatureAt=function(e,t){var n=this.getLayerAt(e);return null==n?void 0:n.getFeatureAt(t)},e}();t.CompositeSelection=a},65817:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isSearchCommand=t.isInvokeURLCommand=t.isTargetedCommand=t.isBasicCommand=t.isSeparatorItem=t.isFlyoutItem=t.isCommandItem=void 0,t.isCommandItem=function(e){return"Command"===e.Function},t.isFlyoutItem=function(e){return"Flyout"===e.Function},t.isSeparatorItem=function(e){return"Separator"===e.Function},t.isBasicCommand=function(e){return void 0!==e.Action},t.isTargetedCommand=function(e){return void 0!==e.Target},t.isInvokeURLCommand=function(e){return void 0!==e.URL&&void 0!==e.DisableIfSelectionEmpty},t.isSearchCommand=function(e){return"SearchCommandType"==e["@xsi:type"]}},61739:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.initDefaultCommands=t.buildTargetedCommand=void 0;var r=n(70655),a=n(95348),i=n(29256),o=n(48720),s=n(37979),l=n(44839),u=n(81876),c=n(57270),p=n(34169),d=n(95451),m=(0,r.__importDefault)(n(67294)),f=(0,r.__importDefault)(n(73935));function _(e,t,n){var r,a=t.getCurrentView(),i=[a.x,a.y],o=t.getCurrentExtent(),s={right:[2,1],left:[0,1],down:[0,1],up:[0,3]}[n];r="right"==n||"left"==n?[o[s[0]],i[s[1]]]:[i[s[0]],o[s[1]]],e((0,u.setCurrentView)({x:r[0],y:r[1],scale:a.scale}))}function E(e,t){var n=(t||{}).Target,r={target:n||"NewWindow"};return e.capabilities.hasTaskPane&&"TaskPane"==n&&(r.target="TaskPane"),"SpecifiedFrame"==n&&(r.target=n,r.targetFrame=(t||{}).TargetFrame),r}t.buildTargetedCommand=E,t.initDefaultCommands=function(){(0,a.registerCommand)(a.DefaultCommands.Select,{iconClass:l.SPRITE_SELECT,selected:function(e){return e.activeTool===i.ActiveMapTool.Select},enabled:function(){return!0},invoke:function(e){return e((0,u.setActiveTool)(i.ActiveMapTool.Select))}}),(0,a.registerCommand)(a.DefaultCommands.Pan,{iconClass:l.SPRITE_PAN,selected:function(e){return e.activeTool===i.ActiveMapTool.Pan},enabled:function(){return!0},invoke:function(e){return e((0,u.setActiveTool)(i.ActiveMapTool.Pan))}}),(0,a.registerCommand)(a.DefaultCommands.Zoom,{iconClass:l.SPRITE_ZOOM_IN,selected:function(e){return e.activeTool===i.ActiveMapTool.Zoom},enabled:function(){return!0},invoke:function(e){return e((0,u.setActiveTool)(i.ActiveMapTool.Zoom))}}),(0,a.registerCommand)(a.DefaultCommands.ZoomIn,{iconClass:l.SPRITE_ZOOM_IN_FIXED,selected:function(){return!1},enabled:function(){return!0},invoke:function(e,t,n){n&&n.zoomDelta(1)}}),(0,a.registerCommand)(a.DefaultCommands.ZoomOut,{iconClass:l.SPRITE_ZOOM_OUT_FIXED,selected:function(){return!1},enabled:function(){return!0},invoke:function(e,t,n){n&&n.zoomDelta(-1)}}),(0,a.registerCommand)(a.DefaultCommands.PanLeft,{iconClass:l.SPRITE_PAN_WEST,selected:function(){return!1},enabled:function(){return!0},invoke:function(e,t,n){n&&_(e,n,"left")}}),(0,a.registerCommand)(a.DefaultCommands.PanRight,{iconClass:l.SPRITE_PAN_EAST,selected:function(){return!1},enabled:function(){return!0},invoke:function(e,t,n){n&&_(e,n,"right")}}),(0,a.registerCommand)(a.DefaultCommands.PanUp,{iconClass:l.SPRITE_PAN_NORTH,selected:function(){return!1},enabled:function(){return!0},invoke:function(e,t,n){n&&_(e,n,"up")}}),(0,a.registerCommand)(a.DefaultCommands.PanDown,{iconClass:l.SPRITE_PAN_SOUTH,selected:function(){return!1},enabled:function(){return!0},invoke:function(e,t,n){n&&_(e,n,"down")}}),(0,a.registerCommand)(a.DefaultCommands.About,{iconClass:l.SPRITE_ABOUT,selected:function(){return!1},enabled:function(){return!0},invoke:function(e,t){e((0,c.showModalComponent)({modal:{title:(0,o.tr)("ABOUT",t().config.locale),backdrop:!0,size:i.DEFAULT_MODAL_SIZE},name:s.DefaultComponentNames.About,component:s.DefaultComponentNames.About}))}}),(0,a.registerCommand)(a.DefaultCommands.Help,{iconClass:l.SPRITE_HELP,selected:function(){return!1},enabled:function(){return!0},invoke:function(e,t){e((0,c.showModalUrl)({modal:{title:(0,o.tr)("HELP",t().config.locale),backdrop:!0,size:i.DEFAULT_MODAL_SIZE},name:a.DefaultCommands.Help,url:"help/index.html"}))}}),(0,a.registerCommand)(a.DefaultCommands.Measure,{iconClass:l.SPRITE_MEASURE,selected:function(){return!1},enabled:function(){return!0},invoke:function(e,t,n,r){var i=t().config,s=E(i,r);(0,a.openUrlInTarget)(a.DefaultCommands.Measure,s,i.capabilities.hasTaskPane,e,"component://Measure",(0,o.tr)("MEASURE",i.locale))}}),(0,a.registerCommand)(a.DefaultCommands.RestoreView,{iconClass:l.SPRITE_INITIAL_CENTER,selected:function(){return!1},enabled:function(){return!0},invoke:function(e,t,n){if(n){var r=(0,i.getInitialView)(t());null!=r?n.zoomToView(r.x,r.y,r.scale):n.initialView()}}}),(0,a.registerCommand)(a.DefaultCommands.ZoomExtents,{iconClass:l.SPRITE_ZOOM_FULL,selected:function(){return!1},enabled:function(){return!0},invoke:function(e,t,n){n&&n.initialView()}}),(0,a.registerCommand)(a.DefaultCommands.RefreshMap,{iconClass:l.SPRITE_ICON_REFRESHMAP,selected:function(){return!1},enabled:a.CommandConditions.isNotBusy,invoke:function(e,t,n){n&&(n.refreshMap(i.RefreshMode.LayersOnly|i.RefreshMode.SelectionOnly),e((0,p.refresh)()))}}),(0,a.registerCommand)(a.DefaultCommands.PreviousView,{iconClass:l.SPRITE_VIEW_BACK,selected:function(){return!1},enabled:a.CommandConditions.hasPreviousView,invoke:function(e,t){var n=t().config.activeMapName;n&&e((0,u.previousView)(n))}}),(0,a.registerCommand)(a.DefaultCommands.NextView,{iconClass:l.SPRITE_VIEW_FORWARD,selected:function(){return!1},enabled:a.CommandConditions.hasNextView,invoke:function(e,t){var n=t().config.activeMapName;n&&e((0,u.nextView)(n))}}),(0,a.registerCommand)(a.DefaultCommands.Geolocation,{iconClass:l.SPRITE_GEOLOCATION,selected:function(){return!1},enabled:a.CommandConditions.isNotBusy,invoke:function(e,t,n,r){var a=t(),s=(0,i.getCurrentView)(a),l=(0,i.getRuntimeMap)(a),u=a.config.locale;if(n&&s&&l){var c=n.getOLFactory(),p={},d=s.scale;r.ZoomLevel&&(d=parseInt(r.ZoomLevel,10)),r.EnableHighAccuracy&&(p.enableHighAccuracy="true"==r.EnableHighAccuracy),r.Timeout&&(p.timeout=parseInt(r.Timeout,10)),r.MaximumAge&&(p.maximumAge=parseInt(r.MaximumAge,10)),navigator.geolocation.getCurrentPosition((function(e){var t=n.getProjection(),r=c.transformCoordinateFromLonLat([e.coords.longitude,e.coords.latitude],t),a=c.transformCoordinateFromLonLat([e.coords.longitude,e.coords.latitude],"EPSG:"+l.CoordinateSystem.EpsgCode);n.zoomToView(r[0],r[1],d);var i=[l.Extents.LowerLeftCoordinate.X,l.Extents.LowerLeftCoordinate.Y,l.Extents.UpperRightCoordinate.X,l.Extents.UpperRightCoordinate.Y];c.extentContainsXY(i,a[0],a[1])?n.toastSuccess("geolocation",(0,o.tr)("GEOLOCATION_SUCCESS",u)):n.toastWarning("warning-sign",(0,o.tr)("GEOLOCATION_WARN_OUTSIDE_MAP",u))}),(function(e){n.toastError("error",(0,o.tr)("GEOLOCATION_ERROR",u,{message:e.message,code:e.code}))}),p)}}}),(0,a.registerCommand)(a.DefaultCommands.CoordinateTracker,{iconClass:l.SPRITE_COORDINATE_TRACKER,selected:function(){return!1},enabled:function(){return!0},invoke:function(e,t,n,r){var i=t().config,s="component://CoordinateTracker?"+(r.Projection||[]).map((function(e){return"projections="+e})).join("&"),l=E(i,r);(0,a.openUrlInTarget)(a.DefaultCommands.CoordinateTracker,l,i.capabilities.hasTaskPane,e,s,(0,o.tr)("COORDTRACKER",i.locale))}}),(0,a.registerCommand)(a.DefaultCommands.AddManageLayers,{iconClass:l.SPRITE_LAYER_ADD,selected:function(){return!1},enabled:function(){return!0},invoke:function(e,t,n,r){var i=t().config,l="component://"+s.DefaultComponentNames.AddManageLayers,u=E(i,r);(0,a.openUrlInTarget)(a.DefaultCommands.AddManageLayers,u,i.capabilities.hasTaskPane,e,l,(0,o.tr)("ADD_MANAGE_LAYERS",i.locale))}}),(0,a.registerCommand)(a.DefaultCommands.Print,{iconClass:l.SPRITE_PRINT,selected:function(){return!1},enabled:function(){return!0},invoke:function(e,t,n,r){null==n||n.exportImage({callback:function(e){var t=m.default.createElement("img",{src:e}),n=window.open();n&&(n.document.open(),n.document.close(),n.document.head.innerHTML='\n                                <meta charset="UTF-8">\n                                <title>Print View</title>\n                                ',n.document.body.innerHTML='<div id="print"></div>',f.default.render(t,n.document.getElementById("print")))}})}}),(0,a.registerCommand)("showTaskPane",{iconClass:l.SPRITE_INVOKE_SCRIPT,selected:function(){return!1},enabled:a.CommandConditions.isNotBusy,invoke:function(e,t){e((0,d.setTaskPaneVisibility)(!0))}}),(0,a.registerCommand)("showLegend",{iconClass:l.SPRITE_INVOKE_SCRIPT,selected:function(){return!1},enabled:a.CommandConditions.isNotBusy,invoke:function(e,t){e((0,d.setLegendVisibility)(!0))}}),(0,a.registerCommand)("showSelectionPanel",{iconClass:l.SPRITE_INVOKE_SCRIPT,selected:function(){return!1},enabled:a.CommandConditions.isNotBusy,invoke:function(e,t){e((0,d.setSelectionPanelVisibility)(!0))}})}},61309:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.registerDefaultComponents=void 0;var r=n(70655),a=(0,r.__importStar)(n(67294)),i=n(26850),o=n(56305),s=n(90225),l=n(55028),u=n(70107),c=n(23548),p=n(87591),d=n(51487),m=n(70632),f=n(26693),_=n(37979),E=n(44722),v=n(13840);t.registerDefaultComponents=function(){(0,_.registerComponentFactory)(_.DefaultComponentNames.Navigator,(function(e){return a.createElement(o.NavigatorContainer,(0,r.__assign)({},e))})),(0,_.registerComponentFactory)(_.DefaultComponentNames.MouseCoordinates,(function(e){return a.createElement(i.MouseCoordinatesContainer,(0,r.__assign)({},e))})),(0,_.registerComponentFactory)(_.DefaultComponentNames.ScaleDisplay,(function(e){return a.createElement(s.ScaleDisplayContainer,(0,r.__assign)({},e))})),(0,_.registerComponentFactory)(_.DefaultComponentNames.TaskPane,(function(e){return a.createElement(l.TaskPaneContainer,(0,r.__assign)({},e))})),(0,_.registerComponentFactory)(_.DefaultComponentNames.About,(function(e){return a.createElement(u.About,(0,r.__assign)({},e))})),(0,_.registerComponentFactory)(_.DefaultComponentNames.Measure,(function(e){return a.createElement(c.MeasureContainer,(0,r.__assign)({},e))})),(0,_.registerComponentFactory)(_.DefaultComponentNames.BaseMapSwitcher,(function(e){return a.createElement(p.BaseLayerSwitcherContainer,(0,r.__assign)({},e))})),(0,_.registerComponentFactory)(_.DefaultComponentNames.MapMenu,(function(e){return a.createElement(d.MapMenuContainer,(0,r.__assign)({},e))})),(0,_.registerComponentFactory)(_.DefaultComponentNames.ViewSize,(function(e){return a.createElement(E.ViewSizeContainer,(0,r.__assign)({},e))})),(0,_.registerComponentFactory)(_.DefaultComponentNames.CoordinateTracker,(function(e){return a.createElement(m.CoordinateTrackerContainer,(0,r.__assign)({},e))})),(0,_.registerComponentFactory)(_.DefaultComponentNames.AddManageLayers,(function(e){return a.createElement(f.AddManageLayersContainer,(0,r.__assign)({},e))})),(0,_.registerComponentFactory)(_.DefaultComponentNames.ShareLinkToView,(function(e){return a.createElement(v.ShareLinkToViewContainer,(0,r.__assign)({},e))}))}},5791:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isSessionExpiredError=t.MgError=void 0;var r=n(70655),a=function(e){function t(t){var n=e.call(this,t)||this;return n.message=t,n.name="MgError",n.message=t,n.stack=(new Error).stack,n}return(0,r.__extends)(t,e),t}(Error);t.MgError=a,t.isSessionExpiredError=function(e){return e.message.indexOf("MgSessionExpiredException")>=0}},7366:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ExprEvalContext=void 0;var r=n(46217),a=n(7275),i=n(27792),o=function(){function e(){this.exprCache={},this.filterCache={},this.clusterExprCache={},this.clusterFilterCache={},this.parser=new r.Parser,this.parser.functions.agg_sum=function(e,t){if(Array.isArray(e))return e.reduce((function(e,n){var r;return e+(null!==(r=n.get(t))&&void 0!==r?r:0)}),0)},this.parser.functions.arr_size=function(e){return Array.isArray(e)?e.length:1},this.parser.functions.feat_property=function(e,t){return e?e.get(t):void 0}}return e.prototype.addFilter=function(e){this.filterCache[e]||(this.filterCache[e]=this.parser.parse(e))},e.prototype.addExpr=function(e){this.exprCache[e]||(this.exprCache[e]=this.parser.parse(e))},e.prototype.addClusterFilter=function(e){this.clusterFilterCache[e]||(this.clusterFilterCache[e]=this.parser.parse(e))},e.prototype.addClusterExpr=function(e){this.clusterExprCache[e]||(this.clusterExprCache[e]=this.parser.parse(e))},e.prototype.cleanValues=function(e){for(var t=e.getProperties(),n={},r=0,i=Object.keys(t);r<i.length;r++){var o=i[r];n[(0,a.strReplaceAll)(o," ","_")]=t[o]}return n},e.prototype.evaluateFilter=function(e){var t=this.cleanValues(e),n=(0,i.isClusteredFeature)(e)?this.clusterFilterCache:this.filterCache;for(var r in n)if(1==n[r].evaluate(t))return r},e.prototype.evaluate=function(e,t){var n=this.cleanValues(t);return(0,i.isClusteredFeature)(t)?(this.addClusterExpr(e),this.clusterExprCache[e].evaluate(n)):(this.addExpr(e),this.exprCache[e].evaluate(n))},e}();t.ExprEvalContext=o},67960:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.GenericLayerSetOL=t.DEFAULT_METERS_PER_UNIT=void 0;var r=n(70655),a=n(85620),i=(0,r.__importDefault)(n(92479)),o=(0,r.__importDefault)(n(20228)),s=n(95601),l=n(65539);t.DEFAULT_METERS_PER_UNIT=1;var u=function(e){function n(n,r,a,i,o,s,l){void 0===s&&(s=t.DEFAULT_METERS_PER_UNIT),void 0===l&&(l=96);var u=e.call(this,i,o,l,a,39.37*s,n)||this;return u.subjectLayer=r,u}return(0,r.__extends)(n,e),n.prototype.getLayers=function(){var e=[];return this.externalBaseLayersGroup&&e.push(this.externalBaseLayersGroup),this.subjectLayer&&e.push(this.subjectLayer),e},n.prototype.getSourcesForProgressTracking=function(){var e=[];if(this.externalBaseLayersGroup)for(var t=0,n=this.externalBaseLayersGroup.getLayersArray();t<n.length;t++){var r=n[t];(r instanceof o.default||r instanceof i.default)&&e.push(r.getSource())}return(this.subjectLayer instanceof o.default||this.subjectLayer instanceof i.default)&&e.push(this.subjectLayer.getSource()),e},n.prototype.updateTransparency=function(e){if(this.externalBaseLayersGroup&&(s.LAYER_ID_BASE in e?this.externalBaseLayersGroup.setOpacity((0,l.restrictToRange)(e[s.LAYER_ID_BASE],0,1)):this.externalBaseLayersGroup.setOpacity(1)),this.subjectLayer)if(s.LAYER_ID_MG_BASE in e){var t=(0,l.restrictToRange)(e[s.LAYER_ID_MG_BASE],0,1);this.subjectLayer.setOpacity(t)}else this.subjectLayer.setOpacity(1)},n.prototype.showActiveSelectedFeature=function(e,t,n){},n.prototype.update=function(e,t,n,r){},n.prototype.updateSelectionColor=function(e){},n}(a.BaseLayerSetOL);t.GenericLayerSetOL=u},48720:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.tr=t.fmt=t.registerStringBundle=t.DEFAULT_LOCALE=void 0;var r=n(99818),a=n(36645);t.DEFAULT_LOCALE="en";var i={en:r.STRINGS_EN};function o(e,t){var n=e;if(null!=t){for(var r in t)n=n.split("{"+r+"}").join(t[r]);return n}return n}t.registerStringBundle=function(e,t){i[e]=t},t.fmt=o,t.tr=function(e,n,r){void 0===n&&(n=t.DEFAULT_LOCALE);var s=i[n];if(s){var l=s[e];return l?null!=r?o(l,r):l:((0,a.warn)("String bundle for locale ("+n+") is missing localized string for key: "+e),e)}return(0,a.warn)("No such string bundle for locale: "+n),e}},68093:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.LayerManager=t.getLayerInfo=void 0;var r=n(70655),a=n(29256),i=(0,r.__importDefault)(n(30933)),o=n(27792),s=(0,r.__importDefault)(n(92479)),l=(0,r.__importDefault)(n(20228)),u=(0,r.__importDefault)(n(42225)),c=(0,r.__importDefault)(n(14409)),p=(0,r.__importDefault)(n(86333)),d=(0,r.__importDefault)(n(7061)),m=n(21081),f=n(48720),_=n(78113),E=n(64471),v=(0,r.__importDefault)(n(79020)),g=n(7275),y=n(4946);function h(e){return JSON.parse(JSON.stringify(e))}function S(e,t){if(e){var n=h(e);switch(n.type){case"Circle":n.fill.color=t}return n}}function T(e,t){if(e){var n=h(e);return n.color=t,n}}function L(e,t){if(e){var n=h(e);return n.fill.color=t,n}}function I(e,t,n){void 0===n&&(n=!1),e.label?e.label.text=t:(e.label={text:t,textAlign:"left",offsetX:15,fill:{color:"#000000",alpha:255},stroke:{color:"#ffffff",alpha:255,width:3}},n&&(e.label.placement="line"))}function A(e,t){e.line&&I(e.line,t,!0),e.point&&I(e.point,t),e.polygon&&I(e.polygon,t)}t.getLayerInfo=function(e,t){var n,r,i,o,m,f;if(e instanceof l.default||e instanceof s.default){var _=e.getSource();1==e.get(a.LayerProperty.HAS_WMS_LEGEND)&&(_ instanceof u.default||_ instanceof c.default)&&(m={type:"WMS",getLegendUrl:function(e){return _.getLegendUrl(e)}})}if(e instanceof p.default){var E=e.get(a.LayerProperty.VECTOR_STYLE);E&&(i=E.toVectorLayerStyle(),o=E.toClusterSettings())}return e instanceof d.default&&(f={blur:e.getBlur(),radius:e.getRadius()}),{visible:e.getVisible(),selectable:1==e.get(a.LayerProperty.IS_SELECTABLE),name:e.get(a.LayerProperty.LAYER_NAME),displayName:null!==(n=e.get(a.LayerProperty.LAYER_DISPLAY_NAME))&&void 0!==n?n:e.get(a.LayerProperty.LAYER_NAME),description:e.get(a.LayerProperty.LAYER_DESCRIPTION),type:e.get(a.LayerProperty.LAYER_TYPE),opacity:e.getOpacity(),isExternal:t,extensions:m,vectorStyle:i,cluster:o,heatmap:f,busyWorkerCount:null!==(r=e.get(a.LayerProperty.BUSY_WORKER_COUNT))&&void 0!==r?r:0,metadata:e.get(a.LayerProperty.LAYER_METADATA)}};var C=function(){function e(e,t){this.map=e,this.layerSet=t,this._olFormats=(0,m.getFormatDrivers)()}return e.prototype.tryGetSubjectLayer=function(){return this.layerSet.tryGetSubjectLayer()},e.prototype.addExternalLayer=function(e,t,n){if(!t||!this.hasLayer(e.name))return this.layerSet.addExternalLayer(this.map,e,n)},e.prototype.getLayers=function(){return this.layerSet.getCustomLayers(this.map)},e.prototype.hasLayer=function(e){return this.layerSet.hasLayer(e)},e.prototype.addLayer=function(e,t,n){return this.layerSet.addLayer(this.map,e,t,n)},e.prototype.removeLayer=function(e){return this.layerSet.removeLayer(this.map,e)},e.prototype.getLayer=function(e){return this.layerSet.getLayer(e)},e.prototype.apply=function(e){this.layerSet.apply(this.map,e)},e.prototype.parseFeaturesFromFile=function(e){var t=e.file,n=e.name,a=e.locale,i=this;return new Promise((function(e,o){var s=new FileReader;s.addEventListener("load",(function(s){var l;return(0,r.__awaiter)(this,void 0,void 0,(function(){var u,c,p,d,m,_,E;return(0,r.__generator)(this,(function(r){switch(r.label){case 0:if(!(u=null===(l=s.target)||void 0===l?void 0:l.result)||"string"!=typeof u)return[3,8];0==(c=i._olFormats).length&&o(new Error((0,f.tr)("ADD_LOCAL_FILE_LAYER_FAILURE_NO_FORMATS",a))),p=void 0,d=!1,m=0,_=c.length,r.label=1;case 1:if(!(m<_))return[3,7];E=c[m],r.label=2;case 2:return r.trys.push([2,4,,5]),[4,E.tryParse(t.size,u)];case 3:return p=r.sent(),[3,5];case 4:return r.sent(),[3,5];case 5:if(p&&p.hasFeatures())return p.name=n,d=!0,[3,7];r.label=6;case 6:return++m,[3,1];case 7:return d&&p?e(p):o(new Error((0,f.tr)("ADD_LOCAL_FILE_LAYER_FAILURE",a))),[3,9];case 8:o(new Error((0,f.tr)("ADD_LOCAL_FILE_LAYER_FAILURE_NOT_TEXT",a))),r.label=9;case 9:return[2]}}))}))})),s.readAsText(t)}))},e.prototype.addLayerFromParsedFeatures=function(e){var t,n,s;return(0,r.__awaiter)(this,void 0,void 0,(function(){var l,u,c,m,f,I,C,b,N,O,M,P,R,D,w,F,U,V,x,k,B,G,Y,z,W,j,H,K,Z;return(0,r.__generator)(this,(function(r){switch(r.label){case 0:return l=e.features,u=e.projection,c=e.defaultStyle,m=e.extraOptions,f=e.labelOnProperty,I=e.selectedPopupTemplate,C=e.metadata,b=e.defn,(N=u)||(O=this.map.getView(),N=O.getProjection()),(M=new i.default).set(a.SourceProperty.SUPPRESS_LOAD_EVENTS,!0),"Cluster"==(null==m?void 0:m.kind)&&(P={distance:m.clusterDistance}),R="Heatmap"==(null==m?void 0:m.kind)?new d.default({source:M,weight:m.weightProperty}):new p.default({source:(0,E.clusterSourceIfRequired)(M,{cluster:P}),className:"external-vector-layer",declutter:!0}),[4,l.addTo(M,this.map.getView().getProjection(),N)];case 1:if(r.sent(),R.set(a.LayerProperty.LAYER_NAME,l.name),R.set(a.LayerProperty.LAYER_DISPLAY_NAME,l.name),R.set(a.LayerProperty.LAYER_TYPE,l.type),R.set(a.LayerProperty.LAYER_DEFN,b),"Heatmap"==(null==m?void 0:m.kind)?R.set(a.LayerProperty.IS_HEATMAP,!0):R.set(a.LayerProperty.IS_SELECTABLE,!0),R.set(a.LayerProperty.IS_EXTERNAL,!0),R.set(a.LayerProperty.IS_GROUP,!1),C&&R.set(a.LayerProperty.LAYER_METADATA,C),I&&R.set(a.LayerProperty.SELECTED_POPUP_CONFIGURATION,I),"Cluster"==(null==m?void 0:m.kind)&&(D={distance:m.clusterDistance,onClick:null!==(t=m.onClusterClickAction)&&void 0!==t?t:_.ClusterClickAction.ShowPopup,style:h(null!==(s=null!==(n=m.clusterStyle)&&void 0!==n?n:c)&&void 0!==s?s:_.DEFAULT_CLUSTERED_LAYER_STYLE)},!(0,g.strIsNullOrEmpty)(f)))for(w in D.style)A(D.style[w],{expr:"if (arr_size(features) == 1, feat_property(features[0], '"+f+"'), '')"});return F=null!=c?c:h(_.DEFAULT_VECTOR_LAYER_STYLE),l.geometryTypes.includes("Point")||(delete F.default.point,null==D||delete D.style.default.point),l.geometryTypes.includes("LineString")||(delete F.default.line,null==D||delete D.style.default.line),l.geometryTypes.includes("Polygon")||(delete F.default.polygon,null==D||delete D.style.default.polygon),(0,g.strIsNullOrEmpty)(f)||A(F.default,{expr:f}),"Theme"!=(null==m?void 0:m.kind)?[3,3]:[4,l.getDistinctValues(m.themeOnProperty)];case 2:for(U=r.sent(),V=F.default.point,x=F.default.line,k=F.default.polygon,B=m.colorBrewerTheme,(G=v.default[B])||(G=v.default.Blues),Y=(0,y.getMaxRamp)(G),z=Math.min(U.length,Y.length),W=G[z],j=0;j<z;j++)H=U[j],K=m.themeOnProperty+" == '"+H+"'",Z={label:H,point:S(V,W[j]),line:T(x,W[j]),polygon:L(k,W[j])},(0,g.strIsNullOrEmpty)(f)||A(Z,{expr:f}),F[K]=Z;r.label=3;case 3:return R instanceof p.default&&(0,o.setOLVectorLayerStyle)(R,F,D),[2,this.addLayer(l.name,R)]}}))}))},e}();t.LayerManager=C},69565:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CSV_COLUMN_ALIASES=t.CsvFormatDriver=void 0;var r=n(70655),a=(0,r.__importDefault)(n(64678)),i=n(54845),o=n(7275),s=n(57460),l=function(){function e(e){this.aliases=e,this.type="CSV"}return e.prototype.tryParse=function(e,t){var n=this.aliases,l=this.type;return new Promise((function(u,c){s.parse(t,{header:!0,complete:function(t){var s,p,d=this;if(t.data&&0!=t.data.length)if(t.meta.fields){for(var m=void 0,f=function(n){if(m)return"break";var u=null===(s=t.meta.fields.filter((function(e){return e.toLowerCase()==n.xColumn.toLowerCase()})))||void 0===s?void 0:s[0],c=null===(p=t.meta.fields.filter((function(e){return e.toLowerCase()==n.yColumn.toLowerCase()})))||void 0===p?void 0:p[0];if(!(0,o.strIsNullOrEmpty)(u)&&!(0,o.strIsNullOrEmpty)(c)){var f=t.data[0],_=parseFloat(f[u]),E=parseFloat(f[c]);if(f&&!isNaN(_)&&!isNaN(E)){for(var v={type:"FeatureCollection",features:[]},g=0,y=t.data;g<y.length;g++){var h=y[g],S=parseFloat(h[u]),T=parseFloat(h[c]);if(!isNaN(S)&&!isNaN(T)){var L={type:"Feature",geometry:{coordinates:[S,T],type:"Point"},properties:h};delete L.properties[u],delete L.properties[c],v.features.push(L)}}var I=(new a.default).readFeatures(v),A=[];if(I.length>0)for(var C=I[0],b=0,N=C.getKeys();b<N.length;b++){var O=N[b];O!=C.getGeometryName()&&A.push(O)}return m=new i.ParsedFeatures(l,e,(function(){return(0,r.__awaiter)(d,void 0,void 0,(function(){return(0,r.__generator)(this,(function(e){return[2,I]}))}))}),I.length>0,["Point"],A),"break"}}},_=0,E=n;_<E.length&&"break"!==f(E[_]);_++);m?u(m):c(new Error("Data successfully parsed as CSV, but coordinate columns could not be found"))}else c(new Error("No fields found in CSV metadata"));else c(new Error("No data parsed. Probably not a CSV file"))}})}))},e}();t.CsvFormatDriver=l,t.CSV_COLUMN_ALIASES=[{xColumn:"lon",yColumn:"lat"},{xColumn:"lng",yColumn:"lat"},{xColumn:"longitude",yColumn:"latitude"},{xColumn:"x",yColumn:"y"},{xColumn:"easting",yColumn:"northing"}]},21081:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.addFormatDriver=t.getFormatDrivers=void 0;var n=[];t.getFormatDrivers=function(){return n},t.addFormatDriver=function(e){n.push(e)}},1089:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.FormatDriver=void 0;var r=n(70655),a=n(54845),i=function(){function e(e,t,n){void 0===n&&(n=null),this.type=e,this.format=t,this.defaultProjection=n}return e.prototype.tryParse=function(e,t){return(0,r.__awaiter)(this,void 0,void 0,(function(){var n,i,o,s,l,u,c,p,d,m,f,_,E,v,g,y=this;return(0,r.__generator)(this,(function(h){for(n=this.format.readFeatures(t),i=!1,o=!1,s=!1,l=0,u=n;l<u.length;l++)switch(c=u[l],null==(p=c.getGeometry())?void 0:p.getType()){case"Point":i=!0;break;case"LineString":case"LinearRing":o=!0;break;case"Polygon":s=!0;break;case"MultiPoint":i=!0;break;case"MultiLineString":o=!0;break;case"MultiPolygon":s=!0;break;case"GeometryCollection":i=!0;break;case"Circle":s=!0}if(d=[],i&&d.push("Point"),o&&d.push("LineString"),s&&d.push("Polygon"),m=[],n.length>0)for(f=n[0],_=0,E=f.getKeys();_<E.length;_++)(v=E[_])!=f.getGeometryName()&&m.push(v);return g=function(){return(0,r.__awaiter)(y,void 0,void 0,(function(){return(0,r.__generator)(this,(function(e){return[2,n]}))}))},[2,new a.ParsedFeatures(this.type,e,g,n.length>0,d,m,this.defaultProjection)]}))}))},e}();t.FormatDriver=i},54845:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ParsedFeatures=void 0;var r=n(70655),a=n(7275),i=function(){function e(e,t,n,r,a,i,o){void 0===o&&(o=null),this.type=e,this.size=t,this.features=n,this.hasFeaturesFlag=r,this.geometryTypes=a,this.propertyNames=i,this.projection=o}return e.prototype.hasFeatures=function(){return this.hasFeaturesFlag},e.prototype.addTo=function(e,t,n){return(0,r.__awaiter)(this,void 0,void 0,(function(){var a,i,o,s,l,u;return(0,r.__generator)(this,(function(r){switch(r.label){case 0:return[4,this.features()];case 1:if(a=r.sent(),n)for(i=0,o=a;i<o.length;i++)s=o[i],(l=s.getGeometry())&&(u=l.transform(n,t),s.setGeometry(u));return e.addFeatures(a),[2]}}))}))},e.prototype.getDistinctValues=function(e){return(0,r.__awaiter)(this,void 0,void 0,(function(){var t,n,i,o,s,l;return(0,r.__generator)(this,(function(r){switch(r.label){case 0:return t=[],[4,this.features()];case 1:for(n=r.sent(),i=0,o=n;i<o.length;i++)s=o[i],l=s.get(e),(0,a.strIsNullOrEmpty)(l)||t.includes(l)||t.push(l);return[2,t]}}))}))},e}();t.ParsedFeatures=i},36532:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.LayerSetGroupBase=void 0;var r=n(70655),a=n(29256),i=n(48796),o=n(68093),s=n(5791),l=n(48720),u=n(27792),c=(0,r.__importDefault)(n(86333)),p=(0,r.__importDefault)(n(30933)),d=(0,r.__importDefault)(n(50636)),m=(0,r.__importDefault)(n(3769)),f=(0,r.__importDefault)(n(59220)),_=n(64471),E=(0,r.__importDefault)(n(92479)),v=(0,r.__importDefault)(n(7074)),g=(0,r.__importDefault)(n(20228)),y=n(36645),h=(0,r.__importDefault)(n(51345)),S=(0,r.__importDefault)(n(58958)),T=(0,r.__importDefault)(n(47539)),L=(0,r.__importDefault)(n(21280)),I=(0,r.__importDefault)(n(7061)),A=new T.default({stroke:new S.default({color:"#f00",width:3}),fill:new h.default({color:"rgba(255,0,0,0.1)"}),text:new L.default({font:"12px Calibri,sans-serif",fill:new h.default({color:"#000"}),stroke:new S.default({color:"#f00",width:3})})}),C=function(){function e(e){var t=this;this.callback=e,this.updateTransparency=function(e){return t.mainSet.updateTransparency(e)},this.fitViewToExtent=function(){return t.mainSet.view.fit(t.mainSet.extent)},this.getView=function(){return t.mainSet.view},this.getDpi=function(){return t.mainSet.dpi},this.getExtent=function(){return t.mainSet.extent},this.getLayersForOverviewMap=function(){return t.overviewSet.getLayers()},this.getProjection=function(){return t.mainSet.projection},this.refreshMap=function(e){return t.mainSet.refreshMap(e)},this.showActiveSelectedFeature=function(e,n,r){return t.mainSet.showActiveSelectedFeature(e,n,r)},this.getMetersPerUnit=function(){return t.mainSet.getMetersPerUnit()},this.scaleToResolution=function(e){return t.mainSet.scaleToResolution(e)},this.resolutionToScale=function(e){return t.mainSet.resolutionToScale(e)},this._customLayers={},this.scratchLayer=new c.default({source:new p.default}),this.scratchLayer.set(a.LayerProperty.LAYER_NAME,"__SCRATCH__"),this.scratchLayer.set(a.LayerProperty.IS_SCRATCH,!0),this.wmsSelOverlayLayer=new c.default({source:new p.default}),this.wmsSelOverlayLayer.set(a.LayerProperty.LAYER_NAME,"__WMS_SELECTION_OVERLAY__"),this.wmsSelOverlayLayer.set(a.LayerProperty.IS_WMS_SELECTION_OVERLAY,!0),this.hoverHighlightLayer=new c.default({source:new p.default,style:function(e){return A}}),this.hoverHighlightLayer.set(a.LayerProperty.LAYER_NAME,"__HOVER_HIGHLIGHT__"),this.hoverHighlightLayer.set(a.LayerProperty.IS_HOVER_HIGHLIGHT,!0)}return e.prototype.addHighlightedFeature=function(e){this.hoverHighlightLayer.getSource().addFeature(e)},e.prototype.removeHighlightedFeature=function(e){var t=this.hoverHighlightLayer.getSource();t.hasFeature(e)&&t.removeFeature(e)},e.prototype.clearHighlightedFeatures=function(){this.hoverHighlightLayer.getSource().clear()},e.prototype.tryGetSubjectLayer=function(){},e.prototype.addWmsSelectionOverlay=function(e){this.wmsSelOverlayLayer.getSource().addFeature(e)},e.prototype.clearWmsSelectionOverlay=function(){this.wmsSelOverlayLayer.getSource().clear()},e.prototype.addScratchFeature=function(e){this.scratchLayer.getSource().addFeature(e)},e.prototype.clearScratchLayer=function(){this.scratchLayer.getSource().clear()},e.prototype.registerSourceEvents=function(e){e instanceof d.default?(e.on("imageloadstart",this.callback.addImageLoading),(0,i.isMapGuideImageSource)(e)&&e.on("imageloaderror",this.callback.onImageError),e.on("imageloaderror",this.callback.addImageLoaded),e.on("imageloadend",this.callback.addImageLoaded)):e instanceof m.default&&(e.on("tileloadstart",this.callback.addImageLoading),e.on("tileloaderror",this.callback.addImageLoaded),e.on("tileloadend",this.callback.addImageLoaded))},e.prototype.updateExternalBaseLayers=function(e){this.mainSet.updateExternalBaseLayers(e),this.overviewSet.updateExternalBaseLayers(e)},e.prototype.attach=function(e,t,n){var r=this;void 0===n&&(n=!0);var a=e.getLayers();a.insertAt(0,this.hoverHighlightLayer),a.insertAt(0,this.scratchLayer);var i=Object.keys(this._customLayers).map((function(e){return r._customLayers[e]}));i.sort((function(e,t){return e.order-t.order}));for(var o=0,s=i;o<s.length;o++){var l=s[o];a.remove(l.layer)}for(var u=0,c=i;u<c.length;u++)l=c[u],a.insertAt(0,l.layer);for(var p=this.mainSet.getLayers(),d=p.length-1;d>=0;d--)a.insertAt(0,p[d]);if(e.setView(this.mainSet.view),n){for(var m=t.getOverviewMap(),_=0,E=this.getLayersForOverviewMap();_<E.length;_++){var v=E[_];m.addLayer(v)}var g=this.mainSet.view.getCenter();if(g)m.setView(new f.default({center:[g[0],g[1]],resolution:this.mainSet.view.getResolution(),projection:this.mainSet.view.getProjection()}));else{var y=new f.default({projection:this.mainSet.view.getProjection()});m.setView(y),y.fit(this.mainSet.extent,{size:m.getSize()})}}},e.prototype.detach=function(e,t){for(var n=0,r=this.mainSet.getLayers();n<r.length;n++){var a=r[n];e.removeLayer(a)}for(var i in this._customLayers)e.removeLayer(this._customLayers[i].layer);e.removeLayer(this.scratchLayer),e.removeLayer(this.hoverHighlightLayer);for(var o=this.getLayersForOverviewMap(),s=t.getOverviewMap(),l=0,u=o;l<u.length;l++)a=u[l],s.removeLayer(a)},e.prototype.getCustomLayers=function(e){var t=this;return e.getLayers().getArray().filter((function(e){return null!=t._customLayers[e.get(a.LayerProperty.LAYER_NAME)]})).map((function(e){return(0,r.__assign)((0,r.__assign)({},(0,o.getLayerInfo)(e,!0)),{isSelectable:1==t._customLayers[e.get(a.LayerProperty.LAYER_NAME)].layer.get(a.LayerProperty.IS_SELECTABLE),order:t._customLayers[e.get(a.LayerProperty.LAYER_NAME)].order})})).reverse()},e.prototype.hasLayer=function(e){return null!=this._customLayers[e]},e.prototype.addExternalLayer=function(e,t,n){var r=(0,_.createOLLayerFromSubjectDefn)(t,e.getView().getProjection(),!0,n);return this.addLayer(e,t.name,r)},e.prototype.addLayer=function(e,t,n,i){var u=!!i;if(this._customLayers[t]){if(!u)throw new s.MgError((0,l.tr)("LAYER_NAME_EXISTS",this.callback.getLocale(),{name:t}));e.removeLayer(this._customLayers[t].layer)}n.get(a.LayerProperty.LAYER_NAME)!=t&&n.set(a.LayerProperty.LAYER_NAME,t),n.get(a.LayerProperty.LAYER_DISPLAY_NAME)||n.set(a.LayerProperty.LAYER_DISPLAY_NAME,t),e.removeLayer(n),e.addLayer(n),this._customLayers[t]={layer:n,order:e.getLayers().getArray().indexOf(n)};var c=this.callback.getTileLoaders();for(var p in c){var d=c[p],m=this.getLayer(p);m&&m instanceof E.default&&(_=m.getSource())instanceof v.default&&(_.setTileLoadFunction(d),(0,y.debug)("Added custom tile loader for layer: "+p))}var f=this.callback.getImageLoaders();for(var p in f){d=f[p];var _,h=this.getLayer(p);h&&h instanceof g.default&&"function"==typeof(_=h.getSource()).setImageLoadFunction&&(_.setImageLoadFunction(d),(0,y.debug)("Added custom tile loader for layer: "+p))}return(0,r.__assign)((0,r.__assign)({},(0,o.getLayerInfo)(n,!0)),{isSelectable:1==this._customLayers[t].layer.get(a.LayerProperty.IS_SELECTABLE),order:this._customLayers[t].order})},e.prototype.removeLayer=function(e,t){var n;if(this._customLayers[t])return n=this._customLayers[t].layer,e.removeLayer(n),delete this._customLayers[t],n},e.prototype.getLayer=function(e){var t,n;return this._customLayers[e]&&(n=null===(t=this._customLayers[e])||void 0===t?void 0:t.layer),n},e.prototype.apply=function(e,t){for(var n,r,i=t.reduce((function(e,t){return e[t.name]=t,e}),{}),o=0,s=t;o<s.length;o++){var l=s[o],p=null===(n=this._customLayers[l.name])||void 0===n?void 0:n.layer;p&&(p.setVisible(l.visible),p.setOpacity(l.opacity),p.set(a.LayerProperty.BUSY_WORKER_COUNT,l.busyWorkerCount),p instanceof c.default&&l.vectorStyle&&(0,u.setOLVectorLayerStyle)(p,l.vectorStyle,l.cluster),l.heatmap&&p instanceof I.default&&(p.setBlur(l.heatmap.blur),p.setRadius(l.heatmap.radius)))}for(var d in this._customLayers)if(!i[d]){var m=this.removeLayer(e,d);!0===(null==m?void 0:m.get(a.LayerProperty.IS_MEASURE))&&(r=m)}var f=e.getLayers(),_=f.getArray().map((function(e){return{name:e.get(a.LayerProperty.LAYER_NAME),type:e.get(a.LayerProperty.LAYER_TYPE),isExternal:e.get(a.LayerProperty.IS_EXTERNAL),isGroup:e.get(a.LayerProperty.IS_GROUP),layer:e}})).filter((function(e){return 1==e.isExternal}));if(_.length!=t.length){for(var E=0,v=_;E<v.length;E++){var g=v[E];e.removeLayer(g.layer)}for(var y in this._customLayers)g=this._customLayers[y],e.removeLayer(g.layer);for(var h=t.length-1;h>=0;h--){var S=this._customLayers[t[h].name];S&&(e.addLayer(S.layer),S.order=f.getArray().indexOf(S.layer))}}else{var T=!1,L=0;for(h=t.length-1;h>=0;h--){if((l=t[h]).name!=_[L].name){T=!0;break}L++}if(T){for(var A=0,C=_;A<C.length;A++)g=C[A],e.removeLayer(g.layer);var b=function(n){var r=_.filter((function(e){return e.name==t[n].name}))[0];e.addLayer(r.layer);var a=N._customLayers[t[n].name];a&&(a.order=f.getArray().indexOf(r.layer))},N=this;for(h=t.length-1;h>=0;h--)b(h)}}f.item(f.getLength()-1)!=this.scratchLayer&&(e.removeLayer(this.scratchLayer),e.addLayer(this.scratchLayer)),f.item(f.getLength()-1)!=this.wmsSelOverlayLayer&&(e.removeLayer(this.wmsSelOverlayLayer),e.addLayer(this.wmsSelOverlayLayer)),f.item(f.getLength()-1)!=this.hoverHighlightLayer&&(e.removeLayer(this.hoverHighlightLayer),e.addLayer(this.hoverHighlightLayer)),r&&f.item(f.getLength()-1)!=r&&(e.removeLayer(r),e.addLayer(r))},e}();t.LayerSetGroupBase=C},85670:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.MgInnerLayerSetFactory=t.MgLayerSetOL=t.MgLayerSetMode=t.mockMapGuideImageLoadFunction=t.blankImageLoadFunction=t.toProjUnit=void 0;var r,a=n(70655),i=n(29256),o=(0,a.__importDefault)(n(68734)),s=(0,a.__importDefault)(n(8738)),l=(0,a.__importDefault)(n(3769)),u=n(48796),c=(0,a.__importDefault)(n(39293)),p=n(65539),d=(0,a.__importDefault)(n(59220)),m=(0,a.__importStar)(n(28641)),f=(0,a.__importDefault)(n(92479)),_=(0,a.__importDefault)(n(20228)),E=n(64471),v=n(7275),g=n(87755),y=n(48720),h=(0,a.__importStar)(n(40177)),S=n(36645),T=(0,a.__importDefault)(n(7074)),L=n(95601),I=n(67960),A=n(26414),C=n(12694),b=n(5791),N=n(57600),O=[-20026376.39,-20048966.1,20026376.39,20048966.1],M=[-180,-90,180,90];function P(e){switch(e){case i.UnitOfMeasure.Meters:return"m";case i.UnitOfMeasure.Feet:return"ft";case i.UnitOfMeasure.Inches:return"in";case i.UnitOfMeasure.Centimeters:return"cm";case i.UnitOfMeasure.Kilometers:return"km";case i.UnitOfMeasure.Yards:return"yd";case i.UnitOfMeasure.Millimeters:return"mm";case i.UnitOfMeasure.Miles:return"mi";case i.UnitOfMeasure.NauticalMiles:return"nm";case i.UnitOfMeasure.Pixels:return"px"}}t.toProjUnit=P,t.blankImageLoadFunction=function(e){e.getImage().src=L.BLANK_GIF_DATA_URI},t.mockMapGuideImageLoadFunction=function(e,t){var n=document.getElementById("mg-debug-text-canvas");n||((n=document.createElement("canvas")).style.visibility="hidden",n.id="mg-debug-text-canvas",document.body.append(n));var r=n.getContext("2d");if(r){r.clearRect(0,0,r.canvas.width,r.canvas.height);var a=[],i=(0,g.parseUrl)(t);a.push("[Mock MapGuide Map Image Request]"),a.push("Agent: "+i.url);var o=r.measureText(a[0]).width+10,s=46;o=Math.max(r.measureText(a[1]).width+10,o),s+=16;for(var l=0,u=Object.keys(i.query);l<u.length;l++){var c=u[l];if(("MAPNAME"==c||"SETDISPLAYWIDTH"==c||"SETDISPLAYHEIGHT"==c||"SETVIEWCENTERX"==c||"SETVIEWCENTERY"==c||"SETVIEWSCALE"==c)&&!(0,v.strIsNullOrEmpty)(i.query[c])){var p=c+": "+i.query[c];a.push(p),o=Math.max(r.measureText(p).width+10,o),s+=16}}r.canvas.width=o,r.canvas.height=s,r.fillStyle="rgba(255, 0, 0, 0.5)",r.fillRect(0,0,o,s),r.fillStyle="rgba(255, 255, 0, 1.0)",r.font="14px sans-serif";for(var d=30,m=0,f=a;m<f.length;m++){var _=f[m];r.fillText(_,10,d),d+=15}e.getImage().src=r.canvas.toDataURL()}},function(e){e[e.Stateless=0]="Stateless",e[e.Stateful=1]="Stateful",e[e.OverviewMap=2]="OverviewMap"}(r=t.MgLayerSetMode||(t.MgLayerSetMode={}));var R=function(){function e(e,t,n,r,a,i,o,s){this.mgTiledLayers=e,this.externalBaseLayersGroup=t,this.overlay=n,this.projection=r,this.dpi=a,this.extent=i,this.inPerUnit=o,this.view=s}return e.prototype.getMetersPerUnit=function(){return this.inPerUnit/39.37},e.prototype.scaleToResolution=function(e){return e/this.inPerUnit/this.dpi*h.DEVICE_PIXEL_RATIO},e.prototype.resolutionToScale=function(e){return e*this.dpi*this.inPerUnit/h.DEVICE_PIXEL_RATIO},e.prototype.getSourcesForProgressTracking=function(){var e=[];if(this.externalBaseLayersGroup)for(var t=0,n=this.externalBaseLayersGroup.getLayersArray();t<n.length;t++){var r=n[t];(r instanceof _.default||r instanceof f.default)&&e.push(r.getSource())}for(var a=this.mgTiledLayers.length-1;a>=0;a--)e.push(this.mgTiledLayers[a].getSource());return e.push(this.overlay.getSource()),this.selectionOverlay&&e.push(this.selectionOverlay.getSource()),this.activeSelectedFeatureOverlay&&e.push(this.activeSelectedFeatureOverlay.getSource()),e},e.prototype.getLayers=function(){var e=[];this.externalBaseLayersGroup&&e.push(this.externalBaseLayersGroup);for(var t=this.mgTiledLayers.length-1;t>=0;t--)e.push(this.mgTiledLayers[t]);return e.push(this.overlay),this.selectionOverlay&&e.push(this.selectionOverlay),this.activeSelectedFeatureOverlay&&e.push(this.activeSelectedFeatureOverlay),e},e.prototype.update=function(e,t,n,r){if(this.overlay.getSource().updateParams({showlayers:t,showgroups:e,hidelayers:r,hidegroups:n}),e&&e.length>0)for(var a=function(e){var t=o.mgTiledLayers.filter((function(t){return t.get(i.LayerProperty.LAYER_NAME)===e}));1==t.length&&t[0].setVisible(!0)},o=this,s=0,l=e;s<l.length;s++)a(l[s]);if(n&&n.length>0)for(var u=function(e){var t=c.mgTiledLayers.filter((function(t){return t.get(i.LayerProperty.LAYER_NAME)===e}));1==t.length&&t[0].setVisible(!1)},c=this,p=0,d=n;p<d.length;p++)u(d[p])},e.prototype.updateSelectionColor=function(e){this.selectionOverlay&&this.selectionOverlay.getSource().updateParams({SELECTIONCOLOR:e})},e.prototype.updateExternalBaseLayers=function(e){this.externalBaseLayersGroup&&this.externalBaseLayersGroup.getLayers().forEach((function(t){var n=(e||[]).filter((function(e){return e.name===t.get("title")}));1==n.length?t.setVisible(!!n[0].visible):t.setVisible(!1)}))},e.prototype.updateTransparency=function(e){if(this.externalBaseLayersGroup&&(L.LAYER_ID_BASE in e?this.externalBaseLayersGroup.setOpacity((0,p.restrictToRange)(e[L.LAYER_ID_BASE],0,1)):this.externalBaseLayersGroup.setOpacity(1)),L.LAYER_ID_MG_BASE in e){var t=(0,p.restrictToRange)(e[L.LAYER_ID_MG_BASE],0,1);this.overlay.setOpacity(t);for(var n=0,r=this.mgTiledLayers;n<r.length;n++)r[n].setOpacity(t)}else{this.overlay.setOpacity(1);for(var a=0,i=this.mgTiledLayers;a<i.length;a++)i[a].setOpacity(1)}this.selectionOverlay&&(L.LAYER_ID_MG_SEL_OVERLAY in e?this.selectionOverlay.setOpacity((0,p.restrictToRange)(e[L.LAYER_ID_MG_SEL_OVERLAY],0,1)):this.selectionOverlay.setOpacity(1))},e.prototype.refreshMap=function(e){void 0===e&&(e=i.RefreshMode.LayersOnly|i.RefreshMode.SelectionOnly),(e&i.RefreshMode.LayersOnly)==i.RefreshMode.LayersOnly&&this.overlay.getSource().updateParams({seq:(new Date).getTime()}),this.selectionOverlay&&(e&i.RefreshMode.SelectionOnly)==i.RefreshMode.SelectionOnly&&this.selectionOverlay.getSource().updateParams({seq:(new Date).getTime()})},e.prototype.makeActiveSelectedFeatureSource=function(e,t,n){return void 0===n&&(n=L.BLANK_GIF_DATA_URI),new c.default({imageExtent:e,imageSize:[t.w,t.h],url:n})},e.prototype.showActiveSelectedFeature=function(e,t,n){this.activeSelectedFeatureOverlay&&(this.activeSelectedFeatureOverlay.setSource(this.makeActiveSelectedFeatureSource(e,t,n)),this.activeSelectedFeatureOverlay.setVisible(!0))},e}();t.MgLayerSetOL=R;var D=function(){function e(e,t,n,r,a,i){this.callback=e,this.map=t,this.agentUri=n,(0,C.isRuntimeMap)(t)&&(this.dynamicOverlayParams={MAPNAME:t.Name,FORMAT:r,SESSION:t.SessionId,BEHAVIOR:2},this.staticOverlayParams={MAPDEFINITION:t.MapDefinition,FORMAT:r,CLIENTAGENT:"ol.source.ImageMapGuide for OverviewMap",USERNAME:"Anonymous",VERSION:"3.0.0"},this.selectionOverlayParams={MAPNAME:t.Name,FORMAT:a||"PNG8",SESSION:t.SessionId,SELECTIONCOLOR:i,BEHAVIOR:5})}return e.prototype.getTileUrlFunctionForGroup=function(e,t,n){var r=this.callback.getClient().getTileTemplateUrl(e,t,"{x}","{y}","{z}");return function(e){var t=e[0],a=e[1],i=e[2];return r.replace("{z}",(n-t).toString()).replace("{x}",a.toString()).replace("{y}",i.toString())}},e.prototype.create=function(e,t,n,a){var u,p=this,g=this.map,h=this.agentUri;if((0,C.isRuntimeMap)(g)){if((0,v.strIsNullOrEmpty)(h))throw new b.MgError("Expected agentUri to be set");var T=g.TileSetDefinition||g.MapDefinition,D=g.TileWidth||300,w=g.TileHeight||300,F=g.CoordinateSystem.MetersPerUnit,U=[];if(g.FiniteDisplayScale)for(var V=g.FiniteDisplayScale.length-1;V>=0;V--)U.push(g.FiniteDisplayScale[V]);var x=[g.Extents.LowerLeftCoordinate.X,g.Extents.LowerLeftCoordinate.Y,g.Extents.UpperRightCoordinate.X,g.Extents.UpperRightCoordinate.Y],k=g.DisplayDpi,B=39.37*g.CoordinateSystem.MetersPerUnit,G=new Array(U.length),Y=void 0;for(V=0;V<U.length;++V)G[V]=U[V]/B/k;(re=(0,N.tryParseArbitraryCs)(g.CoordinateSystem.MentorCode))?Y=new A.Projection({code:re.code,units:P(re.units)}):g.CoordinateSystem.EpsgCode.length>0&&(Y="EPSG:"+g.CoordinateSystem.EpsgCode);var z=new s.default({origin:m.getTopLeft(x),resolutions:G,tileSize:[D,w]}),W=U.length-1,j=[];if(g.Group)for(V=0;V<g.Group.length;V++){var H=g.Group[V];if(2==H.Type||3==H.Type){var K=new l.default({tileGrid:z,projection:Y,tileUrlFunction:this.getTileUrlFunctionForGroup(T,H.Name,W),wrapX:!1}),Z=new f.default({source:K});Z.set(i.LayerProperty.LAYER_NAME,H.ObjectId),Z.set(i.LayerProperty.LAYER_DISPLAY_NAME,H.ObjectId),Z.set(i.LayerProperty.LAYER_TYPE,i.MgLayerType.Tiled),Z.set(i.LayerProperty.IS_EXTERNAL,!1),Z.set(i.LayerProperty.IS_GROUP,!1),Z.setVisible(H.Visible),j.push(Z)}}var X=this.createMgOverlayLayer(i.MgBuiltInLayers.Overlay,h,e,F,Y,n==r.Stateful,n==r.Stateful?this.dynamicOverlayParams:this.staticOverlayParams),q=void 0,Q=void 0;n==r.Stateful&&(q=this.createMgOverlayLayer(i.MgBuiltInLayers.SelectionOverlay,h,e,F,Y,!0,this.selectionOverlayParams)),n==r.Stateful&&((Q=new _.default({source:new c.default({imageExtent:x,imageSize:[i.BLANK_SIZE.w,i.BLANK_SIZE.h],url:L.BLANK_GIF_DATA_URI})})).set(i.LayerProperty.LAYER_NAME,i.MgBuiltInLayers.ActiveFeatureSelectionOverlay),Q.set(i.LayerProperty.LAYER_DISPLAY_NAME,i.MgBuiltInLayers.ActiveFeatureSelectionOverlay),Q.set(i.LayerProperty.LAYER_TYPE,i.MG_LAYER_TYPE_NAME),Q.set(i.LayerProperty.IS_EXTERNAL,!1),Q.set(i.LayerProperty.IS_GROUP,!1));var J=void 0;if(n!=r.OverviewMap&&null!=t){var $={title:(0,y.tr)("EXTERNAL_BASE_LAYERS",e),layers:t.map((function(e){return p.createExternalBaseLayer(e)}))};(J=new o.default($)).set(i.LayerProperty.LAYER_NAME,i.MG_BASE_LAYER_GROUP_NAME),J.set(i.LayerProperty.LAYER_DISPLAY_NAME,i.MG_BASE_LAYER_GROUP_NAME),J.set(i.LayerProperty.IS_EXTERNAL,!1),J.set(i.LayerProperty.IS_GROUP,!0)}(0,S.debug)("Creating OL view with projection "+Y+" and "+G.length+" resolutions");var ee=void 0;ee=0==G.length?new d.default({projection:Y}):new d.default({projection:Y,resolutions:G});var te=new R(j,J,X,Y,k,x,B,ee);return te.selectionOverlay=q,te.activeSelectedFeatureOverlay=Q,te}Y=null===(u=null==g?void 0:g.meta)||void 0===u?void 0:u.projection;var ne=void 0;J=void 0,null!=t&&($={title:(0,y.tr)("EXTERNAL_BASE_LAYERS",e),layers:t.map((function(e){return p.createExternalBaseLayer(e)}))},(J=new o.default($)).set(i.LayerProperty.LAYER_NAME,i.MG_BASE_LAYER_GROUP_NAME),J.set(i.LayerProperty.IS_EXTERNAL,!1),J.set(i.LayerProperty.IS_GROUP,!0),Y="EPSG:3857",ne=O);var re,ae=void 0;return g&&(ae=(0,E.createOLLayerFromSubjectDefn)(g,Y,!1,a),g.meta&&(Y=g.meta.projection,ne=g.meta.extents)),Y||ne||(Y="EPSG:4326",ne=M),F=1,(re=(0,N.tryParseArbitraryCs)(Y))?Y=new A.Projection({code:re.code,units:P(re.units),extent:ne}):F=function(e){return(0,A.get)(e).getMetersPerUnit()}(Y),ee=new d.default({projection:Y}),new I.GenericLayerSetOL(ee,ae,ne,J,Y,F)},e.prototype.createExternalBaseLayer=function(e){var t=(0,E.createExternalSource)(e);if(t instanceof T.default){var n=this.callback.getBaseTileLoaders();n[e.name]&&t.setTileLoadFunction(n[e.name])}var r={title:e.name,type:"base",visible:!0===e.visible,source:t},a=new f.default(r);return a.set(i.LayerProperty.LAYER_TYPE,e.kind),a.set(i.LayerProperty.LAYER_NAME,e.name),a.set(i.LayerProperty.LAYER_DISPLAY_NAME,e.name),a.set(i.LayerProperty.IS_EXTERNAL,!1),a.set(i.LayerProperty.IS_GROUP,!1),a},e.prototype.createMgOverlayLayer=function(e,t,n,r,a,o,s){var l=(0,u.createMapGuideSource)({projection:a,url:t,useOverlay:o,metersPerUnit:r,params:s,ratio:1,displayDpi:96*Math.floor(h.DEVICE_PIXEL_RATIO)});l.setAttributions((0,y.tr)("PBMG",null!=n?n:y.DEFAULT_LOCALE));var c=new _.default({source:l});return c.set(i.LayerProperty.LAYER_NAME,e),c.set(i.LayerProperty.LAYER_DISPLAY_NAME,e),c.set(i.LayerProperty.LAYER_TYPE,i.MG_LAYER_TYPE_NAME),c.set(i.LayerProperty.IS_EXTERNAL,!1),c.set(i.LayerProperty.IS_GROUP,!1),c},e}();t.MgInnerLayerSetFactory=D},42624:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.AsyncLazy=t.Lazy=void 0;var n=function(){function e(e){this.value=e}return e.prototype.getValue=function(){return this._value||(this._value=this.value()),this._value},e}();t.Lazy=n;var r=function(){function e(e){this.value=e}return e.prototype.getValueAsync=function(){return this._value||(this._value=this.value()),this._value},e}();t.AsyncLazy=r},26227:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.initMapGuideCommands=void 0;var r=n(70655),a=n(95348),i=n(44839),o=n(81876),s=n(87755),l=n(29256),u=n(93762),c=n(48720),p=n(61739),d=n(86356),m=(0,r.__importStar)(n(28641)),f=n(87308);t.initMapGuideCommands=function(){(0,a.registerCommand)(a.DefaultCommands.MapTip,{iconClass:i.SPRITE_MAPTIP,selected:function(e){return!0===e.featureTooltipsEnabled},enabled:function(e){return!e.stateless},invoke:function(e,t){var n=t().viewer.featureTooltipsEnabled;return e((0,o.setFeatureTooltipsEnabled)(!n))}}),(0,a.registerCommand)(a.DefaultCommands.QuickPlot,{iconClass:i.SPRITE_PRINT,selected:function(){return!1},enabled:function(e){return!e.stateless},invoke:function(e,t,n,r){var i=t().config,o=(0,p.buildTargetedCommand)(i,r);(0,a.openUrlInTarget)(a.DefaultCommands.QuickPlot,o,i.capabilities.hasTaskPane,e,"component://QuickPlot")}}),(0,a.registerCommand)(a.DefaultCommands.ViewerOptions,{iconClass:i.SPRITE_OPTIONS,selected:function(){return!1},enabled:function(){return!0},invoke:function(e,t,n,r){var i=t().config,o=(0,p.buildTargetedCommand)(i,r);(0,a.openUrlInTarget)(a.DefaultCommands.ViewerOptions,o,i.capabilities.hasTaskPane,e,"component://ViewerOptions",(0,c.tr)("VIEWER_OPTIONS",i.locale))}}),(0,a.registerCommand)(a.DefaultCommands.SelectRadius,{iconClass:i.SPRITE_SELECT_RADIUS,selected:function(){return!1},enabled:function(e){return!e.stateless},invoke:function(e,t,n,r){if(n){var a=r.SelectionType||"INTERSECTS";n.digitizeCircle((function(e){var t,r=n.getOLFactory().createGeomPolygonFromCircle(e);null===(t=n.mapguideSupport())||void 0===t||t.selectByGeometry(r,a)}))}}}),(0,a.registerCommand)(a.DefaultCommands.SelectPolygon,{iconClass:i.SPRITE_SELECT_POLYGON,selected:function(){return!1},enabled:function(e){return!e.stateless},invoke:function(e,t,n,r){if(n){var a=r.SelectionType||"INTERSECTS";n.digitizePolygon((function(e){var t;null===(t=n.mapguideSupport())||void 0===t||t.selectByGeometry(e,a)}))}}}),(0,a.registerCommand)(a.DefaultCommands.ClearSelection,{iconClass:i.SPRITE_SELECT_CLEAR,selected:function(){return!1},enabled:function(e){return a.CommandConditions.hasSelection(e)||a.CommandConditions.hasClientSelection(e)},invoke:function(e,t,n){var r,a=t();a.config.activeMapName&&e((0,o.clearClientSelection)(a.config.activeMapName)),null===(r=null==n?void 0:n.mapguideSupport())||void 0===r||r.clearSelection()}}),(0,a.registerCommand)(a.DefaultCommands.ZoomToSelection,{iconClass:i.SPRITE_ICON_ZOOMSELECT,selected:function(){return!1},enabled:function(e){return a.CommandConditions.hasSelection(e)||a.CommandConditions.hasClientSelection(e)},invoke:function(e,t,n){if(n){n.getOLFactory();var r=t(),a=(0,l.getSelectionSet)(r),i=void 0;r.config.activeMapName&&(i=r.mapState[r.config.activeMapName].clientSelection);var s=new f.CompositeSelection(null==a?void 0:a.SelectedFeatures,i).getBounds();if(s){var u=n.getViewForExtent(s);e((0,o.setCurrentView)(u))}}}}),(0,a.registerCommand)(a.DefaultCommands.Buffer,{iconClass:i.SPRITE_BUFFER,selected:function(){return!1},enabled:function(e){return!e.stateless&&a.CommandConditions.hasSelection(e)},invoke:function(e,t,n,r){var i=t(),o=(0,l.getRuntimeMap)(i),c=i.config;if(o){var d=(0,s.ensureParameters)((0,u.getFusionRoot)()+"/widgets/BufferPanel/BufferPanel.php",o.Name,o.SessionId,c.locale,!1);d+="&popup=false&us=0";var m=(0,p.buildTargetedCommand)(c,r);(0,a.openUrlInTarget)(a.DefaultCommands.Buffer,m,c.capabilities.hasTaskPane,e,d)}}}),(0,a.registerCommand)(a.DefaultCommands.SelectWithin,{iconClass:i.SPRITE_SELECT_FEATURES,selected:function(){return!1},enabled:function(e,t){return!e.stateless&&!a.CommandConditions.disabledIfEmptySelection(e,t)},invoke:function(e,t,n,r){var i=t(),o=(0,l.getRuntimeMap)(i),c=i.config;if(o){var d=(0,s.ensureParameters)((0,u.getFusionRoot)()+"/widgets/SelectWithin/SelectWithinPanel.php",o.Name,o.SessionId,c.locale,!1);d+="&popup=false";var m=(0,p.buildTargetedCommand)(c,r);(0,a.openUrlInTarget)(a.DefaultCommands.SelectWithin,m,c.capabilities.hasTaskPane,e,d)}}}),(0,a.registerCommand)(a.DefaultCommands.Redline,{iconClass:i.SPRITE_REDLINE,selected:function(){return!1},enabled:function(e){return!e.stateless&&a.CommandConditions.isNotBusy(e)},invoke:function(e,t,n,r){var i=t(),o=(0,l.getRuntimeMap)(i),c=i.config;if(o){var m=!0,f=null,_=0,E=!1;if(r.AutogenerateLayerNames&&r.StylizationType&&(m="advanced"==r.StylizationType),r.DataStoreFormat&&r.RedlineGeometryFormat&&("SDF"==r.DataStoreFormat||"SHP"==r.DataStoreFormat||"SQLite"==r.DataStoreFormat)){var v=parseInt(r.RedlineGeometryFormat);"SHP"==r.DataStoreFormat&&1!=v&&2!=v&&4!=v||(f=r.DataStoreFormat,_=v,r.AutoCreateOnStartup&&(E="true"==r.AutoCreateOnStartup))}(0,d.enableRedlineMessagePrompt)("true"==r.UseMapMessage);var g=(0,s.ensureParameters)((0,u.getFusionRoot)()+"/widgets/Redline/markupmain.php",o.Name,o.SessionId,c.locale,!0);g+="&POPUP=false",null!=f&&_>0&&(g+="&REDLINEFORMAT="+f,g+="&REDLINEGEOMTYPE="+_,g+="&AUTOCREATE="+(E?"1":"0")),g+="&REDLINESTYLIZATION="+(m?"ADVANCED":"BASIC");var y=(0,p.buildTargetedCommand)(c,r);(0,a.openUrlInTarget)(a.DefaultCommands.Redline,y,c.capabilities.hasTaskPane,e,g)}}}),(0,a.registerCommand)(a.DefaultCommands.FeatureInfo,{iconClass:i.SPRITE_FEATURE_INFO,selected:function(){return!1},enabled:function(e){return!e.stateless&&a.CommandConditions.isNotBusy(e)},invoke:function(e,t,n,r){var i=t(),o=(0,l.getRuntimeMap)(i),c=i.config;if(o){var d=(0,s.ensureParameters)((0,u.getFusionRoot)()+"/widgets/FeatureInfo/featureinfomain.php",o.Name,o.SessionId,c.locale,!0),m=(0,p.buildTargetedCommand)(c,r);(0,a.openUrlInTarget)(a.DefaultCommands.FeatureInfo,m,c.capabilities.hasTaskPane,e,d)}}}),(0,a.registerCommand)(a.DefaultCommands.Query,{iconClass:i.SPRITE_QUERY,selected:function(){return!1},enabled:function(e){return!e.stateless&&a.CommandConditions.isNotBusy(e)},invoke:function(e,t,n,r){var i=t(),o=(0,l.getRuntimeMap)(i),c=i.config;if(o){var d=(0,s.ensureParameters)((0,u.getFusionRoot)()+"/widgets/Query/querymain.php",o.Name,o.SessionId,c.locale,!0),m=(0,p.buildTargetedCommand)(c,r);(0,a.openUrlInTarget)(a.DefaultCommands.Query,m,c.capabilities.hasTaskPane,e,d)}}}),(0,a.registerCommand)(a.DefaultCommands.Theme,{iconClass:i.SPRITE_THEME,selected:function(){return!1},enabled:function(e){return!e.stateless&&a.CommandConditions.isNotBusy(e)},invoke:function(e,t,n,r){var i=t(),o=(0,l.getRuntimeMap)(i),c=i.config;if(o){var d=(0,s.ensureParameters)((0,u.getFusionRoot)()+"/widgets/Theme/thememain.php",o.Name,o.SessionId,c.locale,!0),m=(0,p.buildTargetedCommand)(c,r);(0,a.openUrlInTarget)(a.DefaultCommands.Theme,m,c.capabilities.hasTaskPane,e,d)}}}),(0,a.registerCommand)(a.DefaultCommands.CenterSelection,{iconClass:i.SPRITE_SELECT_CENTRE,selected:function(){return!1},enabled:function(e){return!e.stateless&&a.CommandConditions.hasSelection(e)},invoke:function(e,t,n){var r,a,i=t(),s=i.config.activeMapName;if(s&&n){var l=i.mapState[s],u=null===(a=null===(r=null==l?void 0:l.mapguide)||void 0===r?void 0:r.selectionSet)||void 0===a?void 0:a.SelectedFeatures;if(u){for(var c=void 0,p=0,d=u.SelectedLayer;p<d.length;p++)for(var f=0,_=d[p].Feature.filter((function(e){return null!=e.Bounds}));f<_.length;f++){var E=_[f].Bounds.split(" ").map((function(e){return parseFloat(e)}));c=c?m.extend(c,E):E}if(c){var v=n.getViewForExtent(c);e((0,o.setCurrentView)(v))}}}}})}},43162:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.registerMapGuideComponents=void 0;var r=n(70655),a=(0,r.__importStar)(n(67294)),i=n(49829),o=n(61623),s=n(12017),l=n(43458),u=n(73765),c=n(25386),p=n(75313),d=n(37979);t.registerMapGuideComponents=function(){(0,d.registerComponentFactory)(d.DefaultComponentNames.Legend,(function(e){return a.createElement(i.LegendContainer,(0,r.__assign)({},e))})),(0,d.registerComponentFactory)(d.DefaultComponentNames.SelectionPanel,(function(e){return a.createElement(s.SelectionPanelContainer,(0,r.__assign)({},e))})),(0,d.registerComponentFactory)(d.DefaultComponentNames.SelectedFeatureCount,(function(e){return a.createElement(o.SelectedFeatureCountContainer,(0,r.__assign)({},e))})),(0,d.registerComponentFactory)(d.DefaultComponentNames.PoweredByMapGuide,(function(e){return a.createElement(l.PoweredByMapGuide,(0,r.__assign)({},e))})),(0,d.registerComponentFactory)(d.DefaultComponentNames.SessionExpired,(function(e){return a.createElement(u.SessionExpired,(0,r.__assign)({},e))})),(0,d.registerComponentFactory)(d.DefaultComponentNames.ViewerOptions,(function(e){return a.createElement(c.ViewerOptions,(0,r.__assign)({},e))})),(0,d.registerComponentFactory)(d.DefaultComponentNames.QuickPlot,(function(e){return a.createElement(p.QuickPlotContainer,(0,r.__assign)({},e))}))}},12966:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.MgLayerSetGroup=void 0;var r=n(70655),a=n(29256),i=n(50636),o=(0,r.__importDefault)(n(68968)),s=(0,r.__importDefault)(n(20228)),l=n(85261),u=n(36532),c=n(85670),p=n(12039),d=n(12694),m=n(7275),f=n(5791),_=n(67960),E=(0,r.__importDefault)(n(20228)),v=(0,r.__importDefault)(n(92479)),g=(0,r.__importDefault)(n(14409)),y=(0,r.__importDefault)(n(42225)),h=function(e){function t(t,n){var r=e.call(this,n)||this;r.updateSelectionColor=function(e){return r.mainSet.updateSelectionColor(e)},r.update=function(e,t,n,a){return r.mainSet.update(e,t,n,a)};var i=t.map,o=t.agentUri,s=(0,d.isRuntimeMap)(i),l=(0,m.strIsNullOrEmpty)(o);if(s&&l)throw new f.MgError("Expected agentUri to be set");var u=new c.MgInnerLayerSetFactory(n,i,o,t.imageFormat,t.selectionImageFormat,t.selectionColor);r.mainSet=u.create(t.locale,t.externalBaseLayers,t.stateless?c.MgLayerSetMode.Stateless:c.MgLayerSetMode.Stateful,t.appSettings),r.overviewSet=u.create(t.locale,t.externalBaseLayers,c.MgLayerSetMode.OverviewMap,t.appSettings);for(var p=0,_=r.mainSet.getSourcesForProgressTracking();p<_.length;p++){var E=_[p];1!=E.get(a.SourceProperty.SUPPRESS_LOAD_EVENTS)&&r.registerSourceEvents(E)}return r}return(0,r.__extends)(t,e),t.prototype.tryGetSubjectLayer=function(){return this.mainSet instanceof _.GenericLayerSetOL?this.mainSet.subjectLayer:this.mainSet instanceof c.MgLayerSetOL?this.mainSet.overlay:void 0},t.prototype.tryGetWmsSource=function(){var e=this.tryGetSubjectLayer();if(e instanceof E.default||e instanceof v.default){var t=e.getSource();if(t instanceof y.default||t instanceof g.default)return[e,t]}},t.prototype.setMapGuideMocking=function(e){for(var t=0,n=this.mainSet.getLayers();t<n.length;t++){var r=n[t];if(r instanceof s.default){var a=r.getSource();if(a instanceof o.default)if(void 0!==e)switch(e){case p.MapGuideMockMode.RenderPlaceholder:a.setImageLoadFunction(c.mockMapGuideImageLoadFunction);break;case p.MapGuideMockMode.DoNotRender:a.setImageLoadFunction(c.blankImageLoadFunction);break;default:(0,l.assertNever)(e)}else a.setImageLoadFunction(i.defaultImageLoadFunction)}}},t}(u.LayerSetGroupBase);t.MgLayerSetGroup=h},70377:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.OLFactory=void 0;var r=n(70655),a=(0,r.__importDefault)(n(60188)),i=(0,r.__importDefault)(n(92083)),o=(0,r.__importDefault)(n(57276)),s=(0,r.__importStar)(n(2033)),l=(0,r.__importDefault)(n(67538)),u=(0,r.__importDefault)(n(7403)),c=(0,r.__importDefault)(n(36259)),p=(0,r.__importDefault)(n(25063)),d=(0,r.__importDefault)(n(13958)),m=(0,r.__importDefault)(n(43223)),f=(0,r.__importStar)(n(28641)),_=(0,r.__importStar)(n(26414)),E=(0,r.__importDefault)(n(29619)),v=(0,r.__importDefault)(n(86333)),g=(0,r.__importDefault)(n(30933)),y=(0,r.__importDefault)(n(78714)),h=(0,r.__importDefault)(n(81090)),S=(0,r.__importDefault)(n(92420)),T=(0,r.__importDefault)(n(6002)),L=(0,r.__importDefault)(n(35010)),I=(0,r.__importDefault)(n(33232)),A=(0,r.__importDefault)(n(78373)),C=(0,r.__importDefault)(n(7517)),b=(0,r.__importDefault)(n(64678)),N=(0,r.__importDefault)(n(75861)),O=(0,r.__importDefault)(n(47539)),M=(0,r.__importDefault)(n(72846)),P=(0,r.__importDefault)(n(35393)),R=(0,r.__importDefault)(n(21280)),D=(0,r.__importDefault)(n(51345)),w=(0,r.__importDefault)(n(58958)),F=(0,r.__importDefault)(n(30283)),U=function(){function e(){}return e.prototype.createStyle=function(e){return new O.default(e)},e.prototype.createStyleFill=function(e){return new D.default(e)},e.prototype.createStyleStroke=function(e){return new w.default(e)},e.prototype.createStyleCircle=function(e){return new F.default(e)},e.prototype.createFeatureCollection=function(){return new y.default},e.prototype.extentContainsXY=function(e,t,n){return f.containsXY(e,t,n)},e.prototype.extendExtent=function(e,t){return f.extend(e,t)},e.prototype.createProjection=function(e){return new E.default(e)},e.prototype.transformCoordinateFromLonLat=function(e,t){return _.fromLonLat(e,t)},e.prototype.transformCoordinate=function(e,t,n){return _.transform(e,t,n)},e.prototype.transformExtent=function(e,t,n){return _.transformExtent(e,t,n)},e.prototype.createGeomPoint=function(e){return new a.default(e)},e.prototype.createGeomLineString=function(e){return new i.default(e)},e.prototype.createGeomCircle=function(e,t){return new o.default(e,t)},e.prototype.createGeomLinearRing=function(e){return new l.default(e)},e.prototype.createGeomPolygon=function(e){return new s.default(e)},e.prototype.createGeomPolygonFromCircle=function(e){return(0,s.fromCircle)(e)},e.prototype.createGeomMultiLineString=function(e){return new u.default(e)},e.prototype.createGeomMultiPoint=function(e){return new c.default(e)},e.prototype.createGeomMultiPolygon=function(e){return new p.default(e)},e.prototype.createGeomCollection=function(e){return new d.default(e)},e.prototype.createVectorSource=function(e){return new g.default(e)},e.prototype.createVectorLayer=function(e){return new v.default(e)},e.prototype.createOverlay=function(e){return new m.default(e)},e.prototype.createInteractionDraw=function(e){return new L.default(e)},e.prototype.createInteractionExtent=function(e){return new S.default(e)},e.prototype.createInteractionTranslate=function(e){return new I.default(e)},e.prototype.createInteractionSnap=function(e){return new T.default(e)},e.prototype.createInteractionModify=function(e){return new A.default(e)},e.prototype.createInteractionSelect=function(e){return new C.default(e)},e.prototype.createFeature=function(e){return new h.default(e)},e.prototype.createFormatGeoJSON=function(e){return new b.default(e)},e.prototype.createFormatWKT=function(e){return new N.default(e)},e.prototype.createStyleIcon=function(e){return new M.default(e)},e.prototype.createStyleRegularShape=function(e){return new P.default(e)},e.prototype.createStyleText=function(e){return new R.default(e)},e}();t.OLFactory=U},48796:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createMapGuideSource=t.isMapGuideImageSource=void 0;var r=(0,n(70655).__importDefault)(n(68968));t.isMapGuideImageSource=function(e){return void 0!==e.updateParams},t.createMapGuideSource=function(e){return new r.default(e)}},35225:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.tryBuildTextStyle=t.buildFill=t.buildStroke=t.evalFeature=void 0;var r=n(70655),a=n(78113),i=(0,r.__importDefault)(n(21280)),o=(0,r.__importDefault)(n(58958)),s=(0,r.__importDefault)(n(51345)),l=n(79706);function u(e,t){var n=(0,l.asArray)(e);return void 0!==t&&(n[3]=t/255),n}function c(e,t,n){if(!(0,a.isEvaluatable)(e))return e;if(t&&n)try{return n.evaluate(e.expr,t)}catch(e){return}}function p(e,t,n){void 0!==n&&(e[t]=n)}function d(e,t,n){return new o.default({color:u(c(e.color,t,n),c(e.alpha,t,n)),width:c(e.width,t,n)})}function m(e,t,n){return new s.default({color:u(c(e.color,t,n),c(e.alpha,t,n))})}t.evalFeature=c,t.buildStroke=d,t.buildFill=m,t.tryBuildTextStyle=function(e,t,n){var r=e.label;if(r){var a={};p(a,"font",c(r.font,t,n)),p(a,"maxAngle",c(r.maxAngle,t,n)),p(a,"offsetX",c(r.offsetX,t,n)),p(a,"offsetY",c(r.offsetY,t,n)),p(a,"overflow",c(r.overflow,t,n)),p(a,"placement",c(r.placement,t,n)),p(a,"rotateWithView",c(r.rotateWithView,t,n)),p(a,"rotation",c(r.rotation,t,n)),p(a,"scale",c(r.scale,t,n));var o=c(r.text,t,n);void 0!==o&&(a.text=""+o),p(a,"textAlign",c(r.textAlign,t,n)),p(a,"textBaseline",c(r.textBaseline,t,n));var s=new i.default(a);if(r.padding&&s.setPadding(r.padding),r.fill){var l=m(r.fill,t,n);s.setFill(l)}if(r.backgroundFill&&(l=m(r.backgroundFill,t,n),s.setBackgroundFill(l)),r.stroke){var u=d(r.stroke,t,n);s.setStroke(u)}return r.backgroundStroke&&(u=d(r.backgroundStroke,t,n),s.setBackgroundStroke(u)),s}}},78113:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DEFAULT_CLUSTERED_LAYER_STYLE=t.DEFAULT_VECTOR_LAYER_STYLE=t.DEFAULT_POLY_STYLE=t.DEFAULT_LINE_STYLE=t.DEFAULT_COLOR=t.DEFAULT_POINT_ICON_STYLE=t.DEFAULT_CLUSTERED_POINT_CIRCLE_STYLE=t.DEFAULT_POINT_CIRCLE_STYLE=t.isEvaluatable=t.ClusterClickAction=t.VectorStyleSource=void 0;var r,a,i=n(44839);(a=t.VectorStyleSource||(t.VectorStyleSource={}))[a.Base=0]="Base",a[a.Cluster=1]="Cluster",(r=t.ClusterClickAction||(t.ClusterClickAction={})).ZoomToClusterExtents="ZoomToClusterExtents",r.ShowPopup="ShowPopup",t.isEvaluatable=function(e){return"string"==typeof(null==e?void 0:e.expr)},t.DEFAULT_POINT_CIRCLE_STYLE={type:"Circle",fill:{color:"#ff0000",alpha:255},radius:5,stroke:{color:"#0000ff",alpha:255,width:1}},t.DEFAULT_CLUSTERED_POINT_CIRCLE_STYLE={type:"Circle",fill:{color:"#ff0000",alpha:255},radius:{expr:"min(arr_size(features) + 4, 25)"},stroke:{color:"#0000ff",alpha:255,width:1}},t.DEFAULT_POINT_ICON_STYLE={type:"Icon",anchor:[.5,.5],src:i.MAP_MARKER_ICON,rotateWithView:!1,rotation:0,scale:1},t.DEFAULT_COLOR="#000000",t.DEFAULT_LINE_STYLE={color:"#0000ff",alpha:255,width:1},t.DEFAULT_POLY_STYLE={fill:{color:"#00ff00",alpha:255},stroke:{color:t.DEFAULT_COLOR,alpha:255,width:1}},t.DEFAULT_VECTOR_LAYER_STYLE={default:{point:t.DEFAULT_POINT_CIRCLE_STYLE,line:t.DEFAULT_LINE_STYLE,polygon:t.DEFAULT_POLY_STYLE}},t.DEFAULT_CLUSTERED_LAYER_STYLE={default:{point:t.DEFAULT_CLUSTERED_POINT_CIRCLE_STYLE}}},27792:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getOLStyleFunction=t.setOLVectorLayerStyle=t.getClusterSubFeatures=t.isClusteredFeature=t.DEFAULT_STYLE_KEY=void 0;var r=n(66630),a=n(29256);function i(e){return e.get("features")}t.DEFAULT_STYLE_KEY="default",t.isClusteredFeature=function(e){var t;return!!(null===(t=i(e))||void 0===t?void 0:t.length)},t.getClusterSubFeatures=i,t.setOLVectorLayerStyle=function(e,t,n){var i=new r.OLStyleMapSet(t,n);e.set(a.LayerProperty.VECTOR_STYLE,i);var o=function(e){return this.evaluateStyle(e)}.bind(i);e.setStyle(o)},t.getOLStyleFunction=function(e,t){var n=new r.OLStyleMapSet(e,t);return function(e){return this.evaluateStyle(e)}.bind(n)}},66630:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.OLStyleMapSet=t.vectorStyleToStyleMap=void 0;var r=n(70655),a=n(27792),i=n(7366),o=n(78113),s=(0,r.__importDefault)(n(47539)),l=(0,r.__importDefault)(n(30283)),u=n(35225),c=(0,r.__importDefault)(n(72846)),p=(0,r.__importStar)(n(14670)),d=n(65539);function m(e){return!!e&&((0,o.isEvaluatable)(e.alpha)||(0,o.isEvaluatable)(e.color)||(0,o.isEvaluatable)(e.width))}function f(e){return!!e&&((0,o.isEvaluatable)(e.alpha)||(0,o.isEvaluatable)(e.color))}function _(e){var t=e.label;return!!t&&(f(t.backgroundFill)||m(t.backgroundStroke)||f(t.fill)||(0,o.isEvaluatable)(t.font)||(0,o.isEvaluatable)(t.maxAngle)||(0,o.isEvaluatable)(t.offsetX)||(0,o.isEvaluatable)(t.offsetY)||(0,o.isEvaluatable)(t.overflow)||(0,o.isEvaluatable)(t.padding)||(0,o.isEvaluatable)(t.placement)||(0,o.isEvaluatable)(t.rotateWithView)||(0,o.isEvaluatable)(t.rotation)||(0,o.isEvaluatable)(t.scale)||m(t.stroke)||(0,o.isEvaluatable)(t.text)||(0,o.isEvaluatable)(t.textAlign)||(0,o.isEvaluatable)(t.textBaseline))}function E(e){var t,n,r,a=null!==(t=e.point)&&void 0!==t?t:o.DEFAULT_POINT_CIRCLE_STYLE,i=null!==(n=e.line)&&void 0!==n?n:o.DEFAULT_LINE_STYLE,E=null!==(r=e.polygon)&&void 0!==r?r:o.DEFAULT_POLY_STYLE,v=function(e,t){var n=new s.default;"Circle"==a.type?n.setImage(new l.default({radius:(0,u.evalFeature)(a.radius,e,t),fill:(0,u.buildFill)(a.fill,e,t),stroke:(0,u.buildStroke)(a.stroke,e,t)})):n.setImage(new c.default({anchor:a.anchor,src:(0,u.evalFeature)(a.src,e,t),rotateWithView:(0,u.evalFeature)(a.rotateWithView,e,t),rotation:(0,d.deg2rad)((0,u.evalFeature)(a.rotation,e,t)),scale:(0,u.evalFeature)(a.scale,e,t)}));var r=new s.default({stroke:(0,u.buildStroke)(i,e,t)}),o=new s.default({stroke:(0,u.buildStroke)(E.stroke,e,t),fill:(0,u.buildFill)(E.fill,e,t)}),m=(0,u.tryBuildTextStyle)(a,e,t),f=(0,u.tryBuildTextStyle)(i,e,t),_=(0,u.tryBuildTextStyle)(E,e,t);return m&&n.setText(m),f&&r.setText(f),_&&o.setText(_),function(e,t,n){var r=e.clone(),a=n.clone(),i=new s.default({image:r.getImage(),stroke:a.getStroke(),fill:a.getFill()});return{id:p.generate(),Point:e,MultiPoint:e,LineString:t,MultiLineString:t,Polygon:n,MultiPolygon:n,Circle:n,GeometryCollection:i}}(n,r,o)};return function(e){var t=e;return!!((0,o.isEvaluatable)(t.radius)||f(t.fill)||m(t.stroke))||_(e)}(a)||function(e){return m(e)||_(e)}(i)||function(e){return m(e.stroke)||f(e.fill)||_(e)}(E)?v:v(void 0,void 0)}t.vectorStyleToStyleMap=E;var v=function(){function e(e,t){for(var n in this.origStyleDef=e,this.clusterStyleDef=t,this.rules={default:E(e.default)},this.exprContext=new i.ExprEvalContext,e)n!=a.DEFAULT_STYLE_KEY&&e[n]&&(this.rules[n]=E(e[n])),n!=a.DEFAULT_STYLE_KEY&&this.exprContext.addFilter(n);if(null==t?void 0:t.style){var r=t.style;for(var n in this.clusterRules={default:E(r.default)},r)n!=a.DEFAULT_STYLE_KEY&&r[n]&&(this.clusterRules[n]=E(r[n])),n!=a.DEFAULT_STYLE_KEY&&this.exprContext.addClusterFilter(n)}this.defaultStyleMap=E({})}return e.prototype.toVectorLayerStyle=function(){return this.origStyleDef},e.prototype.toClusterSettings=function(){return this.clusterStyleDef},e.prototype.getClusterClickAction=function(){var e;return null===(e=this.clusterStyleDef)||void 0===e?void 0:e.onClick},e.prototype.evaluateStyle=function(e){var t,n;try{var r=e.getGeometry();if(!r)return null;var i=r.getType(),o=this.exprContext.evaluateFilter(e),s=void 0,l=(0,a.isClusteredFeature)(e)?this.clusterRules:this.rules;return"function"==typeof(s=o?null!==(t=null==l?void 0:l[o])&&void 0!==t?t:this.defaultStyleMap:null!==(n=null==l?void 0:l.default)&&void 0!==n?n:this.defaultStyleMap)?s(e,this.exprContext)[i]:s[i]}catch(e){return console.error(e),null}},e}();t.OLStyleMapSet=v},1744:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.prepareSubMenus=t.parseCommandsInWebLayout=t.parseWidgetsInAppDef=t.convertWebLayoutUIItems=t.convertFlexLayoutUIItems=t.isFlyoutSpec=t.isUIWidget=void 0;var r=n(70655),a=n(95348),i=(0,r.__importStar)(n(14670)),o=n(37979),s=n(48720),l=n(85261),u=n(7275),c=n(36645),p=n(65817),d=n(92255),m=n(44839),f=n(95601);function _(e){return"UiWidgetType"===e.WidgetType}function E(e){return void 0!==e.children}function v(e,t,n){return{icon:e.ImageUrl,spriteClass:e.ImageClass,command:n,label:t?null:e.Label,tooltip:e.Tooltip,parameters:e.Extension}}function g(e){if((0,u.strIsNullOrEmpty)(e))return"NewWindow";switch(e){case"SearchWindow":case"InvokeUrlWindow":return"NewWindow";case"TaskPane":return"TaskPane";default:return"SpecifiedFrame"}}t.isUIWidget=_,t.isFlyoutSpec=E,t.convertFlexLayoutUIItems=function e(t,n,r,c,p){return void 0===p&&(p=!1),n.map((function(n){switch(n.Function){case"Widget":var d=r[n.Widget];if(d&&_(d)){var m=function(e,t,n){switch(e.Type){case"Select":return v(e,n,a.DefaultCommands.Select);case"Pan":return v(e,n,a.DefaultCommands.Pan);case"Zoom":return v(e,n,a.DefaultCommands.Zoom);case"ZoomOnClick":return v(e,n,parseFloat(e.Extension.Factor)>=1?a.DefaultCommands.ZoomIn:a.DefaultCommands.ZoomOut);case"InitialMapView":return v(e,n,a.DefaultCommands.ZoomExtents);case"ZoomToSelection":return v(e,n,a.DefaultCommands.ZoomToSelection);case"ExtentHistory":return"previous"==e.Extension.Direction?v(e,n,a.DefaultCommands.PreviousView):v(e,n,a.DefaultCommands.NextView);case"CenterSelection":return v(e,n,a.DefaultCommands.CenterSelection);case"About":return v(e,n,a.DefaultCommands.About);case"BufferPanel":return v(e,n,a.DefaultCommands.Buffer);case"ClearSelection":return v(e,n,a.DefaultCommands.ClearSelection);case"CoordinateTracker":return v(e,n,a.DefaultCommands.CoordinateTracker);case"FeatureInfo":return v(e,n,a.DefaultCommands.FeatureInfo);case"Geolocation":return v(e,n,a.DefaultCommands.Geolocation);case"Help":return v(e,n,a.DefaultCommands.Help);case"Maptip":return v(e,n,a.DefaultCommands.MapTip);case"MapMenu":return{icon:e.ImageUrl,spriteClass:e.ImageClass,label:n?null:e.Label,tooltip:e.Tooltip,componentName:o.DefaultComponentNames.MapMenu,flyoutId:o.DefaultComponentNames.MapMenu+"_"+i.generate(),parameters:e.Extension};case"Query":return v(e,n,a.DefaultCommands.Query);case"QuickPlot":return v(e,n,a.DefaultCommands.QuickPlot);case"Redline":return v(e,n,a.DefaultCommands.Redline);case"RefreshMap":return v(e,n,a.DefaultCommands.RefreshMap);case"InvokeURL":case"Search":return{icon:e.ImageUrl,spriteClass:e.ImageClass,command:e.Name,label:n?null:e.Label,tooltip:e.Tooltip,parameters:e.Extension};case"SelectPolygon":return v(e,n,a.DefaultCommands.SelectPolygon);case"SelectRadius":return v(e,n,a.DefaultCommands.SelectRadius);case"SelectWithin":return v(e,n,a.DefaultCommands.SelectWithin);case"Theme":return v(e,n,a.DefaultCommands.Theme);case"ViewOptions":return v(e,n,a.DefaultCommands.ViewerOptions);case"ZoomToSelection":return v(e,n,a.DefaultCommands.ZoomToSelection);case"Measure":return v(e,n,a.DefaultCommands.Measure);case"Print":return v(e,n,a.DefaultCommands.Print);case"BasemapSwitcher":return{icon:e.ImageUrl,spriteClass:e.ImageClass,label:n?null:e.Label,tooltip:e.Tooltip,componentName:o.DefaultComponentNames.BaseMapSwitcher,flyoutId:o.DefaultComponentNames.BaseMapSwitcher+"_"+i.generate(),parameters:e.Extension};case"InvokeScript":return{icon:e.ImageUrl,spriteClass:e.ImageClass,command:e.Name,label:n?null:e.Label,tooltip:e.Tooltip,parameters:e.Extension};default:return{error:(0,s.tr)("UNKNOWN_WIDGET",t,{widget:e.Type})}}}(d,c,p);return t&&function(e){return!(0,u.strIsNullOrEmpty)(e.command)}(m)&&!(0,a.isSupportedCommandInStatelessMode)(m.command)&&console.warn("The widget ("+d.Name+") references a command ("+m.command+") that is not supported in stateless mode. This widget will always be disabled"),m}case"Separator":return{isSeparator:!0};case"Flyout":return{label:n.Label,tooltip:n.Tooltip,icon:n.ImageUrl,spriteClass:n.ImageClass,children:e(t,n.Item,r,c)};default:(0,l.assertNever)(n)}return null})).filter((function(e){return null!=e})).map((function(e){return e}))},t.convertWebLayoutUIItems=function e(t,n,i,o){return void 0===o&&(o=!0),(t||[]).map((function(t){if((0,p.isCommandItem)(t)){var u=n[t.Command];if(!u)return(0,c.warn)("Invalid reference to command: "+t.Command),{error:(0,s.tr)("UNKNOWN_COMMAND_REFERENCE",i,{command:t.Command})};if("Dwf"!=u.TargetViewer){var d={};u.ImageURL&&(d.spriteClass=function(e){switch(e){case"../stdicons/icon_invokeurl.gif":return m.SPRITE_INVOKE_URL;case"../stdicons/icon_invokescript.gif":return m.SPRITE_INVOKE_SCRIPT}}(u.ImageURL),d.spriteClass||(d.icon=u.ImageURL));var f={};if((0,p.isTargetedCommand)(u)&&(f.Target=u.Target,f.TargetFrame=u.TargetFrame),(0,p.isBasicCommand)(u)){var _=u.Action;return"ZoomRectangle"==_?_=a.DefaultCommands.Zoom:"FitToWindow"==_?_=a.DefaultCommands.ZoomExtents:"Refresh"==_&&(_=a.DefaultCommands.RefreshMap),(0,r.__assign)({command:_,label:o?null:u.Label,tooltip:u.Tooltip,parameters:f},d)}switch(u["@xsi:type"]){case"ViewOptionsCommandType":return{command:a.DefaultCommands.ViewerOptions,label:o?null:u.Label,tooltip:u.Tooltip,parameters:f};case"MeasureCommandType":return{command:a.DefaultCommands.Measure,label:o?null:u.Label,tooltip:u.Tooltip,parameters:f};case"HelpCommandType":return{command:a.DefaultCommands.Help,label:o?null:u.Label,tooltip:u.Tooltip,parameters:f};case"BufferCommandType":return{command:a.DefaultCommands.Buffer,label:o?null:u.Label,tooltip:u.Tooltip,parameters:f};case"SelectWithinCommandType":return{command:a.DefaultCommands.SelectWithin,label:o?null:u.Label,tooltip:u.Tooltip,parameters:f};case"GetPrintablePageCommandType":return{command:a.DefaultCommands.QuickPlot,label:o?null:u.Label,tooltip:u.Tooltip,parameters:f};default:return(0,r.__assign)({command:u.Name,label:o?null:u.Label,tooltip:u.Tooltip,parameters:f},d)}}}else{if((0,p.isSeparatorItem)(t))return{isSeparator:!0};if((0,p.isFlyoutItem)(t))return{label:t.Label,tooltip:t.Tooltip,children:e(t.SubItem,n,i,!1)};(0,l.assertNever)(t)}return null})).filter((function(e){return null!=e})).map((function(e){return e}))},t.parseWidgetsInAppDef=function(e,t){for(var n,r,a,i=!1,o=!1,s=!1,l=!1,u=!1,c=(0,d.isStateless)(e),p={},m=0,f=e.WidgetSet;m<f.length;m++)for(var E=0,v=f[m].Widget;E<v.length;E++){var y=v[E],h=y.Extension;switch(y.Type){case"TaskPane":n=y;break;case"ViewSize":r=y;break;case"Legend":i=!0;break;case"SelectionPanel":l=!0;break;case"CursorPosition":case"SelectionInfo":o=!0;break;case"Navigator":s=!0;break;case"Search":t(y.Name,{layer:h.Layer,prompt:h.Prompt,resultColumns:h.ResultColumns,filter:h.Filter,matchLimit:h.MatchLimit,title:h.Title||(_(y)?y.Label:void 0),target:g(h.Target),targetFrame:h.Target}),c&&console.warn("The search command ("+y.Name+") is not supported in stateless mode. This widget will always be disabled");break;case"InvokeURL":t(y.Name,{url:h.Url,disableIfSelectionEmpty:h.DisableIfSelectionEmpty,target:g(h.Target),targetFrame:h.Target,parameters:(h.AdditionalParameter||[]).map((function(e){return{name:e.Key,value:e.Value}})),title:_(y)?y.Label:void 0})}p[y.Name]=y}return n?(u=!0,a=n.Extension.InitialTask||"server/TaskPane.html"):a="server/TaskPane.html",{taskPane:n,viewSize:r,initialTask:a,hasLegend:i,hasStatus:o,hasNavigator:s,hasSelectionPanel:l,hasTaskBar:u,isStateless:c,widgetsByKey:p}},t.parseCommandsInWebLayout=function(e,t){for(var n={},r=0,a=e.CommandSet.Command;r<a.length;r++){var i=a[r];(0,p.isInvokeURLCommand)(i)?t(i.Name,{url:i.URL,disableIfSelectionEmpty:i.DisableIfSelectionEmpty,target:i.Target,targetFrame:i.TargetFrame,parameters:(i.AdditionalParameter||[]).map((function(e){return{name:e.Key,value:e.Value}})),title:i.Label}):(0,p.isSearchCommand)(i)&&t(i.Name,{layer:i.Layer,prompt:i.Prompt,target:i.Target,targetFrame:i.TargetFrame,resultColumns:i.ResultColumns,filter:i.Filter,matchLimit:i.MatchLimit,title:i.Label}),n[i.Name]=i}return n},t.prepareSubMenus=function(e){var t={toolbars:{},flyouts:{}},n=!1;for(var r in e)if(r==f.WEBLAYOUT_CONTEXTMENU&&(n=!0),r==f.WEBLAYOUT_TASKMENU||r==f.WEBLAYOUT_CONTEXTMENU){var a=r;t.flyouts[a]={children:e[r].items}}else{t.toolbars[r]={items:[]};for(var o=0,s=e[r].items;o<s.length;o++){var l=s[o];E(l)&&r!=f.WEBLAYOUT_CONTEXTMENU?(a=l.label+"_"+i.generate(),t.toolbars[r].items.push({label:l.label,tooltip:l.tooltip,icon:l.icon,spriteClass:l.spriteClass,flyoutId:a}),t.flyouts[a]={children:l.children}):t.toolbars[r].items.push(l)}}return[t,n]}},95348:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getCommand=t.registerCommand=t.openUrlInTarget=t.isSupportedCommandInStatelessMode=t.DefaultCommands=t.CommandConditions=t.reduceAppToToolbarState=t.mapToolbarReference=t.mergeInvokeUrlParameters=void 0;var r=n(29256),a=n(93762),i=n(48720),o=n(57394),s=n(44839),l=n(85261),u=n(87755),c=n(10737),p=n(57270),d=n(36645),m=/images\/icons\/[a-zA-Z\-]*.png/;function f(e){return m.test(e)?((0,o.getAssetRoot)()+"/"+e).replace(/\/\//g,"/"):e}function _(e,t){return e.spriteClass?e.spriteClass:t&&t.iconClass?t.iconClass:void 0}function E(e,t){var n=e.reduce((function(e,t,n,r){return e[t.name]=t.value,e}),{});if(t)for(var r=0,a=Object.keys(t);r<a.length;r++)n[l=a[r]]=t[l];for(var i=[],o=0,s=Object.keys(n);o<s.length;o++){var l=s[o];i.push({name:l,value:n[l]})}return i}function v(e,t,n){return e.map((function(e){return g(e,t,n)})).filter((function(e){return null!=e}))}function g(e,t,n){if(e.error)return{iconClass:s.SPRITE_ICON_ERROR,tooltip:e.error,label:(0,i.tr)("ERROR"),selected:r.ALWAYS_FALSE,enabled:r.ALWAYS_FALSE,invoke:r.NOOP};if(e.componentName)return{icon:e.icon,iconClass:_(e),flyoutId:e.flyoutId,tooltip:e.tooltip,label:e.label,componentName:e.componentName,componentProps:e.componentProps};if(!0===e.isSeparator)return{isSeparator:!0};if(e.command){var a=I(e.command);if(null!=a)return{icon:f(e.icon||a.icon),iconClass:_(e,a),tooltip:e.tooltip,label:e.label,selected:function(){return a.selected(t)},enabled:function(){return a.enabled(t,e.parameters)},invoke:function(){return n(a,e.parameters)}}}else{if(e.children){var o=e.children;return{icon:f(e.icon),iconClass:_(e),label:e.label,tooltip:e.tooltip,childItems:v(o,t,n)}}if(e.label&&e.flyoutId)return{icon:f(e.icon),iconClass:_(e),label:e.label,tooltip:e.tooltip,flyoutId:e.flyoutId}}return null}t.mergeInvokeUrlParameters=E,t.mapToolbarReference=g,t.reduceAppToToolbarState=function(e){var t,n,a=!1,i=!1,o=!1,s=0,l=(0,r.getSelectionSet)(e);return n=null!=l&&null!=l.SelectedFeatures,e.config.activeMapName&&(a=null!=e.mapState[e.config.activeMapName].clientSelection,i=e.mapState[e.config.activeMapName].historyIndex>0,o=e.mapState[e.config.activeMapName].historyIndex<e.mapState[e.config.activeMapName].history.length-1,s=(null!==(t=e.mapState[e.config.activeMapName].layers)&&void 0!==t?t:[]).filter((function(e){return e.visible&&e.selectable&&"WMS"==e.type})).length),{stateless:e.config.viewer.isStateless,visibleAndSelectableWmsLayerCount:s,busyWorkerCount:e.viewer.busyCount,hasSelection:n,hasClientSelection:a,hasPreviousView:i,hasNextView:o,activeTool:e.viewer.tool,featureTooltipsEnabled:e.viewer.featureTooltipsEnabled}};var y,h=function(){function e(){}return e.isNotBusy=function(e){return 0==e.busyWorkerCount},e.hasSelection=function(e){return e.hasSelection},e.hasClientSelection=function(e){return e.hasClientSelection},e.disabledIfEmptySelection=function(e,t){return!e.hasSelection&&null!=t&&("true"==t.DisableIfSelectionEmpty||1==t.DisableIfSelectionEmpty)},e.hasPreviousView=function(e){return e.hasPreviousView},e.hasNextView=function(e){return e.hasNextView},e}();t.CommandConditions=h,function(e){e.Select="Select",e.Pan="Pan",e.Zoom="Zoom",e.MapTip="MapTip",e.ZoomIn="ZoomIn",e.ZoomOut="ZoomOut",e.RestoreView="RestoreView",e.ZoomExtents="ZoomExtents",e.SelectRadius="SelectRadius",e.SelectPolygon="SelectPolygon",e.ClearSelection="ClearSelection",e.ZoomToSelection="ZoomToSelection",e.PanLeft="PanLeft",e.PanRight="PanRight",e.PanUp="PanUp",e.PanDown="PanDown",e.RefreshMap="RefreshMap",e.PreviousView="PreviousView",e.NextView="NextView",e.About="About",e.Help="Help",e.Measure="Measure",e.ViewerOptions="ViewerOptions",e.Buffer="Buffer",e.SelectWithin="SelectWithin",e.QuickPlot="QuickPlot",e.Redline="Redline",e.FeatureInfo="FeatureInfo",e.Theme="Theme",e.Query="Query",e.Geolocation="Geolocation",e.CoordinateTracker="CoordinateTracker",e.AddManageLayers="AddManageLayers",e.CenterSelection="CenterSelection",e.Print="Print"}(y=t.DefaultCommands||(t.DefaultCommands={}));var S={};function T(e,t,n,a){t((0,p.showModalUrl)({modal:{title:a||(0,i.tr)(e),backdrop:!1,size:r.DEFAULT_MODAL_SIZE,overflowYScroll:!0},name:e,url:n}))}function L(e,t,n,r,a,i){var o=t.target;if("TaskPane"==o)n?r({type:c.ActionType.TASK_INVOKE_URL,payload:{url:a}}):T(e,r,a,i);else if("NewWindow"==o)T(e,r,a,i);else if("SpecifiedFrame"==o)if(t.targetFrame){for(var s=window.frames,u=!1,p=0;p<s.length;p++)if(s[p].name==t.targetFrame){s[p].location=a,u=!0;break}u||(0,d.error)("Frame not found: "+t.targetFrame)}else(0,d.error)("Command "+e+' has a target of "SpecifiedFrame", but does not specify a target frame');else(0,l.assertNever)(o)}function I(e){return S[e]}t.isSupportedCommandInStatelessMode=function(e){switch(e){case y.Select:case y.MapTip:case y.QuickPlot:case y.SelectRadius:case y.SelectPolygon:case y.ClearSelection:case y.ZoomToSelection:case y.Buffer:case y.SelectWithin:case y.Redline:case y.FeatureInfo:case y.Query:case y.Theme:case y.CenterSelection:return!1}return!0},t.openUrlInTarget=L,t.registerCommand=function(e,t){var n;n=function(e){return void 0!==e.url}(t)?{icon:t.icon,iconClass:t.iconClass,title:t.title,enabled:function(e){return!0!==t.disableIfSelectionEmpty||h.hasSelection(e)},selected:function(){return!1},invoke:function(a,i,o,s){var l=i(),c=l.config,p=(0,r.getRuntimeMap)(l),d=E(t.parameters,s),m=(0,u.ensureParameters)(t.url,null==p?void 0:p.Name,null==p?void 0:p.SessionId,c.locale,!0,d);L(e,t,c.capabilities.hasTaskPane,a,m,n.title)}}:function(e){return void 0!==e.layer}(t)?{icon:t.icon,iconClass:t.iconClass,title:t.title,enabled:function(e){return!e.stateless},selected:function(){return!1},invoke:function(i,o,s,l){var c=o(),p=c.config,d=(0,r.getRuntimeMap)(c);if(d){var m=(0,u.ensureParameters)((0,a.getFusionRoot)()+"/widgets/Search/SearchPrompt.php",d.Name,d.SessionId,p.locale,!1)+"&popup=0&target=TaskPane&title="+encodeURIComponent(t.title)+"&prompt="+encodeURIComponent(t.prompt)+"&layer="+encodeURIComponent(t.layer)+"&pointZoomLevel="+l.PointZoomLevel+(t.filter?"&filter="+encodeURIComponent(t.filter):"")+"&limit="+t.matchLimit+"&properties="+(t.resultColumns.Column||[]).map((function(e){return e.Property})).join(",")+"&propNames="+(t.resultColumns.Column||[]).map((function(e){return e.Name})).join(",");L(e,t,p.capabilities.hasTaskPane,i,m,n.title)}}}:t,S[e]=n},t.getCommand=I},37979:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PlaceholderComponent=t.getComponentFactory=t.registerComponentFactory=t.DefaultComponentNames=void 0;var r,a=n(70655),i=(0,a.__importStar)(n(67294)),o=n(14967),s=n(48720);(r=t.DefaultComponentNames||(t.DefaultComponentNames={})).Legend="Legend",r.SelectionPanel="SelectionPanel",r.Map="Map",r.Navigator="Navigator",r.MouseCoordinates="MouseCoordinates",r.ScaleDisplay="ScaleDisplay",r.SelectedFeatureCount="SelectedFeatureCount",r.PoweredByMapGuide="PoweredByMapGuide",r.TaskPane="TaskPane",r.About="About",r.SessionExpired="SessionExpired",r.Measure="Measure",r.ViewerOptions="ViewerOptions",r.QuickPlot="QuickPlot",r.BaseMapSwitcher="BaseMapSwitcher",r.MapMenu="MapMenu",r.ViewSize="ViewSize",r.CoordinateTracker="CoordinateTracker",r.AddManageLayers="AddManageLayers",r.ShareLinkToView="ShareLinkToView";var l={};function u(e){return l[e]}t.registerComponentFactory=function(e,t){l[e]=t},t.getComponentFactory=u;var c=function(e){function t(t){return e.call(this,t)||this}return(0,a.__extends)(t,e),t.prototype.render=function(){var e=this.props,t=e.id,n=e.componentProps,r=u(t);return r?r(n):i.createElement(o.Error,{error:(0,s.tr)("ERR_UNREGISTERED_COMPONENT",this.props.locale,{componentId:t})})},t}(i.Component);t.PlaceholderComponent=c},13709:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ExternalLayerFactoryRegistry=void 0;var n=function(){function e(){if(this._vectorCreators={},e._instance)throw new Error("Error: Instantiation failed: Use ExternalLayerFactoryRegistry.getInstance() instead of new.");e._instance=this}return e.getInstance=function(){return e._instance},e.prototype.registerExternalVectorLayerCreator=function(e,t){this._vectorCreators[e]=t},e.prototype.getExternalVectorLayerCreator=function(e){return this._vectorCreators[e]},e._instance=new e,e}();t.ExternalLayerFactoryRegistry=n},52714:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getLayout=t.registerLayout=t.getLayoutCapabilities=void 0;var n={},r={};t.getLayoutCapabilities=function(e){return r[e]},t.registerLayout=function(e,t,a){n[e]=t,r[e]=a},t.getLayout=function(e){return n[e]}},89737:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ensureProjection=t.resolveProjectionFromEpsgIoAsync=void 0;var r=n(70655),a=(0,r.__importDefault)(n(96280)),i=n(5791),o=n(48720),s=n(7275),l=n(23148),u=n(36645);function c(e,t,n){return(0,r.__awaiter)(this,void 0,void 0,(function(){var s;return(0,r.__generator)(this,(function(r){switch(r.label){case 0:return[4,fetch("//epsg.io?format=json&q="+e)];case 1:return[4,r.sent().json()];case 2:if((s=r.sent()).results&&s.results.length>0)return a.default.defs("EPSG:"+e,s.results[0].proj4),(0,u.debug)("Registered projection EPSG:"+e+" from epsg.io"),[2,a.default.defs["EPSG:"+e]];throw new i.MgError((0,o.tr)("INIT_ERROR_UNREGISTERED_EPSG_CODE",t,{epsg:e,mapDefinition:n}))}}))}))}t.resolveProjectionFromEpsgIoAsync=c,t.ensureProjection=function(e,t,n,i){return(0,r.__awaiter)(this,void 0,void 0,(function(){var o,u,p;return(0,r.__generator)(this,(function(r){switch(r.label){case 0:return u=!1,p="EPSG:"+e,a.default.defs[p]?(o=p,[3,4]):[3,1];case 1:return i?(a.default.defs[p]=i(),u=!0,o=p,[3,4]):[3,2];case 2:return[4,c(e,t,"")];case 3:r.sent(),o=p,r.label=4;case 4:return(0,s.strIsNullOrEmpty)(n)||a.default.defs[n]||(a.default.defs[n]=a.default.defs[o],u=!0),u&&(0,l.register)(a.default),[2,[e,o]]}}))}))}},61557:function(e,t){"use strict";var n,r;Object.defineProperty(t,"__esModule",{value:!0}),t.RequestBuilder=t.QueryFeaturesSet=t.RuntimeMapFeatureFlags=void 0,(r=t.RuntimeMapFeatureFlags||(t.RuntimeMapFeatureFlags={}))[r.LayersAndGroups=1]="LayersAndGroups",r[r.LayerIcons=2]="LayerIcons",r[r.LayerFeatureSources=4]="LayerFeatureSources",(n=t.QueryFeaturesSet||(t.QueryFeaturesSet={}))[n.Attributes=1]="Attributes",n[n.InlineSelection=2]="InlineSelection",n[n.Tooltip=4]="Tooltip",n[n.Hyperlink=8]="Hyperlink";t.RequestBuilder=function(e){this.agentUri=e}},93762:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getViewer=t.isReady=t.setViewer=t.getFusionRoot=t.setFusionRoot=void 0;var r,a,i=n(36645);t.setFusionRoot=function(e){r=e,(0,i.debug)("Fusion root set to: "+e+". Access to Fusion backend services and widget content will be relative to this value")},t.getFusionRoot=function(){return r||"../fusion"},t.setViewer=function(e){a=e},t.isReady=function(){return null!=a},t.getViewer=function(){return a}},70907:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.countSelection=void 0,t.countSelection=function(e,t){var n,r,a,i,o,s,l,u={total:0,layerCount:0};if(e)if(e.SelectedLayer){u.layerCount=e.SelectedLayer.length;for(var c=0,p=e.SelectedLayer;c<p.length;c++){var d=p[c];u.total+=null!==(r=null===(n=d.Feature)||void 0===n?void 0:n.length)&&void 0!==r?r:0}}else{u.layerCount=e.Layer.length;for(var m=0,f=e.Layer;m<f.length;m++)d=f[m],u.total+=null!==(o=null===(i=null===(a=d.Class)||void 0===a?void 0:a.ID)||void 0===i?void 0:i.length)&&void 0!==o?o:0}if(t){u.layerCount=t.layers.length;for(var _=0,E=t.layers;_<E.length;_++)d=E[_],u.total+=null!==(l=null===(s=d.features)||void 0===s?void 0:s.length)&&void 0!==l?l:0}if(0!=u.total||0!=u.layerCount)return u}},31530:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.retrieveSelectionSetFromLocalStorage=t.persistSelectionSetToLocalStorage=t.clearSessionStore=void 0;var r=n(70655),a=n(7275);function i(e,t){return"selection_"+e+"_"+t}t.clearSessionStore=function(){return(0,r.__awaiter)(this,void 0,void 0,(function(){var e;return(0,r.__generator)(this,(function(t){try{for(e in window.localStorage)(0,a.strStartsWith)(e,"selection_")&&window.localStorage.removeItem(e)}catch(e){}return[2]}))}))},t.persistSelectionSetToLocalStorage=function(e,t,n){return(0,r.__awaiter)(this,void 0,void 0,(function(){var a,o;return(0,r.__generator)(this,(function(r){a=i(e,t),o=JSON.stringify(n);try{window.localStorage.setItem(a,o)}catch(e){}return[2]}))}))},t.retrieveSelectionSetFromLocalStorage=function(e,t){return(0,r.__awaiter)(this,void 0,void 0,(function(){var n,a,o;return(0,r.__generator)(this,(function(r){switch(r.label){case 0:return a=i,[4,e.getValueAsync()];case 1:return n=a.apply(void 0,[r.sent(),t]),(o=window.localStorage.getItem(n))?[2,JSON.parse(o)]:[2]}}))}))}},70107:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.About=void 0;var r=(0,n(70655).__importStar)(n(67294));t.About=function(e){return r.createElement("div",{className:"component-about-dialog-content"},r.createElement("h4",null,"mapguide-react-layout"),r.createElement("hr",null),r.createElement("p",null,"Hash: ","9ba843ebe95dcf3ac9771d7556189003a442ca9b"),r.createElement("hr",null),r.createElement("p",null,r.createElement("a",{target:"_blank",href:"https://github.com/jumpinjackie/mapguide-react-layout"},"GitHub")),r.createElement("p",null,r.createElement("a",{target:"_blank",href:"https://github.com/jumpinjackie/mapguide-react-layout/issues"},"Issues")),r.createElement("p",null,"Uses icons from the ",r.createElement("a",{target:"_blank",href:"http://p.yusukekamiyamane.com/"},"Fugue icon set by Yusuke Kamiyamane")))}},65947:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Accordion=void 0;var r=(0,n(70655).__importStar)(n(67294)),a=n(27058);t.Accordion=function(e){var t=e.style,n=e.panels,i=e.isResizing,o=e.onActivePanelChanged,s=function(e,t){return t&&e.filter((function(e){return e.id==t}))[0]?t:null}(e.panels,e.activePanelId),l=r.useState({width:-1,height:-1}),u=l[0],c=l[1],p=r.useState(s||n[n.length-1].id),d=p[0],m=p[1];r.useEffect((function(){m(s||n[n.length-1].id)}),[s]);var f=function(e){var t=e.currentTarget.attributes["data-accordion-panel-id"].value;d!=t&&(m(t),null==o||o(t))};return r.createElement(a.ResizeSensor,{onResize:function(e){c(e[0].contentRect)}},r.createElement("div",{style:t,className:"component-accordion"},n.map((function(e){var t=e.id==d;return r.createElement("div",{key:e.id,className:"component-accordion-panel"},r.createElement("div",{className:"component-accordion-panel-header",style:{height:24},"data-accordion-panel-id":e.id,onClick:f},r.createElement(a.Icon,{icon:t?"chevron-up":"chevron-down"})," ",e.title),r.createElement(a.Collapse,{isOpen:t},e.contentRenderer({width:u.width,height:u.height-24*n.length},i)))}))))}},29215:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.BaseLayerSwitcher=void 0;var r=(0,n(70655).__importStar)(n(67294)),a=n(7275),i=n(48720);t.BaseLayerSwitcher=function(e){var t=e.locale,n=e.externalBaseLayers,o=n.filter((function(e){return!0===e.visible})),s=r.useState(1==o.length?o[0].name:a.STR_EMPTY),l=s[0],u=s[1],c=function(t){var n,r=t.currentTarget.value;u(r),null===(n=e.onBaseLayerChanged)||void 0===n||n.call(e,r)};return r.useEffect((function(){u(1==o.length?o[0].name:a.STR_EMPTY)}),[o]),r.createElement("div",null,r.createElement("div",{className:"base-layer-switcher-item-container"},r.createElement("label",{className:"bp3-control bp3-radio"},r.createElement("input",{className:"base-layer-switcher-option",type:"radio",value:a.STR_EMPTY,checked:(0,a.strIsNullOrEmpty)(l),onChange:c}),r.createElement("span",{className:"bp3-control-indicator"}),(0,i.tr)("NONE",t))),n.map((function(e){return r.createElement("div",{className:"base-layer-switcher-item-container",key:"base-layer-"+e.name},r.createElement("label",{className:"bp3-control bp3-radio"},r.createElement("input",{className:"base-layer-switcher-option",type:"radio",value:e.name,checked:e.name===l,onChange:c}),r.createElement("span",{className:"bp3-control-indicator"}),e.name))})))}},66690:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ColorPicker=void 0;var r=(0,n(70655).__importStar)(n(67294)),a=n(27058),i=n(48720),o=n(95601),s=n(78113),l=n(85907);t.ColorPicker=function(e){var t,n,u=r.useState(!1),c=u[0],p=u[1];return r.createElement("div",null,r.createElement("button",{disabled:e.disabled,style:{width:80,borderRadius:3,backgroundColor:null!==(t=e.value)&&void 0!==t?t:s.DEFAULT_COLOR},onClick:function(){p(!c)}},o.NBSP,o.NBSP,o.NBSP),r.createElement(a.Collapse,{isOpen:c},r.createElement(a.Card,null,r.createElement(l.HexColorPicker,{style:{width:"100%"},color:null!==(n=e.value)&&void 0!==n?n:s.DEFAULT_COLOR,onChange:function(t){return e.onChange(t)}}),r.createElement(a.Button,{icon:"chevron-up",intent:a.Intent.PRIMARY,onClick:function(){return p(!1)}},(0,i.tr)("ACTION_CLOSE",e.locale)))))}},82422:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ToolbarContext=t.LegendContext=t.AppContext=void 0;var r=(0,n(70655).__importStar)(n(67294)),a=n(48720),i=n(7275),o=function(){};t.AppContext=r.createContext({allowHtmlValuesInSelection:function(){return!1},getHTMLCleaner:function(){return function(e){return e}}}),t.LegendContext=r.createContext({stateless:!1,getMapName:function(){},isFiltering:function(){return!1},getFilterText:function(){return i.STR_EMPTY},getLocale:function(){return a.DEFAULT_LOCALE},getBaseIconSize:function(){return 0},getIconMimeType:function(){return i.STR_EMPTY},getChildren:function(){return[]},getCurrentScale:function(){return-1},getTree:o,getLayerVisibility:function(){return!1},getGroupVisibility:function(){return!1},setGroupVisibility:o,setLayerVisibility:o,getLayerSelectability:function(){return!1},setLayerSelectability:function(){return!1},getGroupExpanded:function(){return!1},setGroupExpanded:o,getLayerExpanded:function(){return!1},setLayerExpanded:o}),t.ToolbarContext=r.createContext({openFlyout:o,closeFlyout:o,openComponent:o,closeComponent:o})},14967:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Error=t.normalizeStack=void 0;var r=(0,n(70655).__importStar)(n(67294)),a=n(12694),i=n(27058);function o(e){return e.stack instanceof Array?e.stack||[]:"string"==typeof e.stack?(e.stack||"").split("\n"):[]}t.normalizeStack=o,t.Error=function(e){var t=e.error;if((0,a.isError)(t)||(0,a.isInitError)(t)){if(e.errorRenderer)return e.errorRenderer(t);t.message;var n=o(t);return r.createElement(i.Callout,{intent:i.Intent.DANGER,icon:"error"},r.createElement("h5",{className:"error-header"},t.message),r.createElement("ul",{className:"error-stack"},n.map((function(e,t){return r.createElement("li",{key:"stack-line-"+t},e)}))))}return r.createElement(i.Callout,{intent:i.Intent.DANGER,icon:"error"},r.createElement("h5",{className:"error-header"},t))}},64471:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createExternalSource=t.createOLLayerFromSubjectDefn=t.clusterSourceIfRequired=void 0;var r=n(70655),a=n(5791),i=n(29256),o=n(2939),s=(0,r.__importDefault)(n(54680)),l=(0,r.__importDefault)(n(98266)),u=(0,r.__importDefault)(n(86263)),c=(0,r.__importDefault)(n(92347)),p=(0,r.__importDefault)(n(31655)),d=(0,r.__importDefault)(n(67548)),m=(0,r.__importDefault)(n(92479)),f=(0,r.__importDefault)(n(14409)),_=(0,r.__importDefault)(n(86333)),E=(0,r.__importDefault)(n(30933)),v=(0,r.__importDefault)(n(39261)),g=(0,r.__importDefault)(n(37358)),y=(0,r.__importDefault)(n(85256)),h=n(69565),S=(0,r.__importDefault)(n(90798)),T=(0,r.__importDefault)(n(64678)),L=(0,r.__importDefault)(n(89681)),I=n(13709),A=n(7275),C=(0,r.__importDefault)(n(74754)),b=n(27792),N=n(78113),O=(0,r.__importDefault)(n(81090)),M=(0,r.__importDefault)(n(98592)),P=(0,r.__importDefault)(n(29619)),R=n(26414),D=n(42624),w=n(36645),F=(0,r.__importDefault)(n(20228)),U=(0,r.__importDefault)(n(39293)),V=function(e,t){if(t.geometry){var n=void 0,r=t.type,a=t.geometry;return 1===r?(n="MultiPoint",1==a.length&&(n="Point",a=a[0])):2===r?(n="MultiLineString",1==a.length&&(n="LineString",a=a[0])):3===r&&(n="Polygon",a.length>1&&(n="MultiPolygon",a=[a])),{type:"Feature",geometry:{type:n,coordinates:a},properties:t.tags}}return t};function x(e,t,n){t.set(i.LayerProperty.LAYER_NAME,e.name),t.set(i.LayerProperty.LAYER_DESCRIPTION,e.description),t.set(i.LayerProperty.LAYER_DISPLAY_NAME,e.displayName),t.set(i.LayerProperty.LAYER_TYPE,e.type),t.set(i.LayerProperty.IS_SELECTABLE,e.selectable),t.set(i.LayerProperty.IS_EXTERNAL,n),t.set(i.LayerProperty.SELECTED_POPUP_CONFIGURATION,e.popupTemplate),t.set(i.LayerProperty.IS_GROUP,!1),t.set(i.LayerProperty.LAYER_METADATA,e.meta),t.set(i.LayerProperty.LAYER_DEFN,e),t.setVisible(e.initiallyVisible)}var k={type:"FeatureCollection",features:[]};function B(e,t){return t.cluster?new v.default({source:e,distance:t.cluster.distance,geometryFunction:function(e){var t=e.getGeometry();if(t&&t.getType()==C.default.POINT)return t}}):e}t.clusterSourceIfRequired=B,t.createOLLayerFromSubjectDefn=function(e,t,n,a){var l,u,c,p,d,v,C,G,Y,z,W,j,H=this;switch(e.type){case o.GenericSubjectLayerType.StaticImage:return(K=(0,r.__assign)({crossOrigin:"anonymous"},e.sourceParams)).imageExtent||(K.imageExtent=null===(l=e.meta)||void 0===l?void 0:l.extents),(q=new F.default({source:new U.default(K)})).set(i.LayerProperty.LAYER_DESCRIPTION,e.description),q.set(i.LayerProperty.LAYER_TYPE,"StaticImage"),q.set(i.LayerProperty.IS_SELECTABLE,!1),q.set(i.LayerProperty.IS_EXTERNAL,n),q.set(i.LayerProperty.IS_GROUP,!1),q.set(i.LayerProperty.LAYER_METADATA,e.meta),q.set(i.LayerProperty.LAYER_DEFN,e),q.setVisible(e.initiallyVisible),q;case o.GenericSubjectLayerType.XYZ:var K=(0,r.__assign)({crossOrigin:"anonymous"},e.sourceParams);return(q=new m.default({source:new s.default(K)})).set(i.LayerProperty.LAYER_DESCRIPTION,e.description),q.set(i.LayerProperty.LAYER_TYPE,"XYZ"),q.set(i.LayerProperty.IS_SELECTABLE,!1),q.set(i.LayerProperty.IS_EXTERNAL,n),q.set(i.LayerProperty.IS_GROUP,!1),q.set(i.LayerProperty.LAYER_METADATA,e.meta),q.set(i.LayerProperty.LAYER_DEFN,e),q.setVisible(e.initiallyVisible),q;case o.GenericSubjectLayerType.GeoJSON_Inline:var Z=(new T.default).readFeatures(null!==(u=e.sourceParams.features)&&void 0!==u?u:k),X=new E.default({features:Z,attributions:e.sourceParams.attributions}),q=new _.default((0,r.__assign)((0,r.__assign)({},e.layerOptions),{source:B(X,e)}));return(0,b.setOLVectorLayerStyle)(q,null!==(c=e.vectorStyle)&&void 0!==c?c:N.DEFAULT_VECTOR_LAYER_STYLE,e.cluster),x(e,q,n),q;case o.GenericSubjectLayerType.GeoJSON:var Q=(z=t,"EPSG:3857",W=(0,R.get)(z),j=(0,R.get)("EPSG:3857"),(0,R.equivalent)(W,j)),J=1==(null===(p=e.meta)||void 0===p?void 0:p.geojson_as_vt);if(J&&Q){var $=new D.AsyncLazy((function(){return(0,r.__awaiter)(H,void 0,void 0,(function(){var t,n,a,i,o;return(0,r.__generator)(this,(function(r){switch(r.label){case 0:return(0,w.debug)("Fetching url: "+e.sourceParams.url),[4,fetch(e.sourceParams.url)];case 1:return[4,r.sent().json()];case 2:return t=r.sent(),"EPSG:4326"!=(null===(i=e.meta)||void 0===i?void 0:i.projection)&&(n=new T.default({dataProjection:null===(o=e.meta)||void 0===o?void 0:o.projection,featureProjection:"EPSG:4326"}),a=n.readFeatures(t),t=n.writeFeaturesObject(a,{dataProjection:"EPSG:4326"})),[2,(0,M.default)(t,{extent:4096})]}}))}))})),ee=new T.default({dataProjection:new P.default({code:"TILE_PIXELS",units:"tile-pixels",extent:[0,0,4096,4096]})}),te=new g.default({projection:t,tileUrlFunction:function(e){return JSON.stringify(e)},tileLoadFunction:function(e,n){var r=JSON.parse(n);$.getValueAsync().then((function(n){var a=n.getTile(r[0],r[1],r[2]),i=JSON.stringify({type:"FeatureCollection",features:a?a.features:[]},V),o=ee.readFeatures(i,{extent:te.getTileGrid().getTileCoordExtent(r),featureProjection:t});e.setFeatures(o)}))}}),ne=new y.default({source:te});return(0,b.setOLVectorLayerStyle)(ne,null!==(d=e.vectorStyle)&&void 0!==d?d:N.DEFAULT_VECTOR_LAYER_STYLE,e.cluster),x(e,ne,n),ne}return J&&console.warn("The geojson_as_vt meta option only applies if the MapGuide map or Primary Subject Layer is in EPSG:3857. This layer will be loaded as a regular GeoJSON layer"),X=new E.default({url:e.sourceParams.url,format:new T.default,attributions:e.sourceParams.attributions}),q=new _.default((0,r.__assign)((0,r.__assign)({},e.layerOptions),{source:B(X,e)})),(0,b.setOLVectorLayerStyle)(q,null!==(v=e.vectorStyle)&&void 0!==v?v:N.DEFAULT_VECTOR_LAYER_STYLE,e.cluster),x(e,q,n),q;case o.GenericSubjectLayerType.MVT:var re={idProperty:e.sourceParams.mvtIdProperty};switch(e.sourceParams.mvtFeatureClass){case"feature":re.featureClass=O.default}return X=new g.default({url:e.sourceParams.url,format:new L.default(re),attributions:e.sourceParams.attributions,tileLoadFunction:function(e,t){e.setLoader((function(n,r,a){fetch(t).then((function(t){200==t.status&&t.arrayBuffer().then((function(t){var r=e.getFormat().readFeatures(t,{extent:n,featureProjection:a}).filter((function(e){return null!=e}));e.setFeatures(r)}))}))}))}}),q=new y.default((0,r.__assign)((0,r.__assign)({},e.layerOptions),{source:X})),(0,b.setOLVectorLayerStyle)(q,null!==(C=e.vectorStyle)&&void 0!==C?C:N.DEFAULT_VECTOR_LAYER_STYLE,e.cluster),x(e,q,n),q;case o.GenericSubjectLayerType.CSV:var ae=new E.default({loader:function(t,n,r){var a=new XMLHttpRequest;a.open("GET",e.sourceParams.url);var i=function(){return ae.clear()};a.onerror=i,a.onload=function(){200==a.status?new h.CsvFormatDriver(h.CSV_COLUMN_ALIASES).tryParse(a.responseText.length,a.responseText).then((function(t){var n;t.addTo(ae,r,null===(n=e.meta)||void 0===n?void 0:n.projection)})).catch((function(e){return i()})):i()},a.send()},attributions:e.sourceParams.attributions});return q=new _.default((0,r.__assign)((0,r.__assign)({},e.layerOptions),{source:B(ae,e)})),(0,b.setOLVectorLayerStyle)(q,null!==(G=e.vectorStyle)&&void 0!==G?G:N.DEFAULT_VECTOR_LAYER_STYLE,e.cluster),x(e,q,n),q;case o.GenericSubjectLayerType.KML:return X=new E.default({url:e.sourceParams.url,format:new S.default,attributions:e.sourceParams.attributions}),q=new _.default((0,r.__assign)((0,r.__assign)({},e.layerOptions),{source:B(X,e)})),x(e,q,n),q;case o.GenericSubjectLayerType.TileWMS:return K=(0,r.__assign)({crossOrigin:"anonymous"},e.sourceParams),(q=new m.default({source:new f.default(K)})).set(i.LayerProperty.LAYER_DESCRIPTION,e.description),q.set(i.LayerProperty.LAYER_TYPE,"WMS"),q.set(i.LayerProperty.IS_SELECTABLE,!0),q.set(i.LayerProperty.IS_EXTERNAL,n),q.set(i.LayerProperty.IS_GROUP,!1),q.set(i.LayerProperty.SELECTED_POPUP_CONFIGURATION,e.popupTemplate),q.set(i.LayerProperty.LAYER_METADATA,e.meta),q.set(i.LayerProperty.LAYER_DEFN,e),q.setVisible(e.initiallyVisible),q;case o.GenericSubjectLayerType.CustomVector:if((0,A.strIsNullOrEmpty)(e.driverName))throw new Error("Missing required driverName");var ie=I.ExternalLayerFactoryRegistry.getInstance().getExternalVectorLayerCreator(e.driverName);if(!ie)throw new Error("Could not resolve an approriate factory for the given driver: "+e.driverName);return X=B((q=ie(e.sourceParams,e.meta,e.layerOptions,a)).getSource(),e),q.setSource(X),(0,b.setOLVectorLayerStyle)(q,null!==(Y=e.vectorStyle)&&void 0!==Y?Y:N.DEFAULT_VECTOR_LAYER_STYLE,e.cluster),x(e,q,n),q;default:throw new Error("Unknown subject layer type: "+e.type)}},t.createExternalSource=function(e){var t;switch(e.kind){case"XYZ":t=s.default;break;case"XYZDebug":t=u.default;break;case"OSM":t=l.default;break;case"Stamen":t=c.default;break;case"BingMaps":t=p.default;break;case"UTFGrid":t=d.default;break;default:throw new a.MgError("Unknown external base layer provider: "+e.kind)}return void 0!==e.options?new t((0,r.__assign)({crossOrigin:"Anonymous"},e.options)):new t({crossOrigin:"Anonymous"})}},8514:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.FlyoutRegion=void 0;var r=(0,n(70655).__importStar)(n(67294)),a=n(91548),i=n(37979),o=n(95601);t.FlyoutRegion=function(e){return r.createElement("div",null,function(){var t=[],n=function(n){var s=e.flyoutConf[n];if(s.open){var l=s.childItems||[],u={zIndex:2e3};if(s.metrics){var c=s.metrics;n==o.WEBLAYOUT_CONTEXTMENU?(u.top=c.posY-40,u.left=c.posX+20):(!0===s.metrics.vertical?u.top=c.posY:u.top=c.posY+c.height,n==o.WEBLAYOUT_TASKMENU?u.right=window.innerWidth-(c.posX+c.width):(u.left=c.posX,!0===s.metrics.vertical&&(u.left+=c.width)))}var p="mg-flyout-menu-container";s.componentName&&(p="mg-flyout-component-container"),t.push(r.createElement("div",{key:n,className:p,style:u},s.componentName?r.createElement(i.PlaceholderComponent,{id:s.componentName,componentProps:s.componentProps,locale:e.locale}):r.createElement(a.MenuComponent,{items:l,onInvoked:function(){e.onCloseFlyout(n)}}),function(){if(n===o.WEBLAYOUT_TASKMENU)return r.createElement("iframe",{src:"about:blank",className:"iframe-iehack-zindex"})}()))}};for(var s in e.flyoutConf)n(s);return t}())}},45003:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.FormFrameShim=void 0;var r=n(70655),a=(0,r.__importStar)(n(67294)),i=function(e){function t(t){var n=e.call(this,t)||this;return n.onFormMounted=function(e){n._form=e},n.state={target:"",action:"",params:[]},n}return(0,r.__extends)(t,e),t.prototype.submit=function(e,t,n){var r=this;this.setState({action:e,params:t,target:n},(function(){r._form.submit()}))},t.prototype.render=function(){var e=this.state,t=e.target,n=e.action,r=e.params;return a.createElement("form",{style:{visibility:"hidden",width:0,height:0},ref:this.onFormMounted,method:"post",id:"Frm",target:t,action:n,encType:"application/x-www-form-urlencoded"},function(){for(var e=[],t=0;t<r.length;t+=2)e.push(a.createElement("input",{id:"f"+t,key:"f"+t,type:"hidden",name:r[t],value:r[t+1]}));return e}())},t}(a.Component);t.FormFrameShim=i},9663:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ImageIcon=t.Icon=void 0;var r=n(70655),a=(0,r.__importStar)(n(67294)),i=n(57394),o=n(44839);t.Icon=function(e){var t=(0,r.__assign)({},e.style||{});return t.display||(t.display="inline-block"),a.createElement("div",(0,r.__assign)({style:t,onClick:e.onClick},e.otherProps),e.children(e.baseSize))},t.ImageIcon=function(e){if(!e.url&&!e.spriteClass)return a.createElement("noscript",null);var t,n=e.spriteClass;if(e.url&&e.url!=o.STD_CSS_SPRITE_RELPATH&&(t=(0,i.getAssetPath)(e.url),n=void 0),n){var s=(0,r.__assign)({},e.style||{});return s.display||(s.display="inline-block"),a.createElement("div",(0,r.__assign)({style:s,onClick:e.onClick,className:"icon "+n},e.otherProps))}return a.createElement("img",(0,r.__assign)({className:"icon",style:e.style,src:t,onClick:e.onClick},e.otherProps,{onError:function(e){return e.currentTarget.src=o.ICON_ERROR}}))}},4276:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.AddLayer=void 0;var r,a,i=n(70655),o=(0,i.__importStar)(n(67294)),s=n(48720),l=n(73649),u=n(91795),c=n(27058),p=n(7275),d=n(89737),m=n(30844),f=n(93762),_=n(26693),E=n(4946),v=n(78113),g=n(85261),y={WMS:{label:"WMS",content:function(e){return o.createElement(l.AddWmsLayer,(0,i.__assign)({},e))}},WFS:{label:"WFS",content:function(e){return o.createElement(u.AddWfsLayer,(0,i.__assign)({},e))}}};function h(e,t){return[{value:a.Vector,label:(0,s.tr)("CREATE_VECTOR_LAYER",t),isValid:function(e){return!0}},{value:a.Themed,label:(0,s.tr)("CREATE_VECTOR_THEMED",t),isValid:function(e){return!0}},{value:a.Clustered,label:(0,s.tr)("CREATE_VECTOR_CLUSTERED",t),isValid:function(e){return 1==e.length&&e.includes("Point")}},{value:a.Heatmap,label:(0,s.tr)("CREATE_VECTOR_HEATMAP",t),isValid:function(e){return 1==e.length&&e.includes("Point")}}].filter((function(t){return t.isValid(e)}))}!function(e){e[e.File=0]="File",e[e.Url=1]="Url"}(r||(r={})),function(e){e.Vector="Vector",e.Themed="Themed",e.Clustered="Clustered",e.Heatmap="Heatmap"}(a||(a={}));var S=function(e){var t=e.locale,n=o.useState(!1),r=n[0],l=n[1],u=o.useState(!1),y=u[0],S=u[1],T=o.useState(void 0),L=T[0],I=T[1],A=o.useState(void 0),C=A[0],b=A[1],N=o.useState(void 0),O=N[0],M=N[1],P=o.useState(4326),R=P[0],D=P[1],w=o.useState(h([],t)),F=w[0],U=w[1],V=o.useState(!1),x=V[0],k=V[1],B=o.useState(void 0),G=B[0],Y=B[1],z=o.useState(void 0),W=z[0],j=z[1],H=o.useState([]),K=H[0],Z=H[1],X=o.useState("Blues"),q=X[0],Q=X[1],J=o.useState(a.Vector),$=J[0],ee=J[1],te=o.useState(10),ne=te[0],re=te[1],ae=o.useState((0,E.getColorBrewerRamps)()),ie=ae[0],oe=(ae[1],o.useState(v.ClusterClickAction.ShowPopup)),se=oe[0],le=oe[1],ue=o.useRef(void 0),ce=function(e){if(k(!1),U(h([],t)),ue.current=e,e){if(M(e.name),b({name:e.name,size:e.size,type:e.type,defaultProjection:e.projection}),U(h(e.geometryTypes,t)),Z(e.propertyNames),e.propertyNames.length>0&&(j(e.propertyNames[0]),Y(e.propertyNames[0])),e.projection){var n=(0,m.parseEpsgCodeFromCRS)(e.projection);n&&D(n)}}else b(void 0),ue.current=void 0},pe=o.useCallback((function(n){return(0,i.__awaiter)(void 0,void 0,void 0,(function(){var r,o,l,u,c,m,E,v;return(0,i.__generator)(this,(function(i){switch(i.label){case 0:if(!(r=(0,f.getViewer)())||!(null==ue?void 0:ue.current))return[3,6];S(!0),I(void 0),i.label=1;case 1:return i.trys.push([1,4,,5]),[4,(0,d.ensureProjection)(n,t)];case 2:if((o=i.sent())[0],l=o[1],(0,p.strIsNullOrEmpty)(O)||(ue.current.name=O),(u=r.getLayerManager()).hasLayer(ue.current.name))throw new Error((0,s.tr)("LAYER_NAME_EXISTS",t,{name:ue.current.name}));switch(c=void 0,$){case a.Clustered:c={kind:"Cluster",clusterDistance:ne,onClusterClickAction:se};break;case a.Themed:c={kind:"Theme",themeOnProperty:W,colorBrewerTheme:q};break;case a.Heatmap:c={kind:"Heatmap"}}return m=void 0,x&&(m=G),[4,u.addLayerFromParsedFeatures({features:ue.current,projection:l,extraOptions:c,labelOnProperty:m})];case 3:return E=i.sent(),(0,_.zoomToLayerExtents)(E.name,r),S(!1),r.toastSuccess("success",(0,s.tr)("ADDED_LAYER",e.locale,{name:E.name})),I(void 0),b(void 0),M(void 0),e.onLayerAdded(E),[3,5];case 4:return v=i.sent(),I(v),(0,p.strIsNullOrEmpty)(null==v?void 0:v.message)||r.toastError("error",v.message),[3,5];case 5:S(!1),i.label=6;case 6:return[2]}}))}))}),[ne,$,W,q,x,G,se]);if(C){var de=!0;$==a.Themed&&(0,p.strIsNullOrEmpty)(W)&&(de=!1);var me=o.createElement(o.Fragment,null,o.createElement(c.Switch,{label:(0,s.tr)("ENABLE_LABELS",t),checked:x,onChange:function(e){return k(e.target.checked)}}),x&&o.createElement(c.FormGroup,{label:(0,s.tr)("LABEL_USING_PROPERTY",t)},o.createElement(c.HTMLSelect,{value:G,onChange:function(e){return Y(e.target.value)}},K.map((function(e,t){return o.createElement("option",{key:e,value:e},e)}))))),fe=o.createElement("div",{dangerouslySetInnerHTML:{__html:(0,s.tr)("COLORBREWER_THEME",t)}}),_e=o.createElement(o.Fragment,null,o.createElement(c.FormGroup,{label:(0,s.tr)("THEME_ON_PROPERTY",t)},o.createElement(c.HTMLSelect,{value:W,onChange:function(e){return j(e.target.value)}},K.map((function(e,t){return o.createElement("option",{key:e,value:e},e)})))),o.createElement(c.FormGroup,{label:fe},o.createElement(c.HTMLSelect,{value:q,onChange:function(e){return Q(e.target.value)}},ie.map((function(e,t){return o.createElement("option",{key:e.displayName,value:e.scheme},e.displayName)})))),q&&o.createElement(E.ColorBrewerSwatch,{theme:q})),Ee=o.createElement(o.Fragment,null,o.createElement(c.FormGroup,{label:(0,s.tr)("POINT_CLUSTER_DISTANCE",t)},o.createElement(c.NumericInput,{min:1,value:ne,onValueChange:function(e){return re(e)}})),o.createElement(c.FormGroup,{label:(0,s.tr)("CLUSTER_CLICK_ACTION",t)},o.createElement(c.HTMLSelect,{value:se,onChange:function(e){return le(e.target.value)}},o.createElement("option",{value:v.ClusterClickAction.ShowPopup},(0,s.tr)("CLUSTER_CLICK_ACTION_SHOW_POPUP",t)),o.createElement("option",{value:v.ClusterClickAction.ZoomToClusterExtents},(0,s.tr)("CLUSTER_CLICK_ACTION_ZOOM_EXTENTS",t)))));return o.createElement(c.NonIdealState,{title:o.createElement(c.EditableText,{value:O,onChange:function(e){return M(e)}}),icon:"upload",description:(0,s.tr)("FMT_UPLOADED_FILE",t,{size:C.size,type:(0,p.strIsNullOrEmpty)(C.type)?(0,s.tr)("UNKNOWN_FILE_TYPE",t):C.type}),action:o.createElement(o.Fragment,null,L&&o.createElement(c.Callout,{intent:c.Intent.DANGER,title:(0,s.tr)("ADDING_LAYER_ERROR",t)},L.message),o.createElement(c.FormGroup,{label:(0,s.tr)("ADD_LAYER_PROJECTION",t)},C.defaultProjection?o.createElement("strong",null,"EPSG:",R):o.createElement(c.FormGroup,{label:o.createElement("a",{href:"https://epsg.io",target:"_blank"},"EPSG:"),inline:!0},o.createElement(c.NumericInput,{style:{width:60},min:0,value:R,onValueChange:function(e){return D(e)}}))),o.createElement(c.FormGroup,{label:"Create Layer As"},o.createElement(c.HTMLSelect,{value:$,onChange:function(e){return ee(e.target.value)}},F.map((function(e,t){return o.createElement("option",{key:e.value,value:e.value},e.label)})))),function(){switch($){case a.Vector:return o.createElement(o.Fragment,null,me);case a.Themed:return o.createElement(o.Fragment,null,me,_e);case a.Clustered:return o.createElement(o.Fragment,null,me,Ee);case a.Heatmap:return o.createElement(o.Fragment,null);default:(0,g.assertNever)($)}}(),o.createElement(c.ButtonGroup,null,o.createElement(c.Button,{disabled:!de,loading:y,onClick:function(e){return pe(R)},intent:c.Intent.PRIMARY},(0,s.tr)("ADD_LAYER",t)),o.createElement(c.Button,{loading:y,onClick:function(e){ce(void 0)},intent:c.Intent.DANGER},(0,s.tr)("CANCEL",t))))})}return r?o.createElement(c.NonIdealState,{icon:o.createElement(c.Spinner,{intent:c.Intent.NONE,size:c.SpinnerSize.LARGE}),title:(0,s.tr)("ADD_FILE_PROCESSING",t)}):o.createElement(o.Fragment,null,L&&o.createElement(c.Callout,{intent:c.Intent.DANGER,title:(0,s.tr)("ADDING_LAYER_ERROR",t)},L.message),o.createElement(c.NonIdealState,{title:(0,s.tr)("ADD_FILE",t),icon:"upload",description:(0,s.tr)("ADD_FILE_INSTRUCTIONS",t),action:o.createElement(c.FileInput,{fill:!0,text:(0,s.tr)("CHOOSE_FILE",t),buttonText:(0,s.tr)("BROWSE",t),onInputChange:function(e){return e.target.files&&(n=e.target.files[0],(0,i.__awaiter)(void 0,void 0,void 0,(function(){var e,r,a,o;return(0,i.__generator)(this,(function(i){switch(i.label){case 0:if(!(e=(0,f.getViewer)()))return[3,5];l(!0),I(void 0),r=e.getLayerManager(),i.label=1;case 1:return i.trys.push([1,3,,4]),[4,r.parseFeaturesFromFile({file:n,name:n.name,locale:t})];case 2:return a=i.sent(),ce(a),[3,4];case 3:return o=i.sent(),I(o),[3,4];case 4:l(!1),i.label=5;case 5:return[2]}}))})));var n}})}))},T=function(e){var t=e.locale,n=o.useState(void 0),r=n[0],a=n[1],i=Object.keys(y).map((function(e){return{value:e,label:y[e].label}}));return o.createElement("div",null,o.createElement(c.Label,null,(0,s.tr)("LAYER_TYPE",t),o.createElement(c.HTMLSelect,{value:r||"",onChange:function(e){a(e.target.value)}},o.createElement("option",null,(0,s.tr)("SELECT_LAYER_TYPE",t)),i.map((function(e){return o.createElement("option",{key:e.value,value:e.value},e.value)})))),function(){if(r&&y[r]){var n={locale:t,onLayerAdded:e.onLayerAdded,onAddLayerBusyWorker:e.onAddLayerBusyWorker,onRemoveLayerBusyWorker:e.onRemoveLayerBusyWorker};return y[r].content(n)}}())};t.AddLayer=function(e){var t=o.useState(r.File),n=t[0],a=t[1];return o.createElement("div",null,o.createElement(c.RadioGroup,{label:(0,s.tr)("ADD_LAYER_KIND_PROMPT",e.locale),onChange:function(e){a(parseInt(e.target.value,10))},selectedValue:n},o.createElement(c.Radio,{label:(0,s.tr)("LAYER_KIND_FILE",e.locale),value:r.File}),o.createElement(c.Radio,{label:(0,s.tr)("LAYER_KIND_URL",e.locale),value:r.Url})),o.createElement("hr",null),function(){switch(n){case r.File:return o.createElement(S,(0,i.__assign)({},e));case r.Url:return o.createElement(T,(0,i.__assign)({},e))}}())}},91795:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.AddWfsLayer=void 0;var r=n(70655),a=(0,r.__importStar)(n(67294)),i=n(29256),o=n(27058),s=n(48720),l=n(14967),u=n(31293),c=n(62348),p=n(30844),d=(0,r.__importDefault)(n(30933)),m=(0,r.__importDefault)(n(86333)),f=(0,r.__importDefault)(n(64678)),_=n(87755),E=n(89737),v=n(68093),g=n(93762),y=n(27792),h=n(78113),S=n(26693);t.AddWfsLayer=function(e){var t=e.locale,n=a.useState(""),r=n[0],T=n[1],L=a.useState(!1),I=L[0],A=L[1],C=a.useState(void 0),b=C[0],N=C[1],O=a.useState(void 0),M=O[0],P=O[1];return a.createElement("div",null,a.createElement(o.ControlGroup,{fill:!0},a.createElement(o.InputGroup,{leftIcon:"geosearch",placeholder:(0,s.tr)("ADD_WFS_LAYER_URL",t),value:r,onChange:function(e){T(e.target.value)},readOnly:I,rightElement:a.createElement(o.Button,{intent:o.Intent.PRIMARY,icon:"arrow-right",onClick:function(){N(void 0),A(!0),new u.Client("","mapagent").getText(r).then((function(e){var t=(new c.WfsCapabilitiesParser).parse(e);A(!1),N(t),P(void 0)})).catch((function(e){A(!1),N(void 0),P(e)}))},disabled:I})})),a.createElement("br",null),a.createElement("div",null,I?a.createElement(o.NonIdealState,{icon:a.createElement(o.Spinner,{intent:o.Intent.NONE,size:o.Spinner.SIZE_LARGE}),title:(0,s.tr)("ADD_WFS_LAYER_LOADING",t),description:(0,s.tr)("ADD_WFS_LAYER_LOADING_DESC",t)}):b?a.createElement(p.WfsCapabilitiesPanel,{onAddLayer:function(n,a,o,l,u,c){var p=(0,g.getViewer)();b&&p&&(0,E.ensureProjection)(u,t,l).then((function(u){var E=u[1],g=p.getProjection(),T=(0,_.parseUrl)(r),L="typename";"2.0.0"==a&&(L="typenames");var I,A=T.url+"?service=WFS&version="+a+"&request=GetFeature&"+L+"="+encodeURIComponent(n)+"&outputFormat="+encodeURIComponent(o)+"&srsName="+encodeURIComponent(l),C=new f.default({dataProjection:E,featureProjection:g});I=A;var b=new d.default({format:C,url:I,strategy:void 0}),N=new m.default({source:b,className:"external-vector-layer"});N.set(i.LayerProperty.LAYER_TYPE,"WFS"),N.set(i.LayerProperty.IS_EXTERNAL,!0),N.set(i.LayerProperty.IS_SELECTABLE,!0),N.set(i.LayerProperty.IS_GROUP,!1),c&&N.set(i.LayerProperty.WGS84_BBOX,c),(0,y.setOLVectorLayerStyle)(N,h.DEFAULT_VECTOR_LAYER_STYLE,void 0),p.getLayerManager().addLayer(n,N),p.toastSuccess("success",(0,s.tr)("ADDED_LAYER",t,{name:n}));var O=(0,v.getLayerInfo)(N,!0);(0,S.zoomToLayerExtents)(O.name,p),e.onLayerAdded(O)}))},capabilities:b,locale:t}):M?a.createElement(l.Error,{error:M}):a.createElement(o.NonIdealState,{icon:"issue",title:(0,s.tr)("ADD_WFS_LAYER_NO_LAYERS",t),description:(0,s.tr)("WFS_NO_LAYER_DESCRIPTION",t)})))}},73649:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.AddWmsLayer=void 0;var r=n(70655),a=(0,r.__importStar)(n(67294)),i=n(29256),o=n(48720),s=n(14967),l=n(31293),u=n(20167),c=(0,r.__importDefault)(n(8930)),p=(0,r.__importDefault)(n(92479)),d=(0,r.__importDefault)(n(20228)),m=(0,r.__importDefault)(n(42225)),f=(0,r.__importDefault)(n(14409)),_=n(27058),E=n(7275),v=n(68093),g=n(93762);t.AddWmsLayer=function(e){var t=e.locale,n=a.useState(""),r=n[0],y=n[1],h=a.useState(!1),S=h[0],T=h[1],L=a.useState(void 0),I=L[0],A=L[1],C=a.useState(void 0),b=C[0],N=C[1];return a.createElement("div",null,a.createElement(_.ControlGroup,{fill:!0},a.createElement(_.InputGroup,{leftIcon:"geosearch",placeholder:(0,o.tr)("ADD_WMS_LAYER_URL",t),value:r,onChange:function(e){y(e.target.value)},readOnly:S,rightElement:a.createElement(_.Button,{intent:_.Intent.PRIMARY,icon:"arrow-right",onClick:function(){A(void 0),T(!0),new l.Client("","mapagent").getText(r).then((function(e){var n=(new c.default).read(e);"1.3.0"!=n.version?(T(!1),A(void 0),N((0,o.tr)("WMS_UNSUPPORTED_VERSION",t,{version:n.version}))):(T(!1),A(n),N(void 0))})).catch((function(e){T(!1),A(void 0),N(e)}))},disabled:S})})),a.createElement("br",null),a.createElement("div",null,S?a.createElement(_.NonIdealState,{icon:a.createElement(_.Spinner,{intent:_.Intent.NONE,size:_.Spinner.SIZE_LARGE}),title:(0,o.tr)("ADD_WMS_LAYER_LOADING",t),description:(0,o.tr)("ADD_WMS_LAYER_LOADING_DESC",t)}):I?a.createElement(u.WmsCapabilitiesPanel,{onAddLayer:function(n,r,a,s){var l,u,c=(0,g.getViewer)();if(I&&c){var _={LAYERS:n};s&&(_.STYLE=s.Name),a&&(_.TILED=!0);var y=void 0,h=void 0;if(a?(h=new f.default({url:I.Capability.Request.GetMap.DCPType[0].HTTP.Get.OnlineResource,params:_}),y=new p.default({source:h})):(h=new m.default({url:I.Capability.Request.GetMap.DCPType[0].HTTP.Get.OnlineResource,params:_}),y=new d.default({source:h})),y.set(i.LayerProperty.LAYER_TYPE,"WMS"),y.set(i.LayerProperty.IS_SELECTABLE,r),y.set(i.LayerProperty.IS_EXTERNAL,!0),y.set(i.LayerProperty.IS_GROUP,!1),s){var S=null===(u=null===(l=s.LegendURL)||void 0===l?void 0:l[0])||void 0===u?void 0:u.OnlineResource;(0,E.strIsNullOrEmpty)(S)||y.set(i.LayerProperty.HAS_WMS_LEGEND,!0)}h.set(i.SourceProperty.SUPPRESS_LOAD_EVENTS,!0);var T=function(){c.addImageLoading(),e.onAddLayerBusyWorker(n)},L=function(){c.addImageLoaded(),e.onRemoveLayerBusyWorker(n)};h instanceof f.default?(h.on("tileloadstart",T),h.on("tileloadend",L),h.on("tileloaderror",L)):h instanceof m.default&&(h.on("imageloadstart",T),h.on("imageloadend",L),h.on("imageloaderror",L)),c.getLayerManager().addLayer(n,y),c.toastSuccess("success",(0,o.tr)("ADDED_LAYER",t,{name:n})),e.onLayerAdded((0,v.getLayerInfo)(y,!0))}},capabilities:I,locale:t}):b?a.createElement(s.Error,{error:b}):a.createElement(_.NonIdealState,{icon:"issue",title:(0,o.tr)("ADD_WMS_LAYER_NO_LAYERS",t),description:(0,o.tr)("WMS_NO_LAYER_DESCRIPTION",t)})))}},4946:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ColorBrewerSwatch=t.getMaxRamp=t.getColorBrewerRamps=void 0;var r=n(70655),a=(0,r.__importStar)(n(67294)),i=(0,r.__importDefault)(n(79020));function o(e){var t,n=0;for(var r in e){var a=e[r];a.length>n&&(t=a,n=a.length)}return t}t.getColorBrewerRamps=function(){var e=[];for(var t in i.default.schemeGroups)for(var n=0,r=i.default.schemeGroups[t];n<r.length;n++){var a=r[n];e.push({displayName:t+" - "+a,category:t,scheme:a,ramp:o(a)})}return e},t.getMaxRamp=o,t.ColorBrewerSwatch=function(e){var t=o(i.default[e.theme]);return t?a.createElement("table",null,a.createElement("colgroup",null,t.map((function(e,t){return a.createElement("col",{key:"ramp-col-"+t,span:1,style:{width:12}})}))),a.createElement("tbody",null,a.createElement("tr",null,t.map((function(e,t){return a.createElement("td",{key:"ramp-"+t,style:{border:"1px solid black",backgroundColor:e}}," ")}))))):a.createElement(a.Fragment,null)}},97834:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ColorExprEditor=t.BooleanExprEditor=t.StringExprEditor=t.SliderExprEditor=t.NumberExprEditor=t.contrast=void 0;var r=n(70655),a=n(27058),i=(0,r.__importStar)(n(67294)),o=n(48720),s=n(78113),l=n(7275),u=n(66690);function c(e,t){if(void 0===t&&(t=128),void 0===e)return"#000";var n,r=function(e){if(e&&void 0!==e&&""!==e){var t=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(e);return t?{r:parseInt(t[1],16),g:parseInt(t[2],16),b:parseInt(t[3],16)}:void 0}}(e);return void 0===r||(299*(n=r).r+587*n.g+114*n.b)/1e3>=t?"#000":"#fff"}function p(e,t){return e?(0,s.isEvaluatable)(e)?"Expr: "+e.expr:""+(null!=e?e:l.STR_EMPTY):(0,o.tr)("EXPR_NOT_SET",t)}function d(e){switch(null==e?void 0:e.toLowerCase()){case"true":case"1":return!0;case"false":case"0":return!1}return!1}function m(e,t){switch(t){case"edit-expr":return(0,s.isEvaluatable)(e)?e.expr:l.STR_EMPTY;case"edit-value":return(0,s.isEvaluatable)(e)?l.STR_EMPTY:""+(null!=e?e:l.STR_EMPTY)}}function f(e){var t=e.renderValueEditor,n=e.locale,r=e.roStyle,o=function(e){var t=e.value,n=e.onChange,r=i.useState((0,s.isEvaluatable)(t)?"edit-expr":"edit-value"),a=r[0],o=r[1],l=i.useState(t),u=l[0],c=l[1],p=i.useState(!1),d=p[0],m=p[1],f=i.useState(!1),_=f[0],E=f[1];i.useEffect((function(){c(t)}),[t]);var v=i.useCallback((function(){c(t),m(!1)}),[t]);return{editMode:a,localValue:u,isEditValid:_,isEditing:d,setIsEditing:m,setEditMode:o,setLocalValue:c,onApplyValue:function(){n(u),m(!1)},onCancelEditing:v,onUpdateLocalValue:function(e){try{c(e),E(!0)}catch(e){E(!1)}}}}(e),l=o.isEditValid,u=o.isEditing,c=o.localValue,d=o.setIsEditing,f=o.editMode,_=o.setEditMode,E=o.onApplyValue,v=o.onCancelEditing,g=o.onUpdateLocalValue,y=i.createElement(a.Button,{icon:"edit",minimal:!0,intent:a.Intent.PRIMARY,style:{color:"white",backgroundColor:"#137cbd"},onClick:function(e){u?v():d(!0)}});return i.createElement(i.Fragment,null,i.createElement(a.InputGroup,{style:r,readOnly:!0,value:p(e.value,n),rightElement:y}),i.createElement(a.Collapse,{isOpen:u,keepChildrenMounted:!1},i.createElement(a.Card,null,i.createElement("h5",{className:"bp3-heading"},"Edit Value"),i.createElement(a.Radio,{name:"edit-mode",label:"Value",value:"edit-value",checked:"edit-value"==f,onChange:function(e){return _(e.target.value)}}),t(c,g,n,"edit-value"!=f),i.createElement("br",null),i.createElement(a.Radio,{name:"edit-mode",label:"Expression",value:"edit-expr",checked:"edit-expr"==f,onChange:function(e){return _(e.target.value)}}),i.createElement("input",{disabled:"edit-expr"!=f,type:"text",className:"bp3-input",value:m(c,"edit-expr"),onChange:function(e){return g({expr:e.target.value})}}),i.createElement("br",null),i.createElement("br",null),i.createElement(a.ButtonGroup,null,i.createElement(a.Button,{disabled:!l,intent:a.Intent.SUCCESS,onClick:function(e){return E()}},"Apply"),i.createElement(a.Button,{intent:a.Intent.DANGER,onClick:function(e){return v()}},"Cancel")))))}t.contrast=c,t.NumberExprEditor=function(e){var t=e.min,n=e.max;return i.createElement(f,{locale:e.locale,value:e.value,onChange:e.onChange,renderValueEditor:function(e,r,o,s){return i.createElement(a.NumericInput,{disabled:s,min:t,max:n,value:parseInt(m(e,"edit-value"),10),onValueChange:function(e){return r(e)}})}})},t.SliderExprEditor=function(e){var t=e.min,n=e.max,r=e.labelStepSize;return i.createElement(f,{locale:e.locale,value:e.value,onChange:e.onChange,renderValueEditor:function(e,o,s,l){return i.createElement(a.Slider,{disabled:l,min:t,max:n,labelStepSize:r,value:parseInt(m(e,"edit-value"),10),onChange:function(e){return o(e)}})}})},t.StringExprEditor=function(e){return i.createElement(f,{locale:e.locale,value:e.value,onChange:e.onChange,renderValueEditor:function(e,t,n,r){return i.createElement("input",{disabled:r,type:"text",className:"bp3-input",value:m(e,"edit-value"),onChange:function(e){return t(e.target.value)}})}})},t.BooleanExprEditor=function(e){return i.createElement(f,{locale:e.locale,value:e.value,onChange:e.onChange,renderValueEditor:function(e,t,n,r){return i.createElement(a.Switch,{disabled:r,checked:d(m(e,"edit-value")),onChange:function(e){return t(e.target.checked)}})}})},t.ColorExprEditor=function(e){var t,n=e.value;return(0,s.isEvaluatable)(n)||(0,l.strIsNullOrEmpty)(n)||(t={backgroundColor:n,color:c(n)}),i.createElement(f,{roStyle:t,locale:e.locale,value:n,onChange:e.onChange,renderValueEditor:function(e,t,n,r){return i.createElement(u.ColorPicker,{locale:n,value:m(e,"edit-value"),onChange:function(e){return t(e)}})}})}},27482:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getLegendImage=void 0;var r=n(70655),a=n(40177),i=n(29839),o=(0,r.__importDefault)(n(81090)),s=(0,r.__importDefault)(n(60188)),l=(0,r.__importDefault)(n(92083)),u=(0,r.__importDefault)(n(2033)),c=n(28641),p=[16,16];t.getLegendImage=function e(t,n,r){var d;void 0===n&&(n=void 0),void 0===r&&(r=0),void 0===(t=t||{}).margin&&(t.margin=10);var m=t.size||p;t.onload=t.onload||function(){setTimeout((function(){e(t,n,r)}),100)};var f=m[0]+2*t.margin,_=t.lineHeight||m[1]+2*t.margin,E=a.DEVICE_PIXEL_RATIO;n||(r=0,(n=document.createElement("canvas")).width=f*E,n.height=_*E);var v=n.getContext("2d");if(v){v.save();var g=(0,i.toContext)(v,{pixelRatio:E}),y=t.typeGeom,h=void 0,S=t.feature;!S&&y&&(S=/Point/.test(y)?new o.default(new s.default([0,0])):/LineString/.test(y)?new o.default(new l.default([0,0])):new o.default(new u.default([[[0,0]]])),t.properties&&S.setProperties(t.properties)),S?("function"==typeof(h=S.getStyle())&&(h=h(S)),h||(h="function"==typeof t.style?t.style(S):t.style||[]),y=null===(d=S.getGeometry())||void 0===d?void 0:d.getType()):h=[],h instanceof Array||(h=[h]);var T=h,L=f/2,I=_/2,A=m[0]/2,C=m[1]/2,b=void 0,N=void 0;if("Point"===y){for(var O=null,M=0;N=T[M];M++){var P=N.getImage();if(P){var R=P.getImage(devicePixelRatio);if(R&&R.complete&&!R.naturalWidth&&("function"==typeof t.onload&&R.addEventListener("load",(function(){setTimeout((function(){var e;null===(e=t.onload)||void 0===e||e.call(t)}),100)})),P.load()),P.getAnchor){var D=P.getAnchor();if(D){var w=P.getSize(),F=D[0]-w[0],U=D[1]-w[1];O?(0,c.extend)(O,[F,U,F+w[0],U+w[1]]):O=[F,U,F+w[0],U+w[1]]}}}}O&&(L+=(O[2]+O[0])/2,I+=(O[3]+O[1])/2)}for(I+=r*_||0,b=0;N=h[b];b++)switch(g.setStyle(N),y){case s.default:case"Point":case"MultiPoint":g.drawGeometry(new s.default([L,I]));break;case l.default:case"LineString":case"MultiLineString":v.save(),v.rect(t.margin*E,0,m[0]*E,n.height),v.clip(),g.drawGeometry(new l.default([[L-A,I],[L+A,I]])),v.restore();break;case u.default:case"Polygon":case"MultiPolygon":g.drawGeometry(new u.default([[[L-A,I-C],[L+A,I-C],[L+A,I+C],[L-A,I+C],[L-A,I-C]]]))}v.restore()}return n}},81713:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ManageLayers=void 0;var r,a=(0,n(70655).__importStar)(n(67294)),i=n(48720),o=n(27058),s=n(7275),l=n(78113),u=n(25727);!function(e){e[e.None=0]="None",e[e.MoreLayerOptions=1]="MoreLayerOptions",e[e.EditVectorStyle=2]="EditVectorStyle",e[e.WmsLegend=3]="WmsLegend"}(r||(r={}));var c=[0,10,20,30,40,50],p={whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},d=function(e){var t,n,d,m,f=e.layer,_=e.locale,E=e.canMoveUp,v=e.canMoveDown,g=e.currentResolution,y=e.onSetOpacity,h=e.onSetHeatmapBlur,S=e.onSetHeatmapRadius,T=e.onRemoveLayer,L=e.onMoveLayerUp,I=e.onMoveLayerDown,A=e.onZoomToBounds,C=e.onSetVisibility,b=e.onVectorStyleChanged,N=a.useState(void 0),O=N[0],M=N[1],P=a.useState(r.None),R=P[0],D=P[1],w=function(e){var t=r.None;switch(e){case r.EditVectorStyle:case r.MoreLayerOptions:case r.WmsLegend:t=e==R?r.None:e}D(t)};if(f.busyWorkerCount>0)return a.createElement(o.Card,null,a.createElement(o.Spinner,{size:30}),a.createElement("p",{style:{textAlign:"center",marginTop:5}},(0,i.tr)("LOADING_LAYER",_,{name:f.name})));var F=function(e){var t;return!0!==(null===(t=e.metadata)||void 0===t?void 0:t.geojson_as_vt)&&"WMS"!=e.type}(f),U="layer";"WMS"==f.type&&(U="media");var V=[],x=f.extensions,k=!1;if(x)switch(x.type){case"WMS":k=!0,x.getLegendUrl&&V.push(a.createElement(o.Button,{key:"toggle-wms-legend",intent:o.Intent.SUCCESS,icon:"info-sign",onClick:function(){return function(e){if(O)M(void 0),D(r.None);else{var t=e(g);M(t),D(r.WmsLegend)}}(x.getLegendUrl)}}))}f.vectorStyle&&"KML"!=f.type&&null==f.heatmap&&V.push(a.createElement(o.Button,{key:"edit-vector-style",title:(0,i.tr)("LAYER_MANAGER_TT_EDIT_STYLE",_),intent:o.Intent.PRIMARY,icon:"edit",onClick:function(){return w(r.EditVectorStyle)}})),V.push(a.createElement(o.Button,{key:"more-layer-options",title:(0,i.tr)("LAYER_MANAGER_TT_MORE_OPTIONS",_),intent:o.Intent.PRIMARY,icon:"cog",onClick:function(){return w(r.MoreLayerOptions)}}));var B,G=!(0,s.strIsNullOrEmpty)(O),Y=null!==(t=f.displayName)&&void 0!==t?t:f.name,z=null!==(d=null===(n=f.cluster)||void 0===n?void 0:n.style)&&void 0!==d?d:f.vectorStyle;z==f.vectorStyle?B=l.VectorStyleSource.Base:z==(null===(m=f.cluster)||void 0===m?void 0:m.style)&&(B=l.VectorStyleSource.Cluster);var W=!1,j=!1,H=!1;for(var K in z)z[K].point&&(j=!0),z[K].line&&(W=!0),z[K].polygon&&(H=!0);return a.createElement(o.Card,{key:f.name},a.createElement(o.Switch,{style:p,checked:f.visible,onChange:function(){return C(f.name,!f.visible)},labelElement:a.createElement("span",{title:Y},a.createElement(o.Icon,{icon:U})," ",Y)}),a.createElement(o.ButtonGroup,null,a.createElement(o.Button,{disabled:!E,title:(0,i.tr)("LAYER_MANAGER_TT_MOVE_UP",_),intent:o.Intent.PRIMARY,icon:"caret-up",onClick:function(){return L(f.name)}}),a.createElement(o.Button,{disabled:!v,title:(0,i.tr)("LAYER_MANAGER_TT_MOVE_DOWN",_),intent:o.Intent.PRIMARY,icon:"caret-down",onClick:function(){return I(f.name)}}),a.createElement(o.Button,{disabled:!F,title:(0,i.tr)("LAYER_MANAGER_TT_ZOOM_EXTENTS",_),intent:o.Intent.SUCCESS,icon:"zoom-to-fit",onClick:function(){return A(f.name)}}),a.createElement(o.Button,{title:(0,i.tr)("LAYER_MANAGER_TT_REMOVE",_),intent:o.Intent.DANGER,icon:"trash",onClick:function(){return T(f.name)}}),V),a.createElement(o.Collapse,{isOpen:R==r.MoreLayerOptions},a.createElement(o.Card,null,a.createElement("h5",{className:"bp3-heading"},a.createElement("a",{href:"#"},(0,i.tr)("MORE_LAYER_OPTIONS",_))),a.createElement(o.FormGroup,{label:(0,i.tr)("LAYER_OPACITY",_)},a.createElement(o.Slider,{min:0,max:1,stepSize:.01,value:f.opacity,onChange:function(e){return y(f.name,e)}})),f.heatmap&&a.createElement(a.Fragment,null,a.createElement(o.FormGroup,{label:(0,i.tr)("LAYER_HEATMAP_BLUR",_)},a.createElement(o.Slider,{min:1,max:50,stepSize:1,labelValues:c,value:f.heatmap.blur,onChange:function(e){return h(f.name,e)}})),a.createElement(o.FormGroup,{label:(0,i.tr)("LAYER_HEATMAP_RADIUS",_)},a.createElement(o.Slider,{min:1,max:50,stepSize:1,labelValues:c,value:f.heatmap.radius,onChange:function(e){return S(f.name,e)}}))))),k&&a.createElement(o.Collapse,{isOpen:G},a.createElement(o.Card,null,a.createElement("h5",{className:"bp3-heading"},a.createElement("a",{href:"#"},(0,i.tr)("WMS_LEGEND",_))),a.createElement("img",{src:O}))),z&&a.createElement(o.Collapse,{isOpen:R==r.EditVectorStyle},a.createElement("div",{style:{padding:5}},a.createElement("h5",{className:"bp3-heading"},a.createElement("a",{href:"#"},(0,i.tr)("VECTOR_LAYER_STYLE",_))),a.createElement(u.VectorLayerStyleEditor,{onChange:function(e){return b(f.name,e,B)},locale:_,style:z,enablePoint:j,enableLine:W,enablePolygon:H}))))};t.ManageLayers=function(e){var t=e.locale,n=e.currentResolution,r=e.onSetOpacity,s=e.onSetHeatmapBlur,l=e.onSetHeatmapRadius,u=e.onRemoveLayer,c=e.onMoveLayerUp,p=e.onMoveLayerDown,m=e.onZoomToBounds,f=e.onSetVisibility,_=e.onVectorStyleChanged,E=a.useState(e.layers),v=E[0],g=E[1];return a.useEffect((function(){g(e.layers)}),[e.layers]),v.length?a.createElement("div",null,v.map((function(e,i){var o=0==i||v.length<=1,E=i>=v.length-1||v.length<=1;return a.createElement(d,{key:"manage-layer-"+i,layer:e,locale:t,canMoveUp:!o,canMoveDown:!E,currentResolution:n,onSetOpacity:r,onSetHeatmapBlur:s,onSetHeatmapRadius:l,onRemoveLayer:u,onMoveLayerUp:c,onMoveLayerDown:p,onZoomToBounds:m,onSetVisibility:f,onVectorStyleChanged:_})}))):a.createElement(o.NonIdealState,{icon:"layers",title:(0,i.tr)("NO_EXTERNAL_LAYERS",t),description:(0,i.tr)("NO_EXTERNAL_LAYERS_DESC",t,{tabName:(0,i.tr)("ADD_LAYER",t)})})}},30844:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.WfsCapabilitiesPanel=t.parseEpsgCodeFromCRS=void 0;var r=(0,n(70655).__importStar)(n(67294)),a=n(48720),i=n(27058);function o(e){if("urn:ogc:def:crs:OGC:1.3:CRS84"==e)return 4326;var t=null==e?void 0:e.match(/urn:ogc:def:crs:EPSG::(\d+)/);return 2==(null==t?void 0:t.length)||2==(null==(t=null==e?void 0:e.match(/EPSG:(\d+)/))?void 0:t.length)?parseInt(t[1],10):void 0}function s(e){var t,n=null!==(t=null==e?void 0:e.toLowerCase())&&void 0!==t?t:"";return n.indexOf("application/vnd.geo+json")>=0||n.indexOf("application/json")>=0}t.parseEpsgCodeFromCRS=o,t.WfsCapabilitiesPanel=function(e){var t=e.locale,n=e.capabilities,l=e.onAddLayer,u=n.layers,c=n.info;return r.createElement(r.Fragment,null,r.createElement(i.Card,null,r.createElement("h5",{className:"bp3-heading"},r.createElement("a",{href:"#"},(0,a.tr)("WFS_SERVICE_INFO",t))),r.createElement("p",null,(0,a.tr)("WFS_VERSION",t,{version:c.version})),r.createElement("p",null,(0,a.tr)("OWS_SERVICE_TITLE",t,{title:c.title})),r.createElement("p",null,(0,a.tr)("OWS_SERVICE_ABSTRACT",t,{abstract:c.abstract}))),r.createElement(i.Card,{style:{marginBottom:10}},r.createElement("h5",{className:"bp3-heading"},r.createElement("a",{href:"#"},(0,a.tr)("WFS_AVAILABLE_LAYERS",t))),u.map((function(e){var n=function(e,t){var n,r,a,i,o=null===(r=(null!==(n=t.formats)&&void 0!==n?n:[]).filter((function(e){return s(e)})))||void 0===r?void 0:r[0],l=null===(i=(null!==(a=e.allowedOutputFormats)&&void 0!==a?a:[]).filter((function(e){return s(e)})))||void 0===i?void 0:i[0];return null!=o?o:l}(c,e),u=function(e){var t=[o(e.defaultCrs),e.defaultCrs];if(4326!=t[0]&&3857!=t[0]&&e.otherCrs){var n=e.otherCrs.filter((function(e){var t=o(e);return 4326==t||3857==t}));n.length>0&&(t=[o(n[0]),n[0]])}return t}(e),p=u[0],d=u[1];if(p&&n){var m=r.createElement(r.Fragment,null);return r.createElement(i.Card,{key:e.name,style:{padding:15,paddingTop:5}},r.createElement("h4",null,r.createElement(i.Icon,{icon:"layer"})," ",e.name),r.createElement("p",null,(0,a.tr)("OWS_LAYER_TITLE",t,{title:e.title})),r.createElement("p",null,(0,a.tr)("OWS_LAYER_CRS",t,{crs:"EPSG:"+p})),r.createElement(i.ButtonGroup,{fill:!0},r.createElement(i.Button,{onClick:function(){return l(e.name,c.version,n,d,p,e.wgs84Bounds)},intent:i.Intent.PRIMARY,icon:"new-layer"},(0,a.tr)("ADD_LAYER",t)),m))}})).filter((function(e){return e}))))}},62348:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.WfsCapabilitiesParser=void 0;var r=n(70655),a=n(7275);function i(e){var t;if(e)return null!==(t=e.textContent)&&void 0!==t?t:e.text}function o(e,t,n){var r;n?0==(r=e.getElementsByTagName(n+":"+t)).length&&(r=e.getElementsByTagName(t)):r=e.getElementsByTagName(t);var a=[];if(r)for(var i=0;i<r.length;i++){var o=r.item(i);o&&a.push(o)}return a}function s(e,t,n){n&&t(e,n)}var l=function(){function e(){}return e.prototype.parse=function(e){var t=new DOMParser;return this.xmlDoc=t.parseFromString(e,"text/xml"),{info:this.getServiceInfo(),layers:this.getLayers()}},e.prototype.getServiceInfo=function(){var e,t,n=o(this.xmlDoc,"ServiceIdentification","ows"),r={title:"",abstract:"",version:""};if(1==n.length){for(var l=i(null===(e=o(n[0],"Title","ows"))||void 0===e?void 0:e[0]),u=i(null===(t=o(n[0],"Abstract","ows"))||void 0===t?void 0:t[0]),c=0,p=o(this.xmlDoc,"Operation","ows");c<p.length;c++){var d=p[c];if("GetFeature"==d.getAttribute("name"))for(var m=0,f=o(d,"Parameter","ows");m<f.length;m++){var _=f[m];if("outputFormat"==_.getAttribute("name")){var E=o(_,"Value","ows").map((function(e){return i(e)})).filter((function(e){return!(0,a.strIsNullOrEmpty)(e)}));E.length>0&&(r.allowedOutputFormats=E)}}}var v=o(n[0],"ServiceTypeVersion","ows").map((function(e){return i(e)})).filter((function(e){return!(0,a.strIsNullOrEmpty)(e)}));v.sort(),s(r,(function(e,t){return e.title=t}),l),s(r,(function(e,t){return e.abstract=t}),u),v.length>0&&(r.version=v[v.length-1])}return r},e.prototype.getLayers=function(){return o(this.xmlDoc,"FeatureType","wfs").map((function(e){var t,n,l,u,c,p,d,m,f={name:"",title:"",abstract:"",defaultCrs:""},_=i(null===(t=o(e,"Name","wfs"))||void 0===t?void 0:t[0]),E=i(null===(n=o(e,"Title","wfs"))||void 0===n?void 0:n[0]),v=i(null===(l=o(e,"Abstract","wfs"))||void 0===l?void 0:l[0]),g=i(null!==(c=null===(u=o(e,"DefaultCRS","wfs"))||void 0===u?void 0:u[0])&&void 0!==c?c:null===(p=o(e,"DefaultSRS","wfs"))||void 0===p?void 0:p[0]),y=o(e,"OtherCRS","wfs").map((function(e){return i(e)})).filter((function(e){return!(0,a.strIsNullOrEmpty)(e)})),h=o(e,"OtherSRS","wfs").map((function(e){return i(e)})).filter((function(e){return!(0,a.strIsNullOrEmpty)(e)}));f.otherCrs=(0,r.__spreadArray)((0,r.__spreadArray)([],y,!0),h,!0);var S=o(e,"Format","wfs").map((function(e){return i(e)})).filter((function(e){return!(0,a.strIsNullOrEmpty)(e)})),T=i(null===(d=o(e,"LowerCorner","ows"))||void 0===d?void 0:d[0]),L=i(null===(m=o(e,"UpperCorner","ows"))||void 0===m?void 0:m[0]);s(f,(function(e,t){return e.name=t}),_),s(f,(function(e,t){return e.title=t}),E),s(f,(function(e,t){return e.abstract=t}),v),s(f,(function(e,t){return e.defaultCrs=t}),g),S.length>0&&(f.formats=S);var I=null==T?void 0:T.split(" ").map((function(e){return parseFloat(e)})),A=null==L?void 0:L.split(" ").map((function(e){return parseFloat(e)}));return 2==(null==I?void 0:I.length)&&2==(null==A?void 0:A.length)&&(f.wgs84Bounds=[I[0],I[1],A[0],A[1]]),f}))},e}();t.WfsCapabilitiesParser=l},20167:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.WmsCapabilitiesPanel=void 0;var r=n(70655),a=(0,r.__importStar)(n(67294)),i=n(48720),o=n(27058);t.WmsCapabilitiesPanel=function(e){var t=e.locale,n=e.onAddLayer,s=e.capabilities,l=function(e){var t,n,a=[],i=e.Capability.Layer,o=(i.Layer,(0,r.__rest)(i,["Layer"]));if(o.Name&&a.push([o,null!==(t=o.Style)&&void 0!==t?t:[]]),e.Capability.Layer.Layer)for(var s=0,l=e.Capability.Layer.Layer;s<l.length;s++){var u=l[s];a.push([u,null!==(n=u.Style)&&void 0!==n?n:[]])}return a}(s);return a.createElement(a.Fragment,null,a.createElement(o.Card,null,a.createElement("h5",{className:"bp3-heading"},a.createElement("a",{href:"#"},(0,i.tr)("WMS_SERVICE_INFO",t))),a.createElement("p",null,(0,i.tr)("WMS_VERSION",t,{version:s.version})),a.createElement("p",null,(0,i.tr)("OWS_SERVICE_NAME",t,{name:s.Service.Name})),a.createElement("p",null,(0,i.tr)("OWS_SERVICE_TITLE",t,{title:s.Service.Title})),a.createElement("p",null,(0,i.tr)("OWS_SERVICE_ABSTRACT",t,{abstract:s.Service.Abstract}))),a.createElement(o.Card,{style:{marginBottom:10}},a.createElement("h5",{className:"bp3-heading"},a.createElement("a",{href:"#"},(0,i.tr)("WMS_AVAILABLE_LAYERS",t))),l.map((function(e){var r=e[0],s=e[1],l=a.createElement(a.Fragment,null);return a.createElement(o.Card,{key:r.Name,style:{padding:15,paddingTop:5}},a.createElement("h4",null,a.createElement(o.Icon,{icon:"layer"})," ",r.Name),a.createElement("p",null,(0,i.tr)("OWS_LAYER_TITLE",t,{title:r.Title})),s.length?s.map((function(e){return a.createElement(o.ButtonGroup,{key:e.Name,vertical:!0,fill:!0,alignText:"left"},a.createElement(o.Button,{onClick:function(){var t,a;return n(r.Name,r.queryable,!1,e,null===(a=null===(t=e.LegendURL)||void 0===t?void 0:t[0])||void 0===a?void 0:a.OnlineResource)},intent:o.Intent.PRIMARY,icon:"new-layer"},(0,i.tr)("ADD_LAYER_WITH_WMS_STYLE",t,{style:e.Name})),a.createElement(o.Button,{onClick:function(){var t,a;return n(r.Name,r.queryable,!0,e,null===(a=null===(t=e.LegendURL)||void 0===t?void 0:t[0])||void 0===a?void 0:a.OnlineResource)},intent:o.Intent.PRIMARY,icon:"new-layer"},(0,i.tr)("ADD_LAYER_WITH_WMS_STYLE_TILED",t,{style:e.Name})),l)})):a.createElement(o.ButtonGroup,{vertical:!0,fill:!0,alignText:"left"},a.createElement(o.Button,{onClick:function(){return n(r.Name,r.queryable,!1,void 0)},intent:o.Intent.PRIMARY,icon:"new-layer"},(0,i.tr)("ADD_LAYER",t)),a.createElement(o.Button,{onClick:function(){return n(r.Name,r.queryable,!0,void 0)},intent:o.Intent.PRIMARY,icon:"new-layer"},(0,i.tr)("ADD_LAYER_TILED",t)),l))}))))}},81557:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Legend=t.GroupNode=t.LayerNode=void 0;var r=n(70655),a=(0,r.__importStar)(n(67294)),i=n(82422),o=n(29215),s=n(12694),l=n(9663),u=n(27058),c=n(65539),p=n(48720),d=n(95601),m=n(7275),f=n(61220),_=n(81876),E="layer",v="multi-select",g="chevron-down",y="chevron-right",h="media",S="folder-close",T="search",L=function(e){return{listStyle:"none",paddingLeft:e+4,marginTop:2,marginBottom:2}},I={listStyle:"none",marginTop:2,marginBottom:2},A={verticalAlign:"middle"},C=function(e){return{margin:0,width:e-2+"px",height:e-2+"px",padding:1,verticalAlign:"middle"}},b=function(e){var t,n,r=a.useContext(i.LegendContext),o=null===(t=r.getFilterText())||void 0===t?void 0:t.toLocaleLowerCase();if(r.isFiltering()&&!(0,m.strIsNullOrEmpty)(o)){var s=e.text.toLocaleLowerCase().indexOf(o);s>=0?(n=e.text.substring(0,s),n+="<span class='legend-label-highlight-text'>"+e.text.substring(s,s+o.length)+"</span>",n+=e.text.substring(s+o.length,e.text.length)):n=e.text}else n=e.text;return a.createElement("span",{className:"legend-label",style:{lineHeight:e.baseSize+"px",verticalAlign:"middle"},dangerouslySetInnerHTML:{__html:n}})};function N(e,t){return e&&t?"data:"+e+";base64,"+t:void 0}var O=function(e){return a.createElement("div",{style:(t=e.baseSize,{display:"inline-block",margin:0,width:t+"px",height:t+"px",verticalAlign:"middle"})},d.NBSP);var t},M=function(e){var t=N(e.iconMimeType,e.rule.Icon),n=e.rule.LegendLabel?e.rule.LegendLabel:"";return a.createElement("li",{className:"layer-rule-node",style:I},a.createElement(O,{baseSize:e.baseSize})," ",a.createElement("img",{style:A,src:t})," ",a.createElement(b,{baseSize:e.baseSize,text:n}))};t.LayerNode=function(e){var t,n,o=e.layer,s=a.useContext(i.LegendContext),c=a.useState(s.getLayerVisibility(e.layer)),d=c[0],m=c[1],f=o.LegendLabel?o.LegendLabel:"",_=s.getIconMimeType(),S=function(){var e=s.getLayerExpanded(o.ObjectId);return null==e&&(e=o.ExpandInLegend),e},T=function(e){var t=S();s.setLayerExpanded(o.ObjectId,!t)},P=function(e){var t=s.getLayerSelectability(e);return null==t&&(t=o.Selectable),t},R=f,D=a.createElement(l.Icon,{baseSize:s.getBaseIconSize(),style:A},(function(e){return a.createElement(u.Icon,{icon:E,iconSize:e})}));!0===o.Selectable&&(t=a.createElement(l.Icon,{baseSize:s.getBaseIconSize(),style:A,onClick:function(e){var t=P(o.ObjectId);s.setLayerSelectability(o.ObjectId,!t)}},(function(e){return a.createElement(u.Icon,{icon:P(o.ObjectId)?"select":"disable",iconSize:e})}))),1==o.Type&&(n=a.createElement("input",{type:"checkbox",className:"layer-checkbox",style:C(s.getBaseIconSize()),value:o.ObjectId,onChange:function(e){m(e.target.checked),s.setLayerVisibility(o.ObjectId,e.target.checked)},checked:d}));var w=f,F="layer-node",U=(0,r.__assign)({whiteSpace:"nowrap",overflow:"hidden"},I);if(o.ScaleRange)for(var V=function(e){if(e.FeatureStyle&&e.FeatureStyle.length>0){for(var r=[],i=void 0,c=S(),d=0,m=0,f=e.FeatureStyle;m<f.length;m++)d+=(C=f[m]).Rule.length;if(c&&d>1){D=a.createElement(l.Icon,{baseSize:s.getBaseIconSize(),style:A},(function(e){return a.createElement(u.Icon,{icon:v,iconSize:e})}));for(var E=0;E<e.FeatureStyle.length;E++){var C,P=(C=e.FeatureStyle[E]).Rule.length,V=!1;if(P>3&&(V=!C.Rule[1].Icon),V)r.push(a.createElement(M,{baseSize:s.getBaseIconSize(),key:"layer-"+o.ObjectId+"-style-"+E+"-rule-first",iconMimeType:_,rule:C.Rule[0]})),r.push(a.createElement("li",{style:I,key:"layer-"+o.ObjectId+"-style-"+E+"-rule-compressed"},a.createElement(b,{baseSize:s.getBaseIconSize(),text:(0,p.tr)("OTHER_THEME_RULE_COUNT",s.getLocale(),{count:P-2})}))),r.push(a.createElement(M,{baseSize:s.getBaseIconSize(),key:"layer-"+o.ObjectId+"-style-"+E+"-rule-last",iconMimeType:_,rule:C.Rule[P-1]}));else for(var x=0;x<P;x++){var k=C.Rule[x];r.push(a.createElement(M,{baseSize:s.getBaseIconSize(),key:"layer-"+o.ObjectId+"-style-"+E+"-rule-"+x,iconMimeType:_,rule:k}))}}}else if(d>1)D=a.createElement(l.Icon,{style:A,baseSize:s.getBaseIconSize()},(function(e){return a.createElement(u.Icon,{icon:v,iconSize:e})}));else{var B=N(_,e.FeatureStyle[0].Rule[0].Icon);B&&(D=a.createElement(l.ImageIcon,{style:A,url:B}))}r.length>0&&(i=a.createElement("ul",{style:L(s.getBaseIconSize())},r));var G;return G=d>1?a.createElement(l.Icon,{baseSize:s.getBaseIconSize(),style:A,onClick:T},(function(e){return a.createElement(u.Icon,{icon:c?g:y,iconSize:e})})):a.createElement(O,{baseSize:s.getBaseIconSize()}),{value:a.createElement("li",{title:w,style:U,className:F},G," ",n," ",t," ",D," ",a.createElement(b,{baseSize:s.getBaseIconSize(),text:R})," ",i)}}D=a.createElement(l.Icon,{baseSize:s.getBaseIconSize(),style:A},(function(e){return a.createElement(u.Icon,{icon:h,iconSize:e})}))},x=0,k=o.ScaleRange;x<k.length;x++){var B=V(k[x]);if("object"==typeof B)return B.value}return a.createElement("li",{title:w,style:U,className:F},a.createElement(O,{baseSize:s.getBaseIconSize()})," ",n," ",t," ",D," ",f)};var P=function(e){var t=e.layer,n=a.useContext(i.LegendContext),o=(0,r.__assign)({whiteSpace:"nowrap",overflow:"hidden"},I),s=(0,f.useReduxDispatch)(),c=a.createElement("input",{type:"checkbox",className:"layer-checkbox",style:C(n.getBaseIconSize()),onChange:function(e){return r=e.target.checked,void((a=n.getMapName())&&s((0,_.setMapLayerVisibility)(a,t.name,r)));var r,a},checked:t.visible}),p=E;"WMS"==t.type&&(p=h);var d=a.createElement(l.Icon,{baseSize:n.getBaseIconSize(),style:A},(function(e){return a.createElement(u.Icon,{icon:p,iconSize:e})}));return a.createElement("li",{style:o,className:"layer-node"},c," ",d," ",t.displayName)},R=function(e){var t=e.layers,n=a.useContext(i.LegendContext);if(0==t.length)return a.createElement(a.Fragment,null);var o=a.createElement(l.Icon,{baseSize:n.getBaseIconSize(),style:A},(function(e){return a.createElement(u.Icon,{icon:S,iconSize:e})})),s=(0,r.__assign)({whiteSpace:"nowrap",overflow:"hidden"},I);return a.createElement("li",{style:s,className:"group-node"},a.createElement("span",null,o," ",a.createElement(b,{baseSize:n.getBaseIconSize(),text:(0,p.tr)("EXTERNAL_LAYERS",n.getLocale())})),a.createElement("ul",{style:L(n.getBaseIconSize())},t.map((function(e,t){return a.createElement(P,{key:"external-layer="+e.name,layer:e})}))))};function D(e,t,n){if(e.ScaleRange)for(var r=0,a=e.ScaleRange;r<a.length;r++){var i=a[r];if((0,c.scaleRangeBetween)(t,i.MinScale,i.MaxScale))return!0}else if(n)return!0;return!1}function w(e,t,n,r){for(var a=0,i=t.groupChildren[e.ObjectId]||[];a<i.length;a++){var o=i[a];if((0,s.isLayer)(o)){if(D(o,n,r))return!0}else if(w(o,t,n,r))return!0}return!!r}function F(e,t){return e.map((function(e){return(0,s.isLayer)(e)&&e.LegendLabel.toLocaleLowerCase().indexOf(t)<0?null:e})).filter((function(e){return null!=e}))}function U(e){var t,n,r={Layers:null!==(t=null==e?void 0:e.Layer)&&void 0!==t?t:[],Groups:null!==(n=null==e?void 0:e.Group)&&void 0!==n?n:[],LayerMap:{},GroupMap:{},tree:{root:[],groupChildren:{}}};if(null==e?void 0:e.Layer)for(var a=0,i=e.Layer;a<i.length;a++){var o=i[a];r.LayerMap[o.ObjectId]=o}if(null==e?void 0:e.Group)for(var s=0,l=e.Group;s<l.length;s++){var u=l[s];r.GroupMap[u.ObjectId]=u}var c=r.Layers,p=r.Groups,d=(r.LayerMap,r.GroupMap,r.tree),m=d.root,f=d.groupChildren;if(p){for(var _={},E=0,v=p;E<v.length;E++){var g=v[E];f[g.ObjectId]=[],g.ParentId?_[g.ObjectId]=g:m.push(g)}var y=0;for(var h in _)y++;for(;y>0;){var S=[];for(var h in _){var T=_[h];void 0!==f[T.ParentId]&&(void 0!==f[T.ObjectId]&&(f[T.ObjectId]=[]),f[T.ParentId].push(T),S.push(T.ObjectId))}for(var L=0,I=S;L<I.length;L++)delete _[I[L]];for(var h in y=0,_)y++}}if(c)for(var A=0,C=c;A<C.length;A++)(o=C[A]).ParentId?(void 0===f[o.ParentId]&&(f[o.ParentId]=[]),f[o.ParentId].push(o)):m.push(o);return r}t.GroupNode=function(e){var n=e.group,o=a.useContext(i.LegendContext),c=a.useState(o.getGroupVisibility(n)),p=c[0],d=c[1],m=function(){var e=o.getGroupExpanded(n.ObjectId);return null==e&&(e=n.ExpandInLegend),e},f=o.getCurrentScale(),_=o.getTree(),E=a.createElement(l.Icon,{baseSize:o.getBaseIconSize(),style:A},(function(e){return a.createElement(u.Icon,{icon:S,iconSize:e})})),v=m(),h=a.createElement(l.Icon,{baseSize:o.getBaseIconSize(),style:A,onClick:function(e){var t=m();o.setGroupExpanded(n.ObjectId,!t)}},(function(e){return a.createElement(u.Icon,{icon:v?g:y,iconSize:e})})),T=a.createElement("input",{type:"checkbox",className:"group-checkbox",style:C(o.getBaseIconSize()),value:n.ObjectId,onChange:function(e){d(e.target.checked),o.setGroupVisibility(n.ObjectId,e.target.checked)},checked:p}),N=n.LegendLabel,O=(0,r.__assign)({whiteSpace:"nowrap",overflow:"hidden"},I);return a.createElement("li",{title:N,style:O,className:"group-node"},a.createElement("span",null,h," ",T," ",E," ",a.createElement(b,{baseSize:o.getBaseIconSize(),text:n.LegendLabel})),function(){if(v&&e.childItems.length>0)return a.createElement("ul",{style:L(o.getBaseIconSize())},e.childItems.map((function(e){if(!0===e.DisplayInLegend)if((0,s.isLayer)(e)){if(D(e,f,o.stateless))return a.createElement(t.LayerNode,{key:e.ObjectId,layer:e})}else if(w(e,_,f,o.stateless)){var n=_.groupChildren[e.ObjectId]||[];return a.createElement(t.GroupNode,{key:e.ObjectId,group:e,childItems:n})}})))}())},t.Legend=function(e){var n,r=a.useState(U(e.map)),l=r[0],c=r[1],d=l.tree,f=e.currentScale,_=e.externalBaseLayers,E=e.onBaseLayerChanged,v=e.maxHeight,g=a.useState(!1),y=g[0],h=g[1],S=a.useState(""),I=S[0],A=S[1],C=a.useState(void 0),b=C[0],N=C[1];a.useEffect((function(){O();var t=U(e.map);c(t)}),[e.map]);var O=function(){h(!1),A(""),N(void 0)},M={position:"relative"};v&&(M.maxHeight=v);var P={stateless:e.stateless,isFiltering:function(){return y},getFilterText:function(){return I},getLocale:function(){return e.locale},getMapName:function(){return e.activeMapName},getBaseIconSize:function(){var t;return null!==(t=e.baseIconSize)&&void 0!==t?t:16},getIconMimeType:function(){var t;return(null===(t=e.map)||void 0===t?void 0:t.IconMimeType)?""+e.map.IconMimeType:void 0},getChildren:function(e){return l.tree.groupChildren[e]||[]},getCurrentScale:function(){return e.currentScale},getTree:function(){return y&&b?b:l.tree},getGroupVisibility:function(t){var n=e.showGroups,r=e.hideGroups,a=t.Visible;return n&&n.indexOf(t.ObjectId)>=0?a=!0:r&&r.indexOf(t.ObjectId)>=0&&(a=!1),a},getLayerVisibility:function(t){var n=e.showLayers,r=e.hideLayers,a=t.Visible;return n&&n.indexOf(t.ObjectId)>=0?a=!0:r&&r.indexOf(t.ObjectId)>=0&&(a=!1),a},setGroupVisibility:function(t,n){var r;null===(r=e.onGroupVisibilityChanged)||void 0===r||r.call(e,t,n)},setLayerVisibility:function(t,n){var r;null===(r=e.onLayerVisibilityChanged)||void 0===r||r.call(e,t,n)},getLayerSelectability:function(t){return(e.overrideSelectableLayers||{})[t]},setLayerSelectability:function(t,n){var r;null===(r=e.onLayerSelectabilityChanged)||void 0===r||r.call(e,t,n)},getGroupExpanded:function(t){return(e.overrideExpandedItems||{})[t]},setGroupExpanded:function(t,n){var r;null===(r=e.onGroupExpansionChanged)||void 0===r||r.call(e,t,n)},getLayerExpanded:function(t){return(e.overrideExpandedItems||{})[t]},setLayerExpanded:function(t,n){var r;null===(r=e.onGroupExpansionChanged)||void 0===r||r.call(e,t,n)}},V=P.getTree(),x=V.root;return a.createElement(i.LegendContext.Provider,{value:P},a.createElement("div",{style:M},function(){if(null!=_&&_.length>0&&e.inlineBaseLayerSwitcher)return a.createElement(u.Card,{style:{marginBottom:10}},a.createElement("h5",{className:"bp3-heading"},a.createElement("a",{href:"#"},(0,p.tr)("EXTERNAL_BASE_LAYERS",e.locale))),a.createElement(o.BaseLayerSwitcher,{locale:e.locale,externalBaseLayers:_,onBaseLayerChanged:E}))}(),y?a.createElement(u.InputGroup,{round:!0,autoFocus:!0,leftIcon:T,placeholder:(0,p.tr)("LEGEND_FILTER_LAYERS",e.locale),onChange:function(e){return t=e.target.value,A(t),void((0,m.strIsNullOrEmpty)(t)?N(d):N(function(e,t){for(var n={root:F(e.root,t),groupChildren:{}},r=0,a=Object.keys(e.groupChildren);r<a.length;r++){var i=a[r];n.groupChildren[i]=F(e.groupChildren[i],t)}return n}(d,t.toLocaleLowerCase())));var t},rightElement:a.createElement(u.Button,{minimal:!0,icon:"cross",onClick:function(){return O()}})}):a.createElement(u.Button,{onClick:function(){return h(!0),A(""),void N(d)},title:(0,p.tr)("LEGEND_FILTER_LAYERS",e.locale),icon:T,style:{position:"absolute",right:0,top:0}}),a.createElement("ul",{style:L(null!==(n=e.baseIconSize)&&void 0!==n?n:16)},x.map((function(n){if(!0===n.DisplayInLegend)if((0,s.isLayer)(n)){if(D(n,f,e.stateless))return a.createElement(t.LayerNode,{key:n.ObjectId,layer:n})}else{var r=w(n,V,f,e.stateless),i=!1;if(P.isFiltering()&&n.LegendLabel.toLocaleLowerCase().indexOf(P.getFilterText().toLocaleLowerCase())>=0&&(i=!0),r||i){var o=V.groupChildren[n.ObjectId]||[];return a.createElement(t.GroupNode,{key:n.ObjectId,group:n,childItems:o})}}})),e.externalLayers&&a.createElement(R,{layers:e.externalLayers}))))}},11497:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.MapLoadIndicator=void 0;var r=(0,n(70655).__importStar)(n(67294));t.MapLoadIndicator=function(e){var t=e.loaded,n=e.loading,a=e.color,i=e.position,o="visible",s=Math.min(100,t/n*100),l=s.toFixed(1)+"%";(t===n||s>=100)&&(o="hidden",l="0");var u={position:"absolute",zIndex:10,visibility:o,left:0,height:5,width:l,background:a,transition:"width 250ms"};return"top"==i?u.top=0:u.bottom=0,r.createElement("div",{style:u})}},38589:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.MapMenu=void 0;var r=(0,n(70655).__importStar)(n(67294));t.MapMenu=function(e){var t=r.useState(void 0),n=(t[0],t[1]),a=function(t){var r,a=t.currentTarget.value;n(a),null===(r=e.onActiveMapChanged)||void 0===r||r.call(e,a)};return r.createElement("div",null,e.maps.map((function(t){return r.createElement("div",{className:"map-menu-item-container",key:"base-layer-"+t.mapName},r.createElement("label",{className:"bp3-control bp3-radio"},r.createElement("input",{className:"map-menu-option",type:"radio",value:t.mapName,checked:t.mapName===e.selectedMap,onChange:a}),r.createElement("span",{className:"bp3-control-indicator"}),t.label))})))}},4275:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.BaseMapProviderContext=t.useViewerSideEffects=t.isMiddleMouseDownEvent=t.recursiveFindLayer=t.inflateBoundsByMeters=void 0;var r=n(70655),a=(0,r.__importStar)(n(67294)),i=(0,r.__importStar)(n(73935)),o=n(29256),s=n(49554),l=(0,r.__importDefault)(n(47491)),u=(0,r.__importDefault)(n(85654)),c=(0,r.__importDefault)(n(11518)),p=(0,r.__importDefault)(n(7517)),d=(0,r.__importDefault)(n(35010)),m=n(88153),f=(0,r.__importDefault)(n(81090)),_=(0,r.__importDefault)(n(2033)),E=(0,r.__importDefault)(n(42657)),v=(0,r.__importDefault)(n(89965)),g=(0,r.__importDefault)(n(32857)),y=(0,r.__importDefault)(n(63267)),h=(0,r.__importDefault)(n(13205)),S=(0,r.__importDefault)(n(14474)),T=(0,r.__importDefault)(n(58789)),L=(0,r.__importDefault)(n(834)),I=(0,r.__importDefault)(n(20686)),A=(0,r.__importDefault)(n(59220)),C=(0,r.__importDefault)(n(74754)),b=n(26414),N=n(68093),O=(0,r.__importStar)(n(28641)),M=(0,r.__importStar)(n(31015)),P=n(48720),R=n(83467),D=n(36645),w=n(81876),F=n(27058),U=n(70377),V=(0,r.__importDefault)(n(90891)),x=(0,r.__importDefault)(n(68734)),k=n(78113),B=n(27792),G=n(93762),Y=n(31293),z=n(61220);function W(e,t,n){var r=(0,b.transformExtent)(t,e,"EPSG:3857"),a=O.buffer(r,n);return(0,b.transformExtent)(a,"EPSG:3857",e)}function j(e){return e&&(2==e.which||4==e.button)}t.inflateBoundsByMeters=W,t.recursiveFindLayer=function e(t,n){for(var r=0;r<t.getLength();r++){var a=t.item(r);if(a instanceof x.default){var i=e(a.getLayers(),n);if(i)return i}else if(n(a))return a}},t.isMiddleMouseDownEvent=j,t.useViewerSideEffects=function(e,t,n,r,i,s,l,u,c){void 0===l&&(l=void 0),void 0===u&&(u=void 0),void 0===c&&(c=null);var p=(0,z.useReduxDispatch)();a.useEffect((function(){if(n&&r&&!i)if((0,D.debug)("React.useEffect - Change of initial external layers for ["+r+"] (change should only happen once per mapName!)"),s&&s.length>0){(0,D.debug)("React.useEffect - First-time loading of external layers for ["+r+"]");for(var a=e.getLayerManager(r),o=0,l=s;o<l.length;o++){var u=l[o],c=a.addExternalLayer(u,!0,t);c&&p((0,w.mapLayerAdded)(r,c))}}else(0,D.debug)("React.useEffect - Signal that external layers are ready for ["+r+"]"),p((0,w.externalLayersReady)(r))}),[e,r,s,i,n]),a.useEffect((function(){(0,D.debug)("React.useEffect - Change of external layers"),e.isReady()&&i&&e.getLayerManager(r).apply(i)}),[e,r,i]),a.useEffect((function(){(0,D.debug)("React.useEffect - Change of context and/or agent URI/kind"),(0,G.setViewer)(e);var t=window;t.getViewer=t.getViewer||G.getViewer,l&&u&&(t.getClient=t.getClient||function(){return new Y.Client(l,u)}),(0,D.debug)("React.useEffect - Attached runtime viewer instance and installed browser global APIs")}),[e,l,u]),a.useEffect((function(){(0,D.debug)("React.useEffect - Change of selection"),e.refreshMap(o.RefreshMode.SelectionOnly)}),[e,c])};var H=function(){function e(e){var t=this;void 0===e&&(e=new U.OLFactory),this.olFactory=e,this.onBeginDigitization=function(e){var n;null===(n=t._comp)||void 0===n||n.onDispatch((0,w.setActiveTool)(o.ActiveMapTool.None)),e(!1)},this.onResize=function(e){var n;if(t._map){var r=t._map.getSize();if(r){var a=r[0],i=r[1];null===(n=t._comp)||void 0===n||n.onDispatch((0,w.mapResized)(a,i))}}},this._busyWorkers=0,this._layerSetGroups={},this._tileSourceLoaders={},this._imageSourceLoaders={},this._wmsQueryAugmentations={},this._triggerZoomRequestOnMoveEnd=!0;var n=(0,V.default)(navigator.userAgent);this._supportsTouch=n.phone||n.tablet;var a={activeTool:o.ActiveMapTool.None,view:void 0,viewRotation:0,viewRotationEnabled:!0,locale:P.DEFAULT_LOCALE,cancelDigitizationKey:o.KC_ESCAPE,undoLastPointKey:o.KC_U,mapName:void 0,externalBaseLayers:void 0,initialExternalLayers:[]};this._state=(0,r.__assign)((0,r.__assign)({},a),this.getInitialProviderState())}return e.prototype.exportImage=function(e){if(this._map){var t=this._map;t.once("rendercomplete",(function(){var n=document.createElement("canvas");if(e.size){var r=e.size,a=r[0],i=r[1];n.width=a,n.height=i}else{var o=t.getSize();o&&(n.width=o[0],n.height=o[1])}var s=n.getContext("2d");s&&(Array.prototype.forEach.call(document.querySelectorAll(".ol-layer canvas, .external-vector-layer canvas"),(function(e){var t,n,r,a,i,o;if(e.width>0){var l=null!==(r=null===(n=null===(t=e.parentNode)||void 0===t?void 0:t.style)||void 0===n?void 0:n.opacity)&&void 0!==r?r:"";s.globalAlpha=""===l?1:Number(l);var u=null===(o=null===(i=null===(a=e.style.transform.match(/^matrix\(([^\(]*)\)$/))||void 0===a?void 0:a[1])||void 0===i?void 0:i.split(","))||void 0===o?void 0:o.map(Number);u&&(CanvasRenderingContext2D.prototype.setTransform.apply(s,u),s.drawImage(e,0,0))}})),e.callback(n.toDataURL(e.exportMimeType)))})),t.renderSync()}},e.prototype.addBaseTileLoadFunction=function(e,t,n){this._baseTileSourceLoaders||(this._baseTileSourceLoaders={}),this._baseTileSourceLoaders[e]||(this._baseTileSourceLoaders[e]={}),this._baseTileSourceLoaders[e][t]=n},e.prototype.addTileLoadFunction=function(e,t,n){this._tileSourceLoaders||(this._tileSourceLoaders={}),this._tileSourceLoaders[e]||(this._tileSourceLoaders[e]={}),this._tileSourceLoaders[e][t]=n},e.prototype.addImageLoadFunction=function(e,t,n){this._imageSourceLoaders||(this._imageSourceLoaders={}),this._imageSourceLoaders[e]||(this._imageSourceLoaders[e]={}),this._imageSourceLoaders[e][t]=n},e.prototype.addWmsQueryAugmentation=function(e,t,n){this._wmsQueryAugmentations||(this._wmsQueryAugmentations={}),this._wmsQueryAugmentations[e]||(this._wmsQueryAugmentations[e]={}),this._wmsQueryAugmentations[e][t]=n},e.prototype.addCustomSelectionPopupRenderer=function(e,t,n){e&&t?(this._customSelectionPopupRenderers||(this._customSelectionPopupRenderers={}),this._customSelectionPopupRenderers[e]||(this._customSelectionPopupRenderers[e]={}),this._customSelectionPopupRenderers[e][t]=n):this._globalCustomSelectionPopupRenderer=n},e.prototype.getSelectionPopupRenderer=function(e){this._customSelectionPopupRenderers||(this._customSelectionPopupRenderers={});var t=this._state.mapName;if(t){this._customSelectionPopupRenderers[t]||(this._customSelectionPopupRenderers[t]={});var n=this._customSelectionPopupRenderers[t][e];if(n)return n}if(this._globalCustomSelectionPopupRenderer)return this._globalCustomSelectionPopupRenderer},e.prototype.hideAllPopups=function(){var e,t;null===(e=this._mouseTooltip)||void 0===e||e.clear(),null===(t=this._selectTooltip)||void 0===t||t.hide()},e.prototype.isReady=function(){return!(!this._map||!this._comp)},e.prototype.mapguideSupport=function(){},e.prototype.setActiveTool=function(e){var t;null===(t=this._comp)||void 0===t||t.onDispatch((0,w.setActiveTool)(e))},e.prototype.getOLFactory=function(){return this.olFactory},e.prototype.getMapName=function(){return this._state.mapName},e.prototype.setViewRotation=function(e){var t;null===(t=this._comp)||void 0===t||t.onDispatch((0,w.setViewRotation)(e))},e.prototype.getViewRotation=function(){return this._state.viewRotation},e.prototype.isViewRotationEnabled=function(){return this._state.viewRotationEnabled},e.prototype.setViewRotationEnabled=function(e){var t;null===(t=this._comp)||void 0===t||t.onDispatch((0,w.setViewRotationEnabled)(e))},e.prototype.toastSuccess=function(e,t){var n,r;return null===(r=null===(n=this._toasterRef)||void 0===n?void 0:n.current)||void 0===r?void 0:r.show({icon:e,message:t,intent:F.Intent.SUCCESS})},e.prototype.toastWarning=function(e,t){var n,r;return null===(r=null===(n=this._toasterRef)||void 0===n?void 0:n.current)||void 0===r?void 0:r.show({icon:e,message:t,intent:F.Intent.WARNING})},e.prototype.toastError=function(e,t){var n,r;return null===(r=null===(n=this._toasterRef)||void 0===n?void 0:n.current)||void 0===r?void 0:r.show({icon:e,message:t,intent:F.Intent.DANGER})},e.prototype.toastPrimary=function(e,t){var n,r;return null===(r=null===(n=this._toasterRef)||void 0===n?void 0:n.current)||void 0===r?void 0:r.show({icon:e,message:t,intent:F.Intent.PRIMARY})},e.prototype.dismissToast=function(e){var t,n;null===(n=null===(t=this._toasterRef)||void 0===t?void 0:t.current)||void 0===n||n.dismiss(e)},e.prototype.addImageLoading=function(){var e;null===(e=this._comp)||void 0===e||e.addImageLoading()},e.prototype.addImageLoaded=function(){var e;null===(e=this._comp)||void 0===e||e.addImageLoaded()},e.prototype.addSubscribers=function(e){var t,n;return null!==(n=null===(t=this._comp)||void 0===t?void 0:t.addSubscribers(e))&&void 0!==n?n:[]},e.prototype.removeSubscribers=function(e){var t,n;return null!==(n=null===(t=this._comp)||void 0===t?void 0:t.removeSubscribers(e))&&void 0!==n&&n},e.prototype.getSubscribers=function(){var e,t;return null!==(t=null===(e=this._comp)||void 0===e?void 0:e.getSubscribers())&&void 0!==t?t:[]},e.prototype.dispatch=function(e){var t;null===(t=this._comp)||void 0===t||t.onDispatch(e)},e.prototype.getDefaultPointCircleStyle=function(){return(0,r.__assign)({},k.DEFAULT_POINT_CIRCLE_STYLE)},e.prototype.getDefaultPointIconStyle=function(){return(0,r.__assign)({},k.DEFAULT_POINT_ICON_STYLE)},e.prototype.getDefaultLineStyle=function(){return(0,r.__assign)({},k.DEFAULT_LINE_STYLE)},e.prototype.getDefaultPolygonStyle=function(){return(0,r.__assign)({},k.DEFAULT_POLY_STYLE)},e.prototype.getBaseTileSourceLoaders=function(e){var t,n;return null!==(n=null===(t=this._baseTileSourceLoaders)||void 0===t?void 0:t[e])&&void 0!==n?n:{}},e.prototype.getTileSourceLoaders=function(e){var t,n;return null!==(n=null===(t=this._tileSourceLoaders)||void 0===t?void 0:t[e])&&void 0!==n?n:{}},e.prototype.getImageSourceLoaders=function(e){var t,n;return null!==(n=null===(t=this._imageSourceLoaders)||void 0===t?void 0:t[e])&&void 0!==n?n:{}},e.prototype.getMockMode=function(){},e.prototype.addFeatureToHighlight=function(e,t){var n;if(this._state.mapName&&this.getLayerSetGroup(this._state.mapName)){var r=null===(n=this._select)||void 0===n?void 0:n.getFeatures();r&&(t||r.clear(),e&&r.push(e))}},e.prototype.getScaleForExtent=function(e){(0,R.assertIsDefined)(this._map),(0,R.assertIsDefined)(this._state.mapName);var t=this.getLayerSetGroup(this._state.mapName);(0,R.assertIsDefined)(t);var n=this._map.getSize();(0,R.assertIsDefined)(n);var r=O.getWidth(e),a=O.getHeight(e),i=n[0],o=n[1],s=.0254/t.getDpi(),l=t.getMetersPerUnit();return o*r>i*a?r*l/(i*s):a*l/(o*s)},e.prototype.getViewForExtent=function(e){var t,n;if((0,R.assertIsDefined)(this._map),0==O.getWidth(e)||0==O.getHeight(e)){var r=W(this.getProjection(),e,20);t=this.getScaleForExtent(r),n=O.getCenter(r)}else t=this.getScaleForExtent(e),n=O.getCenter(e);return{x:n[0],y:n[1],scale:t,resolution:this._map.getView().getResolution()}},e.prototype.onZoomSelectBox=function(e){var t;if(this._comp){var n=null===(t=this._zoomSelectBox)||void 0===t?void 0:t.getGeometry();if(!n)return;switch(this._state.activeTool){case o.ActiveMapTool.Zoom:var r=n.getExtent();this._comp.onDispatch((0,w.setCurrentView)(this.getViewForExtent(r)));break;case o.ActiveMapTool.Select:this.selectFeaturesByExtent(n)}}},e.prototype.onMouseMove=function(e){if(this._comp){if(this.handleMouseTooltipMouseMove(e),this.handleHighlightHover(e),this._comp.isContextMenuOpen())return;this._state.mapName&&this._comp.onDispatch((0,w.setMouseCoordinates)(this._state.mapName,e.coord))}},e.prototype.incrementBusyWorker=function(){var e;this._busyWorkers++,null===(e=this._comp)||void 0===e||e.onDispatch((0,w.setBusyCount)(this._busyWorkers))},e.prototype.decrementBusyWorker=function(){var e;this._busyWorkers--,null===(e=this._comp)||void 0===e||e.onDispatch((0,w.setBusyCount)(this._busyWorkers))},e.prototype.applyView=function(e,t){this._triggerZoomRequestOnMoveEnd=!1,e.getView().setCenter([t.x,t.y]);var n=e.scaleToResolution(t.scale);e.getView().setResolution(n),this._triggerZoomRequestOnMoveEnd=!0},e.prototype.removeActiveDrawInteraction=function(){this._activeDrawInteraction&&this._map&&this._comp&&(this._map.removeInteraction(this._activeDrawInteraction),this._activeDrawInteraction=null,this._comp.setDigitizingType(void 0))},e.prototype.getActiveTool=function(){return this._state.activeTool},e.prototype.cancelDigitization=function(){this.isDigitizing()&&(this.removeActiveDrawInteraction(),this.clearMouseTooltip())},e.prototype.pushDrawInteraction=function(e,t,n,r){var a=this;(0,R.assertIsDefined)(this._comp),this.onBeginDigitization((function(i){i||((0,R.assertIsDefined)(a._map),(0,R.assertIsDefined)(a._comp),a.removeActiveDrawInteraction(),a.clearMouseTooltip(),r&&a.setMouseTooltip(r),a._activeDrawInteraction=t,a._activeDrawInteraction.once("drawend",(function(e){var t=e.feature.getGeometry();a.cancelDigitization(),n(t)})),a._map.addInteraction(a._activeDrawInteraction),a._comp.setDigitizingType(e))}))},e.prototype.selectFeaturesByExtent=function(e){},e.prototype.zoomByDelta=function(e){(0,R.assertIsDefined)(this._map);var t=this._map.getView();if(t){var n=t.getZoom();if(void 0!==n){var r=t.getConstrainedZoom(n+e);t.getAnimating()&&t.cancelAnimations(),t.animate({zoom:r,duration:250,easing:M.easeOut})}}},e.prototype.ensureAndGetLayerSetGroup=function(e){(0,R.assertIsDefined)(e.mapName);var t=this._layerSetGroups[e.mapName];return t||(t=this.initLayerSet(e),this._layerSetGroups[e.mapName]=t),t},e.prototype.getLayerSetGroup=function(e){var t;return e&&(t=this._layerSetGroups[e]),t},e.prototype.isMouseOverTooltip=function(){var e,t;return null!==(t=null===(e=this._selectTooltip)||void 0===e?void 0:e.isMouseOver)&&void 0!==t&&t},e.prototype.clearMouseTooltip=function(){var e;null===(e=this._mouseTooltip)||void 0===e||e.clear()},e.prototype.setMouseTooltip=function(e){var t;null===(t=this._mouseTooltip)||void 0===t||t.setText(e)},e.prototype.handleMouseTooltipMouseMove=function(e){var t,n;null===(n=null===(t=this._mouseTooltip)||void 0===t?void 0:t.onMouseMove)||void 0===n||n.call(t,e)},e.prototype.isLayerHoverable=function(e){return!(1==(null==e?void 0:e.get(o.LayerProperty.IS_HOVER_HIGHLIGHT))||1==(null==e?void 0:e.get(o.LayerProperty.IS_WMS_SELECTION_OVERLAY))||1==(null==e?void 0:e.get(o.LayerProperty.IS_HEATMAP))||1==(null==e?void 0:e.get(o.LayerProperty.IS_MEASURE)))},e.prototype.handleHighlightHover=function(e){var t=this;if(!e.dragging&&this._state.mapName&&this._map){var n=this.getLayerSetGroup(this._state.mapName);if(n){var r=this._map.getEventPixel(e.originalEvent);if(r){var a=[];this._map.forEachFeatureAtPixel(r,(function(e,n){t.isLayerHoverable(n)&&e instanceof f.default&&a.push([e,n])}));var i=a.length?a[0][0]:void 0;i!=this._highlightedFeature&&i instanceof f.default&&(this._highlightedFeature&&n.removeHighlightedFeature(this._highlightedFeature),i&&n.addHighlightedFeature(i),this._highlightedFeature=i)}}}},e.prototype.hideSelectedVectorFeaturesTooltip=function(){var e;null===(e=this._selectTooltip)||void 0===e||e.hide()},e.prototype.showSelectedVectorFeatures=function(e,t,n,r){var a;null===(a=this._selectTooltip)||void 0===a||a.showSelectedVectorFeatures(e,t,n,r)},e.prototype.queryWmsFeatures=function(e,t,n){return(0,r.__awaiter)(this,void 0,void 0,(function(){var a,i,o,s=this;return(0,r.__generator)(this,(function(r){switch(r.label){case 0:return e&&this._map?(a=this.getLayerSetGroup(e),i=this.getLayerManager(e),(o=this._map.getView().getResolution())&&this._selectTooltip?[4,this._selectTooltip.queryWmsFeatures(a,i,t,o,n,{getLocale:function(){return s._state.locale},addClientSelectedFeature:function(e,t){return s.addClientSelectedFeature(e,t)},addFeatureToHighlight:function(e,t){return s.addFeatureToHighlight(e,t)},getWmsRequestAugmentations:function(){var t;return null!==(t=s._wmsQueryAugmentations[e])&&void 0!==t?t:{}}})]:[3,2]):[3,2];case 1:return[2,r.sent()];case 2:return[2,!1]}}))}))},e.prototype.onImageError=function(e){},e.prototype.addClientSelectedFeature=function(e,t){var n;if(this._select&&this._select.getFeatures().push(e),this._state.mapName){var a=e.get("features"),i=void 0;if(Array.isArray(a)){if(1!=a.length)return;i=a[0]}else i=e;var s=(0,r.__assign)({},i.getProperties());delete s[i.getGeometryName()];var l={bounds:null===(n=i.getGeometry())||void 0===n?void 0:n.getExtent(),properties:s};this.dispatch((0,w.addClientSelectedFeature)(this._state.mapName,t.get(o.LayerProperty.LAYER_NAME),l))}},e.prototype.clearClientSelectedFeatures=function(){this._select&&this._select.getFeatures().clear(),this._state.mapName&&this.dispatch((0,w.clearClientSelection)(this._state.mapName))},e.prototype.onMapClick=function(e){var t,n,r,a=this;if(this._comp&&this._map&&(this._comp.isContextMenuOpen()&&(null===(n=(t=this._comp).onHideContextMenu)||void 0===n||n.call(t)),!this.isDigitizing())){var i=[];if(this._state.activeTool==o.ActiveMapTool.Select&&this._select&&(this.clearClientSelectedFeatures(),this._map.forEachFeatureAtPixel(e.pixel,(function(e,t){0==i.length&&1==t.get(o.LayerProperty.IS_SELECTABLE)&&e instanceof f.default&&i.push([e,t])})),this._select&&1==i.length)){var s=i[0],l=s[0],u=s[1];if((0,B.isClusteredFeature)(l)&&(0,B.getClusterSubFeatures)(l).length>1&&(null===(r=u.get(o.LayerProperty.VECTOR_STYLE))||void 0===r?void 0:r.getClusterClickAction())==k.ClusterClickAction.ZoomToClusterExtents){var c=(0,B.getClusterSubFeatures)(l).reduce((function(e,t){var n=t.getGeometry();return n?O.extend(e,n.getExtent()):e}),O.createEmpty()),p=W(this.getProjection(),c,20);this.zoomToExtent(p)}else this.addClientSelectedFeature(l,u)}var d=e.pixel;if(0==i.length)this.hideSelectedVectorFeaturesTooltip(),this._state.activeTool==o.ActiveMapTool.Select?this.queryWmsFeatures(this._state.mapName,e.coordinate,!1).then((function(e){e?console.log("Made WMS selection. Skipping provider click event"):a.onProviderMapClick(d)})):this.onProviderMapClick(d);else if(this._select){if(this._state.mapName){var m=this.getLayerSetGroup(this._state.mapName);null==m||m.clearWmsSelectionOverlay()}this.showSelectedVectorFeatures(this._select.getFeatures(),d,i,this._state.locale)}}},e.prototype.initContext=function(e,t,n){if(this._map){var r={className:"ol-overviewmap ol-custom-overviewmap",layers:e.getLayersForOverviewMap(),view:new A.default({projection:e.getProjection()}),tipLabel:(0,P.tr)("OL_OVERVIEWMAP_TIP",t),collapseLabel:String.fromCharCode(187),label:String.fromCharCode(171)};if(n){var a=n();a&&(r.target=i.findDOMNode(a),r.collapsed=!1,r.collapsible=!1)}this._ovMap=new u.default(r),this._map.addControl(this._ovMap),this.onBeforeAttachingLayerSetGroup(e),e.attach(this._map,this._ovMap,!1)}},e.prototype.onBeforeAttachingLayerSetGroup=function(e){},e.prototype.setToasterRef=function(e){this._toasterRef=e},e.prototype.onKeyDown=function(e){var t,n,r=null!==(t=this._state.cancelDigitizationKey)&&void 0!==t?t:o.KC_ESCAPE,a=null!==(n=this._state.undoLastPointKey)&&void 0!==n?n:o.KC_U;e.keyCode==r?this.cancelDigitization():e.keyCode==a&&this._activeDrawInteraction&&this._activeDrawInteraction.removeLastPoint()},e.prototype.isDigitizing=function(){return!!this._map&&null!=this._map.getInteractions().getArray().filter((function(e){return e instanceof d.default}))[0]},e.prototype.detachFromComponent=function(){var e,t,n,r,a,i,o,s,l,u,c,p;this._comp=void 0,null===(e=this._select)||void 0===e||e.dispose(),this._select=void 0,this._boundZoomSelectBox&&(null===(t=this._zoomSelectBox)||void 0===t||t.un("boxend",this._boundZoomSelectBox),this._boundZoomSelectBox=void 0),this._boundClick&&(null===(n=this._map)||void 0===n||n.un("click",this._boundClick),this._boundClick=void 0),this._boundMouseMove&&(null===(r=this._map)||void 0===r||r.un("pointermove",this._boundMouseMove),this._boundMouseMove=void 0),this._boundResize&&(null===(a=this._map)||void 0===a||a.un("change:size",this._boundResize),this._boundResize=void 0),this._boundMoveEnd&&(null===(i=this._map)||void 0===i||i.un("moveend",this._boundMoveEnd),this._boundMoveEnd=void 0),null===(o=this._zoomSelectBox)||void 0===o||o.dispose(),this._zoomSelectBox=void 0,null===(s=this._activeDrawInteraction)||void 0===s||s.dispose(),this._activeDrawInteraction=null,null===(l=this._selectTooltip)||void 0===l||l.dispose(),this._selectTooltip=void 0,null===(u=this._mouseTooltip)||void 0===u||u.dispose(),this._mouseTooltip=void 0,null===(c=this._map)||void 0===c||c.setTarget(void 0),null===(p=this._ovMap)||void 0===p||p.setMap(void 0),this._map=void 0,this._ovMap=void 0,(0,D.debug)("Map provider context detached from component and reset to initial state")},e.prototype.onMoveEnd=function(e){var t,n,r;if(this._triggerZoomRequestOnMoveEnd){var a=this.getCurrentView();((r=a).resolution?isNaN(r.x)||isNaN(r.y)||isNaN(r.scale)||isNaN(r.resolution):isNaN(r.x)||isNaN(r.y)||isNaN(r.scale))?console.warn("Attempt to set invalid view",a):null===(t=this._comp)||void 0===t||t.onDispatch((0,w.setCurrentView)(a))}else(0,D.info)("Triggering zoom request on moveend suppresseed");e.frameState.viewState.rotation!=this._state.viewRotation&&(null===(n=this._comp)||void 0===n||n.onDispatch((0,w.setViewRotation)(e.frameState.viewState.rotation)))},e.prototype.attachToComponent=function(e,t){var n=this;this._comp=t,this._select=new p.default({condition:function(e){return!1},layers:function(e){return 1==e.get(o.LayerProperty.IS_SELECTABLE)||1==e.get(o.LayerProperty.IS_SCRATCH)}}),this._zoomSelectBox=new c.default({condition:function(e){var t;if(n._state.activeTool==o.ActiveMapTool.Select&&!0===(null===(t=n._comp)||void 0===t?void 0:t.selectCanDragPan()))return!1;var r="pointerdown"==e.type&&j(e.originalEvent);return!(n.isDigitizing()||r||n._state.activeTool!==o.ActiveMapTool.Select&&n._state.activeTool!==o.ActiveMapTool.Zoom)}}),this._boundZoomSelectBox=this.onZoomSelectBox.bind(this),this._boundMouseMove=this.onMouseMove.bind(this),this._boundResize=this.onResize.bind(this),this._boundClick=this.onMapClick.bind(this),this._boundMoveEnd=this.onMoveEnd.bind(this),this._zoomSelectBox.on("boxend",this._boundZoomSelectBox);var r={target:e,controls:[new E.default({tipLabel:(0,P.tr)("OL_ATTRIBUTION_TIP",this._state.locale)}),new v.default({tipLabel:(0,P.tr)("OL_RESET_ROTATION_TIP",this._state.locale)})],interactions:[this._select,new g.default,new y.default({condition:function(e){var t;return n._state.activeTool==o.ActiveMapTool.Select&&!0===(null===(t=n._comp)||void 0===t?void 0:t.selectCanDragPan())||"pointerdown"==e.type&&j(e.originalEvent)||n._supportsTouch||n._state.activeTool===o.ActiveMapTool.Pan}}),new h.default,new S.default,new T.default,new L.default,new I.default,this._zoomSelectBox]};this._map=new l.default(r);var a=this.ensureAndGetLayerSetGroup(this._state);if(this.initContext(a,this._state.locale,this._state.overviewMapElementSelector),this._mouseTooltip=new s.MouseTrackingTooltip(this._map,this._comp.isContextMenuOpen),this._selectTooltip=new m.SelectedFeaturesTooltip(this._map,this),this._map.on("pointermove",this._boundMouseMove),this._map.on("change:size",this._boundResize),this._map.on("click",this._boundClick),this._map.on("moveend",this._boundMoveEnd),this._state.view){var i=this._state.view,u=i.x,d=i.y,f=i.scale;this.zoomToView(u,d,f)}else{var _=a.getExtent();this._map.getView().fit(_)}this.onResize(this._map.getSize())},e.prototype.scaleToResolution=function(e){(0,R.assertIsDefined)(this._state.mapName);var t=this.getLayerSetGroup(this._state.mapName);return(0,R.assertIsDefined)(t),t.scaleToResolution(e)},e.prototype.resolutionToScale=function(e){(0,R.assertIsDefined)(this._state.mapName);var t=this.getLayerSetGroup(this._state.mapName);return(0,R.assertIsDefined)(t),t.resolutionToScale(e)},e.prototype.getCurrentView=function(){var e=this.getOLView(),t=e.getCenter(),n=e.getResolution(),r=this.resolutionToScale(n);return{x:t[0],y:t[1],scale:r,resolution:n}},e.prototype.getCurrentExtent=function(){return(0,R.assertIsDefined)(this._map),this._map.getView().calculateExtent(this._map.getSize())},e.prototype.getSize=function(){return(0,R.assertIsDefined)(this._map),this._map.getSize()},e.prototype.getOLView=function(){return(0,R.assertIsDefined)(this._map),this._map.getView()},e.prototype.zoomToView=function(e,t,n){if(this._map){var r=this._map.getView();r.setCenter([e,t]),r.setResolution(this.scaleToResolution(n))}},e.prototype.refreshMap=function(e){void 0===e&&(e=o.RefreshMode.LayersOnly|o.RefreshMode.SelectionOnly)},e.prototype.getMetersPerUnit=function(){(0,R.assertIsDefined)(this._state.mapName);var e=this.getLayerSetGroup(this._state.mapName);return(0,R.assertIsDefined)(e),e.getMetersPerUnit()},e.prototype.initialView=function(){(0,R.assertIsDefined)(this._comp),(0,R.assertIsDefined)(this._state.mapName);var e=this.getLayerSetGroup(this._state.mapName);(0,R.assertIsDefined)(e),this._comp.onDispatch((0,w.setCurrentView)(this.getViewForExtent(e.getExtent())))},e.prototype.zoomDelta=function(e){this.zoomByDelta(e)},e.prototype.zoomToExtent=function(e){var t;null===(t=this._comp)||void 0===t||t.onDispatch((0,w.setCurrentView)(this.getViewForExtent(e)))},e.prototype.digitizePoint=function(e,t){(0,R.assertIsDefined)(this._comp);var n=new d.default({type:C.default.POINT});this.pushDrawInteraction("Point",n,e,t||(0,P.tr)("DIGITIZE_POINT_PROMPT",this._state.locale))},e.prototype.digitizeLine=function(e,t){(0,R.assertIsDefined)(this._comp);var n=new d.default({type:C.default.LINE_STRING,minPoints:2,maxPoints:2});this.pushDrawInteraction("Line",n,e,t||(0,P.tr)("DIGITIZE_LINE_PROMPT",this._state.locale))},e.prototype.digitizeLineString=function(e,t){var n;(0,R.assertIsDefined)(this._comp);var r=new d.default({type:C.default.LINE_STRING,minPoints:2});this.pushDrawInteraction("LineString",r,e,t||(0,P.tr)("DIGITIZE_LINESTRING_PROMPT",this._state.locale,{key:String.fromCharCode(null!==(n=this._state.undoLastPointKey)&&void 0!==n?n:o.KC_U)}))},e.prototype.digitizeCircle=function(e,t){(0,R.assertIsDefined)(this._comp);var n=new d.default({type:C.default.CIRCLE});this.pushDrawInteraction("Circle",n,e,t||(0,P.tr)("DIGITIZE_CIRCLE_PROMPT",this._state.locale))},e.prototype.digitizeRectangle=function(e,t){(0,R.assertIsDefined)(this._comp);var n=new d.default({type:C.default.LINE_STRING,maxPoints:2,geometryFunction:function(e,t){t||(t=new _.default([]));var n=e[0],r=e[1];return t.setCoordinates([[n,[n[0],r[1]],r,[r[0],n[1]],n]]),t}});this.pushDrawInteraction("Rectangle",n,e,t||(0,P.tr)("DIGITIZE_RECT_PROMPT",this._state.locale))},e.prototype.digitizePolygon=function(e,t){var n;(0,R.assertIsDefined)(this._comp);var r=new d.default({type:C.default.POLYGON});this.pushDrawInteraction("Polygon",r,e,t||(0,P.tr)("DIGITIZE_POLYGON_PROMPT",this._state.locale,{key:String.fromCharCode(null!==(n=this._state.undoLastPointKey)&&void 0!==n?n:o.KC_U)}))},e.prototype.addInteraction=function(e){return(0,R.assertIsDefined)(this._map),this._map.addInteraction(e),e},e.prototype.removeInteraction=function(e){var t;null===(t=this._map)||void 0===t||t.removeInteraction(e)},e.prototype.addOverlay=function(e){var t;null===(t=this._map)||void 0===t||t.addOverlay(e)},e.prototype.removeOverlay=function(e){var t;null===(t=this._map)||void 0===t||t.removeOverlay(e)},e.prototype.getProjection=function(){return(0,R.assertIsDefined)(this._map),this._map.getView().getProjection()},e.prototype.addHandler=function(e,t){var n;null===(n=this._map)||void 0===n||n.on(e,t)},e.prototype.removeHandler=function(e,t){var n;null===(n=this._map)||void 0===n||n.un(e,t)},e.prototype.updateSize=function(){var e;null===(e=this._map)||void 0===e||e.updateSize()},e.prototype.getLayerManagerForLayerSet=function(e){return(0,R.assertIsDefined)(this._map),new N.LayerManager(this._map,e)},e.prototype.getLayerManager=function(e){(0,R.assertIsDefined)(this._map),(0,R.assertIsDefined)(this._state.mapName);var t=this.ensureAndGetLayerSetGroup(this._state);return this.getLayerManagerForLayerSet(t)},e.prototype.screenToMapUnits=function(e,t){var n=this.getSize(),r=n[0],a=n[1],i=this.getCurrentExtent(),o=i[0],s=i[1];return e>r-1?e=r-1:e<0&&(e=0),t>a-1?t=a-1:t<0&&(t=0),[e=o+e/r*(i[2]-o),t=s-t/a*(s-i[3])]},e.prototype.getSelectedFeatures=function(){var e;return null===(e=this._select)||void 0===e?void 0:e.getFeatures()},e.prototype.getPointSelectionBox=function(e,t){(0,R.assertIsDefined)(this._map);var n=this._map.getCoordinateFromPixel([e[0]-t,e[1]-t]),r=this._map.getCoordinateFromPixel([e[0]+t,e[1]+t]);return[n[0],n[1],r[0],r[1]]},e.prototype.getResolution=function(){return(0,R.assertIsDefined)(this._map),this._map.getView().getResolution()},e.prototype.updateOverviewMapElement=function(e){if(this._ovMap){var t=e();t?(this._ovMap.setCollapsed(!1),this._ovMap.setCollapsible(!1),this._ovMap.setTarget(i.findDOMNode(t))):(this._ovMap.setCollapsed(!0),this._ovMap.setCollapsible(!0),this._ovMap.setTarget(null))}},e}();t.BaseMapProviderContext=H},61220:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.MapContextProvider=t.useMapProviderContext=t.MapProviderContextProvider=t.useAppState=t.useReduxDispatch=t.ReduxProvider=void 0;var r=(0,n(70655).__importStar)(n(67294)),a=n(46458),i=r.createContext({});t.ReduxProvider=function(e){var t=e.store,n=e.children;return r.createElement(a.Provider,{store:t},n)},t.useReduxDispatch=function(){return(0,a.useDispatch)()},t.useAppState=function(e,t){return(0,a.useSelector)(e,t)},t.MapProviderContextProvider=function(e){var t=e.value,n=e.children;return r.createElement(i.Provider,{value:t},n)},t.useMapProviderContext=function(){return r.useContext(i)},t.MapContextProvider=function(e){var n=e.value,a=e.store,i=e.children,o=i;return a&&(o=r.createElement(t.ReduxProvider,{store:a},i)),r.createElement(t.MapProviderContextProvider,{value:n},o)}},1212:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.MapGuideMapProviderContext=t.isMapGuideProviderState=void 0;var r=n(70655),a=n(31293),i=n(87031),o=n(29256),s=(0,r.__importDefault)(n(75861)),l=n(2033),u=n(81876),c=(0,r.__importDefault)(n(59220)),p=(0,r.__importDefault)(n(91296)),d=n(97936),m=n(41407),f=n(12966),_=n(76038),E=n(36645),v=n(17626),g=n(95601),y=n(5791),h=n(4275),S=n(83467),T=n(7275),L=n(87755),I=n(10737),A=n(69648),C=n(51380),b=n(74399),N=n(61220),O=n(72787),M=(0,r.__importDefault)(n(92479)),P=(0,r.__importDefault)(n(67548)),R=n(37556),D=n(12694);function w(){var e,t,n=(0,C.useViewerActiveTool)(),r=(0,C.useActiveMapView)(),a=(0,C.useViewerViewRotation)(),i=(0,C.useViewerViewRotationEnabled)(),o=(0,C.useActiveMapName)(),s=(0,C.useViewerLocale)(),l=(0,C.useActiveMapExternalBaseLayers)(!0),u=(0,C.useConfiguredCancelDigitizationKey)(),c=(0,C.useConfiguredUndoLastPointKey)(),p=(0,C.useActiveMapLayers)(),d=(0,C.useActiveMapInitialExternalLayers)(),m=((0,N.useReduxDispatch)(),(0,C.useCustomAppSettings)()),f=(0,R.useActiveMapSubjectLayer)(),_=(0,C.useViewerIsStateless)(),E=(0,C.useViewerImageFormat)(),v=(0,C.useConfiguredAgentUri)(),g=(0,C.useConfiguredAgentKind)(),y=(0,b.useActiveMapState)(),h=(0,C.useViewerPointSelectionBuffer)(),S=(0,C.useViewerFeatureTooltipsEnabled)(),L=(0,C.useConfiguredManualFeatureTooltips)(),I=(0,b.useActiveMapSessionId)(),O=(0,C.useViewerSelectionColor)(),M=(0,C.useViewerSelectionImageFormat)(),P=(0,b.useActiveMapSelectableLayerNames)(),w=(0,b.useActiveMapLayerTransparency)(),F=(0,b.useActiveMapShowGroups)(),U=(0,b.useActiveMapHideGroups)(),V=(0,b.useActiveMapShowLayers)(),x=(0,b.useActiveMapHideLayers)(),k=(0,b.useActiveMapActiveSelectedFeature)(),B=(0,C.useViewerActiveFeatureSelectionColor)(),G=(0,C.useActiveMapSelectionSet)();y&&(e="#"+y.BackgroundColor.substring(2)),k&&G&&G.FeatureSet&&(t=(0,A.getActiveSelectedFeatureXml)(G.FeatureSet,k));var Y=null!=y?y:f,z=!1;return Y?(f&&w||v&&Y&&w&&(_||(0,D.isRuntimeMap)(Y)&&I))&&(z=!0):(z=!1,Y={}),{stateless:_,activeTool:n,view:r,viewRotation:a,viewRotationEnabled:i,mapName:o,locale:s,externalBaseLayers:l,cancelDigitizationKey:u,undoLastPointKey:c,initialExternalLayers:d,appSettings:null!=m?m:{},isReady:z,bgColor:e,layers:p,imageFormat:E,agentUri:v,agentKind:g,map:Y,pointSelectionBuffer:h,featureTooltipsEnabled:S,manualFeatureTooltips:L,sessionId:I,selectionColor:O,selectionImageFormat:M,selectableLayerNames:P,layerTransparency:w,showGroups:null!=F?F:[],hideGroups:null!=U?U:[],showLayers:null!=V?V:[],hideLayers:null!=x?x:[],activeSelectedFeatureXml:null!=t?t:T.STR_EMPTY,activeSelectedFeatureColor:B,selection:G}}t.isMapGuideProviderState=function(e){return"string"==typeof e.agentUri&&"string"==typeof e.agentKind};var F=function(e){function t(t){void 0===t&&(t=void 0);var n=e.call(this)||this;return n.mockMode=t,n.onOpenTooltipLink=function(e){var t,r=e;n._state.mapName&&n._state.sessionId&&(r=(0,L.ensureParameters)(e,n._state.mapName,n._state.sessionId,n._state.locale)),null===(t=n._comp)||void 0===t||t.onDispatch({type:I.ActionType.TASK_INVOKE_URL,payload:{url:r}})},n._wktFormat=new s.default,n.refreshOnStateChange=(0,p.default)(n._refreshOnStateChange.bind(n),500),n}return(0,r.__extends)(t,e),t.prototype.getHookFunction=function(){return w},t.prototype.setMockMode=function(e){this.mockMode=e},t.prototype.hideAllPopups=function(){var t;e.prototype.hideAllPopups.call(this),null===(t=this._featureTooltip)||void 0===t||t.setEnabled(!1)},t.prototype.getMockMode=function(){return this.mockMode},t.prototype.getInitialProviderState=function(){return{stateless:!1,imageFormat:"PNG8",agentUri:void 0,agentKind:"mapagent",map:{},pointSelectionBuffer:2,featureTooltipsEnabled:!0,manualFeatureTooltips:!1,sessionId:void 0,selectionColor:"0000FF",selectionImageFormat:"PNG8",selectableLayerNames:[],layerTransparency:{},appSettings:{},showGroups:[],hideGroups:[],showLayers:[],hideLayers:[],activeSelectedFeatureXml:T.STR_EMPTY,activeSelectedFeatureColor:"FF0000",selection:null}},t.prototype.getProviderName=function(){return"MapGuide"},t.prototype.mapguideSupport=function(){return this},t.prototype.getSelection=function(){return this._state.selection},t.prototype.getSelectionXml=function(e,t){return(0,A.buildSelectionXml)(e,t)},t.prototype.getSessionId=function(){return this._state.sessionId},t.prototype.setFeatureTooltipEnabled=function(e){var t;null===(t=this._comp)||void 0===t||t.onDispatch((0,u.setFeatureTooltipsEnabled)(e))},t.prototype.onSessionExpired=function(){},t.prototype.onProviderMapClick=function(e){var t;if(this._state.mapName&&this._state.sessionId)if(this._state.manualFeatureTooltips&&this._state.featureTooltipsEnabled)this.queryFeatureTooltip(e);else if(this._state.activeTool===o.ActiveMapTool.Select){var n=null!==(t=this._state.pointSelectionBuffer)&&void 0!==t?t:2,r=this.getPointSelectionBox(e,n),a=(0,l.fromExtent)(r),i=this.buildDefaultQueryOptions(a);i.maxfeatures=1,this.sendSelectionQuery(i)}},t.prototype.onMouseMove=function(e){var t,n;if(this._comp){if(this.handleMouseTooltipMouseMove(e),this.handleHighlightHover(e),this._comp.isContextMenuOpen())return;this._state.manualFeatureTooltips||this.handleFeatureTooltipMouseMove(e),this._utfGridTooltip&&this._utfGridTooltip.onMouseMove(e),this._state.mapName&&(null===(n=(t=this._comp).onDispatch)||void 0===n||n.call(t,(0,u.setMouseCoordinates)(this._state.mapName,e.coordinate)))}},t.prototype.queryFeatureTooltip=function(e){!this._state.stateless&&this._featureTooltip&&this._featureTooltip.isEnabled()&&this._featureTooltip.raiseQueryFromPoint(e)},t.prototype.handleFeatureTooltipMouseMove=function(e){!this._state.stateless&&this._featureTooltip&&this._featureTooltip.isEnabled()&&this._featureTooltip.onMouseMove(e)},t.prototype.enableFeatureTooltips=function(e){var t;null===(t=this._featureTooltip)||void 0===t||t.setEnabled(e)},t.prototype.refreshMapInternal=function(e,t){void 0===t&&(t=o.RefreshMode.LayersOnly|o.RefreshMode.SelectionOnly);var n=this.getLayerSetGroup(e);null==n||n.refreshMap(t)},t.prototype.showSelectedFeature=function(e,t,n,a,i){return(0,r.__awaiter)(this,void 0,void 0,(function(){var s,l,u,c;return(0,r.__generator)(this,(function(r){switch(r.label){case 0:if(s=(0,v.getSiteVersion)(n),!(0,v.canUseQueryMapFeaturesV4)(s))return[2];l=this.getLayerSetGroup(n.Name),r.label=1;case 1:return r.trys.push([1,5,,6]),i?[4,this._client.queryMapFeatures_v4({mapname:n.Name,session:n.SessionId,selectionformat:"PNG",featurefilter:i,selectioncolor:a,requestdata:2,layerattributefilter:0,persist:0})]:[3,3];case 2:return(u=r.sent()).InlineSelectionImage?(c="data:"+u.InlineSelectionImage.MimeType+";base64,"+u.InlineSelectionImage.Content,null==l||l.showActiveSelectedFeature(e,t,c)):null==l||l.showActiveSelectedFeature(e,o.BLANK_SIZE,g.BLANK_GIF_DATA_URI),[3,4];case 3:null==l||l.showActiveSelectedFeature(e,o.BLANK_SIZE,g.BLANK_GIF_DATA_URI),r.label=4;case 4:return[3,6];case 5:return r.sent(),null==l||l.showActiveSelectedFeature(e,o.BLANK_SIZE,g.BLANK_GIF_DATA_URI),[3,6];case 6:return[2]}}))}))},t.prototype._refreshOnStateChange=function(e,t,n,r,a){if(t||n||r||a){var i=this.getLayerSetGroup(e);i instanceof f.MgLayerSetGroup&&(i.setMapGuideMocking(this.getMockMode()),i.update(t,n,r,a))}},t.prototype.onImageError=function(e){var t,n=this;null===(t=this._keepAlive)||void 0===t||t.lastTry().catch((function(e){(0,y.isSessionExpiredError)(e)&&n.onSessionExpired()}))},t.prototype.getSelectableLayers=function(){var e;return null!==(e=this._state.selectableLayerNames)&&void 0!==e?e:[]},t.prototype.buildDefaultQueryOptions=function(e,t){void 0===t&&(t=1),(0,S.assertIsDefined)(this._state.sessionId),(0,S.assertIsDefined)(this._state.mapName);var n,r=this.getSelectableLayers();return n="string"==typeof e?e:this._wktFormat.writeGeometry(e),{mapname:this._state.mapName,session:this._state.sessionId,geometry:n,requestdata:t,layernames:r.length>0?r.join(","):void 0,persist:1}},t.prototype.selectFeaturesByExtent=function(e){this._state.mapName&&this._comp&&this._state.sessionId&&this._state.selectionColor&&this.sendSelectionQuery(this.buildDefaultQueryOptions(e))},t.prototype.initLayerSet=function(t){var n=this,r=t.mapName;(0,S.assertIsDefined)(r),(0,S.assertIsDefined)(this._state.map);var a=new f.MgLayerSetGroup(t,{getImageLoaders:function(){return e.prototype.getImageSourceLoaders.call(n,r)},getTileLoaders:function(){return e.prototype.getTileSourceLoaders.call(n,r)},getBaseTileLoaders:function(){return e.prototype.getBaseTileSourceLoaders.call(n,r)},getMockMode:function(){return n.getMockMode()},incrementBusyWorker:function(){return n.incrementBusyWorker()},decrementBusyWorker:function(){return n.decrementBusyWorker()},addImageLoading:function(){var e;return null===(e=n._comp)||void 0===e?void 0:e.addImageLoading()},addImageLoaded:function(){var e;return null===(e=n._comp)||void 0===e?void 0:e.addImageLoaded()},onImageError:function(e){return n.onImageError(e)},onSessionExpired:function(){return n.onSessionExpired()},getSelectableLayers:function(){return n.getSelectableLayers()},getClient:function(){return n._client},isContextMenuOpen:function(){var e,t;return null!==(t=null===(e=n._comp)||void 0===e?void 0:e.isContextMenuOpen())&&void 0!==t&&t},getAgentUri:function(){return n._state.agentUri},getAgentKind:function(){return n._state.agentKind},getMapName:function(){return n._state.mapName},getSessionId:function(){return n._state.sessionId},getLocale:function(){return n._state.locale},isFeatureTooltipEnabled:function(){return n.isFeatureTooltipEnabled()},getPointSelectionBox:function(e){return n.getPointSelectionBox(e,n._state.pointSelectionBuffer)},openTooltipLink:function(e){return n.onOpenTooltipLink(e)},addFeatureToHighlight:function(e,t){return n.addFeatureToHighlight(e,t)}});return this._layerSetGroups[r]=a,a.update(t.showGroups,t.showLayers,t.hideGroups,t.hideLayers),a},t.prototype.isMouseOverTooltip=function(){var e,t;return 1==(null===(e=this._featureTooltip)||void 0===e?void 0:e.isMouseOver)||1==(null===(t=this._selectTooltip)||void 0===t?void 0:t.isMouseOver)},t.prototype.detachFromComponent=function(){var t,n;null===(t=this._keepAlive)||void 0===t||t.dispose(),this._keepAlive=void 0,null===(n=this._featureTooltip)||void 0===n||n.dispose(),this._featureTooltip=void 0,e.prototype.detachFromComponent.call(this)},t.prototype.attachToComponent=function(t,n){var r,a,o,s,l=this;e.prototype.attachToComponent.call(this,t,n);var u=null!==(r=this._state.map&&(0,D.isRuntimeMap)(this._state.map))&&void 0!==r&&r;this._keepAlive=new i.SessionKeepAlive((function(){return l._state.sessionId}),this._client,this.onSessionExpired.bind(this),u);var c=(0,h.recursiveFindLayer)(this._map.getLayers(),(function(e){return e instanceof M.default&&e.getSource()instanceof P.default}));if(c){var p=c.getSource();this._utfGridTooltip=new O.UTFGridTrackingTooltip(this._map,p,null!==(o=null===(a=this._comp)||void 0===a?void 0:a.isContextMenuOpen)&&void 0!==o?o:function(){return!1})}null!==(s=this._state.map&&(0,D.isRuntimeMap)(this._state.map))&&void 0!==s&&s&&(this._featureTooltip=new _.FeatureQueryTooltip(this._map,{incrementBusyWorker:function(){return l.incrementBusyWorker()},decrementBusyWorker:function(){return l.decrementBusyWorker()},onSessionExpired:function(){return l.onSessionExpired()},getAgentUri:function(){return l._state.agentUri},getAgentKind:function(){return l._state.agentKind},getMapName:function(){return l._state.mapName},getSessionId:function(){return l._state.sessionId},getLocale:function(){return l._state.locale},getPointSelectionBox:function(e){return l.getPointSelectionBox(e,l._state.pointSelectionBuffer)},openTooltipLink:function(e){return l.onOpenTooltipLink(e)}}),this._featureTooltip.setEnabled(this._state.featureTooltipsEnabled))},t.prototype.refreshMap=function(e){void 0===e&&(e=o.RefreshMode.LayersOnly|o.RefreshMode.SelectionOnly),(0,S.assertIsDefined)(this._state.mapName),this.refreshMapInternal(this._state.mapName,e)},t.prototype.onBeforeAttachingLayerSetGroup=function(e){e.setMapGuideMocking(this.getMockMode())},t.prototype.setProviderState=function(e){var t=this;if(!this._comp||!this._map)return e.agentUri&&(this._client=new a.Client(e.agentUri,e.agentKind)),void(this._state=e);e.imageFormat!=this._state.imageFormat&&(0,E.warn)("Unsupported change of props: imageFormat"),e.agentUri&&e.agentUri!=this._state.agentUri&&((0,E.warn)("Unsupported change of props: agentUri"),this._client=new a.Client(e.agentUri,e.agentKind)),e.agentUri&&e.agentKind!=this._state.agentKind&&((0,E.warn)("Unsupported change of props: agentKind"),this._client=new a.Client(e.agentUri,e.agentKind));var n=!1;if(e.mapName!=this._state.mapName&&this._map&&this._ovMap){this.hideAllPopups();var r=this.getLayerSetGroup(this._state.mapName),i=this.ensureAndGetLayerSetGroup(e);null==r||r.clearHighlightedFeatures(),i.clearHighlightedFeatures(),null==r||r.detach(this._map,this._ovMap),i.setMapGuideMocking(this.getMockMode()),i.attach(this._map,this._ovMap),e.view?(l=this.getLayerSetGroup(e.mapName))&&this.applyView(l,e.view):(i.fitViewToExtent(),n=!0)}e.selectionColor&&e.selectionColor!=this._state.selectionColor&&(null==(l=this.getLayerSetGroup(e.mapName))||l.updateSelectionColor(e.selectionColor)),e.featureTooltipsEnabled!=this._state.featureTooltipsEnabled&&this.enableFeatureTooltips(e.featureTooltipsEnabled),null!=e.externalBaseLayers&&e.externalBaseLayers.length>0&&(null==(l=this.getLayerSetGroup(e.mapName))||l.updateExternalBaseLayers(e.externalBaseLayers)),e.layerTransparency&&(0,d.layerTransparencyChanged)(e.layerTransparency,this._state.layerTransparency)&&(null==(l=this.getLayerSetGroup(e.mapName))||l.updateTransparency(e.layerTransparency)),e.mapName&&((0,m.areArraysDifferent)(e.showGroups,this._state.showGroups)||(0,m.areArraysDifferent)(e.hideGroups,this._state.hideGroups)||(0,m.areArraysDifferent)(e.showLayers,this._state.showLayers)||(0,m.areArraysDifferent)(e.hideLayers,this._state.hideLayers))&&this.refreshOnStateChange(e.mapName,e.showGroups,e.showLayers,e.hideGroups,e.hideLayers);var o=!1;if(!(0,d.areViewsCloseToEqual)(e.view,this._state.view)){var s=e.view;if(null==s||n)(0,E.debug)("Skipping zoomToView as next/current views are close enough or target view is null");else{var l=this.ensureAndGetLayerSetGroup(e);this.applyView(l,s),o=!0}}if(e.overviewMapElementSelector&&this.updateOverviewMapElement(e.overviewMapElementSelector),this._state.viewRotation!=e.viewRotation&&this.getOLView().setRotation(e.viewRotation),this._state.viewRotationEnabled!=e.viewRotationEnabled&&this._map){var u=this.getOLView(),p=new c.default({enableRotation:e.viewRotationEnabled,rotation:e.viewRotation,center:u.getCenter(),resolution:u.getResolution(),resolutions:u.getResolutions(),minResolution:u.getMinResolution(),maxResolution:u.getMaxResolution(),maxZoom:u.getMaxZoom(),minZoom:u.getMinZoom(),projection:u.getProjection(),zoom:u.getZoom()});this._map.setView(p)}var f=this._state.activeSelectedFeatureXml!=e.activeSelectedFeatureXml,_=!(0,T.strIsNullOrEmpty)(e.activeSelectedFeatureXml)&&o;if((f||_)&&this._map&&e.map){var v=this._map.getSize();if(v&&(0,D.isRuntimeMap)(e.map)){var g=e.map,y=function(){if(0==t._busyWorkers){var n=t.getOLView().calculateExtent(v),r={w:v[0],h:v[1]};t.showSelectedFeature(n,r,g,e.activeSelectedFeatureColor,e.activeSelectedFeatureXml)}else window.setTimeout(y,100)};y()}}this._state=e},t.prototype.setSelectionXml=function(e,t,n,a){var i,o=this;if(this._state.mapName&&this._comp&&this._state.sessionId&&this._state.selectionColor){this.incrementBusyWorker();var s=this._state.mapName,l={mapname:s,session:this._state.sessionId,persist:1,featurefilter:e,selectioncolor:this._state.selectionColor,selectionformat:null!==(i=this._state.selectionImageFormat)&&void 0!==i?i:"PNG8",maxfeatures:-1,requestdata:1},c=(0,r.__assign)((0,r.__assign)({},l),t),p=(0,u.queryMapFeatures)(s,{options:c,callback:function(e){o.decrementBusyWorker(),n&&n(e)},errBack:function(e){o.decrementBusyWorker(),a&&a(e)}});this._comp.onDispatch(p)}},t.prototype.clearSelection=function(){this.setSelectionXml("")},t.prototype.selectByGeometry=function(e,t){var n=this.buildDefaultQueryOptions(e);t&&(n.selectionvariant=t),this.sendSelectionQuery(n)},t.prototype.queryMapFeatures=function(e,t,n){this.sendSelectionQuery(e,t,n)},t.prototype.isFeatureTooltipEnabled=function(){var e;return 1==(null===(e=this._featureTooltip)||void 0===e?void 0:e.isEnabled())},t.prototype.sendSelectionQuery=function(e,t,n){var a,i,o=this;if(this._state.mapName&&this._comp&&this._state.sessionId&&this._state.selectionColor&&(null==e||0!=(null!==(a=e.layernames)&&void 0!==a?a:[]).length)){this.incrementBusyWorker();var s=this._state.mapName,l={mapname:s,session:this._state.sessionId,persist:1,selectionvariant:"INTERSECTS",selectioncolor:this._state.selectionColor,selectionformat:null!==(i=this._state.selectionImageFormat)&&void 0!==i?i:"PNG8",maxfeatures:-1},c=(0,r.__assign)((0,r.__assign)({},l),e),p=(0,u.queryMapFeatures)(s,{options:c,callback:function(e){o.decrementBusyWorker(),t&&t(e)},errBack:function(e){o.decrementBusyWorker(),n&&n(e)}});this._comp.onDispatch(p)}},t}(h.BaseMapProviderContext);t.MapGuideMapProviderContext=F},12039:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.MapDebugContext=t.MapGuideMockMode=void 0;var r,a=(0,n(70655).__importStar)(n(67294));(r=t.MapGuideMockMode||(t.MapGuideMockMode={}))[r.RenderPlaceholder=0]="RenderPlaceholder",r[r.DoNotRender=1]="DoNotRender",t.MapDebugContext=a.createContext({})},91548:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.MenuComponent=void 0;var r=n(70655),a=(0,r.__importStar)(n(67294)),i=n(12694),o=n(70102),s=n(9663),l=n(27058);t.MenuComponent=function(e){return a.createElement(l.Menu,{className:"bp3-elevation-1"},e.items.map((function(n,u){if(n.isSeparator)return a.createElement(l.MenuDivider,{key:u});if((0,i.isMenu)(n)){var c="";return c="function"==typeof n.label?n.label():n.label||"",a.createElement(l.MenuItem,{key:u,text:c,icon:"menu-open"},a.createElement(t.MenuComponent,{items:n.childItems,onInvoked:e.onInvoked}))}var p=!0;null!=n.enabled&&(p="function"==typeof n.enabled?n.enabled():n.enabled);var d=(0,r.__assign)({marginRight:5},(0,o.getIconStyle)(p,30));return c=n.label||"",a.createElement("li",{key:u},a.createElement("a",{className:"bp3-menu-item",onClick:function(){return function(t){var n,r;(0,o.getEnabled)(t)&&(null===(n=null==t?void 0:t.invoke)||void 0===n||n.call(t),null===(r=e.onInvoked)||void 0===r||r.call(e))}(n)}},a.createElement(s.ImageIcon,{style:d,url:n.icon,spriteClass:n.iconClass})," ",c))})))}},21854:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.RndModalDialog=void 0;var r=n(70655),a=(0,r.__importStar)(n(67294)),i=n(27058),o=n(61090),s=n(48720);t.RndModalDialog=function(e){if(!1===e.isOpen)return a.createElement("div",null);var t={margin:0};e.disableYOverflow||(t.overflowY="auto");var n=a.useState(!1),l=n[0],u=n[1],c=a.useState(!1),p=c[0],d=c[1],m=a.useState(e.width),f=m[0],_=m[1],E=a.useState(e.height),v=E[0],g=E[1],y=a.useState(e.x),h=(y[0],y[1]),S=a.useState(e.y),T=(S[0],S[1]),L={zIndex:1980},I=(0,r.__assign)({width:f,height:v,marginTop:0},L),A=(0,r.__assign)({},L),C=[f,v-40];return a.createElement(o.Rnd,{style:A,enableResizing:{bottomRight:!0,bottomLeft:!0,topLeft:!0,topRight:!0},enableUserSelectHack:!1,onDragStart:function(){return u(!0)},onDragStop:function(e,t){h(t.x),T(t.y),u(!1)},onResizeStart:function(){return d(!0)},onResize:function(e,t,n,r,a){_(n.offsetWidth),g(n.offsetHeight),h(a.x),T(a.y)},onResizeStop:function(e,t,n,r,a){_(n.offsetWidth),g(n.offsetHeight),h(a.x),T(a.y),d(!1)},dragHandleClassName:"bp3-heading",default:{x:e.x,y:e.y,width:e.width,height:e.height}},a.createElement("div",{className:"bp3-dialog-container"},a.createElement("div",{className:"bp3-dialog",style:I},a.createElement("div",{className:"bp3-dialog-header noselect"},e.icon&&a.createElement(i.Icon,{icon:e.icon}),a.createElement("h4",{className:"bp3-heading"},e.title),a.createElement(i.Button,{onClick:e.onClose,"aria-label":"Close",className:"bp3-dialog-close-button bp3-button",minimal:!0,icon:"small-cross"})),a.createElement("div",{className:"bp3-dialog-body",style:t},function(){if(e.enableInteractionMask&&(p||l)){var t=p?"WINDOW_RESIZING":"WINDOW_MOVING";return a.createElement(i.NonIdealState,{icon:"arrows-horizontal",description:(0,s.tr)(t,e.locale)})}return e.children(C)}()))))}},22667:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.MouseCoordinates=void 0;var r=(0,n(70655).__importStar)(n(67294)),a=n(48720),i=n(7275);t.MouseCoordinates=function(e){return r.createElement("div",{className:"status-bar-component component-mouse-coordinates",style:e.style},function(e){var t=e.coords,n=e.decimals,o=e.format,s=e.units;if(null==t)return null;var l=t[0],u=t[1],c=o||"X: {x}, Y: {y} {units}",p=(0,a.fmt)(c,{x:""+(null!=n?l.toFixed(n):l),y:""+(null!=n?u.toFixed(n):u),units:s||""});return r.createElement("span",{dangerouslySetInnerHTML:{__html:(0,i.strTrim)(p)}})}(e))}},20360:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Navigator=t.PanDirection=t.ZoomDirection=void 0;var r,a,i=n(70655),o=(0,i.__importStar)(n(67294)),s=n(48720),l=(0,i.__importDefault)(n(61193)),u=n(65539),c=n(44839);!function(e){e[e.In=0]="In",e[e.Out=1]="Out"}(r=t.ZoomDirection||(t.ZoomDirection={})),function(e){e[e.East=0]="East",e[e.West=1]="West",e[e.South=2]="South",e[e.North=3]="North"}(a=t.PanDirection||(t.PanDirection={}));var p=Math.log(9);function d(e,t){if(t){var n=(0,u.getFiniteScaleIndexForScale)(t,e),r=81/t.length*(n+1);return Math.floor(r)}return r=9*Math.log(e)/p,Math.floor(r)}function m(e,t){var n=Math.pow(9,e/9);return t?t[(0,u.getFiniteScaleIndexForScale)(t,n)]:n}t.Navigator=function(e){var t=e.busy,n=e.locale,i=o.useState(d(e.scale,e.finiteScaleList)),u=i[0],p=i[1],f=o.useState(d(e.scale,e.finiteScaleList)),_=f[0],E=f[1],v=o.useState(!1),g=v[0],y=v[1];return o.useEffect((function(){var t=d(e.scale,e.finiteScaleList);E(t),p(t)}),[e.scale,e.finiteScaleList]),o.createElement("div",{id:"Navigator",style:e.style,className:"component-navigator noselect"},o.createElement("map",{name:"Navigator_ImageMap",id:"Navigator_ImageMap"},o.createElement("area",{onClick:function(){e.onPan(a.East)},shape:"poly",alt:(0,s.tr)("NAVIGATOR_PAN_EAST",n),title:(0,s.tr)("NAVIGATOR_PAN_EAST",n),coords:"27,176, 27,177, 40,190, 44,182, 44,159"}),o.createElement("area",{onClick:function(){e.onPan(a.West)},shape:"poly",alt:(0,s.tr)("NAVIGATOR_PAN_WEST",n),title:(0,s.tr)("NAVIGATOR_PAN_WEST",n),coords:"24,177, 24,176, 7,159, 7,182, 11,190"}),o.createElement("area",{onClick:function(){e.onPan(a.South)},shape:"poly",alt:(0,s.tr)("NAVIGATOR_PAN_SOUTH",n),title:(0,s.tr)("NAVIGATOR_PAN_SOUTH",n),coords:"25,178, 12,191, 21,197, 30,197, 39,191, 26,178"}),o.createElement("area",{onClick:function(){e.onPan(a.North)},shape:"poly",alt:(0,s.tr)("NAVIGATOR_PAN_NORTH",n),title:(0,s.tr)("NAVIGATOR_PAN_NORTH",n),coords:"26,175, 43,158, 8,158, 25,175"}),o.createElement("area",{onClick:function(){e.onZoom(r.Out)},shape:"circle",alt:(0,s.tr)("NAVIGATOR_ZOOM_OUT",n),title:(0,s.tr)("NAVIGATOR_ZOOM_OUT",n),coords:"25,142,8"}),o.createElement("area",{onClick:function(){e.onZoom(r.In)},shape:"circle",alt:(0,s.tr)("NAVIGATOR_ZOOM_IN",n),title:(0,s.tr)("NAVIGATOR_ZOOM_IN",n),coords:"25,34,8"})),o.createElement("img",{src:c.IMG_SLIDER_SCALE,className:"png24",width:"51",height:"201",useMap:"#Navigator_ImageMap",style:{position:"absolute",left:0,top:0}}),o.createElement("div",{style:{position:"absolute",top:6,left:6,width:39,height:16}},o.createElement("img",{src:c.GIF_SPINNER,className:"navigator-spinner",width:"18",height:"6",style:{position:"absolute",top:3,right:4,visibility:t?"visible":"hidden"}})),o.createElement(l.default,{axis:"y",handle:"img.navigator-drag-handle",position:{x:0,y:10+_},bounds:{top:10,bottom:91,left:0,right:0},onStart:function(e){e.preventDefault(),y(!0),p(_)},onDrag:function(e,t){e.preventDefault(),p(u+t.deltaY)},onStop:function(t){t.preventDefault();var n=m(u);y(!1),E(u),e.onRequestZoomToScale(n)}},o.createElement("div",null,o.createElement("img",{src:c.IMG_SLIDER,className:"png24 navigator-drag-handle",width:"29",height:"12",style:{position:"relative",left:11,top:28}}),function(){if(!0===g){var t=(0,s.tr)("FMT_NAVIGATOR_ZOOM_TO_SCALE",e.locale,{scale:m(u).toFixed(2)});return o.createElement("div",{className:"tooltip",style:{position:"relative",width:170,right:190,top:28,textAlign:"right"}},t)}}())))}},43458:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PoweredByMapGuide=void 0;var r=n(70655),a=(0,r.__importStar)(n(67294)),i=n(9663);t.PoweredByMapGuide=function(e){return a.createElement("div",(0,r.__assign)({className:"status-bar-component component-pbmg"},e),a.createElement(i.ImageIcon,{style:{display:"block"},spriteClass:"PoweredBy_en"}))}},63266:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ScaleDisplay=void 0;var r=(0,n(70655).__importStar)(n(67294)),a=n(48720),i=n(65539);t.ScaleDisplay=function(e){var t=e.view,n=e.style,o=e.locale,s=e.finiteScales,l=e.onScaleChanged,u=r.useState(void 0),c=u[0],p=u[1];r.useEffect((function(){!s&&t&&t.scale!=c&&p(t.scale)}),[s,t]);var d=(0,a.tr)("FMT_SCALE_DISPLAY",o,{scale:""});if(s){var m=(0,i.getFiniteScaleIndexForScale)(s,t.scale),f=s[m];return r.createElement("div",{className:"status-bar-component component-scale-display",style:n},d," ",r.createElement("select",{className:"scale-input",value:f,onChange:function(e){return null==l?void 0:l(parseFloat(e.target.value))}},s.map((function(e){return r.createElement("option",{key:e,value:e},e)}))))}return r.createElement("div",{className:"status-bar-component component-scale-display",style:n},d," ",r.createElement("input",{className:"scale-input",type:"number",value:c||"",onChange:function(e){return p(parseFloat(e.target.value))},onKeyPress:function(e){"Enter"==e.key&&c&&(null==l||l(c))}}))}},36287:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SelectedFeatureCount=void 0;var r=(0,n(70655).__importStar)(n(67294)),a=n(48720);t.SelectedFeatureCount=function(e){var t,n=e.format||(0,a.tr)("FMT_SELECTION_COUNT",e.locale);return e.summary&&(t=(0,a.fmt)(n,e.summary)),r.createElement("div",{className:"status-bar-component component-selected-feature-count",style:e.style},t)}},80974:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SelectionPanel=void 0;var r=(0,n(70655).__importStar)(n(67294)),a=n(70102),i=n(48720),o=n(27058),s=n(7275),l=function(e){var t=e.selectedFeature,n=e.selectedLayer,a=e.locale,o=e.allowHtmlValues,l=e.cleanHTML,u=[];if(null==n?void 0:n.Property)for(var c=function(e){var n=t.Property.filter((function(t){return t.Name===e.DisplayName}));1===n.length&&u.push(n[0])},p=0,d=n.Property;p<d.length;p++)c(d[p]);else for(var m=0,f=t.Property;m<f.length;m++){var _=f[m];u.push(_)}return r.createElement("table",{className:"selection-panel-property-grid bp3-html-table bp3-html-table-condensed bp3-html-table-bordered"},r.createElement("thead",null,r.createElement("tr",null,r.createElement("th",null,(0,i.tr)("SELECTION_PROPERTY",a)),r.createElement("th",null,(0,i.tr)("SELECTION_VALUE",a)))),r.createElement("tbody",null,u.map((function(e){return r.createElement("tr",{key:e.Name},r.createElement("td",{className:"property-name-cell","data-property-name":e.Name},e.Name),(t=e.Value,o&&!(0,s.strIsNullOrEmpty)(t)?(l&&(t=l(t)),r.createElement("td",{className:"property-value-cell","data-property-value-for":e.Name,dangerouslySetInnerHTML:{__html:t}})):r.createElement("td",{className:"property-value-cell","data-property-value-for":e.Name},e.Value)));var t}))))},u={float:"right",height:a.DEFAULT_TOOLBAR_SIZE},c={height:a.DEFAULT_TOOLBAR_SIZE,backgroundColor:a.TOOLBAR_BACKGROUND_COLOR},p={float:"left",height:a.DEFAULT_TOOLBAR_SIZE},d=function(){return r.createElement("div",{style:{clear:"both"}})};t.SelectionPanel=function(e){var t=e.maxHeight,n=e.selection,s=e.selectedFeatureRenderer,m=e.allowHtmlValues,f=e.cleanHTML,_=e.onShowSelectedFeature,E=e.onRequestZoomToFeature,v=r.useState(-1),g=v[0],y=v[1],h=r.useState(-1),S=h[0],T=h[1];r.useEffect((function(){if(n.getLayerCount()>0)if(g<0)y(0),T(0);else{var e=n.getLayerAt(g);e?S<0&&e.getFeatureCount()>0&&T(0):(y(0),T(0))}}),[n]);var L,I,A,C=function(){return n.getLayerAt(g)},b=function(e){return n.getFeatureAt(g,e)},N=function(){return b(S)},O=function(){return S>0},M=function(){var e=C();return null!=e&&S+1<e.getFeatureCount()},P=function(){var e=N();return null!=(null==e?void 0:e.Bounds)},R=function(){var e,t=S-1;T(t);var n=C();if(n){var r=n.getLayerId(),a=null===(e=b(t))||void 0===e?void 0:e.SelectionKey;a&&r&&(null==_||_(r,a))}},D=function(){var e,t=S+1;T(t);var n=C();if(n){var r=n.getLayerId(),a=null===(e=b(t))||void 0===e?void 0:e.SelectionKey;a&&r&&(null==_||_(r,a))}},w=function(){var e=N();e&&E(e)},F=function(e){y(e.target.value),T(0)},U=e.locale||i.DEFAULT_LOCALE;if(null!=n&&g>=0&&S>=0){var V=n.getLayerAt(g);L=null==V?void 0:V.getFeatureAt(S),I=null==V?void 0:V.getLayerMetadata()}return A=t?{overflowY:"auto",maxHeight:t-a.DEFAULT_TOOLBAR_SIZE}:{overflow:"auto",position:"absolute",top:a.DEFAULT_TOOLBAR_SIZE,bottom:0,right:0,left:0},r.createElement("div",null,function(){if((null==n?void 0:n.getLayerCount())>0){var t=(s={locale:U,canGoPrev:O,canGoNext:M,prevFeature:R,nextFeature:D,canZoomSelectedFeature:P,zoomSelectedFeature:w},[{bpIconName:"arrow-left",tooltip:(0,i.tr)("SELECTION_PREV_FEATURE",s.locale),enabled:function(){return s.canGoPrev()},invoke:function(){return s.prevFeature()}},{bpIconName:"arrow-right",tooltip:(0,i.tr)("SELECTION_NEXT_FEATURE",s.locale),enabled:function(){return s.canGoNext()},invoke:function(){return s.nextFeature()}},{isSeparator:!0},{bpIconName:"path-search",tooltip:(0,i.tr)("SELECTION_ZOOMTO_FEATURE",s.locale),enabled:function(){return s.canZoomSelectedFeature()},invoke:function(){return s.zoomSelectedFeature()}}]);return r.createElement("div",{className:"selection-panel-toolbar",style:c},r.createElement("div",{className:"bp3-select selection-panel-layer-selector"},r.createElement(o.HTMLSelect,{value:g,style:p,onChange:F},n.getLayers().map((function(t,n){var a,i,o=t.getLayerId(),s=t.getName(),l=null!=o?o:n,u=o&&null!==(i=null===(a=null==e?void 0:e.onResolveLayerLabel)||void 0===a?void 0:a.call(e,o,s))&&void 0!==i?i:s;return r.createElement("option",{key:"selected-layer-"+l,value:""+n},u)})))),r.createElement(a.Toolbar,{childItems:t,containerStyle:u}),r.createElement(d,null))}var s}(),r.createElement("div",{className:"selection-panel-body",style:A},L?s?s({selectedFeature:L,cleanHTML:f,allowHtmlValues:m,selectedLayer:I,locale:U}):r.createElement(l,{selectedFeature:L,cleanHTML:f,allowHtmlValues:m,selectedLayer:I,locale:U}):(null==n?void 0:n.getLayerCount())>0?void 0:r.createElement(o.Callout,{intent:o.Intent.PRIMARY,icon:"info-sign"},r.createElement("p",{className:"selection-panel-no-selection"},(0,i.tr)("NO_SELECTED_FEATURES",U)))))}},73765:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SessionExpired=void 0;var r=(0,n(70655).__importStar)(n(67294)),a=n(48720);function i(e){return e.preventDefault(),window.location.reload(),!1}t.SessionExpired=function(e){return r.createElement("div",{className:"component-session-expired"},r.createElement("p",null,(0,a.tr)("SESSION_EXPIRED_DETAILED",e.locale)),r.createElement("p",null,r.createElement("strong",null,(0,a.tr)("SESSION_EXPIRED_AVAILABLE_ACTIONS",e.locale))),r.createElement("ul",null,r.createElement("li",null,r.createElement("a",{href:"#",onClick:i},(0,a.tr)("SESSION_EXPIRED_RELOAD_VIEWER",e.locale)))))}},87031:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SessionKeepAlive=void 0;var n=function(){function e(e,t,n,r){var a=this;this.check=r,this.getSession=e,this.client=t,this.check&&this.client.getServerSessionTimeout(this.getSession()).then((function(e){a.interval=e/5*1e3,a.timeoutID=setTimeout(a.tick.bind(a),a.interval)}))}return e.prototype.dispose=function(){clearTimeout(this.timeoutID)},e.prototype.tick=function(){var e=this;this.client.getServerSessionTimeout(this.getSession()).then((function(t){e.timeoutID=setTimeout(e.tick.bind(e),e.interval)}))},e.prototype.lastTry=function(){return this.check?this.client.getServerSessionTimeout(this.getSession()):Promise.resolve(-1)},e}();t.SessionKeepAlive=n},98415:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TaskPane=t.TASK_PANE_OVERLAY_BGCOLOR=void 0;var r=n(70655),a=(0,r.__importStar)(n(67294)),i=(0,r.__importStar)(n(73935)),o=n(70102),s=n(37979),l=n(48720),u=n(87755),c=n(27058),p=n(95601);function d(e,t){var n=e.toLowerCase();return!!(n.indexOf("mapname=")>=0&&t)&&n.indexOf("mapname="+t.toLowerCase())<0}t.TASK_PANE_OVERLAY_BGCOLOR="#dee8f9";var m=function(e){function n(t){var n=e.call(this,t)||this;return n.onCloseFlyout=function(e){var t,r;return null===(r=(t=n.props).onCloseFlyout)||void 0===r?void 0:r.call(t,e)},n.onOpenFlyout=function(e,t){var r,a;return null===(a=(r=n.props).onOpenFlyout)||void 0===a?void 0:a.call(r,e,t)},n.onFrameMounted=function(e){n._iframe=e,n._iframe&&(i.findDOMNode(n._iframe).taskPaneId=p.FUSION_TASKPANE_NAME)},n.onFrameLoaded=function(e){var t=e.currentTarget;t.contentWindow&&(n.setState({frameContentLoaded:!0}),n.props.onUrlLoaded(t.contentWindow.location.href))},n.taskButtons=[t.homeAction,{isSeparator:!0},t.backAction,t.forwardAction],n.state={activeComponent:null,invalidated:!1,frameContentLoaded:!1},n}return(0,r.__extends)(n,e),n.prototype.componentDidUpdate=function(e){var t=this.props;e.currentUrl!=t.currentUrl&&t.currentUrl&&!1===t.lastUrlPushed&&this.loadUrl(t.currentUrl),!this.state.invalidated&&t.currentUrl&&0!=t.currentUrl.indexOf("component://")&&d(t.currentUrl,t.mapName)?this.setState({invalidated:!0}):!this.state.invalidated||!t.currentUrl||0!=t.currentUrl.indexOf("component://")&&d(t.currentUrl,t.mapName)||this.setState({invalidated:!1})},n.prototype.componentDidMount=function(){this.props.currentUrl&&this.loadUrl(this.props.currentUrl)},n.prototype.loadUrl=function(e){var t=this,n=(0,u.parseComponentUri)(e);n?this.setState({activeComponent:n.name,activeComponentProps:n.props}):this.setState({activeComponent:null,frameContentLoaded:!1},(function(){var n;t._iframe&&(null===(n=t._iframe.contentWindow)||void 0===n||n.location.replace(e))}))},n.prototype.render=function(){var e=this,n=this.state,r=(n.invalidated,n.activeComponent),i=this.props,u=i.locale,d=i.maxHeight,m=i.showTaskBar,f={label:(0,l.tr)("MENU_TASKS",u),flyoutAlign:"bottom left",flyoutId:p.WEBLAYOUT_TASKMENU},_={},E={height:o.DEFAULT_TOOLBAR_SIZE,backgroundColor:o.TOOLBAR_BACKGROUND_COLOR},v={},g={border:"none"},y={border:"none"};return d?(g.width="100%",g.height=!0===m?d-o.DEFAULT_TOOLBAR_SIZE:d,y.width="100%",y.maxHeight=!0===m?d-o.DEFAULT_TOOLBAR_SIZE:d,y.overflowY="auto"):(_.width="100%",_.height="100%",E.position="absolute",E.top=0,E.left=0,E.right=0,v.position="absolute",v.top=!0===m?o.DEFAULT_TOOLBAR_SIZE:0,v.left=0,v.right=0,v.bottom=0,v.overflow="hidden",g.width="100%",g.height="100%",y.width="100%",y.height="100%"),a.createElement("div",{style:_},function(){if(!0===m)return a.createElement("div",{style:E},a.createElement(o.Toolbar,{childItems:e.taskButtons,containerStyle:{float:"left",height:o.DEFAULT_TOOLBAR_SIZE},onCloseFlyout:e.onCloseFlyout,onOpenFlyout:e.onOpenFlyout,flyoutStates:e.props.flyoutStates}),a.createElement(o.Toolbar,{childItems:[f],containerStyle:{float:"right",height:o.DEFAULT_TOOLBAR_SIZE},onCloseFlyout:e.onCloseFlyout,onOpenFlyout:e.onOpenFlyout,flyoutStates:e.props.flyoutStates}),a.createElement("div",{style:{clear:"both"}}))}(),a.createElement("div",{style:v},function(){if(null!=r){var n=e.state.activeComponentProps;return y.overflowY="auto",a.createElement("div",{style:y},a.createElement(s.PlaceholderComponent,{id:r,componentProps:n,locale:e.props.locale}))}var i=e.state.frameContentLoaded,o=[a.createElement("iframe",{key:"taskPaneFrame",name:"taskPaneFrame",ref:e.onFrameMounted,onLoad:e.onFrameLoaded,style:g})];return 0==i&&o.push(a.createElement("div",{key:"taskPaneFrameLoadingOverlay",style:{position:"absolute",left:0,right:0,top:0,bottom:0,backgroundColor:t.TASK_PANE_OVERLAY_BGCOLOR}},a.createElement(c.NonIdealState,{icon:a.createElement(c.Spinner,{intent:c.Intent.NONE,size:c.Spinner.SIZE_LARGE}),title:(0,l.tr)("TASK_PANE_LOADING",u),description:(0,l.tr)("TASK_PANE_LOADING_DESC",u)}))),o}(),a.createElement("iframe",{name:"scriptFrame",style:{width:0,height:0,visibility:"hidden"}})))},n}(a.Component);t.TaskPane=m},70102:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Toolbar=t.FlyoutMenuChildItem=t.getIconStyle=t.getEnabled=t.TOOLBAR_BACKGROUND_COLOR=t.DEFAULT_TOOLBAR_SIZE=void 0;var r=(0,n(70655).__importStar)(n(67294)),a=n(12694),i=n(82422),o=n(7275),s=n(9663),l=n(27058),u=n(95601);t.DEFAULT_TOOLBAR_SIZE=29,t.TOOLBAR_BACKGROUND_COLOR="#f0f0f0";var c=16/t.DEFAULT_TOOLBAR_SIZE;function p(e){var t=e.selected;return null!=t&&("function"==typeof t?t():t)}function d(e){var t=e.enabled;return null==t||("function"==typeof t?t():t)}function m(e,t,n){var a=E(0,n);if(e.iconClass||e.icon)return r.createElement(s.ImageIcon,{style:a,url:e.icon,spriteClass:e.iconClass});if(e.bpIconName){var i=a.opacity;return r.createElement(l.Icon,{style:{opacity:i},icon:e.bpIconName,iconSize:n*c})}return r.createElement(r.Fragment,null)}function f(e,t){return r.createElement(l.Icon,{icon:e?"chevron-up":"chevron-down",iconSize:t*c})}function _(e){var t=e.tooltip;return null!=t?"function"==typeof t?t():t:o.STR_EMPTY}function E(e,t){return{verticalAlign:"middle",lineHeight:t}}function v(e,t,n,r,a){var i=(n-16)/2,o={display:!0===a?"block":"inline-block",paddingLeft:i,paddingRight:i,paddingTop:6,paddingBottom:6};return(!0===r&&!0===e||t)&&(o.borderWidth=1,o.paddingLeft=i-1,o.paddingRight=i-1,o.paddingTop=5,o.paddingBottom=5),o}t.getEnabled=d,t.getIconStyle=E,t.FlyoutMenuChildItem=function(e){var n=e.item,a=r.useState(!1),i=a[0],o=a[1],s=t.DEFAULT_TOOLBAR_SIZE,l=p(n),u=d(n),c=_(n),f=function(e,t,n,r){var a=(n-16)/2,i={paddingLeft:a,paddingRight:a,paddingTop:6,paddingBottom:6};return e&&(!0===r||t)&&(i.cursor="pointer",i.border="1px solid rgb(153, 181, 202)",i.paddingLeft=a-1,i.paddingRight=a-1,i.paddingTop=5,i.paddingBottom=5),i}(u,l,s,i),E=m(n,0,s);return r.createElement("li",{className:"noselect flyout-menu-child-item",title:c,onMouseEnter:function(){o(!0)},onMouseLeave:function(){o(!1)},onClick:function(){var t,r;d(n)&&(null===(t=n.invoke)||void 0===t||t.call(n),null===(r=e.onInvoked)||void 0===r||r.call(e))}},r.createElement("div",{style:f},E," ",n.label))};var g=function(e){var t=e.size,n=e.item,a=e.vertical,o=e.isFlownOut,s=r.useContext(i.ToolbarContext),l=r.useState(!1),u=l[0],c=l[1],E=p(n),g=d(n),y=v(g,E,t,u,a),h=n.label;!0===a&&(h=r.createElement("div",{className:"rotated-text"},r.createElement("span",{className:"rotated-text__inner rotated-text-ccw"},n.label)));var S=_(n),T=m(n,0,t);return r.createElement("div",{className:"noselect toolbar-flyout-btn "+(E?"selected-item":"")+" "+(u?"mouse-over":""),onMouseEnter:function(){c(!0)},onMouseLeave:function(){c(!1)},onClick:function(e){e.preventDefault();var t=n.flyoutId,r=n.componentName,i=n.componentProps;if(o)s.closeComponent(t);else{var l=e.currentTarget.getBoundingClientRect(),u={posX:l.left,posY:l.top,width:l.width,height:l.height,vertical:a};s.openComponent(t,u,r,i)}return!1},style:y,title:S},r.createElement("div",{"data-flyout-id":"flyout-"+n.flyoutId},T," ",h," ",f(o,t)))},y=function(e){var t=e.size,n=e.menu,a=e.vertical,o=e.isFlownOut,s=r.useContext(i.ToolbarContext),l=r.useState(!1),u=l[0],c=l[1],E=p(n),g=d(n),y=v(g,E,t,u,a),h=n.label;!0===a&&(h=r.createElement("div",{className:"rotated-text"},r.createElement("span",{className:"rotated-text__inner rotated-text-ccw"},n.label)));var S=n.flyoutAlign;S||(S=!0===a?"right bottom":"bottom right");var T=_(n),L=m(n,0,t);return r.createElement("div",{className:"noselect toolbar-flyout-btn "+(E?"selected-item":"")+" "+(u?"mouse-over":""),onMouseEnter:function(){c(!0)},onMouseLeave:function(){c(!1)},onClick:function(e){if(e.preventDefault(),o)s.closeFlyout(n.flyoutId);else{var t=e.currentTarget.getBoundingClientRect(),r={posX:t.left,posY:t.top,width:t.width,height:t.height,vertical:a};s.openFlyout(n.flyoutId,r)}return!1},style:y,title:T},r.createElement("div",{"data-flyout-id":"flyout-"+n.flyoutId},L," ",h," ",f(o,t)))},h=function(e){var t=function(e){var t={display:!0===e?"block":"inline-block"};return!0===e?(t.paddingTop=2,t.paddingBottom=-2,t.marginLeft=0,t.marginRight=0):(t.paddingTop=0,t.paddingBottom=0,t.marginLeft=2,t.marginRight=-2),t}(e.vertical);return!0===e.vertical?r.createElement("div",{className:"noselect toolbar-separator-vertical",style:t}):r.createElement("div",{className:"noselect toolbar-separator-horizontal",style:t},u.NBSP)},S=function(e){var t,n=e.height,a=e.item,i=e.vertical,o=e.hideVerticalLabels,s=r.useState(!1),l=s[0],u=s[1],c=p(a),f=d(a),_=v(f,c,n,l,i);t="function"==typeof a.tooltip?a.tooltip():a.tooltip,f||(_.opacity=.3);var E=m(a,0,n);return r.createElement("div",{className:"noselect toolbar-btn "+(c?"selected-item":"")+" "+(l&&f?"mouse-over":""),onMouseEnter:function(){u(!0)},onMouseLeave:function(){u(!1)},style:_,title:t,onClick:function(t){t.preventDefault();var n=e.item;return d(n)&&n.invoke&&n.invoke(),!1}},E," ",1==i&&1==o?null:a.label)};t.Toolbar=function(e){var n=e.containerStyle,o=e.containerClass,s=e.childItems,l=e.vertical,u=e.hideVerticalLabels,c=e.flyoutStates,p=e.onOpenFlyout,d=e.onCloseFlyout,m=e.onOpenComponent,f=e.onCloseComponent,_=t.DEFAULT_TOOLBAR_SIZE;if(n){var E=n.height;"number"==typeof E&&(_=E)}var v={openFlyout:function(e,t){return null==p?void 0:p(e,t)},closeFlyout:function(e){return null==d?void 0:d(e)},openComponent:function(e,t,n,r){return null==m?void 0:m(e,t,n,r)},closeComponent:function(e){return null==f?void 0:f(e)}};return r.createElement(i.ToolbarContext.Provider,{value:v},r.createElement("div",{style:n,className:"has-flyout noselect "+o},s.map((function(e,t){if((0,a.isComponentFlyout)(e)){var n=c&&!!c[e.flyoutId];return r.createElement(g,{key:t,size:_,item:e,vertical:l,isFlownOut:n})}return(0,a.isMenuRef)(e)?(n=c&&!!c[e.flyoutId],r.createElement(y,{key:t,size:_,menu:e,vertical:l,isFlownOut:n})):!0===e.isSeparator?r.createElement(h,{key:t,size:_,vertical:l}):r.createElement(S,{key:t,height:_,item:e,vertical:l,hideVerticalLabels:u})}))))}},76038:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.FeatureQueryTooltip=void 0;var r=n(70655),a=(0,r.__importDefault)(n(38835)),i=(0,r.__importDefault)(n(91296)),o=(0,r.__importDefault)(n(43223)),s=(0,r.__importDefault)(n(75861)),l=n(2033),u=n(31293),c=(0,r.__importStar)(n(28641)),p=n(5791),d=n(48720),m=n(36645),f=function(){function e(e,t){var n=this;this.setLinkClickHandler=function(){n.linkElement&&(n.linkElement.onclick=n.handleLinkClick)},this.handleLinkClick=function(e){return e.preventDefault(),n.callback.openTooltipLink(e.target.href),!1},this.callback=t,this.wktFormat=new s.default,this.featureTooltipElement=document.createElement("div"),this.featureTooltipElement.addEventListener("mouseover",(function(){return n.isMouseOverTooltip=!0})),this.featureTooltipElement.addEventListener("mouseout",(function(){return n.isMouseOverTooltip=!1})),this.featureTooltipElement.className="feature-tooltip",this.featureTooltip=new o.default({element:this.featureTooltipElement,offset:[15,0],positioning:a.default.CENTER_LEFT}),this.map=e,this.map.addOverlay(this.featureTooltip),this.throttledMouseMove=(0,i.default)((function(e){n.raiseQueryFromPoint(e.pixel)}),1e3),this.enabled=!0,this.isMouseOverTooltip=!1}return e.prototype.dispose=function(){this.featureTooltip.dispose()},Object.defineProperty(e.prototype,"isMouseOver",{get:function(){return this.isMouseOverTooltip},enumerable:!1,configurable:!0}),e.prototype.raiseQueryFromPoint=function(e){var t=this.callback.getPointSelectionBox(e),n=(0,l.fromExtent)(t);(0,m.debug)("["+new Date+"] FeatureTooltip - onMouseMove ("+t[0]+", "+t[1]+") ("+t[2]+", "+t[3]+")"),this.sendTooltipQuery(n)},e.prototype.onMouseMove=function(e){this.throttledMouseMove(e)},e.prototype.isEnabled=function(){return this.enabled},e.prototype.setEnabled=function(e){this.enabled=e,this.enabled||(this.featureTooltipElement.innerHTML="",this.featureTooltipElement.classList.add("tooltip-hidden"),this.linkElement&&(this.linkElement.onclick=null))},e.prototype.sendTooltipQuery=function(e){var t=this;if(this.enabled)if(this.isMouseOverTooltip)(0,m.debug)("Mouse over tooltip. Doing nothing");else{var n=this.wktFormat.writeGeometry(e),r=new u.Client(this.callback.getAgentUri(),this.callback.getAgentKind()),a=c.getCenter(e.getExtent());this.featureTooltip.setPosition(a),this.callback.incrementBusyWorker(),r.queryMapFeatures({mapname:this.callback.getMapName(),session:this.callback.getSessionId(),geometry:n,persist:0,selectionvariant:"INTERSECTS",maxfeatures:1,requestdata:12,layerattributefilter:5}).then((function(e){var n="";e.Tooltip&&(n+="<div class='feature-tooltip-body'>"+e.Tooltip.replace(/\\n/g,"<br/>")+"</div>"),e.Hyperlink&&(n+="<div><a id='feature-tooltip-link' href='"+e.Hyperlink+"'>"+(0,d.tr)("FEATURE_TOOLTIP_URL_HELP_TEXT",t.callback.getLocale())+"</a></div>"),t.featureTooltipElement.innerHTML=n,t.linkElement=document.getElementById("feature-tooltip-link"),t.setLinkClickHandler(),""==n?(t.featureTooltipElement.classList.add("tooltip-hidden"),t.linkElement&&(t.linkElement.onclick=null)):t.featureTooltipElement.classList.remove("tooltip-hidden")})).then((function(){t.callback.decrementBusyWorker()})).catch((function(e){t.callback.decrementBusyWorker(),(0,p.isSessionExpiredError)(e)&&t.callback.onSessionExpired()}))}},e}();t.FeatureQueryTooltip=f},49554:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.MouseTrackingTooltip=void 0;var r=n(70655),a=(0,r.__importDefault)(n(43223)),i=(0,r.__importDefault)(n(38835)),o="tooltip-hidden",s=function(){function e(e,t){this.map=e,this.isContextMenuOpen=t,this.map.getViewport().addEventListener("mouseout",this.onMouseOut.bind(this)),this.tooltipElement=document.createElement("div"),this.tooltipElement.className="tooltip",this.tooltip=new a.default({element:this.tooltipElement,offset:[15,0],positioning:i.default.CENTER_LEFT}),this.map.addOverlay(this.tooltip),this.text=null,this.tooltipElement.classList.add(o)}return e.prototype.dispose=function(){this.tooltip.dispose()},e.prototype.onMouseMove=function(e){this.isContextMenuOpen()||(this.tooltip.setPosition(e.coordinate),this.text?this.tooltipElement.classList.remove(o):this.tooltipElement.classList.add(o))},e.prototype.onMouseOut=function(){this.tooltipElement.classList.add(o)},e.prototype.setText=function(e){this.text=e,this.tooltipElement.innerHTML=this.text},e.prototype.clear=function(){this.text=null,this.tooltipElement.innerHTML=""},e.prototype.destroy=function(){this.tooltipElement&&this.tooltipElement.parentNode&&this.tooltipElement.parentNode.removeChild(this.tooltipElement)},e}();t.MouseTrackingTooltip=s},88153:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SelectedFeaturesTooltip=void 0;var r=n(70655),a=(0,r.__importDefault)(n(43223)),i=(0,r.__importDefault)(n(20228)),o=(0,r.__importDefault)(n(92479)),s=(0,r.__importDefault)(n(42225)),l=(0,r.__importDefault)(n(14409)),u=(0,r.__importDefault)(n(64678)),c=(0,r.__importDefault)(n(38835)),p=n(48720),d=n(29256),m=n(31293),f=n(30844),_=n(7275),E=n(27792),v=(0,r.__importDefault)(n(89438));function g(e,t,n){var r,a,i,o,s="",l=(0,E.isClusteredFeature)(e),u=null!==(r=null==n?void 0:n.title)&&void 0!==r?r:(0,p.tr)("SEL_FEATURE_PROPERTIES",t),c=null===(a=(0,E.getClusterSubFeatures)(e))||void 0===a?void 0:a.length;l&&c>1&&(u=null!==(o=null===(i=null==n?void 0:n.clusteredTitle)||void 0===i?void 0:i.call(n,c))&&void 0!==o?o:(0,p.tr)("SEL_CLUSTER_PROPERTIES",t,{size:c})),s+="<div class='selected-popup-header'><div>"+u+"</div><a id='feat-popup-closer' class='closer' href='#'>[x]</a><div class='clearit'></div></div>";var d=function(r,a){var i=function(t){var r,a,i,o,s="<table class='selected-popup-single-properties-table'>";s+="<tbody>";var l=t.getProperties(),u=0;if(null==n?void 0:n.propertyMappings)for(var c=0,p=n.propertyMappings;c<p.length;c++){var d=p[c];d.name!=e.getGeometryName()&&(s+="<tr>",s+="<td class='property-name-cell'>"+d.value+"</td>",s+="<td class='property-value-cell'>"+l[d.name]+"</td>",s+="</tr>",u++)}else for(var m in l)m!=e.getGeometryName()&&(s+="<tr>",s+="<td class='property-name-cell'>"+m+"</td>",s+="<td class='property-value-cell'>"+l[m]+"</td>",s+="</tr>",u++);if(s+="</tbody>",s+="</table>",null==n?void 0:n.linkProperty){var f=n.linkProperty,E=f.name,v=f.label,g=f.linkTarget,y=void 0;if("string"==typeof E)y=encodeURI(l[E]);else{for(var h=E.expression,S=h,T=null!==(r=E.placeholderBegin)&&void 0!==r?r:"{",L=null!==(a=E.placeholderEnd)&&void 0!==a?a:"}",I=0,A=(0,_.extractPlaceholderTokens)(h,T,L);I<A.length;I++){var C=A[I],b=encodeURIComponent(null!==(i=l[C])&&void 0!==i?i:"");S=(0,_.strReplaceAll)(S,""+T+C+L,b)}y=S}(0,_.strIsNullOrEmpty)(y)||(o="<div class='select-popup-single-link-wrapper'><a href=\""+y+"\" target='"+g+"'>"+v+"</a></div>")}return[s,u,o]}(r),o=i[0],s=i[1],l=i[2];a(s>0?"<div class='selected-popup-content-wrapper'>"+o+"</div>":"<div class='selected-popup-content-none'>"+(0,p.tr)("SEL_FEATURE_PROPERTIES_NONE",t)+"</div>"),(0,_.strIsNullOrEmpty)(l)||a(l)};if(l){var m=(0,E.getClusterSubFeatures)(e);if(1==m.length)d(m[0],(function(e){return s+=e}));else{var f=function(e){var t="<table class='selected-popup-cluster-table'>",r=(null==n?void 0:n.propertyMappings)?n.propertyMappings.filter((function(t){return t.name!=e[0].getGeometryName()})).map((function(e){return e.value})):Object.keys(e[0].getProperties()).filter((function(t){return t!=e[0].getGeometryName()})),a=(null==n?void 0:n.propertyMappings)?n.propertyMappings.map((function(e){return e.value})):Object.keys(e[0].getProperties()).filter((function(t){return t!=e[0].getGeometryName()}));t+="<thead><tr>";for(var i=0,o=r;i<o.length;i++)t+="<th>"+o[i]+"</th>";t+="</tr></thead>",t+="<tbody>";for(var s=0,l=e;s<l.length;s++){var u=l[s];t+="<tr>";for(var c=0,p=a;c<p.length;c++){var d=p[c];t+="<td>"+u.get(d)+"</td>"}t+="</tr>"}return(t+="</tbody>")+"</table>"}(m);s+="<div class='selected-popup-content-wrapper'>"+f+"</div>"}}else d(e,(function(e){return s+=e}));return s}var y=function(){function e(e,t){var n=this;this.parent=t,this.setPopupCloseHandler=function(){n.closerEl&&(n.closerEl.onclick=n.closePopup)},this.closePopup=function(e){return e.preventDefault(),n.hide(),n.closerEl&&(n.closerEl.onclick=null),!1},this.featureTooltipElement=document.createElement("div"),this.featureTooltipElement.addEventListener("mouseover",(function(){return n.isMouseOverTooltip=!0})),this.featureTooltipElement.addEventListener("mouseout",(function(){return n.isMouseOverTooltip=!1})),this.featureTooltipElement.className="selected-tooltip",this.featureTooltip=new a.default({element:this.featureTooltipElement,offset:[15,0],positioning:c.default.CENTER_LEFT}),this.map=e,this.map.addOverlay(this.featureTooltip),this.enabled=!0,this.isMouseOverTooltip=!1}return e.prototype.dispose=function(){this.featureTooltip.dispose()},Object.defineProperty(e.prototype,"isMouseOver",{get:function(){return this.isMouseOverTooltip},enumerable:!1,configurable:!0}),e.prototype.isEnabled=function(){return this.enabled},e.prototype.setEnabled=function(e){this.enabled=e,this.enabled||(this.featureTooltipElement.innerHTML="",this.featureTooltipElement.classList.add("tooltip-hidden"))},e.prototype.hide=function(){this.featureTooltipElement.innerHTML="",this.featureTooltipElement.classList.add("tooltip-hidden")},e.prototype.queryWmsFeatures=function(e,t,n,a,c,p){var _,E,g;return(0,r.__awaiter)(this,void 0,void 0,(function(){var y,h,S,T,L,I,A,C,b,N,O,M,P,R,D,w,F,U,V,x,k,B,G,Y;return(0,r.__generator)(this,(function(r){switch(r.label){case 0:for(y=0,h=new m.Client("","mapagent"),S=new u.default,T=[],(L=null==e?void 0:e.tryGetWmsSource())&&T.push(L),I=t.getLayers().filter((function(e){return e.visible&&e.selectable&&"WMS"==e.type})),A=0,C=I;A<C.length;A++)P=C[A],((b=t.getLayer(P.name))instanceof i.default||b instanceof o.default)&&((R=b.getSource())instanceof s.default||R instanceof l.default)&&T.push([b,R]);N=0,O=T,r.label=1;case 1:return N<O.length?(M=O[N],P=M[0],R=M[1],(D=R.getFeatureInfoUrl(n,a,this.map.getView().getProjection(),{INFO_FORMAT:"application/json"}))?(w=P.get(d.LayerProperty.LAYER_NAME),(F=p.getWmsRequestAugmentations())[w]&&(D=F[w](D)),[4,h.getText(D)]):[3,3]):[3,4];case 2:if(U=r.sent(),V=JSON.parse(U),(null===(_=V.features)||void 0===_?void 0:_.length)>0)return(x=R.getProjection())||(k=(0,f.parseEpsgCodeFromCRS)(null===(g=null===(E=V.crs)||void 0===E?void 0:E.properties)||void 0===g?void 0:g.name))&&(x="EPSG:"+k),B=S.readFeatures(U,{dataProjection:x,featureProjection:this.map.getView().getProjection()}),this.featureTooltip.setPosition(n),G=P.get(d.LayerProperty.SELECTED_POPUP_CONFIGURATION),Y=this.generateFeatureHtml(w,B[0],p.getLocale(),G),p.addClientSelectedFeature(B[0],P),null==e||e.clearWmsSelectionOverlay(),null==e||e.addWmsSelectionOverlay(B[0]),p.addFeatureToHighlight(B[0],c),y++,this.featureTooltipElement.innerHTML=Y,(0,v.default)(".selected-popup-cluster-table th"),this.closerEl=document.getElementById("feat-popup-closer"),this.setPopupCloseHandler(),""==Y?this.featureTooltipElement.classList.add("tooltip-hidden"):this.featureTooltipElement.classList.remove("tooltip-hidden"),[2,!0];r.label=3;case 3:return N++,[3,1];case 4:return 0==y&&(p.addFeatureToHighlight(void 0,!1),this.hide()),[2,!1]}}))}))},e.prototype.generateFeatureHtml=function(e,t,n,r){if(e){var a=this.parent.getSelectionPopupRenderer(e);return a?a(t,n,r):g(t,n,r)}return g(t,n,r)},e.prototype.showSelectedVectorFeatures=function(e,t,n,r){var a=this.map.getCoordinateFromPixel(t);if(e.getLength()>0){this.featureTooltip.setPosition(a);var i=e.item(0),o=void 0,s=n.find((function(e){var t=e[0];return e[1],t==i})),l=void 0;if(s){var u=s[1];o=u.get(d.LayerProperty.SELECTED_POPUP_CONFIGURATION),l=u.get(d.LayerProperty.LAYER_NAME)}var c=this.generateFeatureHtml(l,i,r,o);this.featureTooltipElement.innerHTML=c,(0,v.default)(".selected-popup-cluster-table th"),this.closerEl=document.getElementById("feat-popup-closer"),this.setPopupCloseHandler(),""==c?this.featureTooltipElement.classList.add("tooltip-hidden"):this.featureTooltipElement.classList.remove("tooltip-hidden")}else this.featureTooltipElement.innerHTML="",this.featureTooltipElement.classList.add("tooltip-hidden")},e}();t.SelectedFeaturesTooltip=y},72787:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.UTFGridTrackingTooltip=void 0;var r=n(70655),a=(0,r.__importDefault)(n(43223)),i=(0,r.__importDefault)(n(38835)),o=function(){function e(e,t,n){this.map=e,this.gridSource=t,this.isContextMenuOpen=n,this.map.getViewport().addEventListener("mouseout",this.onMouseOut.bind(this)),this.tooltipElement=document.createElement("div"),this.tooltipElement.className="feature-tooltip",this.tooltip=new a.default({element:this.tooltipElement,offset:[15,0],positioning:i.default.CENTER_LEFT}),this.map.addOverlay(this.tooltip),this.text=null}return e.prototype.dispose=function(){this.tooltip.dispose()},e.prototype.onMouseMove=function(e){var t=this;if(!this.isContextMenuOpen()){var n=this.map.getView().getResolution();n&&this.gridSource.forDataAtCoordinateAndResolution(e.coordinate,n,(function(n){if(n){var r="";n.MG_TOOLTIP&&(r+=n.MG_TOOLTIP.replace(/(\\n)+/g,"<br />")),n.MG_URL&&(r+="<br/><br/>",r+="<strong>CTRL + Click for more information</strong>"),t.tooltipElement.innerHTML=r}t.tooltip.setPosition(n?e.coordinate:void 0)}))}},e.prototype.onMouseOut=function(){},e.prototype.setText=function(e){this.text=e,this.tooltipElement.innerHTML=this.text},e.prototype.clear=function(){this.text=null,this.tooltipElement.innerHTML=""},e.prototype.destroy=function(){this.tooltipElement&&this.tooltipElement.parentNode&&this.tooltipElement.parentNode.removeChild(this.tooltipElement)},e}();t.UTFGridTrackingTooltip=o},25727:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.VectorLayerStyleEditor=t.VectorStyleEditor=void 0;var r=n(70655),a=(0,r.__importStar)(n(67294)),i=n(27058),o=n(48720),s=n(78113),l=n(27792),u=n(46217),c=n(97834),p=n(7275),d=n(27482),m=n(66630);function f(e){return function(e){if((0,s.isEvaluatable)(e))throw new Error("Value is expression instead of a raw value")}(e.expr),a.createElement(a.Fragment,null,"Expr: ",a.createElement("input",{type:"text",value:""+e.expr,onChange:function(t){return e.onExprChanged(e.converter(t.target.value))}}))}var _=function(e){if((0,s.isEvaluatable)(e.expr))return a.createElement(f,(0,r.__assign)({},e,{converter:function(e){return"true"==(null==e?void 0:e.toLowerCase())}}));e.expr,e.onExprChanged;var t=(0,r.__rest)(e,["expr","onExprChanged"]),n=(0,r.__assign)((0,r.__assign)({},t),{checked:e.expr,onChange:function(t){return e.onExprChanged(t.target.checked)}});return a.createElement(i.Switch,(0,r.__assign)({},n))},E=function(e,t,n,r){return void 0===r&&(r="sans-serif"),(t?"bold":p.STR_EMPTY)+" "+(n?"italic":p.STR_EMPTY)+" "+e+"px "+r},v=function(e){var t,n,l,u,p,d,m,f,_,v,g,y,h=e.style,S=e.locale,T=e.onChange,L=e.isLine,I=a.useState(!1),A=I[0],C=I[1],b=a.useState(!1),N=b[0],O=b[1],M=a.useState(null!==(l=null===(n=null===(t=h.label)||void 0===t?void 0:t.fill)||void 0===n?void 0:n.color)&&void 0!==l?l:"#000000"),P=M[0],R=M[1],D=a.useState(null!==(d=null===(p=null===(u=h.label)||void 0===u?void 0:u.fill)||void 0===p?void 0:p.alpha)&&void 0!==d?d:255),w=D[0],F=(D[1],a.useState(null!==(_=null===(f=null===(m=h.label)||void 0===m?void 0:m.stroke)||void 0===f?void 0:f.color)&&void 0!==_?_:"#ffffff")),U=F[0],V=F[1],x=a.useState(null!==(y=null===(g=null===(v=h.label)||void 0===v?void 0:v.stroke)||void 0===g?void 0:g.width)&&void 0!==y?y:1),k=x[0],B=x[1],G=a.useState(14),Y=G[0],z=G[1],W=a.useState((0,r.__assign)({font:E(Y,A,N)},h.label)),j=W[0],H=W[1],K=a.useState(null!=h.label),Z=K[0],X=K[1],q=a.useCallback((function(){if("line"==j.placement){j.placement;var e=(0,r.__rest)(j,["placement"]);H(e)}else H((0,r.__assign)((0,r.__assign)({},j),{placement:"line"}))}),[j]);return a.useEffect((function(){if(Z)T((0,r.__assign)((0,r.__assign)({},h),{label:j}));else{h.label;var e=(0,r.__rest)(h,["label"]);T(e)}}),[j,Z]),a.useEffect((function(){H((0,r.__assign)((0,r.__assign)({},j),{font:E(Y,A,N)}))}),[Y,A,N]),a.useEffect((function(){H((0,r.__assign)((0,r.__assign)({},j),{fill:(0,r.__assign)((0,r.__assign)({},j.fill),{color:P,alpha:w}),stroke:(0,r.__assign)((0,r.__assign)({},j.stroke),{color:U,width:k})}))}),[U,k,w,P]),a.createElement(a.Fragment,null,a.createElement(i.Switch,{checked:Z,onChange:function(e){return X(e.target.checked)},label:(0,o.tr)("ENABLE_LABELS",S)}),Z&&a.createElement(i.FormGroup,{label:(0,o.tr)("LABEL_TEXT",S)},a.createElement(c.StringExprEditor,{locale:S,value:j.text,onChange:function(e){return H((0,r.__assign)((0,r.__assign)({},j),{text:e}))}})),Z&&a.createElement(i.FormGroup,{label:(0,o.tr)("LABEL_SIZE",S)},a.createElement(c.NumberExprEditor,{locale:S,value:Y,onChange:function(e){return z((t=e,14,(0,s.isEvaluatable)(t)?14:null!=t?t:14));var t}})),Z&&a.createElement(i.ButtonGroup,null,a.createElement(i.Button,{intent:i.Intent.PRIMARY,active:A,onClick:function(e){return C(!A)}},(0,o.tr)("LABEL_BOLD",S)),a.createElement(i.Button,{intent:i.Intent.PRIMARY,active:N,onClick:function(e){return O(!N)}},(0,o.tr)("LABEL_ITALIC",S)),L&&a.createElement(i.Button,{intent:i.Intent.PRIMARY,active:"line"==j.placement,onClick:function(e){return q()}},(0,o.tr)("LABEL_LINE_PLACEMENT",S))),Z&&a.createElement(i.FormGroup,{label:(0,o.tr)("LABEL_COLOR",S)},a.createElement(c.ColorExprEditor,{locale:S,value:P,onChange:function(e){return R(e)}})),Z&&a.createElement(i.FormGroup,{label:(0,o.tr)("LABEL_OUTLINE_COLOR",S)},a.createElement(c.ColorExprEditor,{locale:S,value:U,onChange:function(e){return V(e)}})),Z&&a.createElement(i.FormGroup,{label:(0,o.tr)("LABEL_OUTLINE_THICKNESS",S)},a.createElement(c.NumberExprEditor,{locale:S,value:k,onChange:function(e){return B(e)}})))},g=function(e){var t=e.style,n=e.onChange,l=e.locale,u=a.useState(t.src),p=u[0],d=u[1];return a.useEffect((function(){d(t.src)}),[t.src]),a.createElement("div",null,a.createElement(i.FormGroup,{label:(0,o.tr)("VSED_PT_ICON_SRC",l)},a.createElement(c.StringExprEditor,{value:p,onChange:function(e){return d(e)},locale:l}),!(0,s.isEvaluatable)(t.src)&&a.createElement("img",{src:t.src})),a.createElement(i.FormGroup,{label:(0,o.tr)("VSED_PT_ICON_ANCHOR",l)},(0,o.tr)("VSED_PT_ICON_ANCHOR_H",l)," ",a.createElement(i.NumericInput,{value:t.anchor[0],min:0,onValueChange:function(e){return n((0,r.__assign)((0,r.__assign)({},t),{anchor:[e,t.anchor[1]]}))}}),(0,o.tr)("VSED_PT_ICON_ANCHOR_V",l)," ",a.createElement(i.NumericInput,{value:t.anchor[1],min:0,onValueChange:function(e){return n((0,r.__assign)((0,r.__assign)({},t),{anchor:[t.anchor[0],e]}))}})),a.createElement(_,{label:(0,o.tr)("VSED_PT_ICON_ROTATE_WITH_VIEW",l),expr:t.rotateWithView,onExprChanged:function(e){return n((0,r.__assign)((0,r.__assign)({},t),{rotateWithView:e}))}}),a.createElement(i.FormGroup,{label:(0,o.tr)("VSED_PT_ICON_ROTATION",l)},a.createElement(c.SliderExprEditor,{locale:l,min:0,max:360,labelStepSize:360,value:t.rotation,onChange:function(e){return n((0,r.__assign)((0,r.__assign)({},t),{rotation:e}))}})),a.createElement(i.FormGroup,{label:(0,o.tr)("VSED_PT_ICON_SCALE",l)},a.createElement(c.NumberExprEditor,{value:t.scale,onChange:function(e){return n((0,r.__assign)((0,r.__assign)({},t),{scale:e}))},locale:l})))},y=function(e){var t=e.style,n=e.onChange,s=e.locale;return a.createElement("div",null,a.createElement(i.FormGroup,{label:(0,o.tr)("VSED_PT_FILL_COLOR",s)},a.createElement(c.ColorExprEditor,{locale:s,value:t.fill.color,onChange:function(e){return n((0,r.__assign)((0,r.__assign)({},t),{fill:{color:e,alpha:t.fill.alpha}}))}})),a.createElement(i.FormGroup,{label:(0,o.tr)("VSED_PT_FILL_COLOR_ALPHA",s)},a.createElement(c.SliderExprEditor,{locale:s,min:0,max:255,labelStepSize:255,value:t.fill.alpha,onChange:function(e){return n((0,r.__assign)((0,r.__assign)({},t),{fill:{color:t.fill.color,alpha:e}}))}})),a.createElement(i.FormGroup,{label:(0,o.tr)("VSED_PT_RADIUS",s)},a.createElement(c.NumberExprEditor,{locale:s,value:t.radius,min:1,onChange:function(e){return n((0,r.__assign)((0,r.__assign)({},t),{radius:e}))}})),a.createElement(i.FormGroup,{label:(0,o.tr)("VSED_PT_OUTLINE_COLOR",s)},a.createElement(c.ColorExprEditor,{locale:s,value:t.stroke.color,onChange:function(e){return n((0,r.__assign)((0,r.__assign)({},t),{stroke:{color:e,width:t.stroke.width,alpha:t.stroke.alpha}}))}})),a.createElement(i.FormGroup,{label:(0,o.tr)("VSED_PT_OUTLINE_COLOR_ALPHA",s)},a.createElement(c.SliderExprEditor,{locale:s,min:0,max:255,labelStepSize:255,value:t.stroke.alpha,onChange:function(e){return n((0,r.__assign)((0,r.__assign)({},t),{stroke:{color:t.stroke.color,width:t.stroke.width,alpha:e}}))}})),a.createElement(i.FormGroup,{label:(0,o.tr)("VSED_PT_OUTLINE_WIDTH",s)},a.createElement(c.NumberExprEditor,{locale:s,value:t.stroke.width,min:1,onChange:function(e){return n((0,r.__assign)((0,r.__assign)({},t),{stroke:{color:t.stroke.color,width:e,alpha:t.stroke.alpha}}))}})))},h=function(e){var t=e.style,n=e.onChange,l=e.locale,u=a.useState(void 0),c=u[0],p=u[1],d=a.useState(void 0),m=d[0],f=d[1],_=a.useState(t),E=_[0],h=_[1];return a.useEffect((function(){!function(e){switch(h(e),e.type){case"Circle":f(e);break;case"Icon":p(e)}}(t)}),[t]),a.createElement("div",null,a.createElement(i.RadioGroup,{inline:!0,label:(0,o.tr)("VSED_PT_TYPE",l),onChange:function(e){return function(e){switch(e){case"Circle":if(m)h(m),n(m);else{var t=(0,r.__assign)({},s.DEFAULT_POINT_CIRCLE_STYLE);f(t),h(t),n(t)}break;case"Icon":c?(h(c),n(c)):(t=(0,r.__assign)({},s.DEFAULT_POINT_ICON_STYLE),p(t),h(t),n(t))}}(e.target.value)},selectedValue:E.type},a.createElement(i.Radio,{label:(0,o.tr)("VSED_PT_TYPE_CIRCLE",l),value:"Circle"}),a.createElement(i.Radio,{label:(0,o.tr)("VSED_PT_TYPE_ICON",l),value:"Icon"})),"Icon"==E.type&&a.createElement(g,{style:E,onChange:n,locale:l}),"Circle"==E.type&&a.createElement(y,{style:E,onChange:n,locale:l}),a.createElement(v,{style:E,locale:l,onChange:n}))},S=function(e){var t=e.style,n=e.onChange,s=e.locale;return a.createElement("div",null,a.createElement(i.FormGroup,{label:(0,o.tr)("VSED_LN_OUTLINE_COLOR",s)},a.createElement(c.ColorExprEditor,{locale:s,value:t.color,onChange:function(e){return n((0,r.__assign)((0,r.__assign)({},t),{color:e,width:t.width,alpha:t.alpha}))}})),a.createElement(i.FormGroup,{label:(0,o.tr)("VSED_LN_OUTLINE_COLOR_ALPHA",s)},a.createElement(c.SliderExprEditor,{locale:s,min:0,max:255,labelStepSize:255,value:t.alpha,onChange:function(e){return n((0,r.__assign)((0,r.__assign)({},t),{color:t.color,width:t.width,alpha:e}))}})),a.createElement(i.FormGroup,{label:(0,o.tr)("VSED_LN_OUTLINE_THICKNESS",s)},a.createElement(c.NumberExprEditor,{locale:s,min:1,value:t.width,onChange:function(e){return n((0,r.__assign)((0,r.__assign)({},t),{color:t.color,width:e,alpha:t.alpha}))}})),a.createElement(v,{style:t,locale:s,onChange:n,isLine:!0}))},T=function(e){var t=e.style,n=e.onChange,s=e.locale;return a.createElement("div",null,a.createElement(i.FormGroup,{label:(0,o.tr)("VSED_PL_FILL_COLOR",s)},a.createElement(c.ColorExprEditor,{locale:s,value:t.fill.color,onChange:function(e){return n((0,r.__assign)((0,r.__assign)({},t),{fill:{color:e,alpha:t.fill.alpha}}))}})),a.createElement(i.FormGroup,{label:(0,o.tr)("VSED_PL_FILL_COLOR_ALPHA",s)},a.createElement(c.SliderExprEditor,{locale:s,min:0,max:255,labelStepSize:255,value:t.fill.alpha,onChange:function(e){return n((0,r.__assign)((0,r.__assign)({},t),{fill:{color:t.fill.color,alpha:e}}))}})),a.createElement(i.FormGroup,{label:(0,o.tr)("VSED_PL_OUTLINE_COLOR",s)},a.createElement(c.ColorExprEditor,{locale:s,value:t.stroke.color,onChange:function(e){return n((0,r.__assign)((0,r.__assign)({},t),{stroke:{color:e,width:t.stroke.width,alpha:t.stroke.alpha}}))}})),a.createElement(i.FormGroup,{label:(0,o.tr)("VSED_PL_OUTLINE_COLOR_ALPHA",s)},a.createElement(c.SliderExprEditor,{locale:s,min:0,max:255,labelStepSize:255,value:t.stroke.alpha,onChange:function(e){return n((0,r.__assign)((0,r.__assign)({},t),{stroke:{color:t.stroke.color,width:t.stroke.width,alpha:e}}))}})),a.createElement(i.FormGroup,{label:(0,o.tr)("VSED_PL_OUTLINE_THICKNESS",s)},a.createElement(c.NumberExprEditor,{locale:s,value:t.stroke.width,min:1,onChange:function(e){return n((0,r.__assign)((0,r.__assign)({},t),{stroke:{color:t.stroke.color,width:e,alpha:t.stroke.alpha}}))}})),a.createElement(v,{style:t,locale:s,onChange:n}))};t.VectorStyleEditor=function(e){var t,n,r,l=e.locale,u=e.style,c=e.onChange,p=e.enableLine,d=e.enablePoint,m=e.enablePolygon,f=a.useState(void 0),_=f[0],E=f[1],v=a.useState(null!==(t=null==u?void 0:u.point)&&void 0!==t?t:s.DEFAULT_POINT_CIRCLE_STYLE),g=v[0],y=v[1],L=a.useState(null!==(n=null==u?void 0:u.line)&&void 0!==n?n:s.DEFAULT_LINE_STYLE),I=L[0],A=L[1],C=a.useState(null!==(r=null==u?void 0:u.polygon)&&void 0!==r?r:s.DEFAULT_POLY_STYLE),b=C[0],N=C[1];a.useEffect((function(){var e,t,n;y(null!==(e=null==u?void 0:u.point)&&void 0!==e?e:s.DEFAULT_POINT_CIRCLE_STYLE),A(null!==(t=null==u?void 0:u.line)&&void 0!==t?t:s.DEFAULT_LINE_STYLE),N(null!==(n=null==u?void 0:u.polygon)&&void 0!==n?n:s.DEFAULT_POLY_STYLE)}),[u]);var O=function(e,t,n){var r={label:null==u?void 0:u.label};d&&(r.point=e),p&&(r.line=t),m&&(r.polygon=n),null==c||c(r),r.point&&y(r.point),r.line&&A(r.line),r.polygon&&N(r.polygon)};return p||d||m?a.createElement(i.Tabs,{onChange:function(e){return E(e)},selectedTabId:_},d&&a.createElement(i.Tab,{id:"pointStyle",title:(0,o.tr)("VSED_TAB_POINT",l),panel:a.createElement(h,{style:g,locale:l,onChange:function(e){O(e,I,b)}})}),p&&a.createElement(i.Tab,{id:"lineStyle",title:(0,o.tr)("VSED_TAB_LINE",l),panel:a.createElement(S,{style:I,locale:l,onChange:function(e){O(g,e,b)}})}),m&&a.createElement(i.Tab,{id:"polyStyle",title:(0,o.tr)("VSED_TAB_POLY",l),panel:a.createElement(T,{style:b,locale:l,onChange:function(e){O(g,I,e)}})})):a.createElement(i.NonIdealState,{icon:"warning-sign",title:(0,o.tr)("VSED_NO_STYLES_TITLE",l),description:(0,o.tr)("VSED_NO_STYLES_DESC",l)})};var L=new u.Parser,I=function(e){var n=e.filter,r=e.isDefault,o=e.isStyleEditorOpen,u=e.featureStyle,c=e.onChange,p=a.useState(null!=n?n:""),f=p[0],_=p[1],E=a.useState(!0),v=E[0],g=E[1],y=a.useState(void 0),h=y[0],S=y[1],T=a.useState(void 0),I=T[0],A=T[1],C=a.useState(void 0),b=C[0],N=C[1];a.useEffect((function(){_(f)}),[n]),a.useEffect((function(){try{for(var e=L.parse(f),t=!1,n=!1,r=0,a=e.tokens;r<a.length;r++)switch(a[r].type){case"IVAR":t=!0;break;case"IOP2":n=!0}g(t&&n&&3==e.tokens.length)}catch(e){g(!1)}}),[f]),a.useEffect((function(){var e,t,n=u;"Circle"==(null===(e=null==u?void 0:u.point)||void 0===e?void 0:e.type)&&(0,s.isEvaluatable)(u.point.radius)&&"Circle"==(null===(t=(n=JSON.parse(JSON.stringify(u))).point)||void 0===t?void 0:t.type)&&(n.point.radius=5);var r,a,i,o=(0,m.vectorStyleToStyleMap)(n);"function"==typeof o?(r=function(e){return o(e,void 0).Point},a=function(e){return o(e,void 0).LineString},i=function(e){return o(e,void 0).Polygon}):(r=o.Point,a=o.LineString,i=o.Polygon);var l=(0,d.getLegendImage)({typeGeom:"Point",style:r}),c=(0,d.getLegendImage)({typeGeom:"LineString",style:a}),p=(0,d.getLegendImage)({typeGeom:"Polygon",style:i});S(l.toDataURL()),A(c.toDataURL()),N(p.toDataURL())}),[u]),v||i.Intent.DANGER;var O=5;e.enableLine||O--,e.enablePoint||O--,e.enablePolygon||O--;var M=a.createElement("span",null,u.label);return a.createElement(a.Fragment,null,a.createElement("tr",null,e.enablePoint&&a.createElement("td",null,h&&a.createElement("img",{src:h})),e.enableLine&&a.createElement("td",null,I&&a.createElement("img",{src:I})),e.enablePolygon&&a.createElement("td",null,b&&a.createElement("img",{src:b})),a.createElement("td",null,r?a.createElement("strong",null,"Default Style"):M),a.createElement("td",null,a.createElement(i.Button,{intent:o?i.Intent.DANGER:i.Intent.PRIMARY,onClick:function(){e.onToggleStyleEditor(!o)},icon:o?"cross":"edit"}))),o&&a.createElement("tr",null,a.createElement("td",{colSpan:O},a.createElement(t.VectorStyleEditor,{style:u,onChange:function(e){null==c||c(r?l.DEFAULT_STYLE_KEY:f,e)},enableLine:e.enableLine,enablePoint:e.enablePoint,enablePolygon:e.enablePolygon,locale:e.locale}))))};t.VectorLayerStyleEditor=function(e){var t=Object.keys(e.style).filter((function(e){return e!=l.DEFAULT_STYLE_KEY})),n=a.useState({}),i=n[0],o=n[1],s=function(t,n){var a,i=(0,r.__assign)({},e.style);i[t]=n,null===(a=e.onChange)||void 0===a||a.call(e,i)},u=function(e,t){var n=(0,r.__assign)({},i);t?n[e]=!0:delete n[e],o(n)};return a.createElement("table",{style:{width:"100%"}},a.createElement("colgroup",null,e.enablePoint&&a.createElement("col",{span:1,style:{width:24}}),e.enableLine&&a.createElement("col",{span:1,style:{width:24}}),e.enablePolygon&&a.createElement("col",{span:1,style:{width:24}}),a.createElement("col",{span:1}),a.createElement("col",{span:1,style:{width:32}})),a.createElement("tbody",null,t.map((function(n,r){return a.createElement(I,{key:"filter-"+r,filter:n,isDefault:!1,onChange:function(e,t){return s(e,t)},featureStyle:e.style[t[r]],isStyleEditorOpen:!0===i[n],onToggleStyleEditor:function(e){return u(n,e)},locale:e.locale,enableLine:e.enableLine,enablePoint:e.enablePoint,enablePolygon:e.enablePolygon})})),a.createElement(I,{isDefault:!0,onChange:function(e,t){return s(l.DEFAULT_STYLE_KEY,t)},featureStyle:e.style.default,isStyleEditorOpen:!0===i[l.DEFAULT_STYLE_KEY],onToggleStyleEditor:function(e){return u(l.DEFAULT_STYLE_KEY,e)},locale:e.locale,enableLine:e.enableLine,enablePoint:e.enablePoint,enablePolygon:e.enablePolygon})))}},31546:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ViewSize=void 0;var r=(0,n(70655).__importStar)(n(67294)),a=n(57600),i=n(48720),o=function(e){var t=e.gw,n=e.gh,a=e.unit,o=(0,i.fmt)("{gw} x {gh} ({unit})",{gw:t,gh:n,unit:a});return r.createElement("span",{dangerouslySetInnerHTML:{__html:o}})};t.ViewSize=function(e){var t=e.width,n=e.height,i=e.view,s=e.metersPerUnit,l=e.units,u=e.precision,c=e.locale,p=(0,a.getUnitOfMeasure)(l),d=(0,a.getMapSize)([t,n],s,l,i.resolution,u),m=d[0],f=d[1];return r.createElement("div",{className:"status-bar-component component-view-size"},r.createElement(o,{gw:m,gh:f,unit:p.abbreviation(c)}))}},95601:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.BLANK_GIF_DATA_URI=t.LAYER_ID_MG_SEL_OVERLAY=t.LAYER_ID_MG_BASE=t.LAYER_ID_BASE=t.FUSION_REDLINE_NAME=t.FUSION_MAP_NAME=t.FUSION_TASKPANE_NAME=t.WEBLAYOUT_CONTEXTMENU=t.WEBLAYOUT_TASKMENU=t.WEBLAYOUT_TOOLBAR=t.MDF_INFINITY=t.EMPTY_OBJECT=t.DEG=t.NBSP=void 0,t.NBSP=String.fromCharCode(160),t.DEG=String.fromCharCode(176),t.EMPTY_OBJECT={},t.MDF_INFINITY=1e12,t.WEBLAYOUT_TOOLBAR="Toolbar",t.WEBLAYOUT_TASKMENU="TaskMenu",t.WEBLAYOUT_CONTEXTMENU="MapContextMenu",t.FUSION_TASKPANE_NAME="TaskPane",t.FUSION_MAP_NAME="Map",t.FUSION_REDLINE_NAME="Redline",t.LAYER_ID_BASE="LAYER_ID_BASE",t.LAYER_ID_MG_BASE="LAYER_ID_MG_BASE",t.LAYER_ID_MG_SEL_OVERLAY="LAYER_ID_MG_SEL_OVERLAY",t.BLANK_GIF_DATA_URI="data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw=="},10737:function(e,t){"use strict";var n;Object.defineProperty(t,"__esModule",{value:!0}),t.ActionType=void 0,(n=t.ActionType||(t.ActionType={})).SET_LOCALE="MapGuide/SET_LOCALE",n.INIT_APP="MapGuide/INIT_APP",n.INIT_ERROR="MapGuide/INIT_ERROR",n.INIT_ACKNOWLEDGE_WARNINGS="MapGuide/INIT_ACKNOWLEDGE_WARNINGS",n.LEGEND_SET_GROUP_VISIBILITY="Legend/SET_GROUP_VISIBILITY",n.LEGEND_SET_LAYER_VISIBILITY="Legend/SET_LAYER_VISIBILITY",n.LEGEND_SET_LAYER_SELECTABLE="Legend/SET_LAYER_SELECTABLE",n.LEGEND_SET_GROUP_EXPANDABLE="Legend/SET_GROUP_EXPANDABLE",n.MAP_SET_ACTIVE_MAP="Map/SET_ACTIVE_MAP",n.MAP_REFRESH="Map/REFRESH",n.MAP_SET_VIEW="Map/SET_VIEW",n.MAP_SET_SCALE="Map/SET_SCALE",n.MAP_SET_ACTIVE_TOOL="Map/SET_ACTIVE_TOOL",n.MAP_SET_MAPTIP="Map/SET_MAPTIP",n.MAP_ENABLE_SELECT_DRAGPAN="Map/ENABLE_SELECT_DRAGPAN",n.MAP_SET_MANUAL_MAPTIP="Map/MAP_SET_MANUAL_MAPTIP",n.MAP_SET_SELECTION="Map/SET_SELECTION",n.MAP_ADD_CLIENT_SELECTED_FEATURE="Map/ADD_CLIENT_SELECTED_FEATURE",n.MAP_CLEAR_CLIENT_SELECTION="Map/CLEAR_CLIENT_SELECTION",n.MAP_SET_BUSY_COUNT="Map/SET_BUSY_COUNT",n.MAP_SET_BASE_LAYER="Map/SET_BASE_LAYER",n.MAP_ZOOM_IN="Map/ZOOM_IN",n.MAP_ZOOM_OUT="Map/ZOOM_OUT",n.MAP_PREVIOUS_VIEW="Map/PREVIOUS_VIEW",n.MAP_NEXT_VIEW="Map/NEXT_VIEW",n.MAP_SET_LAYER_TRANSPARENCY="Map/SET_LAYER_TRANSPARENCY",n.MAP_SET_VIEW_SIZE_UNITS="Map/SET_VIEW_SIZE_UNITS",n.MAP_SET_VIEW_ROTATION="Map/SET_VIEW_ROTATION",n.MAP_SET_VIEW_ROTATION_ENABLED="Map/SET_VIEW_ROTATION_ENABLED",n.MAP_RESIZED="Map/RESIZED",n.MAP_SHOW_SELECTED_FEATURE="Map/SHOW_SELECTED_FEATURE",n.TASK_INVOKE_URL="TaskPane/INVOKE_URL",n.TASK_PANE_HOME="TaskPane/HOME",n.TASK_PANE_FORWARD="TaskPane/FORWARD",n.TASK_PANE_BACK="TaskPane/BACK",n.TASK_PANE_PUSH_URL="TaskPane/PUSH_URL",n.FUSION_SET_ELEMENT_STATE="Fusion/SET_ELEMENT_STATE",n.FUSION_SET_TASK_PANE_VISIBILITY="Fusion/SET_TASK_PANE_VISIBILITY",n.FUSION_SET_LEGEND_VISIBILITY="Fusion/SET_LEGEND_VISIBILITY",n.FUSION_SET_SELECTION_PANEL_VISIBILITY="Fusion/SET_SELECTION_PANEL_VISIBILITY",n.FLYOUT_OPEN="Flyout/OPEN",n.FLYOUT_CLOSE="Flyout/CLOSE",n.CONTEXT_MENU_OPEN="ContextMenu/OPEN",n.CONTEXT_MENU_CLOSE="ContextMenu/CLOSE",n.COMPONENT_OPEN="Flyout/COMPONENT_OPEN",n.COMPONENT_CLOSE="Flyout/COMPONENT_CLOSE",n.UPDATE_MOUSE_COORDINATES="Status/UPDATE_MOUSE_COORDINATES",n.MODAL_SHOW_COMPONENT="Modal/SHOW_COMPONENT",n.MODAL_SHOW_URL="Modal/SHOW_URL",n.MODAL_CLOSE="Modal/CLOSE",n.LAYER_ADDED="Map/LAYER_ADDED",n.EXTERNAL_LAYERS_READY="Map/EXTERNAL_LAYERS_READY",n.REMOVE_LAYER="Map/REMOVE_LAYER",n.SET_LAYER_INDEX="Map/SET_LAYER_INDEX",n.SET_LAYER_OPACITY="Map/SET_LAYER_OPACITY",n.SET_LAYER_VISIBILITY="Map/SET_LAYER_VISIBILITY",n.SET_LAYER_VECTOR_STYLE="Map/SET_LAYER_VECTOR_STYLE",n.ADD_LAYER_BUSY_WORKER="Map/ADD_LAYER_BUSY_WORKER",n.REMOVE_LAYER_BUSY_WORKER="Map/REMOVE_LAYER_BUSY_WORKER",n.SET_HEATMAP_LAYER_BLUR="Map/SET_HEATMAP_LAYER_BLUR",n.SET_HEATMAP_LAYER_RADIUS="Map/SET_HEATMAP_LAYER_RADIUS"},44839:function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.ICON_INVOKE_URL=t.ICON_INVOKE_SCRIPT=t.ICON_INITIAL_CENTER=t.ICON_INFO=t.ICON_NAVIGATOR=t.ICON_ZOOMSELECT=t.ICON_SELECT=t.ICON_REFRESHMAP=t.ICON_MENUARROWUP=t.ICON_MENUARROWUP_DISABLED=t.ICON_MENUARROW=t.ICON_MENUARROW_DISABLED=t.ICON_HOME=t.ICON_HELP=t.ICON_GEOLOCATION=t.ICON_FORWARD=t.ICON_FOLDER_HORIZONTAL=t.ICON_FOLDER_HORIZONTAL_OPEN=t.ICON_FILE_SAVE=t.ICON_FILE_PRINT=t.ICON_FEATURE_INFO=t.ICON_ERROR=t.ICON_EDIT_XML=t.ICON_EDIT_PASTE=t.ICON_EDIT_DUPLICATE=t.ICON_EDIT_CUT=t.ICON_EDIT_COPY=t.ICON_COORDINATE_TRACKER=t.ICON_CONTROL=t.ICON_CONTROL_STOP=t.ICON_CONTROL_STOP_180=t.ICON_CONTROL_180=t.ICON_BUFFER=t.ICON_BACK=t.ICON_APPLICATION_BROWSER=t.ICON_ABOUT=t.IMG_PBMG=t.IMG_SLIDER=t.GIF_SPINNER=t.IMG_SLIDER_SCALE=t.CURSOR_ZOOM_IN=t.CURSOR_GRAB=t.CURSOR_GRABBING=t.CURSOR_DIGITIZE_CIRCLE=t.CURSOR_DIGITIZE_POLYGON=t.CURSOR_DIGITIZE_RECT=t.CURSOR_DIGITIZE_LINESTRING=t.CURSOR_DIGITIZE_LINE=t.CURSOR_DIGITIZE_POINT=t.STD_CSS_SPRITE_RELPATH=void 0,t.SPRITE_ICON_ZOOMSELECT=t.SPRITE_CONTROL=t.SPRITE_CONTROL_180=t.SPRITE_COORDINATE_TRACKER=t.SPRITE_LAYER_ADD=t.SPRITE_GLOBE_ADD=t.ICON_GLOBE_SHARE=t.ICON_GLOBE_ADD=t.ICON_LAYER_ADD=t.ICON_ZOOM_OUT_FIXED=t.ICON_ZOOM_IN=t.ICON_ZOOM_IN_FIXED=t.ICON_ZOOM_FULL=t.ICON_ZOOM_DYNAMIC=t.ICON_WARNING=t.ICON_VIEW_REFRESH=t.ICON_VIEW_FORWARD=t.ICON_VIEW_BACK=t.ICON_UI_MENU=t.ICON_TOGGLE=t.ICON_TOGGLE_EXPAND=t.ICON_THEME=t.ICON_SELECT_ZOOM=t.ICON_SELECT_RADIUS=t.ICON_SELECT_POLYGON=t.ICON_SELECT_FEATURES=t.ICON_SELECT_CLEAR=t.ICON_SELECT_CENTRE=t.ICON_SEARCH=t.ICON_REDLINE=t.ICON_QUERY=t.ICON_PROPERTY=t.ICON_PRINT=t.ICON_PREVIEW=t.ICON_PAN=t.ICON_PAN_WEST=t.ICON_PAN_SOUTH=t.ICON_PAN_NORTH=t.ICON_PAN_EAST=t.ICON_OVERVIEW_MAP=t.ICON_OUT_OF_RANGE=t.ICON_OPTIONS=t.ICON_MEASURE=t.ICON_MAPTIP=t.ICON_LEGEND_THEME=t.ICON_LEGEND_RASTER=t.ICON_LEGEND_MAP=t.ICON_LEGEND_LAYER=t.ICON_LEGEND_DWF=t.ICON_UNSELECT=void 0,t.MAP_MARKER_ICON=t.SPRITE_GLOBE_SHARE=t.SPRITE_SELECT_CENTRE=t.SPRITE_INVOKE_URL=t.SPRITE_INVOKE_SCRIPT=t.SPRITE_THEME=t.SPRITE_QUERY=t.SPRITE_FEATURE_INFO=t.SPRITE_REDLINE=t.SPRITE_SELECT_FEATURES=t.SPRITE_BUFFER=t.SPRITE_GEOLOCATION=t.SPRITE_VIEW_FORWARD=t.SPRITE_VIEW_BACK=t.SPRITE_ICON_REFRESHMAP=t.SPRITE_SELECT_CLEAR=t.SPRITE_INITIAL_CENTER=t.SPRITE_SELECT_POLYGON=t.SPRITE_SELECT_RADIUS=t.SPRITE_OPTIONS=t.SPRITE_PRINT=t.SPRITE_MEASURE=t.SPRITE_HELP=t.SPRITE_ABOUT=t.SPRITE_PAN_SOUTH=t.SPRITE_PAN_NORTH=t.SPRITE_PAN_EAST=t.SPRITE_PAN_WEST=t.SPRITE_MAPTIP=t.SPRITE_ZOOM_FULL=t.SPRITE_ZOOM_OUT_FIXED=t.SPRITE_ZOOM_IN_FIXED=t.SPRITE_ZOOM_IN=t.SPRITE_PAN=t.SPRITE_SELECT=t.SPRITE_ICON_MENUARROW=t.SPRITE_ICON_MENUARROWUP=t.SPRITE_FORWARD=t.SPRITE_BACK=t.SPRITE_ICON_HOME=t.SPRITE_ICON_ERROR=t.SPRITE_FOLDER_HORIZONTAL=t.SPRITE_LEGEND_TOGGLE_EXPAND=t.SPRITE_LEGEND_TOGGLE=t.SPRITE_LEGEND_RASTER=t.SPRITE_LEGEND_THEME=t.SPRITE_LC_UNSELECT=t.SPRITE_ICON_SELECT=t.SPRITE_LEGEND_LAYER=void 0,t.STD_CSS_SPRITE_RELPATH="images/icons.png";var a=n(9436);Object.defineProperty(t,"CURSOR_DIGITIZE_POINT",{enumerable:!0,get:function(){return r(a).default}});var i=n(20893);Object.defineProperty(t,"CURSOR_DIGITIZE_LINE",{enumerable:!0,get:function(){return r(i).default}});var o=n(18493);Object.defineProperty(t,"CURSOR_DIGITIZE_LINESTRING",{enumerable:!0,get:function(){return r(o).default}});var s=n(59857);Object.defineProperty(t,"CURSOR_DIGITIZE_RECT",{enumerable:!0,get:function(){return r(s).default}});var l=n(34613);Object.defineProperty(t,"CURSOR_DIGITIZE_POLYGON",{enumerable:!0,get:function(){return r(l).default}});var u=n(91708);Object.defineProperty(t,"CURSOR_DIGITIZE_CIRCLE",{enumerable:!0,get:function(){return r(u).default}});var c=n(11325);Object.defineProperty(t,"CURSOR_GRABBING",{enumerable:!0,get:function(){return r(c).default}});var p=n(82488);Object.defineProperty(t,"CURSOR_GRAB",{enumerable:!0,get:function(){return r(p).default}});var d=n(16241);Object.defineProperty(t,"CURSOR_ZOOM_IN",{enumerable:!0,get:function(){return r(d).default}});var m=n(80348);Object.defineProperty(t,"IMG_SLIDER_SCALE",{enumerable:!0,get:function(){return r(m).default}});var f=n(81606);Object.defineProperty(t,"GIF_SPINNER",{enumerable:!0,get:function(){return r(f).default}});var _=n(53318);Object.defineProperty(t,"IMG_SLIDER",{enumerable:!0,get:function(){return r(_).default}});var E=n(80490);Object.defineProperty(t,"IMG_PBMG",{enumerable:!0,get:function(){return r(E).default}});var v=n(76171);Object.defineProperty(t,"ICON_ABOUT",{enumerable:!0,get:function(){return r(v).default}});var g=n(7847);Object.defineProperty(t,"ICON_APPLICATION_BROWSER",{enumerable:!0,get:function(){return r(g).default}});var y=n(39029);Object.defineProperty(t,"ICON_BACK",{enumerable:!0,get:function(){return r(y).default}});var h=n(72040);Object.defineProperty(t,"ICON_BUFFER",{enumerable:!0,get:function(){return r(h).default}});var S=n(18655);Object.defineProperty(t,"ICON_CONTROL_180",{enumerable:!0,get:function(){return r(S).default}});var T=n(68912);Object.defineProperty(t,"ICON_CONTROL_STOP_180",{enumerable:!0,get:function(){return r(T).default}});var L=n(65904);Object.defineProperty(t,"ICON_CONTROL_STOP",{enumerable:!0,get:function(){return r(L).default}});var I=n(82055);Object.defineProperty(t,"ICON_CONTROL",{enumerable:!0,get:function(){return r(I).default}});var A=n(97609);Object.defineProperty(t,"ICON_COORDINATE_TRACKER",{enumerable:!0,get:function(){return r(A).default}});var C=n(24081);Object.defineProperty(t,"ICON_EDIT_COPY",{enumerable:!0,get:function(){return r(C).default}});var b=n(98907);Object.defineProperty(t,"ICON_EDIT_CUT",{enumerable:!0,get:function(){return r(b).default}});var N=n(51729);Object.defineProperty(t,"ICON_EDIT_DUPLICATE",{enumerable:!0,get:function(){return r(N).default}});var O=n(9765);Object.defineProperty(t,"ICON_EDIT_PASTE",{enumerable:!0,get:function(){return r(O).default}});var M=n(58465);Object.defineProperty(t,"ICON_EDIT_XML",{enumerable:!0,get:function(){return r(M).default}}),t.ICON_ERROR="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAACXBIWXMAAAsTAAALEwEAmpwYAAAKT2lDQ1BQaG90b3Nob3AgSUNDIHByb2ZpbGUAAHjanVNnVFPpFj333vRCS4iAlEtvUhUIIFJCi4AUkSYqIQkQSoghodkVUcERRUUEG8igiAOOjoCMFVEsDIoK2AfkIaKOg6OIisr74Xuja9a89+bN/rXXPues852zzwfACAyWSDNRNYAMqUIeEeCDx8TG4eQuQIEKJHAAEAizZCFz/SMBAPh+PDwrIsAHvgABeNMLCADATZvAMByH/w/qQplcAYCEAcB0kThLCIAUAEB6jkKmAEBGAYCdmCZTAKAEAGDLY2LjAFAtAGAnf+bTAICd+Jl7AQBblCEVAaCRACATZYhEAGg7AKzPVopFAFgwABRmS8Q5ANgtADBJV2ZIALC3AMDOEAuyAAgMADBRiIUpAAR7AGDIIyN4AISZABRG8lc88SuuEOcqAAB4mbI8uSQ5RYFbCC1xB1dXLh4ozkkXKxQ2YQJhmkAuwnmZGTKBNA/g88wAAKCRFRHgg/P9eM4Ors7ONo62Dl8t6r8G/yJiYuP+5c+rcEAAAOF0ftH+LC+zGoA7BoBt/qIl7gRoXgugdfeLZrIPQLUAoOnaV/Nw+H48PEWhkLnZ2eXk5NhKxEJbYcpXff5nwl/AV/1s+X48/Pf14L7iJIEyXYFHBPjgwsz0TKUcz5IJhGLc5o9H/LcL//wd0yLESWK5WCoU41EScY5EmozzMqUiiUKSKcUl0v9k4t8s+wM+3zUAsGo+AXuRLahdYwP2SycQWHTA4vcAAPK7b8HUKAgDgGiD4c93/+8//UegJQCAZkmScQAAXkQkLlTKsz/HCAAARKCBKrBBG/TBGCzABhzBBdzBC/xgNoRCJMTCQhBCCmSAHHJgKayCQiiGzbAdKmAv1EAdNMBRaIaTcA4uwlW4Dj1wD/phCJ7BKLyBCQRByAgTYSHaiAFiilgjjggXmYX4IcFIBBKLJCDJiBRRIkuRNUgxUopUIFVIHfI9cgI5h1xGupE7yAAygvyGvEcxlIGyUT3UDLVDuag3GoRGogvQZHQxmo8WoJvQcrQaPYw2oefQq2gP2o8+Q8cwwOgYBzPEbDAuxsNCsTgsCZNjy7EirAyrxhqwVqwDu4n1Y8+xdwQSgUXACTYEd0IgYR5BSFhMWE7YSKggHCQ0EdoJNwkDhFHCJyKTqEu0JroR+cQYYjIxh1hILCPWEo8TLxB7iEPENyQSiUMyJ7mQAkmxpFTSEtJG0m5SI+ksqZs0SBojk8naZGuyBzmULCAryIXkneTD5DPkG+Qh8lsKnWJAcaT4U+IoUspqShnlEOU05QZlmDJBVaOaUt2ooVQRNY9aQq2htlKvUYeoEzR1mjnNgxZJS6WtopXTGmgXaPdpr+h0uhHdlR5Ol9BX0svpR+iX6AP0dwwNhhWDx4hnKBmbGAcYZxl3GK+YTKYZ04sZx1QwNzHrmOeZD5lvVVgqtip8FZHKCpVKlSaVGyovVKmqpqreqgtV81XLVI+pXlN9rkZVM1PjqQnUlqtVqp1Q61MbU2epO6iHqmeob1Q/pH5Z/YkGWcNMw09DpFGgsV/jvMYgC2MZs3gsIWsNq4Z1gTXEJrHN2Xx2KruY/R27iz2qqaE5QzNKM1ezUvOUZj8H45hx+Jx0TgnnKKeX836K3hTvKeIpG6Y0TLkxZVxrqpaXllirSKtRq0frvTau7aedpr1Fu1n7gQ5Bx0onXCdHZ4/OBZ3nU9lT3acKpxZNPTr1ri6qa6UbobtEd79up+6Ynr5egJ5Mb6feeb3n+hx9L/1U/W36p/VHDFgGswwkBtsMzhg8xTVxbzwdL8fb8VFDXcNAQ6VhlWGX4YSRudE8o9VGjUYPjGnGXOMk423GbcajJgYmISZLTepN7ppSTbmmKaY7TDtMx83MzaLN1pk1mz0x1zLnm+eb15vft2BaeFostqi2uGVJsuRaplnutrxuhVo5WaVYVVpds0atna0l1rutu6cRp7lOk06rntZnw7Dxtsm2qbcZsOXYBtuutm22fWFnYhdnt8Wuw+6TvZN9un2N/T0HDYfZDqsdWh1+c7RyFDpWOt6azpzuP33F9JbpL2dYzxDP2DPjthPLKcRpnVOb00dnF2e5c4PziIuJS4LLLpc+Lpsbxt3IveRKdPVxXeF60vWdm7Obwu2o26/uNu5p7ofcn8w0nymeWTNz0MPIQ+BR5dE/C5+VMGvfrH5PQ0+BZ7XnIy9jL5FXrdewt6V3qvdh7xc+9j5yn+M+4zw33jLeWV/MN8C3yLfLT8Nvnl+F30N/I/9k/3r/0QCngCUBZwOJgUGBWwL7+Hp8Ib+OPzrbZfay2e1BjKC5QRVBj4KtguXBrSFoyOyQrSH355jOkc5pDoVQfujW0Adh5mGLw34MJ4WHhVeGP45wiFga0TGXNXfR3ENz30T6RJZE3ptnMU85ry1KNSo+qi5qPNo3ujS6P8YuZlnM1VidWElsSxw5LiquNm5svt/87fOH4p3iC+N7F5gvyF1weaHOwvSFpxapLhIsOpZATIhOOJTwQRAqqBaMJfITdyWOCnnCHcJnIi/RNtGI2ENcKh5O8kgqTXqS7JG8NXkkxTOlLOW5hCepkLxMDUzdmzqeFpp2IG0yPTq9MYOSkZBxQqohTZO2Z+pn5mZ2y6xlhbL+xW6Lty8elQfJa7OQrAVZLQq2QqboVFoo1yoHsmdlV2a/zYnKOZarnivN7cyzytuQN5zvn//tEsIS4ZK2pYZLVy0dWOa9rGo5sjxxedsK4xUFK4ZWBqw8uIq2Km3VT6vtV5eufr0mek1rgV7ByoLBtQFr6wtVCuWFfevc1+1dT1gvWd+1YfqGnRs+FYmKrhTbF5cVf9go3HjlG4dvyr+Z3JS0qavEuWTPZtJm6ebeLZ5bDpaql+aXDm4N2dq0Dd9WtO319kXbL5fNKNu7g7ZDuaO/PLi8ZafJzs07P1SkVPRU+lQ27tLdtWHX+G7R7ht7vPY07NXbW7z3/T7JvttVAVVN1WbVZftJ+7P3P66Jqun4lvttXa1ObXHtxwPSA/0HIw6217nU1R3SPVRSj9Yr60cOxx++/p3vdy0NNg1VjZzG4iNwRHnk6fcJ3/ceDTradox7rOEH0x92HWcdL2pCmvKaRptTmvtbYlu6T8w+0dbq3nr8R9sfD5w0PFl5SvNUyWna6YLTk2fyz4ydlZ19fi753GDborZ752PO32oPb++6EHTh0kX/i+c7vDvOXPK4dPKy2+UTV7hXmq86X23qdOo8/pPTT8e7nLuarrlca7nuer21e2b36RueN87d9L158Rb/1tWeOT3dvfN6b/fF9/XfFt1+cif9zsu72Xcn7q28T7xf9EDtQdlD3YfVP1v+3Njv3H9qwHeg89HcR/cGhYPP/pH1jw9DBY+Zj8uGDYbrnjg+OTniP3L96fynQ89kzyaeF/6i/suuFxYvfvjV69fO0ZjRoZfyl5O/bXyl/erA6xmv28bCxh6+yXgzMV70VvvtwXfcdx3vo98PT+R8IH8o/2j5sfVT0Kf7kxmTk/8EA5jz/GMzLdsAAAAgY0hSTQAAeiUAAICDAAD5/wAAgOkAAHUwAADqYAAAOpgAABdvkl/FRgAAA31JREFUeNpc01tMUwcAxvH/ubWnFEohtBSYKJciCHJTsojOZS4mi9HswcwlZmaMBUMW2QOZMwvJnvewLSNLMDHGLXtmLpvRZS44QDYWqgWDrSBjsIGWcm1LaU8v55w9uRi/5y//t5/wXkcHAKZpYhgGCAL5LnddWUnp0dpqb6PVoggT/vuBX3+7Mzo2NDTNCxOeBTLpNPnu4r3NNbWfVSYTJ3OWl2R9fR3dMLC4XJh7KoyAINzu//abTx5O+qeeBaSW5may2SylFZVvvF5Rfav6z99bJL9PzITDZLa3ycRiJJ4ssT01Kbg2N6pPd77/zroszc0Gg0EAqbGhAUeRy3usouq2+5dbBVooRMaWg6ZpZESBtGGQSmfQrVaiKyts3btneau7+03/0tLPT5eXQ6IpCDRWeb8sGL6Tv7O2hvvMGZouDyCXl5OIRknEYrBrF7aeHoS2NqKRCNNf9Vs/On/+a0lRJNFR5Kot29w4oS39Q9I0yWlsRNq9m/KLF8HlxvR4sJ49S8LhYLuoiKSmsRwMoM7PH2o6cPBlqfXAwdP7NzZOpcIh0obB07Ex8HgwPB4yL5Wh19SwrSisDg0RGxiASAR9ZwdZ10nt2/evWFtZWa+thtGyOmkgvr6Gr7OThRs3iMoKMUVh6+5dEv39qKkUsixjlSSyK2EK7bleURRFMaPrpHQdbWeH+MwsptVKQlWJx+MkNQ2cTuweD7JuYJVlVEXBKokYuiFKRZ6SyqZc+4nIX3MkFhaQvV6cfX0knU5iIyMY4TC2lhYKjhxBWVxE2tzEAhTU7MWnqjdFn//+sFhZZcbn/yadyZBz7hzJwkK2RkdJXrkCV69in5uj+vhx9vT2ogIOw8BW34A/GByW5x4FAwuqddjm8by2FgoRunYNsb0dbXCQXFFENk0yA5eJWixErl/HKYrkl5Yy6XY/mp1+MCoANLS2Nn/xbsf4xKWP1aSmYQFURcFmsWCTJOyCgJpOkyfLOO12Uhc+pOv7wZMzk/6bEsBqKLQSzc2df/tCz6nNqSk5HouhmCZWSUIVRXJME4dpUlRWRrr7Az4dH+/1jQ5/ByA8L6vt8OH2S11dn+c8fnxo449xzPAKdlGisNiNpb6BQHHJw/4ff+gL+CZ++l/jizyRJKH9laOv7q+rO+bKy6s2dF16srm1ODUTHHng890hm9Wev/83AKQ+gKOX5raoAAAAAElFTkSuQmCC";var P=n(47968);Object.defineProperty(t,"ICON_FEATURE_INFO",{enumerable:!0,get:function(){return r(P).default}});var R=n(10027);Object.defineProperty(t,"ICON_FILE_PRINT",{enumerable:!0,get:function(){return r(R).default}});var D=n(72178);Object.defineProperty(t,"ICON_FILE_SAVE",{enumerable:!0,get:function(){return r(D).default}});var w=n(84801);Object.defineProperty(t,"ICON_FOLDER_HORIZONTAL_OPEN",{enumerable:!0,get:function(){return r(w).default}});var F=n(33597);Object.defineProperty(t,"ICON_FOLDER_HORIZONTAL",{enumerable:!0,get:function(){return r(F).default}});var U=n(34139);Object.defineProperty(t,"ICON_FORWARD",{enumerable:!0,get:function(){return r(U).default}});var V=n(12011);Object.defineProperty(t,"ICON_GEOLOCATION",{enumerable:!0,get:function(){return r(V).default}});var x=n(2677);Object.defineProperty(t,"ICON_HELP",{enumerable:!0,get:function(){return r(x).default}});var k=n(19134);Object.defineProperty(t,"ICON_HOME",{enumerable:!0,get:function(){return r(k).default}});var B=n(98119);Object.defineProperty(t,"ICON_MENUARROW_DISABLED",{enumerable:!0,get:function(){return r(B).default}});var G=n(41750);Object.defineProperty(t,"ICON_MENUARROW",{enumerable:!0,get:function(){return r(G).default}});var Y=n(25665);Object.defineProperty(t,"ICON_MENUARROWUP_DISABLED",{enumerable:!0,get:function(){return r(Y).default}});var z=n(31632);Object.defineProperty(t,"ICON_MENUARROWUP",{enumerable:!0,get:function(){return r(z).default}});var W=n(18863);Object.defineProperty(t,"ICON_REFRESHMAP",{enumerable:!0,get:function(){return r(W).default}});var j=n(78333);Object.defineProperty(t,"ICON_SELECT",{enumerable:!0,get:function(){return r(j).default}});var H=n(20234);Object.defineProperty(t,"ICON_ZOOMSELECT",{enumerable:!0,get:function(){return r(H).default}});var K=n(37852);Object.defineProperty(t,"ICON_NAVIGATOR",{enumerable:!0,get:function(){return r(K).default}});var Z=n(9338);Object.defineProperty(t,"ICON_INFO",{enumerable:!0,get:function(){return r(Z).default}});var X=n(73342);Object.defineProperty(t,"ICON_INITIAL_CENTER",{enumerable:!0,get:function(){return r(X).default}});var q=n(3696);Object.defineProperty(t,"ICON_INVOKE_SCRIPT",{enumerable:!0,get:function(){return r(q).default}});var Q=n(58132);Object.defineProperty(t,"ICON_INVOKE_URL",{enumerable:!0,get:function(){return r(Q).default}});var J=n(64763);Object.defineProperty(t,"ICON_UNSELECT",{enumerable:!0,get:function(){return r(J).default}});var $=n(64898);Object.defineProperty(t,"ICON_LEGEND_DWF",{enumerable:!0,get:function(){return r($).default}});var ee=n(86321);Object.defineProperty(t,"ICON_LEGEND_LAYER",{enumerable:!0,get:function(){return r(ee).default}});var te=n(42096);Object.defineProperty(t,"ICON_LEGEND_MAP",{enumerable:!0,get:function(){return r(te).default}});var ne=n(61062);Object.defineProperty(t,"ICON_LEGEND_RASTER",{enumerable:!0,get:function(){return r(ne).default}});var re=n(39788);Object.defineProperty(t,"ICON_LEGEND_THEME",{enumerable:!0,get:function(){return r(re).default}});var ae=n(42693);Object.defineProperty(t,"ICON_MAPTIP",{enumerable:!0,get:function(){return r(ae).default}});var ie=n(75981);Object.defineProperty(t,"ICON_MEASURE",{enumerable:!0,get:function(){return r(ie).default}});var oe=n(9995);Object.defineProperty(t,"ICON_OPTIONS",{enumerable:!0,get:function(){return r(oe).default}});var se=n(45082);Object.defineProperty(t,"ICON_OUT_OF_RANGE",{enumerable:!0,get:function(){return r(se).default}});var le=n(71909);Object.defineProperty(t,"ICON_OVERVIEW_MAP",{enumerable:!0,get:function(){return r(le).default}});var ue=n(21166);Object.defineProperty(t,"ICON_PAN_EAST",{enumerable:!0,get:function(){return r(ue).default}});var ce=n(79691);Object.defineProperty(t,"ICON_PAN_NORTH",{enumerable:!0,get:function(){return r(ce).default}});var pe=n(89447);Object.defineProperty(t,"ICON_PAN_SOUTH",{enumerable:!0,get:function(){return r(pe).default}});var de=n(30137);Object.defineProperty(t,"ICON_PAN_WEST",{enumerable:!0,get:function(){return r(de).default}});var me=n(51178);Object.defineProperty(t,"ICON_PAN",{enumerable:!0,get:function(){return r(me).default}});var fe=n(90649);Object.defineProperty(t,"ICON_PREVIEW",{enumerable:!0,get:function(){return r(fe).default}});var _e=n(74099);Object.defineProperty(t,"ICON_PRINT",{enumerable:!0,get:function(){return r(_e).default}});var Ee=n(26946);Object.defineProperty(t,"ICON_PROPERTY",{enumerable:!0,get:function(){return r(Ee).default}});var ve=n(25073);Object.defineProperty(t,"ICON_QUERY",{enumerable:!0,get:function(){return r(ve).default}});var ge=n(69876);Object.defineProperty(t,"ICON_REDLINE",{enumerable:!0,get:function(){return r(ge).default}});var ye=n(90804);Object.defineProperty(t,"ICON_SEARCH",{enumerable:!0,get:function(){return r(ye).default}});var he=n(82180);Object.defineProperty(t,"ICON_SELECT_CENTRE",{enumerable:!0,get:function(){return r(he).default}});var Se=n(41239);Object.defineProperty(t,"ICON_SELECT_CLEAR",{enumerable:!0,get:function(){return r(Se).default}});var Te=n(1147);Object.defineProperty(t,"ICON_SELECT_FEATURES",{enumerable:!0,get:function(){return r(Te).default}});var Le=n(27876);Object.defineProperty(t,"ICON_SELECT_POLYGON",{enumerable:!0,get:function(){return r(Le).default}});var Ie=n(10167);Object.defineProperty(t,"ICON_SELECT_RADIUS",{enumerable:!0,get:function(){return r(Ie).default}});var Ae=n(30381);Object.defineProperty(t,"ICON_SELECT_ZOOM",{enumerable:!0,get:function(){return r(Ae).default}});var Ce=n(34927);Object.defineProperty(t,"ICON_THEME",{enumerable:!0,get:function(){return r(Ce).default}});var be=n(58399);Object.defineProperty(t,"ICON_TOGGLE_EXPAND",{enumerable:!0,get:function(){return r(be).default}});var Ne=n(11181);Object.defineProperty(t,"ICON_TOGGLE",{enumerable:!0,get:function(){return r(Ne).default}});var Oe=n(98201);Object.defineProperty(t,"ICON_UI_MENU",{enumerable:!0,get:function(){return r(Oe).default}});var Me=n(49145);Object.defineProperty(t,"ICON_VIEW_BACK",{enumerable:!0,get:function(){return r(Me).default}});var Pe=n(18103);Object.defineProperty(t,"ICON_VIEW_FORWARD",{enumerable:!0,get:function(){return r(Pe).default}});var Re=n(81385);Object.defineProperty(t,"ICON_VIEW_REFRESH",{enumerable:!0,get:function(){return r(Re).default}});var De=n(98325);Object.defineProperty(t,"ICON_WARNING",{enumerable:!0,get:function(){return r(De).default}});var we=n(4744);Object.defineProperty(t,"ICON_ZOOM_DYNAMIC",{enumerable:!0,get:function(){return r(we).default}});var Fe=n(73423);Object.defineProperty(t,"ICON_ZOOM_FULL",{enumerable:!0,get:function(){return r(Fe).default}});var Ue=n(68235);Object.defineProperty(t,"ICON_ZOOM_IN_FIXED",{enumerable:!0,get:function(){return r(Ue).default}});var Ve=n(26256);Object.defineProperty(t,"ICON_ZOOM_IN",{enumerable:!0,get:function(){return r(Ve).default}});var xe=n(55065);Object.defineProperty(t,"ICON_ZOOM_OUT_FIXED",{enumerable:!0,get:function(){return r(xe).default}});var ke=n(96140);Object.defineProperty(t,"ICON_LAYER_ADD",{enumerable:!0,get:function(){return r(ke).default}});var Be=n(76480);Object.defineProperty(t,"ICON_GLOBE_ADD",{enumerable:!0,get:function(){return r(Be).default}});var Ge=n(67551);Object.defineProperty(t,"ICON_GLOBE_SHARE",{enumerable:!0,get:function(){return r(Ge).default}}),t.SPRITE_GLOBE_ADD="globe_add",t.SPRITE_LAYER_ADD="layer_add",t.SPRITE_COORDINATE_TRACKER="coordinate-tracker",t.SPRITE_CONTROL_180="control-180",t.SPRITE_CONTROL="control",t.SPRITE_ICON_ZOOMSELECT="icon_zoomselect",t.SPRITE_LEGEND_LAYER="legend-layer",t.SPRITE_ICON_SELECT="icon_select",t.SPRITE_LC_UNSELECT="lc_unselect",t.SPRITE_LEGEND_THEME="legend-theme",t.SPRITE_LEGEND_RASTER="legend-raster",t.SPRITE_LEGEND_TOGGLE="toggle",t.SPRITE_LEGEND_TOGGLE_EXPAND="toggle-expand",t.SPRITE_FOLDER_HORIZONTAL="folder-horizontal",t.SPRITE_ICON_ERROR="icon_error",t.SPRITE_ICON_HOME="icon_home",t.SPRITE_BACK="back",t.SPRITE_FORWARD="forward",t.SPRITE_ICON_MENUARROWUP="icon_menuarrowup",t.SPRITE_ICON_MENUARROW="icon_menuarrow",t.SPRITE_SELECT="select",t.SPRITE_PAN="pan",t.SPRITE_ZOOM_IN="zoom-in",t.SPRITE_ZOOM_IN_FIXED="zoom-in-fixed",t.SPRITE_ZOOM_OUT_FIXED="zoom-out-fixed",t.SPRITE_ZOOM_FULL="zoom-full",t.SPRITE_MAPTIP="maptip",t.SPRITE_PAN_WEST="pan-west",t.SPRITE_PAN_EAST="pan-east",t.SPRITE_PAN_NORTH="pan-north",t.SPRITE_PAN_SOUTH="pan-south",t.SPRITE_ABOUT="about",t.SPRITE_HELP="help",t.SPRITE_MEASURE="measure",t.SPRITE_PRINT="print",t.SPRITE_OPTIONS="options",t.SPRITE_SELECT_RADIUS="select-radius",t.SPRITE_SELECT_POLYGON="select-polygon",t.SPRITE_INITIAL_CENTER="initial-center",t.SPRITE_SELECT_CLEAR="select-clear",t.SPRITE_ICON_REFRESHMAP="icon_refreshmap",t.SPRITE_VIEW_BACK="view-back",t.SPRITE_VIEW_FORWARD="view-forward",t.SPRITE_GEOLOCATION="geolocation",t.SPRITE_BUFFER="buffer",t.SPRITE_SELECT_FEATURES="select-features",t.SPRITE_REDLINE="redline",t.SPRITE_FEATURE_INFO="feature-info",t.SPRITE_QUERY="query",t.SPRITE_THEME="theme",t.SPRITE_INVOKE_SCRIPT="invoke-script",t.SPRITE_INVOKE_URL="invoke-url",t.SPRITE_SELECT_CENTRE="select-centre",t.SPRITE_GLOBE_SHARE="globe-share",t.MAP_MARKER_ICON="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAEZUlEQVRYR8WWXUxbZRjHn/ecnlLaHqBkyIeAwIaTUuIH4GiB9Yxo5sZIZiLGJSYu8YY74wW7cIksLplxIXq5mF1o9Ga6GNTAFqKGImsLMrwYBYeOBWSUUeWjPf047fl4zWEhnrK2p6ebsbfP+///f+d53/fpi+B//iGt+XO9Vr0lUtyFELYDQpUgAUII/EDAJCvQP9Rfvx7X4pk1AG5upu5XGN4BjM8AECVpQjYxwCfxsG6w1uXisgHJCuCvo53lAgnfAYFbszGVAGaRJPVUXPMsq61XBfD3MPsQTrgBiKfVzJR1jOEeReJDJd+7/Zl0qgBrJ9pHANBxLeH/rsUTZcNuJwLA6fQZAda6O7sB4eFUYlHCEBOFHWuDjgQdQaTMQBidKhuZuJITwOorHW5CB46k1gKG9UgMQlwcMEjrEhASCVBeYMiDUlM+IEj+JhGwr3LY3aQZINDLmPkoHyQQSvo0PxsBlk98ThLE+c4bs3dl47G2Z2oQQQ6YKer0k7T5oSxESaVlQ55AKoi0W3C/h2nDWPAqRVFegJUQO8B45z5IZTbmsJ2rok0DJopKKou8dKJy1DOiCeD3l1/so/P0l5Siv8PRVZvr16p0hwoDELNHnr9XYjKVK3URXnz/wKj3vCaA+Zda+i0Gw0WlaDPCfdU4dvONTDdirqvl62KjoVe5ZpuLDzb8ON2vCWCGeeHNCrPxS6UozMe/qR+dfi0TwOLRQ0NGijqpXBMIx/qfdc0MagIYb7M11BQXzOsV14sX8UZVgCtHMzN8KrM/jh3Ly8fba6SOtOzWRYzhztaGg/HcTjpPu/W0h1DeTx/THNpnzjcpwxDA5dKWG33oHEjJ1xPQWnfHZYTg7aRt46JCQNikj7iWUv43ZBxEP9utl2otRX0PDRlJGscEXKAI5OUxJ5LI0C4J+CwQhFMZLmEMy1uhbx2e2Vc1zwFZMNFuraYp/Z1Sszn5XmU6BIpaIMbhjXC8tWtqdiYnAFnksjd9XFtEv6snU4/adMaCJMHidvAK45k7lYlX9c/IY28spkjdn5VFdNJZUGuCn40kwlH+gHPat/JIADtdaGs8U11Ef5Sv06nl7tTjgghLweCHjHf+PTWBagdkgzGmxmCUCperC+gn1Azl+grLbiUE7qkO9wKrtj4rgB2INuvpykL6M/OeOb83IMLzsBpi+5ze+U/VwuV61gDyXPA4bLfrLEX16VTyq2M5GFpcKTt48PWrV8XHCiCbjbc3HC8z0iMFefqU3kEuAesxttvp/u1aNuGaOrBr6Om0emoKLfa9Dw956CxtsxPt7luHsw3PCcDlaGwtMeb/UmwwJOUEojEcjMSfOzzlu/WfAuxMSIdtqM5SeJJAD46QIGG4uxX8wun1vaUlPKcOyKKfHLb9hTpioZymSYwB/OFwPCFydR3uhYxP8FRwWd+CvWKX3XoRAD14ZGB0lpn0XdD69Tl3YDfI5WiyS5IodU3OT+US/sgAuYYqdTlvweMIlz3+AXmLlDDLPM0mAAAAAElFTkSuQmCC"},26693:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.AddManageLayersContainer=t.zoomToLayerExtents=void 0;var r=n(70655),a=(0,r.__importStar)(n(67294)),i=n(48720),o=n(29256),s=n(81713),l=n(4276),u=n(27058),c=n(51380),p=(0,r.__importDefault)(n(86333)),d=(0,r.__importDefault)(n(39261)),m=n(26414),f=n(81876),_=n(93762),E=n(61220);function v(e,t){var n=t.getLayerManager().getLayer(e),r=null==n?void 0:n.get(o.LayerProperty.WGS84_BBOX);if(r){var a=(0,m.transformExtent)(r,"EPSG:4326",t.getProjection());t.zoomToExtent(a)}else if(n instanceof p.default){var i=n.getSource(),s=void 0;s=i instanceof d.default?i.getSource().getExtent():i.getExtent();var l=i.getProjection(),u=t.getProjection();l&&u&&(s=(0,m.transformExtent)(s,l,u)),Number.isFinite(s[0])&&Number.isFinite(s[1])&&Number.isFinite(s[2])&&Number.isFinite(s[3])?t.zoomToExtent(s):console.warn("Attempted to zoom to invalid bounds for layer: "+e)}}t.zoomToLayerExtents=v,t.AddManageLayersContainer=function(){var e=(0,E.useReduxDispatch)(),t=(0,c.useViewerLocale)(),n=(0,c.useActiveMapName)(),r=(0,c.useActiveMapLayers)(),o=(0,c.useActiveMapView)(),p=function(e){if(r)for(var t=0;t<r.length;t++)if(r[t].name==e)return t;return-1};return r?a.createElement("div",{style:{padding:8}},a.createElement(u.Tabs,{id:"tabs",renderActiveTabPanelOnly:!0},a.createElement(u.Tab,{id:"add_layer",title:a.createElement("span",null,a.createElement(u.Icon,{icon:"new-layer",iconSize:u.Icon.SIZE_STANDARD})," ",(0,i.tr)("ADD_LAYER",t)),panel:a.createElement(l.AddLayer,{onLayerAdded:function(t){n&&e((0,f.mapLayerAdded)(n,t))},onAddLayerBusyWorker:function(t){n&&e((0,f.addMapLayerBusyWorker)(n,t))},onRemoveLayerBusyWorker:function(t){n&&e((0,f.removeMapLayerBusyWorker)(n,t))},locale:t})}),a.createElement(u.Tab,{id:"manage_layers",title:a.createElement("span",null,a.createElement(u.Icon,{icon:"layers",iconSize:u.Icon.SIZE_STANDARD})," ",(0,i.tr)("MANAGE_LAYERS",t)),panel:a.createElement(s.ManageLayers,{layers:r,locale:t,currentResolution:null==o?void 0:o.resolution,onSetOpacity:function(t,r){n&&e((0,f.setMapLayerOpacity)(n,t,r))},onSetHeatmapBlur:function(t,r){n&&e((0,f.setHeatmapLayerBlur)(n,t,r))},onSetHeatmapRadius:function(t,r){n&&e((0,f.setHeatmapLayerRadius)(n,t,r))},onSetVisibility:function(t,r){n&&e((0,f.setMapLayerVisibility)(n,t,r))},onZoomToBounds:function(e){var t=(0,_.getViewer)();t&&v(e,t)},onMoveLayerDown:function(t){var a=p(t);r&&n&&a<r.length-1&&e((0,f.setMapLayerIndex)(n,t,a+1))},onMoveLayerUp:function(t){var r=p(t);n&&r>=0&&e((0,f.setMapLayerIndex)(n,t,r-1))},onRemoveLayer:function(t){n&&e((0,f.removeMapLayer)(n,t))},onVectorStyleChanged:function(t,r,a){n&&e((0,f.setMapLayerVectorStyle)(n,t,r,a))}})}))):a.createElement(a.Fragment,null)}},42965:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.App=void 0;var r=n(70655),a=(0,r.__importStar)(n(67294)),i=n(52714),o=n(61339),s=n(14967),l=n(48720),u=n(57394),c=n(93762),p=n(82422),d=n(27058),m=n(51380),f=n(15915),_=n(36645),E=n(95451),v=n(61220),g=function(e){function t(t){var n=e.call(this,t)||this;return n.initErrorRenderer=function(e){var t=n.props,r=t.configuredLocale,i=t.initOptions,o=r;return i&&i.locale&&(o=i.locale),a.createElement(d.Callout,{intent:d.Intent.DANGER,title:(0,l.tr)("INIT_ERROR_TITLE",o),icon:"error"},n.renderErrorMessage(e,o,i||{}))},n.state={isLoading:!0},n}return(0,r.__extends)(t,e),t.prototype.allowHtmlValuesInSelection=function(){var e,t,n;return null!==(n=null===(t=null===(e=this.props.mapguide)||void 0===e?void 0:e.selectionSettings)||void 0===t?void 0:t.allowHtmlValues)&&void 0!==n&&n},t.prototype.getHtmlCleaner=function(){var e,t,n;return null!==(n=null===(t=null===(e=this.props.mapguide)||void 0===e?void 0:e.selectionSettings)||void 0===t?void 0:t.cleanHtml)&&void 0!==n?n:function(e){return e}},t.prototype.componentDidMount=function(){var e,t=this.props,n=t.onInit,a=t.setElementVisibility,i=t.mapguide,o=t.initLayout,s=t.locale,p=t.resourceId,d=t.externalBaseLayers,m=t.initCommand,E=(0,f.getStateFromUrl)(this.props.urlPropsIgnore),v=E.locale,g=E.resource,y=E.session,h=E.x,S=E.y,T=E.ft,L=E.scale,I=E.map,A=E.sl,C=E.hl,b=E.sg,N=E.hg;if(a&&(null==i?void 0:i.initialElementVisibility)){var O=i.initialElementVisibility,M=O.taskpane,P=O.legend,R=O.selection;a({taskPaneVisible:void 0===M||M,legendVisible:void 0===P||P,selectionPanelVisible:void 0===R||R})}if((0,_.debug)("Asset root is: "+(0,u.getAssetRoot)()),(null==i?void 0:i.fusionRoot)&&(0,c.setFusionRoot)(i.fusionRoot),o){var D=void 0;void 0!==T&&(D={featureTooltipsEnabled:T});var w=void 0;I&&(w={initialActiveMap:I});var F=void 0;h&&S&&L&&(F={initialView:{x:h,y:S,scale:L}});var U=void 0;A&&(U={initialShowLayers:(0,r.__spreadArray)([],A,!0)});var V=void 0;C&&(V={initialHideLayers:(0,r.__spreadArray)([],C,!0)});var x=void 0;b&&(x={initialShowGroups:(0,r.__spreadArray)([],b,!0)});var k=void 0;N&&(k={initialHideGroups:(0,r.__spreadArray)([],N,!0)}),o(m,(0,r.__assign)((0,r.__assign)((0,r.__assign)((0,r.__assign)((0,r.__assign)((0,r.__assign)((0,r.__assign)({resourceId:null!=g?g:p,locale:null!==(e=null!=v?v:s)&&void 0!==e?e:l.DEFAULT_LOCALE,externalBaseLayers:d,session:null!=y?y:null==i?void 0:i.session,onInit:n,layout:"string"==typeof this.props.layout?this.props.layout:void 0},null!=D?D:{}),null!=w?w:{}),null!=F?F:{}),null!=U?U:{}),null!=V?V:{}),null!=x?x:{}),null!=k?k:{}))}},t.prototype.componentDidUpdate=function(e){var t,n,r,a,i=this.props,o=(0,f.getStateFromUrl)(),s={locale:null!==(t=o.locale)&&void 0!==t?t:this.props.locale,session:null!==(n=o.session)&&void 0!==n?n:null===(r=this.props.mapguide)||void 0===r?void 0:r.session};if("string"==typeof this.props.resourceId&&(s.resource=null!==(a=o.resource)&&void 0!==a?a:this.props.resourceId),i.featureTooltipsEnabled!=e.featureTooltipsEnabled&&(s.ft=i.featureTooltipsEnabled),null!=i.map&&e.map!=i.map&&this.setState({isLoading:!1}),i.activeMapName){var l=i.activeMapName;s.map=l}if(i.map){if(i.map.currentView){var u=i.map.currentView,c=u.x,p=u.y,d=u.scale;s.x=c,s.y=p,s.scale=d}var m=i.map.mapguide;if(m){var _=m.runtimeMap,E=m.showGroups,v=m.showLayers,g=m.hideGroups,y=m.hideLayers,h=[],S=[],T=[],L=[];if(null==_?void 0:_.Group)for(var I=0,A=_.Group;I<A.length;I++){var C=A[I];E.indexOf(C.ObjectId)>=0?h.push(C.Name):g.indexOf(C.ObjectId)>=0&&S.push(C.Name)}if(null==_?void 0:_.Layer)for(var b=0,N=_.Layer;b<N.length;b++){var O=N[b];v.indexOf(O.ObjectId)>=0?T.push(O.Name):y.indexOf(O.ObjectId)>=0&&L.push(O.Name)}if(h.length>0&&(s.sg=h),S.length>0&&(s.hg=S),T.length>0&&(s.sl=T),L.length>0&&(s.hl=L),_){var M=_.SessionId;s.session=M}}}(0,f.updateUrl)(s)},t.prototype.renderErrorMessage=function(e,t,n){var r=this,i=e.message;switch(i){case"MgConnectionFailedException":var o={__html:(0,l.tr)("INIT_ERROR_NO_CONNECTION",t)};return a.createElement("div",{dangerouslySetInnerHTML:o});case"MgResourceNotFoundException":return o={__html:(0,l.tr)("INIT_ERROR_RESOURCE_NOT_FOUND",t,{resourceId:n.resourceId})},a.createElement("div",{dangerouslySetInnerHTML:o});case"MgSessionExpiredException":return o={__html:(0,l.tr)("INIT_ERROR_EXPIRED_SESSION",t,{sessionId:n.session})},a.createElement("div",{dangerouslySetInnerHTML:o});default:o={__html:i};var u=(0,s.normalizeStack)(e);return a.createElement("div",null,a.createElement("div",{dangerouslySetInnerHTML:o}),function(){if(!0===r.props.includeStack&&u.length>0)return a.createElement("div",null,a.createElement("p",null,"Stack Trace"),a.createElement("ul",null,u.map((function(e,t){return a.createElement("li",{key:"stack-line-"+t},e)}))))}())}},t.prototype.render=function(){var e=this,t=this.props,n=t.layout,r=t.configuredLocale,o=t.error,u=this.state.isLoading;if(o)return a.createElement(s.Error,{error:o,errorRenderer:this.initErrorRenderer});var c=r;if(u)return a.createElement(d.NonIdealState,{icon:a.createElement(d.Spinner,{intent:d.Intent.NONE,size:d.Spinner.SIZE_LARGE}),title:(0,l.tr)("INIT",c),description:(0,l.tr)("INIT_DESC",c)});var m="string"==typeof n?(0,i.getLayout)(n):n.factory;if(m){var f={allowHtmlValuesInSelection:function(){return e.allowHtmlValuesInSelection()},getHTMLCleaner:function(){return e.getHtmlCleaner()}};return a.createElement(p.AppContext.Provider,{value:f},m())}return a.createElement(s.Error,{error:(0,l.tr)("ERR_UNREGISTERED_LAYOUT",c,{layout:n})})},t}(a.Component);t.App=function(e){var t=(0,m.useInitError)(),n=(0,m.useInitErrorStack)(),i=(0,m.useInitErrorOptions)(),s=(0,m.useViewerLocale)(),l=(0,m.useActiveMapBranch)(),u=(0,m.useActiveMapName)(),c=(0,m.useViewerFeatureTooltipsEnabled)(),p=(0,v.useReduxDispatch)();return a.createElement(g,(0,r.__assign)({error:t,includeStack:n,initOptions:i,featureTooltipsEnabled:c,configuredLocale:s,map:l,activeMapName:u,initLayout:function(e,t){return p((0,o.initLayout)(e,t))},setElementVisibility:function(e){return p((0,E.setElementStates)(e))}},e))}},87591:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.BaseLayerSwitcherContainer=void 0;var r=(0,n(70655).__importStar)(n(67294)),a=n(29215),i=n(51380),o=n(81876),s=n(61220);t.BaseLayerSwitcherContainer=function(){var e=(0,i.useActiveMapName)(),t=(0,i.useViewerLocale)(),n=(0,i.useActiveMapExternalBaseLayers)(!1),l=(0,s.useReduxDispatch)(),u=function(e,t){return l((0,o.setBaseLayer)(e,t))};return t&&n?r.createElement(a.BaseLayerSwitcher,{onBaseLayerChanged:function(t){e&&(null==u||u(e,t))},externalBaseLayers:n,locale:t}):r.createElement("noscript",null)}},70632:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CoordinateTrackerContainer=void 0;var r=n(70655),a=(0,r.__importStar)(n(67294)),i=n(48720),o=(0,r.__importStar)(n(26414)),s=n(27058),l=n(51380),u=n(74399);t.CoordinateTrackerContainer=function(e){var t=e.projections,n=(0,l.useViewerLocale)(),r=(0,l.useCurrentMouseCoordinates)(),c=(0,u.useActiveMapProjection)();return t&&t.length?a.createElement("div",{style:{margin:8}},a.createElement("h4",{className:"bp3-heading"},(0,i.tr)("COORDTRACKER",n)),t.map((function(e){var t,n=NaN,i=NaN;if(r&&c)try{n=(t=o.transform(r,c,e))[0],i=t[1]}catch(e){}return a.createElement(s.Card,{key:e,style:{marginBottom:10}},a.createElement("h5",{className:"bp3-heading"},a.createElement("a",{href:"#"},e)),a.createElement("p",null,a.createElement("strong",null,"X:")," ",n),a.createElement("p",null,a.createElement("strong",null,"Y:")," ",i))}))):a.createElement(s.Callout,{intent:s.Intent.DANGER,title:(0,i.tr)("ERROR",n),icon:"error"},(0,i.tr)("COORDTRACKER_NO_PROJECTIONS",n))}},99275:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.FlyoutRegionContainer=void 0;var r=(0,n(70655).__importStar)(n(67294)),a=n(8514),i=n(95348),o=n(51380),s=n(81243),l=n(81876),u=n(61220);t.FlyoutRegionContainer=function(){var e=(0,u.useReduxDispatch)(),t=function(t,n){return e((0,l.invokeCommand)(t,n))},n=(0,o.useViewerFlyouts)(),c=(0,o.useViewerLocale)(),p=(0,o.useReducedToolbarAppState)(),d={};if(t)for(var m in n){var f=n[m];void 0===f.componentName?(d[m]=(0,i.mapToolbarReference)(f,p,t),d[m].open=!!n[m].open,d[m].metrics=n[m].metrics):d[m]=n[m]}return r.createElement(a.FlyoutRegion,{flyoutConf:d,onCloseFlyout:function(t){return function(t){return e((0,s.closeFlyout)(t))}(t)},locale:c})}},37556:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.useActiveMapSubjectLayer=void 0;var r=n(61220);t.useActiveMapSubjectLayer=function(){return(0,r.useAppState)((function(e){var t;if(e.config.activeMapName)return null===(t=e.mapState[e.config.activeMapName].generic)||void 0===t?void 0:t.subject}))}},74399:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.useActiveMapState=t.useActiveMapFiniteScales=t.useActiveMapSessionId=t.useActiveMapSelectableLayerNames=t.useActiveMapActiveSelectedFeature=t.useActiveMapLayerTransparency=t.useActiveMapHideLayers=t.useActiveMapHideGroups=t.useActiveMapShowLayers=t.useActiveMapShowGroups=t.useActiveMapSelectableLayers=t.useActiveMapExpandedGroups=t.useActiveMapProjectionUnits=t.useActiveMapProjection=t.useActiveMapMetersPerUnit=t.useActiveMapIsArbitraryCoordSys=void 0;var r=n(29256),a=n(51380),i=n(61220),o=n(57600);function s(){return(0,i.useAppState)((function(e){var t,n;return null===(n=null===(t=(0,a.getActiveMapBranch)(e))||void 0===t?void 0:t.mapguide)||void 0===n?void 0:n.selectableLayers}))}function l(){return(0,i.useAppState)((function(e){return(0,r.getRuntimeMap)(e)}))}t.useActiveMapIsArbitraryCoordSys=function(){return(0,i.useAppState)((function(e){var t,n,r,a=!1;if(e.config.activeMapName){var i=e.mapState[e.config.activeMapName];(null===(t=i.mapguide)||void 0===t?void 0:t.runtimeMap)?a=null!=(0,o.tryParseArbitraryCs)(i.mapguide.runtimeMap.CoordinateSystem.MentorCode):(null===(n=i.generic)||void 0===n?void 0:n.subject)&&(a=null!=(0,o.tryParseArbitraryCs)(null===(r=i.generic.subject.meta)||void 0===r?void 0:r.projection))}return a}))},t.useActiveMapMetersPerUnit=function(){return(0,i.useAppState)((function(e){var t,n=1;if(e.config.activeMapName){var r=e.mapState[e.config.activeMapName];(null===(t=r.mapguide)||void 0===t?void 0:t.runtimeMap)&&(n=r.mapguide.runtimeMap.CoordinateSystem.MetersPerUnit)}return n}))},t.useActiveMapProjection=function(){return(0,i.useAppState)((function(e){var t,n,r,a;if(e.config.activeMapName){var i=null===(t=e.mapState[e.config.activeMapName].mapguide)||void 0===t?void 0:t.runtimeMap,o=null===(n=e.mapState[e.config.activeMapName].generic)||void 0===n?void 0:n.subject;i?a="EPSG:"+i.CoordinateSystem.EpsgCode:o&&(a=null===(r=o.meta)||void 0===r?void 0:r.projection)}return a}))},t.useActiveMapProjectionUnits=function(){return(0,i.useAppState)((function(e){var t,n,r,a,i,s;if(e.config.activeMapName){var l=null===(t=e.mapState[e.config.activeMapName].mapguide)||void 0===t?void 0:t.runtimeMap,u=null===(n=e.mapState[e.config.activeMapName].generic)||void 0===n?void 0:n.subject;l?s=null===(r=(0,o.tryParseArbitraryCs)(l.CoordinateSystem.MentorCode))||void 0===r?void 0:r.units:u&&(s=null===(i=(0,o.tryParseArbitraryCs)(null===(a=u.meta)||void 0===a?void 0:a.projection))||void 0===i?void 0:i.units)}return s}))},t.useActiveMapExpandedGroups=function(){return(0,i.useAppState)((function(e){var t,n;return null===(n=null===(t=(0,a.getActiveMapBranch)(e))||void 0===t?void 0:t.mapguide)||void 0===n?void 0:n.expandedGroups}))},t.useActiveMapSelectableLayers=s,t.useActiveMapShowGroups=function(){return(0,i.useAppState)((function(e){var t,n;return null===(n=null===(t=(0,a.getActiveMapBranch)(e))||void 0===t?void 0:t.mapguide)||void 0===n?void 0:n.showGroups}))},t.useActiveMapShowLayers=function(){return(0,i.useAppState)((function(e){var t,n;return null===(n=null===(t=(0,a.getActiveMapBranch)(e))||void 0===t?void 0:t.mapguide)||void 0===n?void 0:n.showLayers}))},t.useActiveMapHideGroups=function(){return(0,i.useAppState)((function(e){var t,n;return null===(n=null===(t=(0,a.getActiveMapBranch)(e))||void 0===t?void 0:t.mapguide)||void 0===n?void 0:n.hideGroups}))},t.useActiveMapHideLayers=function(){return(0,i.useAppState)((function(e){var t,n;return null===(n=null===(t=(0,a.getActiveMapBranch)(e))||void 0===t?void 0:t.mapguide)||void 0===n?void 0:n.hideLayers}))},t.useActiveMapLayerTransparency=function(){return(0,i.useAppState)((function(e){var t,n;return null===(n=null===(t=(0,a.getActiveMapBranch)(e))||void 0===t?void 0:t.mapguide)||void 0===n?void 0:n.layerTransparency}))},t.useActiveMapActiveSelectedFeature=function(){return(0,i.useAppState)((function(e){var t,n;return null===(n=null===(t=(0,a.getActiveMapBranch)(e))||void 0===t?void 0:t.mapguide)||void 0===n?void 0:n.activeSelectedFeature}))},t.useActiveMapSelectableLayerNames=function(){var e,t=l(),n=s();return t?(null!==(e=t.Layer)&&void 0!==e?e:[]).filter((function(e){return e.Selectable&&!1!==n[e.ObjectId]})).map((function(e){return e.Name})):[]},t.useActiveMapSessionId=function(){return(0,i.useAppState)((function(e){var t;return null===(t=(0,r.getRuntimeMap)(e))||void 0===t?void 0:t.SessionId}))},t.useActiveMapFiniteScales=function(){return(0,i.useAppState)((function(e){var t=(0,r.getRuntimeMap)(e);return null!=t?t.FiniteDisplayScale:void 0}))},t.useActiveMapState=l},51380:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.useTemplateSelectionVisible=t.useTemplateTaskPaneVisible=t.useTemplateLegendVisible=t.useConfiguredCapabilities=t.useConfiguredUndoLastPointKey=t.useConfiguredCancelDigitizationKey=t.useConfiguredLoadIndicatorColor=t.useConfiguredLoadIndicatorPositioning=t.useConfiguredManualFeatureTooltips=t.useViewerSelectCanDragPan=t.useViewerFeatureTooltipsEnabled=t.useViewerPointSelectionBuffer=t.useViewerActiveFeatureSelectionColor=t.useViewerSelectionColor=t.useViewerSelectionImageFormat=t.useViewerImageFormat=t.useViewerIsStateless=t.useIsContextMenuOpen=t.useConfiguredAgentKind=t.useConfiguredAgentUri=t.useConfiguredCoordinateFormat=t.useConfiguredCoordinateDecimals=t.useConfiguredCoordinateProjection=t.useViewerViewRotationEnabled=t.useViewerActiveTool=t.useViewerViewRotation=t.useViewerBusyCount=t.useAvailableMaps=t.useActiveMapInitialView=t.useActiveMapClientSelectionSet=t.useCustomAppSettings=t.useActiveMapSelectionSet=t.useActiveMapBranch=t.getActiveMapBranch=t.useInitErrorOptions=t.useInitErrorStack=t.useInitError=t.useInitWarnings=t.useViewerFlyouts=t.useCurrentMouseCoordinates=t.useActiveMapExternalBaseLayers=t.useViewerSizeUnits=t.useActiveMapHeight=t.useActiveMapWidth=t.useActiveMapView=t.useViewerLocale=t.useActiveMapLayers=t.useActiveMapInitialExternalLayers=t.useActiveMapName=t.usePrevious=void 0,t.useReducedToolbarAppState=t.useLastDispatchedAction=t.useTaskPaneNavigationStack=t.useTaskPaneLastUrlPushed=t.useTaskPaneNavigationIndex=t.useTaskPaneInitialUrl=t.useTemplateInitialTaskPaneWidth=t.useTemplateInitialInfoPaneWidth=void 0;var r=n(70655),a=n(29256),i=n(95601),o=n(67294),s=n(41407),l=n(95348),u=n(61220);function c(e){if(e.config.activeMapName)return e.mapState[e.config.activeMapName]}function p(){return(0,u.useAppState)((function(e){var t;return null!==(t=(0,a.getSelectionSet)(e))&&void 0!==t?t:null}))}function d(){return(0,u.useAppState)((function(e){var t;return null===(t=c(e))||void 0===t?void 0:t.clientSelection}))}t.usePrevious=function(e){var t=(0,o.useRef)();return(0,o.useEffect)((function(){t.current=e}),[e]),t.current},t.useActiveMapName=function(){return(0,u.useAppState)((function(e){return e.config.activeMapName}))},t.useActiveMapInitialExternalLayers=function(){return(0,u.useAppState)((function(e){return e.config.activeMapName?e.mapState[e.config.activeMapName].initialExternalLayers:[]}))},t.useActiveMapLayers=function(){return(0,u.useAppState)((function(e){if(e.config.activeMapName)return e.mapState[e.config.activeMapName].layers}),(function(e,t){return!(0,s.areArraysDifferent)(e,t,(function(e,t){return e.name==t.name&&e.opacity==t.opacity&&e.visible==t.visible&&e.vectorStyle==t.vectorStyle&&e.cluster==t.cluster&&function(e,t){return!(!e||!t)&&e.blur==t.blur&&e.radius==t.radius}(e.heatmap,t.heatmap)}))}))},t.useViewerLocale=function(){return(0,u.useAppState)((function(e){return e.config.locale}))},t.useActiveMapView=function(){return(0,u.useAppState)((function(e){return(0,a.getCurrentView)(e)}))},t.useActiveMapWidth=function(){return(0,u.useAppState)((function(e){var t,n;return null===(n=null===(t=e.viewer)||void 0===t?void 0:t.size)||void 0===n?void 0:n[0]}))},t.useActiveMapHeight=function(){return(0,u.useAppState)((function(e){var t,n;return null===(n=null===(t=e.viewer)||void 0===t?void 0:t.size)||void 0===n?void 0:n[1]}))},t.useViewerSizeUnits=function(){return(0,u.useAppState)((function(e){return e.config.viewSizeUnits}))},t.useActiveMapExternalBaseLayers=function(e){return(0,u.useAppState)((function(t){return(0,a.getExternalBaseLayers)(t,e)}))},t.useCurrentMouseCoordinates=function(){return(0,u.useAppState)((function(e){return e.mouse.coords}))},t.useViewerFlyouts=function(){return(0,u.useAppState)((function(e){return e.toolbar.flyouts}))},t.useInitWarnings=function(){return(0,u.useAppState)((function(e){return e.initError.warnings}))},t.useInitError=function(){return(0,u.useAppState)((function(e){return e.initError.error}))},t.useInitErrorStack=function(){return(0,u.useAppState)((function(e){return e.initError.includeStack}))},t.useInitErrorOptions=function(){return(0,u.useAppState)((function(e){return e.initError.options}))},t.getActiveMapBranch=c,t.useActiveMapBranch=function(){return(0,u.useAppState)((function(e){return c(e)}))},t.useActiveMapSelectionSet=p,t.useCustomAppSettings=function(){return(0,u.useAppState)((function(e){return e.config.appSettings}))},t.useActiveMapClientSelectionSet=d,t.useActiveMapInitialView=function(){return(0,u.useAppState)((function(e){var t;return null===(t=c(e))||void 0===t?void 0:t.initialView}))},t.useAvailableMaps=function(){return(0,u.useAppState)((function(e){return e.config.availableMaps}))},t.useViewerBusyCount=function(){return(0,u.useAppState)((function(e){return e.viewer.busyCount}))},t.useViewerViewRotation=function(){return(0,u.useAppState)((function(e){return e.config.viewRotation}))},t.useViewerActiveTool=function(){return(0,u.useAppState)((function(e){return e.viewer.tool}))},t.useViewerViewRotationEnabled=function(){return(0,u.useAppState)((function(e){return e.config.viewRotationEnabled}))},t.useConfiguredCoordinateProjection=function(){return(0,u.useAppState)((function(e){return e.config.coordinates.projection}))},t.useConfiguredCoordinateDecimals=function(){return(0,u.useAppState)((function(e){return e.config.coordinates.decimals}))},t.useConfiguredCoordinateFormat=function(){return(0,u.useAppState)((function(e){return e.config.coordinates.format}))},t.useConfiguredAgentUri=function(){return(0,u.useAppState)((function(e){return e.config.agentUri}))},t.useConfiguredAgentKind=function(){return(0,u.useAppState)((function(e){return e.config.agentKind}))},t.useIsContextMenuOpen=function(){return(0,u.useAppState)((function(e){var t,n,r,a=!1;return!0===(null===(r=null===(n=null===(t=null==e?void 0:e.toolbar)||void 0===t?void 0:t.flyouts)||void 0===n?void 0:n[i.WEBLAYOUT_CONTEXTMENU])||void 0===r?void 0:r.open)&&(a=!0),a}))},t.useViewerIsStateless=function(){return(0,u.useAppState)((function(e){return e.config.viewer.isStateless}))},t.useViewerImageFormat=function(){return(0,u.useAppState)((function(e){return e.config.viewer.imageFormat}))},t.useViewerSelectionImageFormat=function(){return(0,u.useAppState)((function(e){return e.config.viewer.selectionImageFormat}))},t.useViewerSelectionColor=function(){return(0,u.useAppState)((function(e){return e.config.viewer.selectionColor}))},t.useViewerActiveFeatureSelectionColor=function(){return(0,u.useAppState)((function(e){return e.config.viewer.activeSelectedFeatureColor}))},t.useViewerPointSelectionBuffer=function(){return(0,u.useAppState)((function(e){return e.config.viewer.pointSelectionBuffer}))},t.useViewerFeatureTooltipsEnabled=function(){return(0,u.useAppState)((function(e){return e.viewer.featureTooltipsEnabled}))},t.useViewerSelectCanDragPan=function(){return(0,u.useAppState)((function(e){return e.config.selectCanDragPan}))},t.useConfiguredManualFeatureTooltips=function(){return(0,u.useAppState)((function(e){return e.config.manualFeatureTooltips}))},t.useConfiguredLoadIndicatorPositioning=function(){return(0,u.useAppState)((function(e){return e.config.viewer.loadIndicatorPositioning}))},t.useConfiguredLoadIndicatorColor=function(){return(0,u.useAppState)((function(e){return e.config.viewer.loadIndicatorColor}))},t.useConfiguredCancelDigitizationKey=function(){return(0,u.useAppState)((function(e){return e.config.cancelDigitizationKey}))},t.useConfiguredUndoLastPointKey=function(){return(0,u.useAppState)((function(e){return e.config.undoLastPointKey}))},t.useConfiguredCapabilities=function(){return(0,u.useAppState)((function(e){return e.config.capabilities}))},t.useTemplateLegendVisible=function(){return(0,u.useAppState)((function(e){return e.template.legendVisible}))},t.useTemplateTaskPaneVisible=function(){return(0,u.useAppState)((function(e){return e.template.taskPaneVisible}))},t.useTemplateSelectionVisible=function(){return(0,u.useAppState)((function(e){return e.template.selectionPanelVisible}))},t.useTemplateInitialInfoPaneWidth=function(){return(0,u.useAppState)((function(e){return e.template.initialInfoPaneWidth}))},t.useTemplateInitialTaskPaneWidth=function(){return(0,u.useAppState)((function(e){return e.template.initialTaskPaneWidth}))},t.useTaskPaneInitialUrl=function(){return(0,u.useAppState)((function(e){return e.taskpane.initialUrl}))},t.useTaskPaneNavigationIndex=function(){return(0,u.useAppState)((function(e){return e.taskpane.navIndex}))},t.useTaskPaneLastUrlPushed=function(){return(0,u.useAppState)((function(e){return e.taskpane.lastUrlPushed}))},t.useTaskPaneNavigationStack=function(){return(0,u.useAppState)((function(e){return e.taskpane.navigation}))},t.useLastDispatchedAction=function(){return(0,u.useAppState)((function(e){return e.lastaction}))},t.useReducedToolbarAppState=function(){var e=p(),t=d(),n=(0,u.useAppState)((function(e){return(0,l.reduceAppToToolbarState)(e)}),(function(e,t){return(null==e?void 0:e.busyWorkerCount)==(null==t?void 0:t.busyWorkerCount)&&(null==e?void 0:e.hasNextView)==(null==t?void 0:t.hasNextView)&&(null==e?void 0:e.hasPreviousView)==(null==t?void 0:t.hasPreviousView)&&(null==e?void 0:e.featureTooltipsEnabled)==(null==t?void 0:t.featureTooltipsEnabled)&&(null==e?void 0:e.activeTool)==(null==t?void 0:t.activeTool)})),a=!1,i=!1;return e&&(e.FeatureSet&&e.FeatureSet.Layer.length>0&&(i=!0),e.SelectedFeatures&&e.SelectedFeatures.SelectedLayer.length>0&&(i=!0)),t&&t.layers.length>0&&(a=!0),(0,r.__assign)((0,r.__assign)({},n),{hasClientSelection:a,hasSelection:i})}},39760:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.InitWarningDisplay=void 0;var r=(0,n(70655).__importStar)(n(67294)),a=n(61339),i=n(48720),o=n(27058),s=n(51380),l=n(61220);t.InitWarningDisplay=function(){var e=(0,l.useReduxDispatch)(),t=function(){return e((0,a.acknowledgeInitWarnings)())},n=(0,s.useInitWarnings)(),u=(0,s.useViewerLocale)();return n&&n.length&&t?r.createElement(o.Dialog,{icon:"warning-sign",isOpen:!0,usePortal:!1,onClose:t,title:(0,i.tr)("WARNING",u)},r.createElement("div",{className:"bp3-dialog-body"},r.createElement("p",null,(0,i.tr)("INIT_WARNINGS_FOUND",u)),r.createElement("ul",null,n.map((function(e){return r.createElement("li",{key:e},e)})))),r.createElement("div",{className:"bp3-dialog-footer"},r.createElement("div",{className:"bp3-dialog-footer-actions"},r.createElement(o.Button,{intent:o.Intent.PRIMARY,onClick:t,text:(0,i.tr)("OK",u)})))):r.createElement("noscript",null)}},49829:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.LegendContainer=void 0;var r=(0,n(70655).__importStar)(n(67294)),a=n(81557),i=n(48720),o=n(51380),s=n(81876),l=n(34169),u=n(74399),c=n(61220);t.LegendContainer=function(e){var t=e.maxHeight,n=e.inlineBaseLayerSwitcher,p=(0,c.useReduxDispatch)(),d=(0,o.useActiveMapName)(),m=(0,o.useViewerLocale)(),f=(0,u.useActiveMapState)(),_=(0,o.useActiveMapView)(),E=(0,u.useActiveMapShowGroups)(),v=(0,u.useActiveMapShowLayers)(),g=(0,u.useActiveMapHideGroups)(),y=(0,u.useActiveMapHideLayers)(),h=(0,u.useActiveMapExpandedGroups)(),S=(0,u.useActiveMapSelectableLayers)(),T=(0,o.useActiveMapExternalBaseLayers)(!1),L=(0,o.useViewerIsStateless)(),I=function(e,t){return p((0,s.setBaseLayer)(e,t))},A=function(e,t){return p((0,l.setGroupVisibility)(e,t))},C=function(e,t){return p((0,l.setLayerVisibility)(e,t))},b=function(e,t){return p((0,l.setLayerSelectable)(e,t))},N=function(e,t){return p((0,l.setGroupExpanded)(e,t))},O=(0,o.useActiveMapLayers)();if((f||O)&&_){var M=_.scale;return M||O?r.createElement(a.Legend,{map:f,activeMapName:d,stateless:L,maxHeight:t,currentScale:M,externalLayers:O,showLayers:v,showGroups:E,hideLayers:y,hideGroups:g,locale:m,inlineBaseLayerSwitcher:!!n,externalBaseLayers:T,onBaseLayerChanged:function(e){I&&d&&I(d,e)},overrideSelectableLayers:S,overrideExpandedItems:h,onLayerSelectabilityChanged:function(e,t){d&&(null==b||b(d,{id:e,value:t}))},onGroupExpansionChanged:function(e,t){N&&d&&N(d,{id:e,value:t})},onGroupVisibilityChanged:function(e,t){A&&d&&A(d,{id:e,value:t})},onLayerVisibilityChanged:function(e,t){C&&d&&C(d,{id:e,value:t})}}):r.createElement("div",null,(0,i.tr)("LOADING_MSG",m))}return r.createElement("div",null,(0,i.tr)("LOADING_MSG",m))}},48961:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.MapCapturerContext=void 0;var r=n(70655),a=n(65539),i=(0,r.__importStar)(n(28641)),o=(0,r.__importDefault)(n(81090)),s=(0,r.__importDefault)(n(78714)),l=(0,r.__importDefault)(n(2033)),u=(0,r.__importDefault)(n(30933)),c=(0,r.__importDefault)(n(86333)),p=(0,r.__importDefault)(n(33232)),d=n(36645),m=function(){function e(e,t,n){void 0===n&&(n=0),this.viewer=e,this.mapName=t,this.rotation=n,this.features=new s.default,this.mapCapturerSource=new u.default({features:this.features}),this.mapCapturerLayer=new c.default({source:this.mapCapturerSource}),this.intTranslate=new p.default({features:this.features}),this.intTranslate.on("translateend",this.onTranslateEnd.bind(this)),this.layerName=t+"_MapCapturer"}return e.prototype.getRing=function(e,t,n){var r=[],a=n/(1e3*this.viewer.getMetersPerUnit()*2);return r.push([e.x-t.w*a,e.y-t.h*a]),r.push([e.x+t.w*a,e.y-t.h*a]),r.push([e.x+t.w*a,e.y+t.h*a]),r.push([e.x-t.w*a,e.y+t.h*a]),[r]},e.prototype.onTranslateEnd=function(){if(1==this.features.getLength()&&this.activeCallback){var e=this.features.item(0).getGeometry(),t=e.getCoordinates()[0].map((function(e){return e[0]+","+e[1]})).join(","),n=e.clone(),r=i.getCenter(n.getExtent());n.rotate((0,a.deg2rad)(this.rotation),r);var o=n.getCoordinates()[0].map((function(e){return e[0]+","+e[1]})).join(",");this.activeCallback.updateBoxCoords(t,o)}},e.prototype.updateBox=function(e,t,n){if(this.activeCallback){this.rotation=n;var r=void 0;if(0==this.features.getLength())r=this.createCaptureBox(e,t,this.rotation);else{r=this.features.item(0).getGeometry();var o=i.getCenter(r.getExtent()),s={x:o[0],y:o[1]},l=this.getRing(s,e,t);r.setCoordinates(l),r.rotate(-(0,a.deg2rad)(this.rotation),o)}var u=r.getCoordinates()[0].map((function(e){return e[0]+","+e[1]})).join(","),c=r.clone(),p=i.getCenter(c.getExtent());c.rotate((0,a.deg2rad)(this.rotation),p);var d=c.getCoordinates()[0].map((function(e){return e[0]+","+e[1]})).join(",");this.activeCallback.updateBoxCoords(u,d)}},e.prototype.createCaptureBox=function(e,t,n){var r=this.viewer.getCurrentView(),i=this.getRing(r,e,t),s=new l.default(i);s.rotate(-(0,a.deg2rad)(n),[r.x,r.y]);var u=new o.default(s);return this.features.clear(),this.features.push(u),s},e.prototype.getMapName=function(){return this.mapName},e.prototype.activate=function(e,t,n,r){this.activeCallback=e,(0,d.debug)("Activating map capturer context for "+this.mapName),this.viewer.getLayerManager().addLayer(this.layerName,this.mapCapturerLayer,!0),this.updateBox(t,n,r),this.viewer.addInteraction(this.intTranslate)},e.prototype.deactivate=function(){this.activeCallback=void 0,(0,d.debug)("De-activating map capturer context for "+this.mapName),this.features.clear(),this.viewer.getLayerManager().removeLayer(this.layerName),this.viewer.removeInteraction(this.intTranslate)},e}();t.MapCapturerContext=m},51487:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.MapMenuContainer=void 0;var r=(0,n(70655).__importStar)(n(67294)),a=n(38589),i=n(51380),o=n(81876),s=n(61220);t.MapMenuContainer=function(){var e=(0,s.useReduxDispatch)(),t=(0,i.useViewerLocale)(),n=(0,i.useActiveMapName)(),l=(0,i.useAvailableMaps)();if(t&&n&&l){var u=l.map((function(e){return{label:e.name,mapName:e.value}}));return r.createElement(a.MapMenu,{onActiveMapChanged:function(t){return function(t){return e((0,o.setActiveMap)(t))}(t)},selectedMap:n,maps:u,locale:t})}return r.createElement("noscript",null)}},29130:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.MeasureContext=void 0;var r=n(70655),a=n(29256),i=n(48720),o=n(65539),s=(0,r.__importStar)(n(62706)),l=(0,r.__importStar)(n(97580)),u=(0,r.__importDefault)(n(92083)),c=(0,r.__importDefault)(n(2033)),p=(0,r.__importDefault)(n(38835)),d=n(36645),m=n(26414);function f(e){return e instanceof m.Projection&&/XY-[A-Z]+/.test(e.getCode())}var _=function(){function e(e,t,n){var r=this;this.onDrawStart=function(e){r.sketch=e.feature;var t=e.coordinate;if(r.sketch){var n=r.sketch.getGeometry();n&&(r.listener=n.on("change",(function(e){var n,a=e.target;if(a instanceof c.default){var i=r.formatArea(a),o=i[0],s=i[1],l=i[2];n=o,r.callback&&r.callback.updateSegments("Area",s,l),t=a.getInteriorPoint().getCoordinates()}else if(a instanceof u.default){var p=r.formatLength(a);o=p[0],s=p[1],l=p[2],n=o,r.callback&&r.callback.updateSegments("LineString",s,l),t=a.getLastCoordinate()}else n="";r.measureTooltipElement&&(r.measureTooltipElement.innerHTML=n),r.measureTooltip.setPosition(t)})))}},this.onDrawEnd=function(){r.measureTooltipElement&&(r.measureTooltipElement.className="tooltip tooltip-static"),r.measureTooltip.setOffset([0,-7]),r.sketch=null,r.measureTooltipElement=null,r.createMeasureTooltip(),s.unByKey(r.listener)},this.onMouseMove=function(e){if(!e.dragging&&r.parent){var t=r.parent.getLocale(),n=(0,i.tr)("MEASUREMENT_START_DRAWING",t);if(r.sketch){var a=r.sketch.getGeometry();a instanceof c.default?n=(0,i.tr)("MEASUREMENT_CONTINUE_POLYGON",t):a instanceof u.default&&(n=(0,i.tr)("MEASUREMENT_CONTINUE_LINE",t))}r.helpTooltipElement.innerHTML=n,r.helpTooltip.setPosition(e.coordinate),r.helpTooltipElement.classList.remove("hidden")}},this.measureOverlays=[],this.viewer=e,this.mapName=t,this.parent=n,this.layerName="measure-layer-"+t,this.olFactory=e.getOLFactory(),this.measureLayer=this.olFactory.createVectorLayer({source:this.olFactory.createVectorSource()}),this.measureLayer.set(a.LayerProperty.IS_MEASURE,!0),this.measureLayer.setStyle(this.createMeasureStyle())}return e.prototype.setParent=function(e){this.parent=e},e.prototype.detachParent=function(){this.parent=void 0},e.prototype.formatLength=function(e){var t,n,r,a=!1,s=this.viewer.getProjection();if(this.parent){r=this.parent.getLocale();var u=e.getCoordinates();if(n=[],t=0,f(s)){a=!0;for(var c=0,p=u.length-1;c<p;++c){var d=u[c],_=u[c+1],E=d[0]-_[0],v=d[1]-_[1];t+=g=Math.sqrt(E*E+v*v),n.push({segment:c+1,length:g})}}else for(c=0,p=u.length-1;c<p;++c){var g;d=this.olFactory.transformCoordinate(u[c],s,"EPSG:4326"),_=this.olFactory.transformCoordinate(u[c+1],s,"EPSG:4326"),t+=g=l.getDistance(d,_),n.push({segment:c+1,length:g})}}else t=NaN;return[a&&s instanceof m.Projection?(0,o.roundTo)(t,2)+" "+s.getUnits():t>100?(0,i.tr)("UNIT_FMT_KM",r,{value:(0,o.roundTo)(t/1e3,2)}):(0,i.tr)("UNIT_FMT_M",r,{value:(0,o.roundTo)(t,2)}),t,n]},e.prototype.formatArea=function(e){var t,n,r,a=!1,s=this.viewer.getProjection();if(this.parent){r=this.parent.getLocale(),n=[];var u=e;if(f(s)){a=!0,t=u.getArea();for(var c=0,p=(h=u.getLinearRing(0).getCoordinates()).length-1;c<p;++c){var _=h[c],E=h[c+1],v=_[0]-E[0],g=_[1]-E[1],y=Math.sqrt(v*v+g*g);n.push({segment:c+1,length:y})}}else{var h;for(t=l.getArea(u,{projection:s}),(0,d.debug)("Polygon area: "+t),c=0,p=(h=u.getLinearRing(0).getCoordinates()).length-1;c<p;++c)_=this.olFactory.transformCoordinate(h[c],s,"EPSG:4326"),E=this.olFactory.transformCoordinate(h[c+1],s,"EPSG:4326"),y=l.getDistance(_,E),n.push({segment:c+1,length:y})}}else t=NaN;return[a&&s instanceof m.Projection?(0,o.roundTo)(t,2)+" "+s.getUnits()+"<sup>2</sup>":t>1e4?(0,i.tr)("UNIT_FMT_SQKM",r,{value:""+(0,o.roundTo)(t/1e6,2)}):(0,i.tr)("UNIT_FMT_SQM",r,{value:""+(0,o.roundTo)(t,2)}),t,n]},e.prototype.getMapName=function(){return this.mapName},e.prototype.createMeasureStyle=function(){return this.olFactory.createStyle({fill:this.olFactory.createStyleFill({color:"rgba(255, 255, 255, 0.2)"}),stroke:this.olFactory.createStyleStroke({color:"#ffcc33",width:2}),image:this.olFactory.createStyleCircle({radius:7,fill:this.olFactory.createStyleFill({color:"#ffcc33"})})})},e.prototype.createDrawInteraction=function(e){var t=this.measureLayer.getSource();return this.olFactory.createInteractionDraw({source:t,type:e,style:this.olFactory.createStyle({fill:this.olFactory.createStyleFill({color:"rgba(255, 255, 255, 0.2)"}),stroke:this.olFactory.createStyleStroke({color:"rgba(0, 0, 0, 0.5)",lineDash:[10,10],width:2}),image:this.olFactory.createStyleCircle({radius:5,stroke:this.olFactory.createStyleStroke({color:"rgba(0, 0, 0, 0.7)"}),fill:this.olFactory.createStyleFill({color:"rgba(255, 255, 255, 0.2)"})})})})},e.prototype.removeElement=function(e){e&&e.parentNode&&e.parentNode.removeChild(e)},e.prototype.createHelpTooltip=function(){this.removeElement(this.helpTooltipElement),this.helpTooltipElement=document.createElement("div"),this.helpTooltipElement.className="tooltip hidden",this.helpTooltip=this.olFactory.createOverlay({element:this.helpTooltipElement,offset:[15,0],positioning:p.default.CENTER_LEFT}),this.viewer.addOverlay(this.helpTooltip)},e.prototype.createMeasureTooltip=function(){this.removeElement(this.measureTooltipElement),this.measureTooltipElement=document.createElement("div"),this.measureTooltipElement.className="tooltip tooltip-measure",this.measureTooltip&&this.measureOverlays.push(this.measureTooltip),this.measureTooltip=this.olFactory.createOverlay({element:this.measureTooltipElement,offset:[0,-15],positioning:p.default.BOTTOM_CENTER}),this.viewer.addOverlay(this.measureTooltip)},e.prototype.setActiveInteraction=function(e){this.draw&&(this.draw.un("drawstart",this.onDrawStart),this.draw.un("drawend",this.onDrawEnd),this.viewer.removeInteraction(this.draw)),this.draw=this.createDrawInteraction(e),this.draw&&(this.draw.on("drawstart",this.onDrawStart),this.draw.on("drawend",this.onDrawEnd),this.viewer.addInteraction(this.draw))},e.prototype.startMeasure=function(){if(this.parent){var e=this.parent.getCurrentDrawType();e&&(this.createMeasureTooltip(),this.createHelpTooltip(),this.setActiveInteraction(e),this.viewer.addHandler("pointermove",this.onMouseMove))}},e.prototype.endMeasure=function(){this.viewer.removeHandler("pointermove",this.onMouseMove),this.draw&&(this.draw.un("drawstart",this.onDrawStart),this.draw.un("drawend",this.onDrawEnd),this.viewer.removeInteraction(this.draw)),this.removeElement(this.helpTooltipElement)},e.prototype.clearMeasurements=function(){this.measureLayer.getSource().clear();for(var e=0,t=this.measureOverlays;e<t.length;e++){var n=t[e];this.viewer.removeOverlay(n)}this.measureOverlays.length=0,this.callback&&this.callback.clearSegments()},e.prototype.handleDrawTypeChange=function(){if(this.parent){var e=this.parent.getCurrentDrawType();e&&this.setActiveInteraction(e)}},e.prototype.activate=function(e,t){this.callback=t,(0,d.debug)("Activating measure context for "+this.mapName);for(var n=0,r=this.measureOverlays;n<r.length;n++){var a=r[n];this.viewer.addOverlay(a)}this.viewer.getLayerManager(e).addLayer(this.layerName,this.measureLayer,!0)},e.prototype.deactivate=function(e){this.callback=void 0,(0,d.debug)("De-activating measure context for "+this.mapName),this.endMeasure();for(var t=0,n=this.measureOverlays;t<n.length;t++){var r=n[t];this.viewer.removeOverlay(r)}this.viewer.getLayerManager(e).removeLayer(this.layerName)},e}();t.MeasureContext=_},23548:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.MeasureContainer=void 0;var r=n(70655),a=(0,r.__importStar)(n(67294)),i=n(29256),o=n(93762),s=n(48720),l=n(29130),u=n(65539),c=n(27058),p=n(51380),d=(0,r.__importDefault)(n(74754)),m=n(81876),f=n(61220),_=n(74399),E=n(85670),v=[],g=function(e){function t(t){var n=e.call(this,t)||this;return n.onTypeChanged=function(e){var t=e.target.value;n.setState({drawType:t},(function(){var e=n.props.activeMapName;if(e&&!0===n.state.measuring){var t=v.filter((function(t){return t.getMapName()===e}))[0];t&&t.handleDrawTypeChange()}}))},n.onClearMeasurements=function(e){e.preventDefault();var t=n.props.activeMapName;if(t){var r=v.filter((function(e){return e.getMapName()===t}))[0];r&&r.clearMeasurements()}return!1},n.onStartMeasure=function(){n.startMeasure()},n.onEndMeasure=function(){n.endMeasure()},n.state={measuring:!1,drawType:d.default.LINE_STRING},n}return(0,r.__extends)(t,e),t.prototype.startMeasure=function(){var e,t,n=this.props.activeMapName,r=this.state,a=r.drawType,o=r.measuring;if(n&&a&&!o){null===(t=(e=this.props).setActiveTool)||void 0===t||t.call(e,i.ActiveMapTool.None);var s=v.filter((function(e){return e.getMapName()===n}))[0];s&&(s.startMeasure(),this.setState({measuring:!0}))}},t.prototype.endMeasure=function(){var e=this.props.activeMapName,t=this.state.measuring;if(e&&t){var n=v.filter((function(t){return t.getMapName()===e}))[0];n&&(n.endMeasure(),this.setState({measuring:!1}))}},t.prototype.updateSegments=function(e,t,n){this.setState({activeType:e,segmentTotal:t,segments:n})},t.prototype.clearSegments=function(){this.setState({segments:void 0})},t.prototype.getCurrentDrawType=function(){return this.state.drawType},t.prototype.getLocale=function(){return this.props.locale||s.DEFAULT_LOCALE},t.prototype.componentDidMount=function(){var e,t=this;if(0==v.length){var n=this.props,r=n.mapNames,a=n.activeMapName,i=(0,o.getViewer)();if(i&&r&&r.length)for(var s=0,u=r;s<u.length;s++){var c=u[s],p=new l.MeasureContext(i,c,this);v.push(p),a==c&&(e=p)}}else{for(var d=0,m=v;d<m.length;d++)m[d].setParent(this);e=v.filter((function(e){return e.getMapName()===t.props.activeMapName}))[0]}e&&this.props.activeMapName&&e.activate(this.props.activeMapName,this)},t.prototype.componentWillUnmount=function(){var e=this.props.activeMapName;this.setState({measuring:!1});for(var t=0,n=v;t<n.length;t++)n[t].detachParent();if(e)for(var r=0,a=v;r<a.length;r++)a[r].deactivate(e)},t.prototype.componentDidUpdate=function(e){var t=this.props;if(e.activeMapName!=t.activeMapName){var n=v.filter((function(t){return t.getMapName()===e.activeMapName}))[0],r=v.filter((function(e){return e.getMapName()===t.activeMapName}))[0];n&&n.deactivate(e.activeMapName),r&&r.activate(t.activeMapName,this),this.setState({measuring:!1})}},t.prototype.render=function(){var e=this,t=this.state,n=t.measuring,r=t.drawType,i=this.props.measureUnits,o=this.getLocale();return a.createElement("div",{className:"component-measure"},a.createElement("form",{className:"form-inline"},a.createElement("label",{className:"bp3-label"},(0,s.tr)("MEASUREMENT_TYPE",o),a.createElement("div",{className:"bp3-select"},a.createElement(c.HTMLSelect,{value:r,onChange:this.onTypeChanged},a.createElement("option",{value:"LineString"},(0,s.tr)("MEASUREMENT_TYPE_LENGTH",o)),a.createElement("option",{value:"Polygon"},(0,s.tr)("MEASUREMENT_TYPE_AREA",o))))),a.createElement(c.ButtonGroup,null,a.createElement(c.Button,{type:"button",icon:"play",disabled:n,onClick:this.onStartMeasure},(0,s.tr)("MEASUREMENT_START",o)),a.createElement(c.Button,{type:"button",icon:"stop",disabled:!n,onClick:this.onEndMeasure},(0,s.tr)("MEASUREMENT_END",o)),a.createElement(c.Button,{type:"button",icon:"cross",onClick:this.onClearMeasurements},(0,s.tr)("MEASUREMENT_CLEAR",o))),function(){if(!0===e.state.measuring)return a.createElement("div",null,a.createElement(c.Callout,{intent:c.Intent.PRIMARY,title:(0,s.tr)("MEASURING",o)},(0,s.tr)("MEASURING_MESSAGE",o)),function(){if(e.state.segments)return a.createElement("table",{className:"bp3-html-table bp3-html-table-condensed"},a.createElement("thead",null,a.createElement("tr",null,a.createElement("th",null,(0,s.tr)("MEASURE_SEGMENT",o)),a.createElement("th",null,(0,s.tr)("MEASURE_LENGTH",o)))),a.createElement("tbody",null,e.state.segments.map((function(e){return a.createElement("tr",{key:"segment-"+e.segment},a.createElement("td",null,(0,s.tr)("MEASURE_SEGMENT_PART",o,{segment:e.segment})),i?a.createElement("td",null,(0,u.roundTo)(e.length,2)+" "+(0,E.toProjUnit)(i)):a.createElement("td",null,(0,s.tr)("UNIT_FMT_M",o,{value:(0,u.roundTo)(e.length,2)})))})),function(){if(e.state.segmentTotal&&e.state.activeType)return a.createElement("tr",null,"Area"==e.state.activeType?a.createElement(a.Fragment,null,a.createElement("td",null,a.createElement("strong",null,(0,s.tr)("MEASURE_TOTAL_AREA",o))),a.createElement("td",null,i?a.createElement("div",{dangerouslySetInnerHTML:{__html:(0,u.roundTo)(e.state.segmentTotal,4)+" "+(0,E.toProjUnit)(i)+" <sup>2</sup>"}}):a.createElement("div",{dangerouslySetInnerHTML:{__html:(0,s.tr)("UNIT_FMT_SQM",o,{value:""+(0,u.roundTo)(e.state.segmentTotal,4)})}}))):a.createElement(a.Fragment,null,a.createElement("td",null,a.createElement("strong",null,(0,s.tr)("MEASURE_TOTAL_LENGTH",o))),a.createElement("td",null,i?a.createElement("div",{dangerouslySetInnerHTML:{__html:(0,u.roundTo)(e.state.segmentTotal,4)+" "+(0,E.toProjUnit)(i)}}):a.createElement("div",{dangerouslySetInnerHTML:{__html:(0,s.tr)("UNIT_FMT_M",o,{value:""+(0,u.roundTo)(e.state.segmentTotal,4)})}}))))}()))}())}()))},t}(a.Component);t.MeasureContainer=function(e){var t,n=(0,p.useActiveMapName)(),i=(0,p.useViewerLocale)(),o=null===(t=(0,p.useAvailableMaps)())||void 0===t?void 0:t.map((function(e){return e.value})),s=(0,f.useReduxDispatch)(),l=(0,_.useActiveMapIsArbitraryCoordSys)(),u=(0,_.useActiveMapProjectionUnits)();return a.createElement(g,(0,r.__assign)({activeMapName:n,locale:i,mapNames:o,setActiveTool:function(e){return s((0,m.setActiveTool)(e))},measureUnits:l?u:void 0},e))}},32297:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ModalLauncher=void 0;var r=(0,n(70655).__importStar)(n(67294)),a=n(21854),i=n(37979),o=n(14967),s=n(48720),l=n(12694),u=n(85261),c=n(87755),p=n(51380),d=n(57270),m=n(61220);t.ModalLauncher=function(e){var t=(0,m.useReduxDispatch)(),n=function(e){return function(e){return t((0,d.hideModal)(e))}(e)},f=(0,m.useAppState)((function(e){return e.modal})),_=(0,p.useViewerLocale)();return f?r.createElement("div",null,Object.keys(f).map((function(e){var t=f[e];if((0,l.isModalComponentDisplayOptions)(t)||(0,l.isModalDisplayOptions)(t)&&(0,c.isComponentUri)(t.url)){var p=function(e){return(0,l.isModalComponentDisplayOptions)(e)?{name:e.component,props:{}}:(0,l.isModalDisplayOptions)(e)?(0,c.parseComponentUri)(e.url):void(0,u.assertNever)(e)}(t);if(p){var d=(0,i.getComponentFactory)(p.name);return r.createElement(a.RndModalDialog,{title:t.modal.title,x:500,y:80,locale:_,enableInteractionMask:!0,width:t.modal.size[0],height:t.modal.size[1],disableYOverflow:!t.modal.overflowYScroll,isOpen:!0,key:e,onClose:function(){return n(e)}},(function(e){return d?(0,l.isModalComponentDisplayOptions)(t)?d(t.componentProps):d(p.props):r.createElement(o.Error,{error:(0,s.tr)("ERR_UNREGISTERED_COMPONENT",_,{componentId:p})})}))}return r.createElement(o.Error,{error:(0,s.tr)("ERR_NO_COMPONENT_ID",_)})}if((0,l.isModalDisplayOptions)(t))return r.createElement(a.RndModalDialog,{title:t.modal.title,isOpen:!0,key:e,x:500,y:80,locale:_,enableInteractionMask:!1,width:t.modal.size[0],height:t.modal.size[1],onClose:function(){return n(e)}},(function(e){var n=e[0],a=e[1];return r.createElement("iframe",{frameBorder:0,src:t.url,width:n,height:a})}));(0,u.assertNever)(t)})),e.children):r.createElement("noscript",null)}},26850:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.MouseCoordinatesContainer=void 0;var r=n(70655),a=(0,r.__importStar)(n(67294)),i=n(29256),o=n(22667),s=(0,r.__importStar)(n(26414)),l=n(57600),u=n(51380),c=n(74399);t.MouseCoordinatesContainer=function(e){var t=e.style,n=(0,c.useActiveMapProjection)(),r=(0,u.useConfiguredCoordinateProjection)(),p=(0,u.useConfiguredCoordinateDecimals)(),d=(0,u.useConfiguredCoordinateFormat)(),m=(0,u.useCurrentMouseCoordinates)(),f=(0,u.useViewerLocale)();if(m){var _=s.get(null!=r?r:n),E=void 0;if(_)switch(E=_.getUnits()){case"degrees":E=(0,l.getUnitOfMeasure)(i.UnitOfMeasure.Degrees).abbreviation(f);break;case"pixels":case"tile-pixels":E=(0,l.getUnitOfMeasure)(i.UnitOfMeasure.Pixels).abbreviation(f);break;case"m":E=(0,l.getUnitOfMeasure)(i.UnitOfMeasure.Meters).abbreviation(f);break;case"ft":case"us-ft":E=(0,l.getUnitOfMeasure)(i.UnitOfMeasure.Feet).abbreviation(f)}var v=[m[0],m[1]];if(r&&n)try{v=s.transform(v,n,r)}catch(e){}return a.createElement(o.MouseCoordinates,{units:E,coords:v,style:t,decimals:p,format:d})}return a.createElement("div",null)}},56305:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.NavigatorContainer=void 0;var r=(0,n(70655).__importStar)(n(67294)),a=n(20360),i=n(95348),o=n(51380),s=n(81876),l=n(74399),u=n(61220);t.NavigatorContainer=function(e){var t=e.style,n=(0,u.useReduxDispatch)(),c=(0,o.useViewerLocale)(),p=(0,l.useActiveMapFiniteScales)(),d=(0,o.useActiveMapView)(),m=(0,o.useViewerBusyCount)(),f=(0,o.useActiveMapName)(),_=function(e,t){return n((0,s.invokeCommand)(e,t))};return d?r.createElement(a.Navigator,{style:t,scale:d.scale,finiteScaleList:p,locale:c,busy:m>0,onRequestZoomToScale:function(e){f&&function(e,t){n((0,s.setScale)(e,t))}(f,e)},onPan:function(e){var t;switch(e){case a.PanDirection.East:t=(0,i.getCommand)(i.DefaultCommands.PanRight);break;case a.PanDirection.West:t=(0,i.getCommand)(i.DefaultCommands.PanLeft);break;case a.PanDirection.North:t=(0,i.getCommand)(i.DefaultCommands.PanUp);break;case a.PanDirection.South:t=(0,i.getCommand)(i.DefaultCommands.PanDown)}t&&_(t)},onZoom:function(e){var t;switch(e){case a.ZoomDirection.In:t=(0,i.getCommand)(i.DefaultCommands.ZoomIn);break;case a.ZoomDirection.Out:t=(0,i.getCommand)(i.DefaultCommands.ZoomOut)}t&&_(t)}}):r.createElement("div",null)}},48906:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.MapViewer=void 0;var r=n(70655),a=(0,r.__importStar)(n(67294)),i=(0,r.__importStar)(n(73935)),o=n(4275),s=n(44839),l=n(11497),u=n(29256),c=n(61220),p=n(27058),d=n(1212),m=n(48720);n(89524);var f=n(7621),_=n(51380),E=n(81243),v=n(95601),g=function(e){function t(t){var n=e.call(this,t)||this;return n.selectCanDragPan=function(){return n.props.selectCanDragPan},n.isContextMenuOpen=function(){return n.props.isContextMenuOpen},n.setDigitizingType=function(e){return n.setState({digitizingType:e})},n.onBeginDigitization=function(e){},n.onHideContextMenu=function(){var e,t;return null===(t=(e=n.props).onHideContextMenu)||void 0===t?void 0:t.call(e)},n.onOpenTooltipLink=function(e){},n.onDispatch=function(e){return n.props.onDispatch(e)},n.addSubscribers=function(e){var t=(0,r.__spreadArray)((0,r.__spreadArray)([],n.state.subscribers,!0),e,!0);return n.setState({subscribers:t}),e.map((function(e){return e.name}))},n.removeSubscribers=function(e){var t=n.state.subscribers,r=t.length,a=t.filter((function(t){return e.indexOf(t.name)<0}));return n.setState({subscribers:t}),a.length<r},n.onContextMenu=function(e){var t,r;n.mounted&&(n.props.context.isMouseOverTooltip()||(e.preventDefault(),null===(r=(t=n.props).onContextMenu)||void 0===r||r.call(t,[e.clientX,e.clientY])))},n.onKeyDown=function(e){n.mounted&&(n.props.context.onKeyDown(e),n.setState({shiftKey:e.shiftKey}))},n.onKeyUp=function(e){n.mounted&&n.setState({shiftKey:e.shiftKey})},n.onMouseDown=function(e){n.mounted&&(n.state.isMouseDown||n.setState({isMouseDown:!0}))},n.onMouseUp=function(e){n.mounted&&n.state.isMouseDown&&n.setState({isMouseDown:!1})},n.mounted=!1,n.state={shiftKey:!1,isMouseDown:!1,digitizingType:void 0,loaded:0,loading:0,subscribers:[]},n}return(0,r.__extends)(t,e),t.prototype.addImageLoading=function(){var e=(this.state.loading||0)+1;this.setState({loading:e}),this.props.context.incrementBusyWorker()},t.prototype.getSubscribers=function(){return this.state.subscribers.map((function(e){return e.name}))},t.prototype.addImageLoaded=function(){var e=this.state,t=(e.loaded||0)+1;e.loading===t?this.setState({loaded:0,loading:0}):this.setState({loaded:t}),this.props.context.decrementBusyWorker()},t.prototype.componentDidMount=function(){document.addEventListener("keydown",this.onKeyDown),document.addEventListener("keyup",this.onKeyUp);var e=i.findDOMNode(this);this.props.context.attachToComponent(e,this),this.mounted=!0},t.prototype.componentWillUnmount=function(){this.props.context.detachFromComponent(),this.mounted=!1},t.prototype.render=function(){var e=this.props,t=e.context,n=e.backgroundColor,i=this.state.isMouseDown,o=t.getActiveTool(),c={width:"100%",height:"100%"};if(t.isDigitizing())switch(this.state.digitizingType){case"Point":c.cursor="url("+s.CURSOR_DIGITIZE_POINT+"), auto";break;case"Line":c.cursor="url("+s.CURSOR_DIGITIZE_LINE+"), auto";break;case"LineString":c.cursor="url("+s.CURSOR_DIGITIZE_LINESTRING+"), auto";break;case"Rectangle":c.cursor="url("+s.CURSOR_DIGITIZE_RECT+"), auto";break;case"Polygon":c.cursor="url("+s.CURSOR_DIGITIZE_POLYGON+"), auto";break;case"Circle":c.cursor="url("+s.CURSOR_DIGITIZE_CIRCLE+"), auto"}else switch(o){case u.ActiveMapTool.Pan:c.cursor=i?"url("+s.CURSOR_GRABBING+"), auto":"url("+s.CURSOR_GRAB+"), auto";break;case u.ActiveMapTool.Zoom:c.cursor="url("+s.CURSOR_ZOOM_IN+"), auto"}n&&(c.backgroundColor=n);var p=this.state,d=p.loading,m=p.loaded,_=p.subscribers;return a.createElement("div",{className:"map-viewer-component",style:c,onContextMenu:this.onContextMenu,onMouseDown:this.onMouseDown,onMouseUp:this.onMouseUp},a.createElement(l.MapLoadIndicator,{loaded:m||0,loading:d||0,position:this.props.loadIndicatorPosition,color:this.props.loadIndicatorColor}),_.map((function(e,t){return a.createElement(f.Subscriber,(0,r.__assign)({key:"subscriber-"+t+"-"+e.name},e))})),this.props.children)},t}(a.Component);t.MapViewer=function(e){var t,n=e.children,r=(0,c.useMapProviderContext)(),i=a.useRef(null),s=(0,_.useConfiguredLoadIndicatorPositioning)(),l=(0,_.useConfiguredLoadIndicatorColor)(),u=(0,c.useReduxDispatch)(),f=r.getHookFunction(),y=(0,_.useActiveMapClientSelectionSet)(),h=(0,_.useCustomAppSettings)(),S=f(),T=S.mapName,L=S.layers,I=S.initialExternalLayers,A=S.bgColor,C=S.locale,b=(0,_.useViewerFlyouts)();a.useEffect((function(){var e;y||null===(e=r.getSelectedFeatures())||void 0===e||e.clear()}),[y]);var N,O,M=1==(null===(t=b[v.WEBLAYOUT_CONTEXTMENU])||void 0===t?void 0:t.open),P=(0,_.useViewerSelectCanDragPan)(),R=function(e){return u((0,E.openContextMenu)({x:e[0],y:e[1]}))},D=null;return(0,d.isMapGuideProviderState)(S)&&(N=S.agentUri,O=S.agentKind,D=S.selection),r.setToasterRef(i),r.setProviderState(S),(0,o.useViewerSideEffects)(r,null!=h?h:{},S.isReady,T,L,I,N,O,D),S.isReady?a.createElement(a.Fragment,null,a.createElement(p.Toaster,{usePortal:!1,position:p.Position.TOP,ref:i}),a.createElement(g,{context:r,onDispatch:u,backgroundColor:A,onContextMenu:function(e){return null==R?void 0:R(e)},onHideContextMenu:function(){return u((0,E.closeContextMenu)())},isContextMenuOpen:M,selectCanDragPan:P,loadIndicatorPosition:s,loadIndicatorColor:l},n)):a.createElement("div",null,(0,m.tr)("LOADING_MSG",C))}},75313:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.QuickPlotContainer=void 0;var r=(0,n(70655).__importStar)(n(67294)),a=n(93762),i=n(48720),o=n(48961),s=n(27058),l=n(51380),u=n(81876),c=n(36645),p=n(74399),d=n(61220);function m(e,t,n,r){var a,i=n.split(",");if(a="P"===r?{w:parseFloat(i[0]),h:parseFloat(i[1])}:{w:parseFloat(i[1]),h:parseFloat(i[0])},!t){var o,s=a.w/a.h,l=e.getSize();if(o="P"===r?{w:l[1],h:l[0]}:{w:l[0],h:l[1]}){var u=o.w/o.h;s>u?a.w=a.h*u:a.h=a.w/u}}var c=25.4,p=12.7,d=12.7,m=12.7;return a.h=a.h-c-p,a.w=a.w-d-m,a}var f=[];function _(e,t,n){var r;if(0==f.length){if(t.length)for(var a=0,i=t;a<i.length;a++){var s=i[a],l=new o.MapCapturerContext(e,s);f.push(l),n==s&&(r=l)}}else r=f.filter((function(e){return e.getMapName()===n}))[0];return r}t.QuickPlotContainer=function(){var e,t=r.useState(""),n=t[0],o=t[1],f=r.useState(""),E=f[0],v=f[1],g=r.useState(!1),y=g[0],h=g[1],S=r.useState(!1),T=S[0],L=S[1],I=r.useState(!1),A=I[0],C=I[1],b=r.useState(!1),N=b[0],O=b[1],M=r.useState(!1),P=M[0],R=M[1],D=r.useState(!1),w=D[0],F=D[1],U=r.useState("P"),V=U[0],x=U[1],k=r.useState("210.0,297.0,A4"),B=k[0],G=k[1],Y=r.useState("5000"),z=Y[0],W=Y[1],j=r.useState("96"),H=j[0],K=j[1],Z=r.useState(0),X=Z[0],q=Z[1],Q=r.useState(""),J=Q[0],$=Q[1],ee=r.useState(""),te=ee[0],ne=ee[1],re=(0,l.useViewerLocale)(),ae=(0,l.useActiveMapName)(),ie=null===(e=(0,l.useAvailableMaps)())||void 0===e?void 0:e.map((function(e){return e.value})),oe=(0,p.useActiveMapState)(),se=(0,l.useActiveMapView)(),le=(0,l.useActiveMapExternalBaseLayers)(!1),ue=(0,d.useReduxDispatch)(),ce=function(e){return ue((0,u.setViewRotation)(e))},pe=function(e){return ue((0,u.setViewRotationEnabled)(e))},de=function(e,t){$(e),ne(t)};r.useEffect((function(){return function(){var e=(0,a.getViewer)();if(e&&ie)for(var t=0,n=ie;t<n.length;t++){var r=n[t],i=_(e,ie,r);i&&((0,c.debug)("De-activating map capturer for: "+r),i.deactivate())}}}),[]);var me=(0,l.usePrevious)(w);r.useEffect((function(){if(ae&&ie&&(w!=me&&function(e,t,n,r,o,s,l,u,c,p,d){var f=r,E=(0,a.getViewer)();if(E&&t){var v=_(E,t,n);if(v)if(f){var g=m(E,r,o,s),y={updateBoxCoords:c};v.activate(y,g,parseFloat(l),u),p(!1),d(0),E.toastPrimary("info-sign",(0,i.tr)("QUICKPLOT_BOX_INFO",e))}else v.deactivate(),p(!0)}}(re,ie,ae,w,B,V,z,X,de,pe,ce),w)){var e=(0,a.getViewer)();if(e){var t=_(e,ie,ae);if(t){var n=m(e,w,B,V);(0,c.debug)("Updating map capturer for: "+ae),t.updateBox(n,parseFloat(z),X)}}}}),[ie,ae,w,z,B,V,X,re]);var fe=(0,a.getViewer)();if(!fe||!oe||!se)return r.createElement("noscript",null);var _e=!1;le&&(_e=le.length>0);var Ee,ve,ge=te,ye=J;if(!w){var he=fe.getCurrentExtent();ge=ye=he[0]+", "+he[1]+", "+he[2]+", "+he[1]+", "+he[2]+", "+he[3]+", "+he[0]+", "+he[3]+", "+he[0]+", "+he[1]}var Se=B.split(",");Ee="L"===V?(ve=Se[1]+","+Se[0])+","+Se[2]:(ve=Se[0]+","+Se[1])+","+Se[2];var Te=(0,a.getFusionRoot)()+"/widgets/QuickPlot/PlotAsPDF.php";return r.createElement("div",{className:"component-quick-plot"},r.createElement("form",{id:"Form1",name:"Form1",target:"_blank",method:"post",action:Te},r.createElement("input",{type:"hidden",id:"printId",name:"printId",value:""+1e3*Math.random()}),r.createElement("div",{className:"Title FixWidth"},(0,i.tr)("QUICKPLOT_HEADER",re)),r.createElement("label",{className:"bp3-label"},(0,i.tr)("QUICKPLOT_TITLE",re),r.createElement("input",{type:"text",className:"bp3-input bp3-fill",dir:"auto",name:"{field:title}",id:"title",maxLength:100,value:n,onChange:function(e){o(e.target.value)}})),r.createElement("label",{className:"bp3-label"},(0,i.tr)("QUICKPLOT_SUBTITLE",re),r.createElement("input",{type:"text",className:"bp3-input bp3-fill",dir:"auto",name:"{field:sub_title}",id:"subtitle",maxLength:100,value:E,onChange:function(e){v(e.target.value)}})),r.createElement("label",{className:"bp3-label"},(0,i.tr)("QUICKPLOT_PAPER_SIZE",re),r.createElement("div",{className:"bp3-select bp3-fill"},r.createElement(s.HTMLSelect,{className:"FixWidth",id:"paperSizeSelect",name:"paperSizeSelect",value:B,onChange:function(e){G(e.target.value)}},r.createElement("option",{value:"210.0,297.0,A4"},"A4 (210x297 mm; 8.27x11.69 In) "),r.createElement("option",{value:"297.0,420.0,A3"},"A3 (297x420 mm; 11.69x16.54 In) "),r.createElement("option",{value:"148.0,210.0,A5"},"A5 (148x210 mm; 5.83x8.27 in) "),r.createElement("option",{value:"216.0,279.0,Letter"},"Letter (216x279 mm; 8.50x11.00 In) "),r.createElement("option",{value:"216.0,356.0,Legal"},"Legal (216x356 mm; 8.50x14.00 In) ")))),r.createElement("label",{className:"bp3-label"},(0,i.tr)("QUICKPLOT_ORIENTATION",re),r.createElement("div",{className:"bp3-select bp3-fill"},r.createElement(s.HTMLSelect,{className:"FixWidth",id:"orientation",name:"orientation",value:V,onChange:function(e){x(e.target.value)}},r.createElement("option",{value:"P"},(0,i.tr)("QUICKPLOT_ORIENTATION_P",re)),r.createElement("option",{value:"L"},(0,i.tr)("QUICKPLOT_ORIENTATION_L",re))))),r.createElement("input",{type:"hidden",id:"paperSize",name:"paperSize",value:Ee}),r.createElement("input",{type:"hidden",id:"printSize",name:"printSize",value:ve}),r.createElement("fieldset",null,r.createElement("legend",null,(0,i.tr)("QUICKPLOT_SHOWELEMENTS",re)),r.createElement("label",{className:"bp3-control bp3-checkbox"},r.createElement("input",{type:"checkbox",id:"ShowLegendCheckBox",name:"ShowLegend",checked:y,onChange:function(){h(!y)}}),r.createElement("span",{className:"bp3-control-indicator"}),(0,i.tr)("QUICKPLOT_SHOWLEGEND",re)),r.createElement("label",{className:"bp3-control bp3-checkbox"},r.createElement("input",{type:"checkbox",id:"ShowNorthArrowCheckBox",name:"ShowNorthArrow",checked:T,onChange:function(){L(!T)}}),r.createElement("span",{className:"bp3-control-indicator"}),(0,i.tr)("QUICKPLOT_SHOWNORTHARROW",re)),r.createElement("label",{className:"bp3-control bp3-checkbox"},r.createElement("input",{type:"checkbox",id:"ShowCoordinatesCheckBox",name:"ShowCoordinates",checked:A,onChange:function(){C(!A)}}),r.createElement("span",{className:"bp3-control-indicator"}),(0,i.tr)("QUICKPLOT_SHOWCOORDINTES",re)),r.createElement("label",{className:"bp3-control bp3-checkbox"},r.createElement("input",{type:"checkbox",id:"ShowScaleBarCheckBox",name:"ShowScaleBar",checked:N,onChange:function(){O(!N)}}),r.createElement("span",{className:"bp3-control-indicator"}),(0,i.tr)("QUICKPLOT_SHOWSCALEBAR",re)),r.createElement("label",{className:"bp3-control bp3-checkbox"},r.createElement("input",{type:"checkbox",id:"ShowDisclaimerCheckBox",name:"ShowDisclaimer",checked:P,onChange:function(){R(!P)}}),r.createElement("span",{className:"bp3-control-indicator"}),(0,i.tr)("QUICKPLOT_SHOWDISCLAIMER",re))),r.createElement("div",{className:"HPlaceholder5px"}),r.createElement("div",null,r.createElement("label",{className:"bp3-control bp3-checkbox"},r.createElement("input",{type:"checkbox",id:"AdvancedOptionsCheckBox",onChange:function(){F(!w)}}),r.createElement("span",{className:"bp3-control-indicator"}),(0,i.tr)("QUICKPLOT_ADVANCED_OPTIONS",re))),w?r.createElement("div",null,r.createElement("label",{className:"bp3-label"},(0,i.tr)("QUICKPLOT_SCALING",re),r.createElement("div",{className:"bp3-select bp3-fill"},r.createElement(s.HTMLSelect,{className:"FixWidth",id:"scaleDenominator",name:"scaleDenominator",value:z,onChange:function(e){W(e.target.value)}},r.createElement("option",{value:"500"},"1: 500"),r.createElement("option",{value:"1000"},"1: 1000"),r.createElement("option",{value:"2500"},"1: 2500"),r.createElement("option",{value:"5000"},"1: 5000")))),r.createElement("label",{className:"bp3-label"},(0,i.tr)("QUICKPLOT_DPI",re),r.createElement("div",{className:"bp3-select bp3-fill"},r.createElement(s.HTMLSelect,{className:"FixWidth",id:"dpi",name:"dpi",value:H,onChange:function(e){K(e.target.value)}},r.createElement("option",{value:"96"},"96"),r.createElement("option",{value:"150"},"150"),r.createElement("option",{value:"300"},"300"),r.createElement("option",{value:"600"},"600")))),r.createElement("label",{className:"bp3-label noselect"},(0,i.tr)("QUICKPLOT_BOX_ROTATION",re),r.createElement("div",{style:{paddingLeft:16,paddingRight:16}},r.createElement(s.Slider,{min:0,max:360,labelStepSize:90,stepSize:1,value:X,onChange:function(e){q(e)}})))):r.createElement("div",null,r.createElement("input",{type:"hidden",id:"scaleDenominator",name:"scaleDenominator",value:""+se.scale}),r.createElement("input",{type:"hidden",id:"dpi",name:"dpi",value:H})),r.createElement("div",{className:"HPlaceholder5px"}),function(){if(_e)return r.createElement(s.Callout,{intent:s.Intent.PRIMARY,icon:"info-sign"},(0,i.tr)("QUICKPLOT_COMMERCIAL_LAYER_WARNING",re))}(),r.createElement("div",{className:"ButtonContainer FixWidth"},r.createElement(s.Button,{type:"submit",intent:s.Intent.PRIMARY,icon:"print",onClick:function(){}},(0,i.tr)("QUICKPLOT_GENERATE",re))),r.createElement("input",{type:"hidden",id:"margin",name:"margin"}),r.createElement("input",{type:"hidden",id:"normalizedBox",name:"normalizedBox",value:ge}),r.createElement("input",{type:"hidden",id:"rotation",name:"rotation",value:-(X||0)}),r.createElement("input",{type:"hidden",id:"sessionId",name:"sessionId",value:oe.SessionId}),r.createElement("input",{type:"hidden",id:"mapName",name:"mapName",value:oe.Name}),r.createElement("input",{type:"hidden",id:"box",name:"box",value:ye}),r.createElement("input",{type:"hidden",id:"legalNotice",name:"legalNotice"})))}},90225:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ScaleDisplayContainer=void 0;var r=(0,n(70655).__importStar)(n(67294)),a=n(63266),i=n(51380),o=n(81876),s=n(74399),l=n(61220);t.ScaleDisplayContainer=function(e){var t=e.style,n=(0,l.useReduxDispatch)(),u=(0,i.useViewerLocale)(),c=(0,i.useActiveMapName)(),p=(0,i.useActiveMapView)(),d=(0,s.useActiveMapFiniteScales)();return p?r.createElement(a.ScaleDisplay,{onScaleChanged:function(e){c&&function(e,t){n((0,o.setScale)(e,t))}(c,e)},view:p,style:t,finiteScales:d,locale:u}):r.createElement("noscript",null)}},61623:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SelectedFeatureCountContainer=void 0;var r=(0,n(70655).__importStar)(n(67294)),a=n(70907),i=n(36287),o=n(51380);t.SelectedFeatureCountContainer=function(e){var t=e.style,n=(0,o.useActiveMapSelectionSet)(),s=(0,o.useActiveMapClientSelectionSet)(),l=(0,o.useViewerLocale)(),u=(0,a.countSelection)(null==n?void 0:n.FeatureSet,s);return u?r.createElement(i.SelectedFeatureCount,{locale:l,style:t,summary:u}):r.createElement("div",null)}},12017:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SelectionPanelContainer=void 0;var r=(0,n(70655).__importStar)(n(67294)),a=n(80974),i=n(93762),o=n(48720),s=n(27058),l=n(82422),u=n(51380),c=n(81876),p=n(74399),d=n(61220),m=n(87308);t.SelectionPanelContainer=function(e){var t=e.maxHeight,n=e.selectedFeatureRenderer,f=(0,u.useViewerLocale)(),_=(0,p.useActiveMapState)(),E=(0,u.useActiveMapSelectionSet)(),v=(0,u.useActiveMapClientSelectionSet)(),g=(0,d.useReduxDispatch)(),y=(0,u.useActiveMapName)(),h=r.useContext(l.AppContext),S=new m.CompositeSelection(null==E?void 0:E.SelectedFeatures,v);return null!=(null==E?void 0:E.SelectedFeatures)||v?r.createElement(a.SelectionPanel,{locale:f,onResolveLayerLabel:function(e,t){var n,r,a,i=null===(a=null===(r=null===(n=null==_?void 0:_.Layer)||void 0===n?void 0:n.filter)||void 0===r?void 0:r.call(n,(function(t){return t.ObjectId==e})))||void 0===a?void 0:a[0];if(i)return i.LegendLabel},allowHtmlValues:h.allowHtmlValuesInSelection(),cleanHTML:h.getHTMLCleaner(),selection:S,onRequestZoomToFeature:function(e){if(e.Bounds){var t=e.Bounds.split(" ").map((function(e){return parseFloat(e)})),n=(0,i.getViewer)();n&&(r=n.getViewForExtent(t),g((0,c.setCurrentView)(r)))}var r},onShowSelectedFeature:function(e,t){y&&function(e,t,n){g((0,c.showSelectedFeature)(e,t,n))}(y,e,t)},selectedFeatureRenderer:n,maxHeight:t}):r.createElement(s.Callout,{intent:s.Intent.PRIMARY,icon:"info-sign"},r.createElement("p",{className:"selection-panel-no-selection"},(0,o.tr)("NO_SELECTED_FEATURES",f)))}},13840:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ShareLinkToViewContainer=void 0;var r=n(70655),a=(0,r.__importStar)(n(67294)),i=n(48720),o=n(93762),s=(0,r.__importDefault)(n(74855)),l=n(87755),u=n(27058),c=n(51380),p=n(74399);function d(){}t.ShareLinkToViewContainer=function(){var e=a.useState(!1),t=e[0],n=e[1],r=(0,c.useViewerLocale)(),m=(0,p.useActiveMapState)(),f=(0,l.parseUrl)(""+window.location);t||delete f.query.session;var _=f.url+"?"+(0,l.stringifyQuery)(f.query);return a.createElement("div",null,a.createElement(u.TextArea,{fill:!0,rows:16,readOnly:!0,value:_,onChange:d}),a.createElement("br",null),a.createElement("div",{style:{padding:15}},m&&a.createElement(u.Checkbox,{checked:t,label:(0,i.tr)("SHARE_LINK_INCLUDE_SESSION",r),onChange:function(){return n(!t)}}),a.createElement(s.default,{text:_,onCopy:function(){var e=(0,o.getViewer)();e&&e.toastSuccess("clipboard",(0,i.tr)("SHARE_LINK_COPIED",r))}},a.createElement(u.Button,{intent:u.Intent.PRIMARY},(0,i.tr)("SHARE_LINK_COPY_CLIPBOARD",r)))))}},7621:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Subscriber=void 0;var r=(0,n(70655).__importStar)(n(67294)),a=n(61220);t.Subscriber=function(e){var t=(0,a.useAppState)(e.appStateSelector,e.appStateEqualityFn);return r.useEffect((function(){e.onNewState(t)}),[t]),r.createElement("noscript",{"data-subscriber-name":e.name})}},55028:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TaskPaneContainer=void 0;var r=n(70655),a=(0,r.__importStar)(n(67294)),i=n(98415),o=n(87755),s=n(48720),l=n(27058),u=n(51380),c=n(81876),p=n(93903),d=n(81243),m=n(61220),f=function(e){function t(t){var n=e.call(this,t)||this;n.onCloseFlyout=function(e){var t,r;return null===(r=(t=n.props).closeFlyout)||void 0===r?void 0:r.call(t,e)},n.onOpenFlyout=function(e,t){var r,a;return null===(a=(r=n.props).openFlyout)||void 0===a?void 0:a.call(r,e,t)},n.onUrlLoaded=function(e){var t=n.props,r=t.navigationStack,a=t.navIndex,i=t.pushUrl,s=r[a];(0,o.areUrlsSame)(s,e)||null==i||i(e)},n.canGoHome=function(){var e,t,r,a,i,s=n.props,l=s.initialUrl,u=s.navigationStack,c=s.navIndex,p=s.map;if(l){var d=(null===(e=null==p?void 0:p.mapguide)||void 0===e?void 0:e.runtimeMap)&&l?(0,o.ensureParameters)(l,null===(r=null===(t=null==p?void 0:p.mapguide)||void 0===t?void 0:t.runtimeMap)||void 0===r?void 0:r.Name,null===(i=null===(a=null==p?void 0:p.mapguide)||void 0===a?void 0:a.runtimeMap)||void 0===i?void 0:i.SessionId,n.getLocale()):l;return u.length>0&&!(0,o.areUrlsSame)(u[c],d)}return!1},n.canGoBack=function(){return n.props.navIndex>0},n.canGoForward=function(){var e=n.props,t=e.navigationStack;return e.navIndex<t.length-1};var r=n.getLocale();return n.homeAction={bpIconName:"home",tooltip:(0,s.tr)("TT_GO_HOME",r),enabled:n.canGoHome,invoke:function(){var e,t;return null===(t=(e=n.props).goHome)||void 0===t?void 0:t.call(e)}},n.backAction={bpIconName:"arrow-left",tooltip:(0,s.tr)("TT_GO_BACK",r),enabled:n.canGoBack,invoke:function(){var e,t;return null===(t=(e=n.props).goBack)||void 0===t?void 0:t.call(e)}},n.forwardAction={bpIconName:"arrow-right",tooltip:(0,s.tr)("TT_GO_FORWARD",r),enabled:n.canGoForward,invoke:function(){var e,t;return null===(t=(e=n.props).goForward)||void 0===t?void 0:t.call(e)}},n}return(0,r.__extends)(t,e),t.prototype.getLocale=function(){return this.props.locale},t.prototype.render=function(){var e,t,n,r,o=this,u=this.props,c=u.navigationStack,p=u.navIndex,d=u.hasTaskBar,m=u.lastUrlPushed,f=u.map,_=u.maxHeight,E=u.flyouts,v=u.isResizing;if(c[p]){var g={};if(E)for(var y=0,h=Object.keys(E);y<h.length;y++){var S=h[y];g[S]=!!E[S].open}return a.createElement("div",null,a.createElement(i.TaskPane,{currentUrl:c[p],showTaskBar:d,lastUrlPushed:m,homeAction:this.homeAction,backAction:this.backAction,onOpenFlyout:this.onOpenFlyout,onCloseFlyout:this.onCloseFlyout,forwardAction:this.forwardAction,session:null===(t=null===(e=null==f?void 0:f.mapguide)||void 0===e?void 0:e.runtimeMap)||void 0===t?void 0:t.SessionId,mapName:null===(r=null===(n=null==f?void 0:f.mapguide)||void 0===n?void 0:n.runtimeMap)||void 0===r?void 0:r.Name,onUrlLoaded:this.onUrlLoaded,maxHeight:_,flyoutStates:g,locale:this.getLocale()}),function(){if(1==v)return a.createElement("div",{style:{position:"absolute",left:0,right:0,top:0,bottom:0,backgroundColor:i.TASK_PANE_OVERLAY_BGCOLOR}},a.createElement(l.NonIdealState,{icon:"arrows-horizontal",description:(0,s.tr)("TASK_PANE_RESIZING",o.getLocale())}))}())}return a.createElement("noscript",null)},t}(a.Component);t.TaskPaneContainer=function(e){var t=(0,u.useViewerLocale)(),n=(0,u.useActiveMapBranch)(),i=(0,u.useViewerFlyouts)(),o=(0,u.useTaskPaneInitialUrl)(),s=(0,u.useTaskPaneLastUrlPushed)(),l=(0,u.useTaskPaneNavigationIndex)(),_=(0,u.useTaskPaneNavigationStack)(),E=(0,u.useConfiguredCapabilities)().hasTaskBar,v=(0,m.useReduxDispatch)();return a.createElement(f,(0,r.__assign)({map:n,locale:t,flyouts:i,initialUrl:o,lastUrlPushed:s,navIndex:l,navigationStack:_,invokeCommand:function(e,t){return v((0,c.invokeCommand)(e,t))},hasTaskBar:E,goHome:function(){return v((0,p.goHome)())},goForward:function(){return v((0,p.goForward)())},goBack:function(){return v((0,p.goBack)())},pushUrl:function(e,t){return v((0,p.pushUrl)(e,t))},openFlyout:function(e,t){return v((0,d.openFlyout)(e,t))},closeFlyout:function(e){return v((0,d.closeFlyout)(e))}},e))}},64738:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ToolbarContainer=void 0;var r=n(70655),a=(0,r.__importStar)(n(67294)),i=n(95348),o=n(70102),s=n(55865),l=n(51380),u=n(81876),c=n(81243),p=n(61220);t.ToolbarContainer=function(e){var t=e.containerClass,n=e.containerStyle,d=e.vertical,m=e.hideVerticalLabels,f=(0,p.useReduxDispatch)(),_=(0,p.useAppState)((function(e){return e.toolbar.flyouts})),E=(0,p.useAppState)((function(t){return t.toolbar.toolbars[e.id]})),v=(0,l.useReducedToolbarAppState)(),g=function(e,t){return f((0,u.invokeCommand)(e,t))},y=function(e,t){return f((0,c.openFlyout)(e,t))},h=function(e){return f((0,c.closeFlyout)(e))},S=function(e,t,n,r){return f((0,c.openComponent)(e,t,n,r))},T=function(e){return f((0,c.closeComponent)(e))},L={};if(_)for(var I=0,A=Object.keys(_);I<A.length;I++){var C=A[I];L[C]=!!_[C].open}var b=(0,r.__assign)({},n||{});if(E&&E.items&&g){!0===d?b.width=o.DEFAULT_TOOLBAR_SIZE:(b.height=o.DEFAULT_TOOLBAR_SIZE,b.overflow="auto");var N=E.items.map((function(e){return(0,i.mapToolbarReference)(e,v,g)})),O=(0,s.processMenuItems)(N);return a.createElement(o.Toolbar,{vertical:d,hideVerticalLabels:m,childItems:O,containerClass:t,containerStyle:b,flyoutStates:L,onOpenComponent:function(e,t,n,r){return null==S?void 0:S(e,t,n,r)},onCloseComponent:function(e){return null==T?void 0:T(e)},onOpenFlyout:function(e,t){return null==y?void 0:y(e,t)},onCloseFlyout:function(e){return null==h?void 0:h(e)}})}return a.createElement("div",null)}},15915:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getStateFromUrl=t.updateUrl=void 0;var r=n(70655),a=n(87755),i="_";t.updateUrl=function(e,t){var n=(0,r.__assign)({},t);for(var o in e){var s=e[o];switch(o){case"ft":n.ft=1==s?1:0;break;case"sl":n.sl=null==s?void 0:s.join(i);break;case"hl":n.hl=null==s?void 0:s.join(i);break;case"sg":n.sg=null==s?void 0:s.join(i);break;case"hg":n.hg=null==s?void 0:s.join(i);break;default:n[o]=s}}var l=(0,a.appendParameters)(window.location.href,n,!0,!1);window.history.replaceState(n,"",l)},t.getStateFromUrl=function(e){var t=(0,a.parseUrlParameters)(window.location.href),n={},r=null!=e?e:[];for(var o in t)if(!(r.indexOf(o)>=0)){var s=t[o];switch(o){case"ft":var l=parseInt(s,10);isNaN(l)||(n.ft=0!=l);break;case"x":l=parseFloat(s),isNaN(l)||(n.x=l);break;case"y":l=parseFloat(s),isNaN(l)||(n.y=l);break;case"scale":l=parseFloat(s),isNaN(l)||(n.scale=l);break;case"sl":n.sl=null==s?void 0:s.split(i);break;case"hl":n.hl=null==s?void 0:s.split(i);break;case"sg":n.sg=null==s?void 0:s.split(i);break;case"hg":n.hg=null==s?void 0:s.split(i);break;default:n[o]=s}}return n}},44722:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ViewSizeContainer=void 0;var r=(0,n(70655).__importStar)(n(67294)),a=n(29256),i=n(31546),o=n(51380),s=n(74399);t.ViewSizeContainer=function(){var e=(0,o.useActiveMapWidth)(),t=(0,o.useActiveMapHeight)(),n=(0,o.useViewerSizeUnits)(),l=(0,s.useActiveMapMetersPerUnit)(),u=(0,o.useActiveMapView)(),c=(0,o.useViewerLocale)();return e&&t&&l&&u?r.createElement(i.ViewSize,{locale:c,width:e,height:t,view:u,metersPerUnit:l,units:n||a.UnitOfMeasure.Unknown}):r.createElement("noscript",null)}},25386:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ViewerOptions=void 0;var r=(0,n(70655).__importStar)(n(67294)),a=n(48720),i=n(57600),o=n(27058),s=n(51380),l=n(81876),u=n(74399),c=n(95601),p=n(61220);t.ViewerOptions=function(){var e=(0,s.useActiveMapExternalBaseLayers)(!1),t=(0,s.useActiveMapName)(),n=(0,u.useActiveMapLayerTransparency)(),d=(0,s.useViewerFeatureTooltipsEnabled)(),m=(0,s.useViewerSelectCanDragPan)(),f=(0,s.useConfiguredManualFeatureTooltips)(),_=(0,s.useViewerSizeUnits)(),E=(0,s.useViewerIsStateless)(),v=(0,u.useActiveMapState)(),g=(0,s.useViewerLocale)(),y=(0,p.useReduxDispatch)(),h=function(e,t,n){return y((0,l.setLayerTransparency)(e,t,n))},S=function(e,t,n){e&&(null==h||h(e,t,n))},T=function(e){S(t,c.LAYER_ID_BASE,e)},L=function(e){var t;t=e.target.checked,y((0,l.setManualFeatureTooltipsEnabled)(t))},I=(0,i.getUnits)(),A=1,C=1,b=1;n&&(c.LAYER_ID_BASE in n&&(A=n[c.LAYER_ID_BASE]),c.LAYER_ID_MG_BASE in n&&(C=n[c.LAYER_ID_MG_BASE]),c.LAYER_ID_MG_SEL_OVERLAY in n&&(b=n[c.LAYER_ID_MG_SEL_OVERLAY]));var N=E;return v||(N=!0),r.createElement("div",{className:"component-viewer-options"},r.createElement("h5",null,(0,a.tr)("VIEWER_OPTIONS",g)),r.createElement("hr",null),!N&&r.createElement("label",{className:"bp3-control bp3-switch"},r.createElement("input",{type:"checkbox",checked:d,onChange:function(e){var t;t=e.target.checked,y((0,l.setFeatureTooltipsEnabled)(t))}}),r.createElement("span",{className:"bp3-control-indicator"}),(0,a.tr)("FEATURE_TOOLTIPS",g)),function(){if(!N&&d)return r.createElement("label",{className:"bp3-control bp3-switch"},r.createElement("input",{type:"checkbox",checked:f,onChange:L}),r.createElement("span",{className:"bp3-control-indicator"}),(0,a.tr)("MANUAL_FEATURE_TOOLTIPS",g))}(),r.createElement("label",{className:"bp3-control bp3-switch"},r.createElement("input",{type:"checkbox",checked:m,onChange:function(e){var t;t=e.target.checked,y((0,l.enableSelectDragPan)(t))}}),r.createElement("span",{className:"bp3-control-indicator"}),(0,a.tr)("ENABLE_SELECT_DRAGPAN",g)),r.createElement("fieldset",null,r.createElement("legend",null,(0,a.tr)("LAYER_TRANSPARENCY",g)),function(){if(e)return r.createElement("label",{className:"bp3-label noselect"},(0,a.tr)("LAYER_ID_BASE",g),r.createElement("div",{style:{paddingLeft:8,paddingRight:8}},r.createElement(o.Slider,{min:0,max:1,stepSize:.01,value:A,onChange:T})))}(),r.createElement("label",{className:"bp3-label noselect"},v?(0,a.tr)("LAYER_ID_MG_BASE",g):(0,a.tr)("LAYER_ID_SUBJECT",g),r.createElement("div",{style:{paddingLeft:8,paddingRight:8}},r.createElement(o.Slider,{min:0,max:1,stepSize:.01,value:C,onChange:function(e){S(t,c.LAYER_ID_MG_BASE,e)}}))),!N&&r.createElement("label",{className:"bp3-label noselect"},(0,a.tr)("LAYER_ID_MG_SEL_OVERLAY",g),r.createElement("div",{style:{paddingLeft:8,paddingRight:8}},r.createElement(o.Slider,{min:0,max:1,stepSize:.01,value:b,onChange:function(e){S(t,c.LAYER_ID_MG_SEL_OVERLAY,e)}})))),r.createElement("label",{className:"bp3-label"},(0,a.tr)("MAP_SIZE_DISPLAY_UNITS",g),r.createElement("div",{className:"bp3-select"},r.createElement(o.HTMLSelect,{value:_,onChange:function(e){!function(e){y((0,l.setViewSizeUnits)(e))}(e.target.value)}},I.map((function(e){var t=e[0],n=(0,i.getUnitOfMeasure)(t);return r.createElement("option",{key:t,value:t},n.localizedName(g))}))))))}},86356:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ViewerApiShim=t.AjaxViewerMapActionCode=t.AjaxViewerLineStringOrPolygon=t.enableRedlineMessagePrompt=void 0;var r,a=n(70655),i=(0,a.__importStar)(n(67294)),o=n(28641),s=(0,a.__importDefault)(n(60188)),l=(0,a.__importDefault)(n(92083)),u=(0,a.__importDefault)(n(2033)),c=n(31293),p=n(5791),d=n(29256),m=n(69648),f=n(45003),_=n(95348),E=n(48720),v=n(52878),g=n(57600),y=n(51380),h=n(93762),S=n(36645),T=n(81876),L=n(34169),I=n(93903),A=n(95601),C=n(74399),b=n(61220),N=function(){function e(e){this.parent=e,this.Event=new P}return e.prototype.xml2json=function(e,t,n){if(n)e(JSON.parse(t.responseText));else{var r={onSuccess:e,method:"POST",parameters:{xml:encodeURIComponent(t.responseText)}};this.ajaxRequest("common/php/Xml2JSON.php",r)}},e.prototype.ajaxRequest=function(e,t){var n=(0,h.getFusionRoot)()+"/"+e,r=this.parent.getClient(),a=t.onSuccess||function(){return(0,S.debug)("No success handler defined for this operation")},i=t.onFailure||t.onException||function(e,t){return(0,S.error)(t)};r&&("string"==typeof t.parameters?(n+="?"+t.parameters,fetch(n,{method:"GET"}).then((function(e){if(e.ok)e.text().then((function(e){return a({responseText:e})}));else{var t=e.statusText;e.text().then((function(e){i({transport:{responseText:e}},new p.MgError(t))}))}}))):fetch(n,{headers:{"Content-Type":"application/x-www-form-urlencoded; charset=UTF-8"},method:"POST",body:(0,v.serialize)(t.parameters,!1)}).then((function(e){if(e.ok)e.text().then((function(e){return a({responseText:e})}));else{var t=e.statusText;e.text().then((function(e){i({transport:{responseText:e}},new p.MgError(t))}))}})))},e.prototype.getMapByName=function(e){if(this.parent.props.map&&this.parent.props.map.Name==e)return new U(this.parent)},e.prototype.getWidgetById=function(e){if(e==A.FUSION_TASKPANE_NAME||e==A.FUSION_MAP_NAME)return new U(this.parent)},e.prototype.getWidgetsByType=function(e){return e==A.FUSION_REDLINE_NAME?[new U(this.parent)]:[]},e.prototype.registerForEvent=function(e,t){this.parent.registerForEvent(e,t)},e}(),O=function(){function e(){}return e.prototype.bind=function(e,t){return e.bind(t)},e}(),M=function(){function e(){this.Function=new O}return e.prototype.i18n=function(e){return(0,E.tr)(e)},e}(),P=function(){function e(){}return Object.defineProperty(e.prototype,"MAP_SELECTION_ON",{get:function(){return 1},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"MAP_SELECTION_OFF",{get:function(){return 2},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"MAP_ACTIVE_LAYER_CHANGED",{get:function(){return 3},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"MAP_BUSY_CHANGED",{get:function(){return 4},enumerable:!1,configurable:!0}),e}(),R=function(){function e(e){this.poly=e}return e.prototype.getVertices=function(){var e=this.poly.getExtent();return[{x:e[0],y:e[1]},void 0,{x:e[2],y:e[3]}]},e}(),D=function(){function e(e){this.geom=e}return Object.defineProperty(e.prototype,"x",{get:function(){var e=this.geom;return e instanceof s.default?e.getCoordinates()[0]:NaN},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"y",{get:function(){var e=this.geom;return e instanceof s.default?e.getCoordinates()[1]:NaN},enumerable:!1,configurable:!0}),e.prototype.getVertices=function(){var e=this.geom;if(e instanceof s.default);else{if(e instanceof l.default)return e.getCoordinates().map((function(e){return{x:e[0],y:e[1]}}));if(e instanceof u.default)return e.getLinearRing(0).getCoordinates().map((function(e){return{x:e[0],y:e[1]}}))}return[]},Object.defineProperty(e.prototype,"CLASS_NAME",{get:function(){return this.geom instanceof s.default?"OpenLayers.Geometry.Point":this.geom instanceof l.default?"OpenLayers.Geometry.LineString":this.geom instanceof u.default?"OpenLayers.Geometry.Polygon":"Unknown"},enumerable:!1,configurable:!0}),e}(),w=function(e){Array.isArray(e)?(this.left=e[0],this.bottom=e[1],this.right=e[2],this.top=e[3]):(this.left=e.left,this.bottom=e.bottom,this.right=e.right,this.top=e.top)};t.enableRedlineMessagePrompt=function(e){r=e};var F,U=function(){function e(e){this.parent=e}return e.prototype.goHome=function(){this.parent.goHome()},e.prototype.processFeatureInfo=function(e){var t=JSON.parse(e.responseText);if(t.FeatureInformation){var n=(0,m.deArrayify)(t);if((0,m.isQueryMapFeaturesResponse)(n)){var r=(0,m.buildSelectionXml)(n.FeatureSet);this.setSelection(r,!1)}}else t.Message&&this.warn(t.Message)},e.prototype.getSelectableLayers=function(){var e=[],t=this.parent.props.map;if(t&&t.Layer)for(var n=0,r=t.Layer.filter((function(e){return e.Selectable})).map((function(e){return{layerName:e.Name,legendLabel:e.LegendLabel}}));n<r.length;n++){var a=r[n];e.push(a)}return e},Object.defineProperty(e.prototype,"mapWidget",{get:function(){return this},enumerable:!1,configurable:!0}),e.prototype.getExtentFromPoint=function(e,t,n){var r=(0,h.getViewer)();if(r){var a=r.getCurrentView();n||(n=a.scale);var i=r.scaleToResolution(n),o=r.getSize(),s=o[0]*i,l=o[1]*i;return new w([e-s/2,t-l/2,e+s/2,t+l/2])}},e.prototype.setExtents=function(e){var t=(0,h.getViewer)();t&&t.zoomToExtent([e.left,e.bottom,e.right,e.top])},e.prototype.setActiveLayer=function(e){this._activeLayer=e;var t=this.parent.getFusionAPI();this.parent.triggerFusionEvent(t.Event.MAP_ACTIVE_LAYER_CHANGED)},e.prototype.getActiveLayer=function(){return this._activeLayer},e.prototype.clearSelection=function(){this.parent.ClearSelection()},e.prototype.cancelDigitization=function(){var e=(0,h.getViewer)();e&&e.cancelDigitization()},e.prototype.query=function(e){var t,n=null===(t=(0,h.getViewer)())||void 0===t?void 0:t.mapguideSupport(),r=this.parent.props.map;if(r&&n){var a={mapname:r.Name,session:r.SessionId,selectionvariant:e.selectionType,maxfeatures:e.maxFeatures,geometry:e.geometry,layernames:e.layers};0==a.maxfeatures&&(a.maxfeatures=-1),n.setSelectionXml("",a)}},e.prototype.setSelection=function(e,t){var n=this,r=(0,h.getViewer)(),a=null==r?void 0:r.mapguideSupport();r&&a&&a.setSelectionXml(e,{layerattributefilter:0},(function(e){if(t){var a=r.getOLFactory(),i=null;if(null!=e&&null!=e.SelectedFeatures&&e.SelectedFeatures.SelectedLayer.forEach((function(e){e.Feature.forEach((function(e){if(e.Bounds){var t=e.Bounds.split(" ").map((function(e){return parseFloat(e)}));i=null==i?t:a.extendExtent(i,t)}}))})),i){var s=(0,o.getWidth)(i),l=(0,o.getHeight)(i);if(s>0&&l>0){var u=r.getViewForExtent(i);n.parent.ZoomToView(u.x,u.y,u.scale)}}}}))},e.prototype.getSelectedLayers=function(){var e=[],t=this.parent.props.map,n=this.parent.props.selectionSet;if(t&&t.Layer&&n&&n.FeatureSet)for(var r=function(n){var r=t.Layer.filter((function(e){return e.ObjectId==n["@id"]}))[0];r&&e.push({legendLabel:r.LegendLabel,layerName:r.Name})},a=0,i=n.FeatureSet.Layer;a<i.length;a++)r(i[a]);return e},e.prototype.isBusy=function(){return!!this.parent.props.busyCount&&this.parent.props.busyCount>0},e.prototype.isMapLoaded=function(){return!0},e.prototype.redraw=function(){this.parent.Refresh()},e.prototype.reloadMap=function(){this.parent.Refresh()},e.prototype.info=function(e){var t=(0,h.getViewer)();t&&(this._activeToast=t.toastPrimary("info-sign",i.createElement("div",{className:"mg-fusion-message",dangerouslySetInnerHTML:{__html:e}})))},e.prototype.warn=function(e){var t=(0,h.getViewer)();t&&(this._activeToast=t.toastPrimary("warning-sign",i.createElement("div",{className:"mg-fusion-message",dangerouslySetInnerHTML:{__html:e}})))},e.prototype.error=function(e){var t=(0,h.getViewer)();t&&(this._activeToast=t.toastPrimary("error",i.createElement("div",{className:"mg-fusion-message",dangerouslySetInnerHTML:{__html:e}})))},e.prototype.clear=function(){var e=(0,h.getViewer)();e&&this._activeToast&&e.dismissToast(this._activeToast)},Object.defineProperty(e.prototype,"mapMessagePrompt",{get:function(){return!!r},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"container",{get:function(){return this},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"ownerDocument",{get:function(){return document},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"message",{get:function(){return this},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"layerRoot",{get:function(){return this},enumerable:!1,configurable:!0}),e.prototype.findLayerByAttribute=function(e,t){var n=this.parent.props.map;if(n&&n.Layer){var r=n.Layer.filter((function(n){switch(e){case"layerName":return n.Name==t}return!1}))[0];if(r)return{layerName:r.Name}}return null},e.prototype.pixToGeoMeasure=function(e){var t=(0,h.getViewer)();if(t){var n=t.getResolution();if(n)return e*n}return 1e-6},e.prototype.drawMap=function(){this.parent.Refresh()},e.prototype.registerForEvent=function(e,t){this.parent.registerForEvent(e,t)},e.prototype.deregisterForEvent=function(e,t){this.parent.deregisterForEvent(e,t)},e.toOL2Circle=function(e){var t=e.getCenter();return{x:t[0],y:t[1],r:e.getRadius()}},e.prototype.digitizePoint=function(e,t){var n=(0,h.getViewer)();n&&n.digitizePoint((function(e){t(new D(e))}))},e.prototype.digitizeLine=function(e,t){var n=(0,h.getViewer)();n&&n.digitizeLine((function(e){t(new D(e))}))},e.prototype.digitizeLineString=function(e,t){var n=(0,h.getViewer)();n&&n.digitizeLineString((function(e){t(new D(e))}))},e.prototype.digitizeRectangle=function(e,t){var n=(0,h.getViewer)();n&&n.digitizeRectangle((function(e){t(new R(e))}))},e.prototype.digitizePolygon=function(e,t){var n=(0,h.getViewer)();n&&n.digitizePolygon((function(e){t(new D(e))}))},e.prototype.digitizeCircle=function(t,n){var r=(0,h.getViewer)();r&&r.digitizeCircle((function(t){n(e.toOL2Circle(t))}))},e}(),V=function(){function e(e){this.coordinates=e}return Object.defineProperty(e.prototype,"Count",{get:function(){return this.coordinates.length},enumerable:!1,configurable:!0}),e.prototype.Point=function(e){return this.coordinates[e]},e}();t.AjaxViewerLineStringOrPolygon=V,function(e){e[e.PanMode=1]="PanMode",e[e.PanUp=2]="PanUp",e[e.PanDown=3]="PanDown",e[e.PanRight=4]="PanRight",e[e.PanLeft=5]="PanLeft",e[e.ZoomMode=6]="ZoomMode",e[e.ZoomIn=7]="ZoomIn",e[e.ZoomOut=8]="ZoomOut",e[e.ZoomRect=9]="ZoomRect",e[e.ZoomSelection=10]="ZoomSelection",e[e.ZoomExtents=11]="ZoomExtents",e[e.PrevView=12]="PrevView",e[e.NextView=13]="NextView",e[e.InitialView=14]="InitialView",e[e.SelectionMode=15]="SelectionMode",e[e.SelectRadius=16]="SelectRadius",e[e.SelectPolygon=17]="SelectPolygon",e[e.ClearSelection=19]="ClearSelection",e[e.RefreshMap=20]="RefreshMap",e[e.CopyMap=21]="CopyMap",e[e.About=22]="About"}(F=t.AjaxViewerMapActionCode||(t.AjaxViewerMapActionCode={}));var x=function(e){function t(t){var n=e.call(this,t)||this;return n.onFormFrameMounted=function(e){n.formFrame=e},n.GetMapName=function(){var e;return null===(e=n.props.map)||void 0===e?void 0:e.Name},n.GetSessionId=function(){var e;return null===(e=n.props.map)||void 0===e?void 0:e.SessionId},n.goHome=function(){var e,t;return null===(t=(e=n.props).goHome)||void 0===t?void 0:t.call(e)},n.us=!0,n.userSelectionHandlers=[],n.fusionEventHandlers={},n.ol2API=new M,n.fusionAPI=new N(n),n}return(0,a.__extends)(t,e),t.prototype.getClient=function(){var e=this.props,t=e.agentUri,n=e.agentKind;if(t&&n)return new c.Client(t,n)},t.prototype.getFusionAPI=function(){return this.fusionAPI},t.prototype.registerForEvent=function(e,t){(0,S.debug)("Fusion registerForEvent - "+e),this.fusionEventHandlers[e]||(this.fusionEventHandlers[e]=[]),this.fusionEventHandlers[e].push(t)},t.prototype.deregisterForEvent=function(e,t){if((0,S.debug)("Fusion deregisterForEvent - "+e),this.fusionEventHandlers[e]){var n=this.fusionEventHandlers[e].filter((function(e){return e!=t}));this.fusionEventHandlers[e]=n}else(0,S.debug)("No callbacks registered for fusion event - "+e)},t.prototype.triggerFusionEvent=function(e){if(this.fusionEventHandlers[e]){(0,S.debug)("Trigger Fusion Event ID - "+e);for(var t=0,n=this.fusionEventHandlers[e];t<n.length;t++){var r=n[t];r.apply(null,arguments)}}},t.prototype.fusionSelectionHandler=function(e){var t=function(e){if(e&&e.FeatureSet){for(var t=0,n=0,r=e.FeatureSet.Layer;n<r.length;n++)t+=r[n].Class.ID.length;return 0===t}return!0}(e)?this.fusionAPI.Event.MAP_SELECTION_OFF:this.fusionAPI.Event.MAP_SELECTION_ON;this.triggerFusionEvent(t)},Object.defineProperty(t.prototype,"mapInit",{get:function(){var e;return null!=(null===(e=this.props.map)||void 0===e?void 0:e.SessionId)},enumerable:!1,configurable:!0}),t.prototype.ExecuteMapAction=function(e){var t;switch(e){case F.About:t=_.DefaultCommands.About;break;case F.ClearSelection:t=_.DefaultCommands.ClearSelection;break;case F.InitialView:t=_.DefaultCommands.ZoomExtents;break;case F.NextView:t=_.DefaultCommands.NextView;break;case F.PanDown:t=_.DefaultCommands.PanDown;break;case F.PanLeft:t=_.DefaultCommands.PanLeft;break;case F.PanMode:t=_.DefaultCommands.Pan;break;case F.PanRight:t=_.DefaultCommands.PanRight;break;case F.PanUp:t=_.DefaultCommands.PanUp;break;case F.PrevView:t=_.DefaultCommands.PreviousView;break;case F.RefreshMap:t=_.DefaultCommands.RefreshMap;break;case F.SelectionMode:t=_.DefaultCommands.Select;break;case F.SelectPolygon:t=_.DefaultCommands.SelectPolygon;break;case F.SelectRadius:t=_.DefaultCommands.SelectRadius;break;case F.ZoomExtents:t=_.DefaultCommands.ZoomExtents;break;case F.ZoomIn:t=_.DefaultCommands.ZoomIn;break;case F.ZoomMode:t=_.DefaultCommands.Zoom;break;case F.ZoomOut:t=_.DefaultCommands.ZoomOut;break;case F.ZoomRect:t=_.DefaultCommands.Zoom;break;case F.ZoomSelection:t=_.DefaultCommands.ZoomToSelection;break;default:return void(0,S.warn)("Unknown command code: "+e)}var n=(0,_.getCommand)(t);n&&this.props.invokeCommand&&this.props.invokeCommand(n)},t.prototype.ClearSelection=function(){var e,t;null===(t=null===(e=(0,h.getViewer)())||void 0===e?void 0:e.mapguideSupport())||void 0===t||t.clearSelection()},t.prototype.DigitizeCircle=function(e){var t=(0,h.getViewer)();t&&t.digitizeCircle((function(t){var n=t.getCenter(),r=t.getRadius();e({Center:{X:n[0],Y:n[1]},Radius:r})}))},t.prototype.DigitizeLine=function(e){var t=(0,h.getViewer)();t&&t.digitizeLine((function(t){var n=t.getCoordinates().map((function(e){return{X:e[0],Y:e[1]}}));e(new V(n))}))},t.prototype.DigitizePoint=function(e){var t=(0,h.getViewer)();t&&t.digitizePoint((function(t){var n=t.getCoordinates();e({X:n[0],Y:n[1]})}))},t.prototype.DigitizePolygon=function(e){var t=(0,h.getViewer)();t&&t.digitizePolygon((function(t){var n=t.getLinearRing(0).getCoordinates().map((function(e){return{X:e[0],Y:e[1]}}));e(new V(n))}))},t.prototype.DigitizeLineString=function(e){var t=(0,h.getViewer)();t&&t.digitizeLineString((function(t){var n=t.getCoordinates().map((function(e){return{X:e[0],Y:e[1]}}));e(new V(n))}))},t.prototype.DigitizeRectangle=function(e){var t=(0,h.getViewer)();t&&t.digitizeRectangle((function(t){var n=t.getExtent();e({Point1:{X:n[0],Y:n[1]},Point2:{X:n[2],Y:n[3]}})}))},t.prototype.GetCenter=function(){var e=(0,h.getViewer)();if(e){var t=e.getCurrentView();return{X:t.x,Y:t.y}}return null},t.prototype.GetLayers=function(e,t){var n=[],r=this.props,a=r.map,i=r.selectionSet;if(a&&i&&i.FeatureSet){var o=i.FeatureSet.Layer.map((function(e){return e["@id"]}));if(a.Layer)for(var s=0,l=a.Layer;s<l.length;s++){var u=l[s];o.indexOf(u.ObjectId)>=0&&(!0===e&&!0===u.Visible&&n.push({legend:u.LegendLabel,name:u.Name,objectid:u.ObjectId}),!0===t&&!0===u.Selectable&&n.push({legend:u.LegendLabel,name:u.Name,objectid:u.ObjectId}))}}return n},t.prototype.GetMetersPerUnit=function(){var e=(0,h.getViewer)();return e?e.getMetersPerUnit():null},t.prototype.GetMapHeight=function(){var e=(0,h.getViewer)();return e?e.getSize()[1]:NaN},t.prototype.GetMapUnitsType=function(){return(0,g.getUnitOfMeasure)(this.props.sizeUnits||d.UnitOfMeasure.Unknown).name},t.prototype.GetMapWidth=function(){var e=(0,h.getViewer)();return e?e.getSize()[0]:NaN},t.prototype.GetScale=function(){var e=(0,h.getViewer)();return e?e.getCurrentView().scale:null},t.prototype.GetSelectedLayers=function(){var e=[],t=this.props,n=t.map,r=t.selectionSet;if(n&&r&&r.FeatureSet){var a=r.FeatureSet.Layer.map((function(e){return e["@id"]}));if(n.Layer)for(var i=0,o=n.Layer;i<o.length;i++){var s=o[i];a.indexOf(s.ObjectId)>=0&&e.push({legend:s.LegendLabel,name:s.Name,objectid:s.ObjectId})}}return e},t.prototype.GetSelectionXML=function(){var e=this.props.selectionSet;return e&&e.FeatureSet?(0,m.buildSelectionXml)(e.FeatureSet):""},t.prototype.GetSelectedBounds=function(){var e=null,t=this.props.selectionSet;return t&&t.SelectedFeatures&&t.SelectedFeatures.SelectedLayer.forEach((function(t){t.Feature.forEach((function(t){var n=t.Bounds?t.Bounds.split(" ").map((function(e){return parseFloat(e)})):void 0;n&&(null==e?e={minx:n[0],miny:n[1],maxx:n[2],maxy:n[3]}:(n[0]<e.minx&&(e.minx=n[0]),n[1]<e.miny&&(e.miny=n[1]),n[2]>e.maxx&&(e.maxx=n[2]),n[3]>e.maxy&&(e.maxy=n[3])))}))})),e},t.prototype.GetSelectedCount=function(){var e=0,t=this.props.selectionSet;return t&&t.FeatureSet&&t.FeatureSet.Layer.forEach((function(t){t.Class.ID.forEach((function(){e++}))})),e},t.prototype.GetSelectedFeatures=function(){var e,t=null===(e=(0,h.getViewer)())||void 0===e?void 0:e.mapguideSupport();if(t){var n=t.getSelection();if(n&&n.SelectedFeatures){for(var r={},a=0,i=n.SelectedFeatures.SelectedLayer;a<i.length;a++){var o=i[a];r[o["@name"]]=o.Feature.map((function(e){if(e.Bounds){var t=e.Bounds.split(" ").map((function(e){return parseFloat(e)}));return{zoom:{minx:t[0],miny:t[1],maxx:t[2],maxy:t[3]},values:e.Property.map((function(e){return{name:e.Name,value:e.Value}}))}}})).filter((function(e){return null!=e}))}return r}}},t.prototype.IsDigitizing=function(){var e=(0,h.getViewer)();return!!e&&e.isDigitizing()},t.prototype.IsEnglishUnits=function(){return this.us},t.prototype.IsLatLongDisplayUnits=function(){return!0},t.prototype.MapUnitsToLatLon=function(){throw new p.MgError("Un-implemented AJAX viewer shim API: map_frame.MapUnitsToLatLon(x, y)")},t.prototype.Refresh=function(){var e,t,n=(0,h.getViewer)();null==n||n.refreshMap(d.RefreshMode.LayersOnly|d.RefreshMode.SelectionOnly),null===(t=(e=this.props).legendRefresh)||void 0===t||t.call(e)},t.prototype.ScreenToMapUnits=function(e,t){var n=(0,h.getViewer)();if(n){var r=n.screenToMapUnits(e,t);return{X:r[0],Y:r[1]}}},t.prototype.SetEnglishUnits=function(e){this.us=e},t.prototype.SetLatLongDisplayUnits=function(){},t.prototype.SetSelectionXML=function(e){var t,n=null===(t=(0,h.getViewer)())||void 0===t?void 0:t.mapguideSupport();n&&n.setSelectionXml(e)},t.prototype.ZoomToView=function(e,t,n){var r=(0,h.getViewer)();r&&r.zoomToView(e,t,n)},t.prototype.SetStatusMsg=function(e){window.status=e||""},t.prototype.ZoomToScale=function(e){var t=(0,h.getViewer)();if(t){var n=t.getCurrentView();t.zoomToView(n.x,n.y,e)}},t.prototype.Submit=function(e,t,n){this.formFrame.submit(e,t,n)},t.prototype.RegisterSelectionHandler=function(e){return this.userSelectionHandlers.push(e),this.userSelectionHandlers.length},t.prototype.UnregisterSelectionHandler=function(e){return this.userSelectionHandlers=this.userSelectionHandlers.filter((function(t){return t!=e})),this.userSelectionHandlers.length},t.prototype.installShims=function(e){var t=this;e.Fusion=this.fusionAPI,e.OpenLayers=this.ol2API,e.GetMapFrame=e.GetMapFrame||function(){return t},e.mapFrame=e.GetMapFrame(),e.formFrame=e.mapFrame,e.ExecuteMapAction=e.ExecuteMapAction||function(e){return t.ExecuteMapAction(e)},e.Refresh=e.Refresh||function(){return t.Refresh()},e.SetSelectionXML=e.SetSelectionXML||function(e){return t.SetSelectionXML(e)},e.ZoomToView=e.ZoomToView||function(e,n,r){return t.ZoomToView(e,n,r)},e.GotoHomePage=e.GotoHomePage||function(){return t.goHome()},e.GetViewerInterface=e.GetViewerInterface||function(){return(0,h.getViewer)()},e.RegisterSelectionHandler=e.RegisterSelectionHandler||function(e){return t.RegisterSelectionHandler(e)},e.UnregisterSelectionHandler=e.UnregisterSelectionHandler||function(e){return t.UnregisterSelectionHandler(e)}},t.prototype.componentDidMount=function(){var e=this,t=window;this.installShims(t),this.installShims(window.parent),this.RegisterSelectionHandler((function(t,n){e.fusionSelectionHandler(n)}))},t.prototype.componentDidUpdate=function(e){var t,n=this.props;if(n.map&&n.selectionSet!=e.selectionSet)for(var r=0,a=this.userSelectionHandlers;r<a.length;r++)(0,a[r])(n.map.Name,null!==(t=n.selectionSet)&&void 0!==t?t:void 0);n.busyCount!=e.busyCount&&this.triggerFusionEvent(this.fusionAPI.Event.MAP_BUSY_CHANGED)},t.prototype.render=function(){return i.createElement("div",null,i.createElement(f.FormFrameShim,{ref:this.onFormFrameMounted}))},t}(i.Component);t.ViewerApiShim=function(){var e=(0,C.useActiveMapState)(),t=(0,y.useActiveMapSelectionSet)(),n=(0,y.useConfiguredAgentUri)(),r=(0,y.useConfiguredAgentKind)(),a=(0,y.useViewerBusyCount)(),o=(0,y.useViewerSizeUnits)(),s=(0,b.useReduxDispatch)();return i.createElement(x,{map:e,selectionSet:t,agentUri:n,agentKind:r,busyCount:a,sizeUnits:o,goHome:function(){return s((0,I.goHome)())},legendRefresh:function(){return s((0,L.refresh)())},invokeCommand:function(e,t){return s((0,T.invokeCommand)(e,t))},setSelection:function(e,t){return s((0,T.setSelection)(e,t))},queryMapFeatures:function(e,t){return s((0,T.queryMapFeatures)(e,t))}})}},81150:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ApplicationViewModel=void 0;var r=n(70655),a=(0,r.__importStar)(n(67294)),i=(0,r.__importStar)(n(73935)),o=n(42965),s=n(87930),l=n(45638),u=n(95348),c=n(7621),p=n(61220),d=n(64473),m=function(){function e(){}return e.prototype.getExtraInitialState=function(){return{}},e.prototype.getExtraReducers=function(){return{}},e.prototype.mount=function(e,t){var n,u,m,f,_,E=null!==(n=t.subscribers)&&void 0!==n?n:[],v={agentUri:null===(u=t.mapguide)||void 0===u?void 0:u.agentUri,agentKind:null!==(f=null===(m=t.mapguide)||void 0===m?void 0:m.agentKind)&&void 0!==f?f:"mapagent"},g=(0,r.__assign)({config:(0,r.__assign)((0,r.__assign)((0,r.__assign)({},l.CONFIG_INITIAL_STATE),v),t.initialConfig||{})},this.getExtraInitialState()),y=this.getExtraReducers();this._store=(0,s.configureStore)(g,y),_=t.initCommandFactory?t.initCommandFactory(this._store.dispatch):new d.DefaultViewerInitCommand(this._store.dispatch),i.render(a.createElement(p.ReduxProvider,{store:this._store},a.createElement(o.App,(0,r.__assign)({},t,{initCommand:_})),E.map((function(e,t){return a.createElement(c.Subscriber,(0,r.__assign)({key:"subscriber-"+t+"-"+e.name},e))}))),e)},e.prototype.dispatch=function(e){this._store.dispatch(e)},e.prototype.getCommand=function(e){return(0,u.getCommand)(e)},e.prototype.getState=function(){return this._store.getState()},e}();t.ApplicationViewModel=m},78539:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Actions=t.getStateFromUrl=t.updateUrl=t.MapGuideViewerInitCommand=t.setAssetRoot=t.Application=t.Externals=t.Registry=t.__BRANCH__=t.__COMMITHASH__=t.__VERSION__=t.__DEV__=void 0;var r=n(70655),a=(0,r.__importStar)(n(67294)),i=(0,r.__importStar)(n(73935)),o=n(48720),s=n(61739),l=n(16710),u=n(26030),c=n(99999),p=n(30768),d=n(84783),m=n(94787),f=n(64364),_=n(52714),E=n(95348),v=n(37979),g=n(61309),y=n(40377),h=(0,r.__importDefault)(n(96280)),S=(0,r.__importStar)(n(81876)),T=(0,r.__importStar)(n(34169)),L=(0,r.__importStar)(n(81243)),I=(0,r.__importStar)(n(57270)),A=(0,r.__importStar)(n(93903)),C=(0,r.__importStar)(n(95451)),b=n(86595),N=n(52878),O=n(21081),M=n(69565),P=n(1089),R=(0,r.__importDefault)(n(64678)),D=(0,r.__importDefault)(n(44906)),w=(0,r.__importDefault)(n(90798)),F=(0,r.__importDefault)(n(47741)),U=(0,r.__importDefault)(n(73109)),V=n(26227),x=n(43162),k=n(1212),B=n(61220),G=n(48906);n(10571),n(89524),n(13517),n(75633);var Y=n(61430),z=n(13709);(0,y.bootstrap)(),(0,O.addFormatDriver)(new M.CsvFormatDriver(M.CSV_COLUMN_ALIASES)),(0,O.addFormatDriver)(new P.FormatDriver("GeoJSON",new R.default)),(0,O.addFormatDriver)(new P.FormatDriver("TopoJSON",new D.default)),(0,O.addFormatDriver)(new P.FormatDriver("KML",new w.default,"EPSG:4326")),(0,O.addFormatDriver)(new P.FormatDriver("GPX",new F.default,"EPSG:4326")),(0,O.addFormatDriver)(new P.FormatDriver("IGC",new U.default));var W={hasTaskPane:!0};(0,_.registerLayout)("ajax-viewer",(function(){return a.createElement(l.AjaxViewerLayout,null)}),W),(0,_.registerLayout)("sidebar",(function(){return a.createElement(u.SidebarLayout,null)}),W),(0,_.registerLayout)("aqua",(function(){return a.createElement(c.AquaTemplateLayout,null)}),W),(0,_.registerLayout)("turquoise-yellow",(function(){return a.createElement(p.TurquoiseYellowTemplateLayout,null)}),W),(0,_.registerLayout)("limegold",(function(){return a.createElement(d.LimeGoldTemplateLayout,null)}),W),(0,_.registerLayout)("slate",(function(){return a.createElement(m.SlateTemplateLayout,null)}),W),(0,_.registerLayout)("maroon",(function(){return a.createElement(f.MaroonTemplateLayout,null)}),W),(0,_.registerLayout)("generic",(function(){return a.createElement(Y.GenericLayout,null)}),{hasTaskPane:!1}),(0,s.initDefaultCommands)(),(0,V.initMapGuideCommands)(),(0,g.registerDefaultComponents)(),(0,x.registerMapGuideComponents)();var j=new k.MapGuideMapProviderContext;(0,v.registerComponentFactory)(v.DefaultComponentNames.Map,(function(e){return a.createElement(B.MapProviderContextProvider,{value:j},a.createElement(G.MapViewer,(0,r.__assign)({},e)))})),(0,b.registerRequestBuilder)("mapagent",(function(e,t){return new N.MapAgentRequestBuilder(e,t)}));var H=function(){function e(){}return e.registerStringBundle=function(e,t){(0,o.registerStringBundle)(e,t)},e.registerLayout=function(e,t,n){(0,_.registerLayout)(e,t,n)},e.registerCommand=function(e,t){(0,E.registerCommand)(e,t)},e.registerComponentFactory=function(e,t){(0,v.registerComponentFactory)(e,t)},e.registerExternalVectorLayerCreator=function(e,t){z.ExternalLayerFactoryRegistry.getInstance().registerExternalVectorLayerCreator(e,t)},e}();t.Registry=H,t.Externals={proj4:h.default,React:a,ReactDOM:i};var K=n(81150);Object.defineProperty(t,"Application",{enumerable:!0,get:function(){return K.ApplicationViewModel}});var Z=n(57394);Object.defineProperty(t,"setAssetRoot",{enumerable:!0,get:function(){return Z.setAssetRoot}});var X=n(64473);Object.defineProperty(t,"MapGuideViewerInitCommand",{enumerable:!0,get:function(){return X.DefaultViewerInitCommand}});var q=n(15915);Object.defineProperty(t,"updateUrl",{enumerable:!0,get:function(){return q.updateUrl}}),Object.defineProperty(t,"getStateFromUrl",{enumerable:!0,get:function(){return q.getStateFromUrl}}),t.Actions={Map:S,Legend:T,Flyout:L,Modal:I,TaskPane:A,Template:C}},16710:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.AjaxViewerLayout=void 0;var r=n(70655),a=(0,r.__importStar)(n(67294)),i=n(37979),o=n(70102),s=n(64738),l=n(99275),u=n(86356),c=n(32297),p=n(39760),d=(0,r.__importDefault)(n(35513)),m=n(48720),f=n(43158),_=n(51380),E=n(95601);t.AjaxViewerLayout=function(){var e=(0,f.useCommonTemplateState)(),t=e.isResizing,n=e.locale,r=e.capabilities,v=e.onDragStart,g=e.onDragEnd,y=e.onSplitterChanged,h=(0,_.useTemplateInitialInfoPaneWidth)(),S=(0,_.useTemplateInitialTaskPaneWidth)(),T=!1,L=!1,I=!1,A=!1,C=!1,b=!1;r&&(T=r.hasToolbar,L=r.hasTaskPane,I=r.hasStatusBar,A=r.hasNavigator,C=r.hasSelectionPanel,b=r.hasLegend);var N=T?o.DEFAULT_TOOLBAR_SIZE:0,O=I?20:0,M={},P={};return a.createElement("div",{style:{width:"100%",height:"100%"}},a.createElement("div",{style:{position:"absolute",left:0,right:0,top:0,bottom:O}},a.createElement(d.default,{customClassName:"ajax-viewer-splitter",primaryIndex:0,secondaryInitialSize:S,onDragStart:v,onDragEnd:g},a.createElement("div",null,function(){if(T)return a.createElement(s.ToolbarContainer,{id:E.WEBLAYOUT_TOOLBAR,containerStyle:{position:"absolute",left:0,top:0,right:0,zIndex:10,backgroundColor:o.TOOLBAR_BACKGROUND_COLOR}})}(),a.createElement("div",{style:{position:"absolute",left:0,top:N,bottom:0,right:0}},a.createElement(d.default,{customClassName:"ajax-viewer-splitter",primaryIndex:1,secondaryInitialSize:h,onSecondaryPaneSizeChange:y},function(){if(b||C)return a.createElement(d.default,{customClassName:"ajax-viewer-splitter",vertical:!0,onDragStart:v,onDragEnd:g},function(){if(b)return a.createElement("div",{className:"ajax-sidebar-panel",style:M},a.createElement("div",{className:"ajax-sidebar-panel-heading"},a.createElement("p",null,(0,m.tr)("TPL_TITLE_LEGEND",n))),a.createElement("div",{className:"ajax-sidebar-panel-body"},a.createElement(i.PlaceholderComponent,{id:i.DefaultComponentNames.Legend,locale:n,componentProps:{inlineBaseLayerSwitcher:!0}})))}(),function(){if(C)return a.createElement("div",{className:"ajax-sidebar-panel",style:P},a.createElement("div",{className:"ajax-sidebar-panel-heading"},a.createElement("p",null,(0,m.tr)("TPL_TITLE_SELECTION_PANEL",n))),a.createElement("div",{className:"ajax-sidebar-panel-body"},a.createElement(i.PlaceholderComponent,{id:i.DefaultComponentNames.SelectionPanel,locale:n})))}())}(),a.createElement("div",{style:{position:"absolute",left:0,right:0,top:0,bottom:0}},a.createElement(i.PlaceholderComponent,{id:i.DefaultComponentNames.Map,locale:n}),function(){if(A)return a.createElement(i.PlaceholderComponent,{id:i.DefaultComponentNames.Navigator,locale:n})}())))),function(){if(L)return a.createElement(i.PlaceholderComponent,{locale:n,id:i.DefaultComponentNames.TaskPane,componentProps:{isResizing:t}})}())),function(){if(I)return a.createElement("div",{style:{position:"absolute",left:0,right:0,bottom:0,height:O,backgroundColor:o.TOOLBAR_BACKGROUND_COLOR}},a.createElement(i.PlaceholderComponent,{id:i.DefaultComponentNames.MouseCoordinates,locale:n}),a.createElement(i.PlaceholderComponent,{id:i.DefaultComponentNames.ScaleDisplay,locale:n}),a.createElement(i.PlaceholderComponent,{id:i.DefaultComponentNames.ViewSize,locale:n}),a.createElement(i.PlaceholderComponent,{id:i.DefaultComponentNames.SelectedFeatureCount,locale:n}),a.createElement(i.PlaceholderComponent,{id:i.DefaultComponentNames.PoweredByMapGuide,locale:n}))}(),a.createElement(u.ViewerApiShim,null),a.createElement(c.ModalLauncher,null),a.createElement(l.FlyoutRegionContainer,null),a.createElement(p.InitWarningDisplay,null))}},99999:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.AquaTemplateLayout=void 0;var r=n(70655),a=(0,r.__importStar)(n(67294)),i=n(37979),o=n(70102),s=n(64738),l=n(86356),u=n(32297),c=n(99275),p=n(21854),d=n(48720),m=n(39760),f=n(10737),_=n(43158),E=n(51380),v=n(95451),g=n(74399),y=n(37556);function h(e,t,n){switch(n.type){case f.ActionType.MAP_SET_SELECTION:var a=n.payload.selection;return a&&a.SelectedFeatures&&a.SelectedFeatures.SelectedLayer.length&&e.autoDisplaySelectionPanelOnSelection?(0,r.__assign)((0,r.__assign)({},e),{selectionPanelVisible:!0}):t;case f.ActionType.MAP_ADD_CLIENT_SELECTED_FEATURE:var i=n.payload.feature;return(null==i?void 0:i.properties)?(0,r.__assign)((0,r.__assign)({},e),{selectionPanelVisible:!0}):t;case f.ActionType.FUSION_SET_LEGEND_VISIBILITY:if("boolean"==typeof(s=n.payload)){var o={legendVisible:s};return(0,r.__assign)((0,r.__assign)({},t),o)}case f.ActionType.FUSION_SET_SELECTION_PANEL_VISIBILITY:if("boolean"==typeof(s=n.payload))return o={selectionPanelVisible:s},(0,r.__assign)((0,r.__assign)({},t),o);case f.ActionType.TASK_INVOKE_URL:return o={taskPaneVisible:!0},(0,r.__assign)((0,r.__assign)({},t),o);case f.ActionType.FUSION_SET_TASK_PANE_VISIBILITY:var s;if("boolean"==typeof(s=n.payload))return o={taskPaneVisible:s},(0,r.__assign)((0,r.__assign)({},t),o)}return t}t.AquaTemplateLayout=function(){var e=(0,_.useCommonTemplateState)(h),t=e.locale,n=e.capabilities,r=e.showSelection,f=e.showLegend,S=e.showTaskPane,T=e.dispatch,L=(0,g.useActiveMapState)(),I=(0,y.useActiveMapSubjectLayer)(),A=function(){return T((0,v.setTaskPaneVisibility)(!1))},C=function(){return T((0,v.setLegendVisibility)(!1))},b=function(){return T((0,v.setSelectionPanelVisibility)(!1))},N=!1,O=!1,M=!1,P=!1,R=!1;n&&(N=n.hasTaskPane,O=n.hasStatusBar,M=n.hasNavigator,P=n.hasSelectionPanel,R=n.hasLegend);var D=O?18:0,w=o.DEFAULT_TOOLBAR_SIZE,F=(0,E.useTemplateInitialInfoPaneWidth)(),U=(0,E.useTemplateInitialTaskPaneWidth)();return a.createElement("div",{style:{width:"100%",height:"100%"}},a.createElement(s.ToolbarContainer,{id:"FileMenu",containerClass:"aqua-file-menu",containerStyle:{position:"absolute",left:0,top:0,zIndex:0,right:0}}),a.createElement(s.ToolbarContainer,{id:"Toolbar",containerClass:"aqua-toolbar",containerStyle:{position:"absolute",left:0,top:o.DEFAULT_TOOLBAR_SIZE,height:o.DEFAULT_TOOLBAR_SIZE,zIndex:0,right:0}}),a.createElement(s.ToolbarContainer,{id:"ToolbarVertical",containerClass:"aqua-toolbar-vertical",vertical:!0,containerStyle:{position:"absolute",left:0,top:2*o.DEFAULT_TOOLBAR_SIZE-1,zIndex:0,bottom:D}}),a.createElement("div",{style:{position:"absolute",left:w,top:2*o.DEFAULT_TOOLBAR_SIZE,bottom:D,right:0}},function(){if(null!=L?L:I)return a.createElement(i.PlaceholderComponent,{id:i.DefaultComponentNames.Map,locale:t})}(),function(){if(M)return a.createElement(i.PlaceholderComponent,{id:i.DefaultComponentNames.Navigator,locale:t})}()),function(){if(O)return a.createElement("div",{className:"aqua-status-bar",style:{position:"absolute",left:0,bottom:0,right:0,height:D}},a.createElement(i.PlaceholderComponent,{id:i.DefaultComponentNames.MouseCoordinates,locale:t}),a.createElement(i.PlaceholderComponent,{id:i.DefaultComponentNames.ScaleDisplay,locale:t}),a.createElement(i.PlaceholderComponent,{id:i.DefaultComponentNames.SelectedFeatureCount,locale:t}),a.createElement(i.PlaceholderComponent,{id:i.DefaultComponentNames.ViewSize,locale:t}),a.createElement(i.PlaceholderComponent,{id:i.DefaultComponentNames.PoweredByMapGuide,locale:t}))}(),a.createElement(l.ViewerApiShim,null),a.createElement(u.ModalLauncher,null,function(){if(P)return a.createElement(p.RndModalDialog,{icon:"th",locale:t,isOpen:!!r,onClose:b,title:(0,d.tr)("TPL_TITLE_SELECTION_PANEL",t),x:40,y:500,width:F,height:300,disableYOverflow:!0,enableInteractionMask:!0},(function(e){var n=e[1];return a.createElement(i.PlaceholderComponent,{locale:t,id:i.DefaultComponentNames.SelectionPanel,componentProps:{maxHeight:n}})}))}(),function(){if(R)return a.createElement(p.RndModalDialog,{icon:"layers",locale:t,isOpen:!!f,onClose:C,title:(0,d.tr)("TPL_TITLE_LEGEND",t),x:40,y:70,width:F,height:400,enableInteractionMask:!0},(function(e){var n=e[1];return a.createElement(i.PlaceholderComponent,{locale:t,id:i.DefaultComponentNames.Legend,componentProps:{inlineBaseLayerSwitcher:!1,maxHeight:n}})}))}(),function(){if(N)return a.createElement(p.RndModalDialog,{icon:"application",locale:t,isOpen:!!S,onClose:A,width:U,height:500,title:(0,d.tr)("TPL_TITLE_TASKPANE",t),x:document.body.clientWidth-U-70,y:80,disableYOverflow:!0,enableInteractionMask:!1},(function(e){var n=e[1];return a.createElement(i.PlaceholderComponent,{locale:t,id:i.DefaultComponentNames.TaskPane,componentProps:{maxHeight:n-15}})}))}()),a.createElement(c.FlyoutRegionContainer,null),a.createElement(m.InitWarningDisplay,null))}},61430:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.GenericLayout=void 0;var r=(0,n(70655).__importStar)(n(67294)),a=n(37979),i=n(86356),o=n(32297),s=n(99275),l=n(39760),u=n(27058),c=n(29256),p=n(81876),d=n(95348),m=n(51380),f=n(61220),_=n(74399),E=n(48720),v=n(43158),g=function(e){var t=e.locale,n=e.featureTooltipsEnabled,i=e.hasSelection,o=e.map,s=e.onInvokeCommand,l=e.onSetActiveTool,p=e.activeTool,m=e.isLayerManagerOpen,_=e.setIsLayerManagerOpen,v=e.setIsLegendOpen,g=e.setIsSelectionPanelOpen,y=e.onSetFeatureTooltips,h=((0,f.useMapProviderContext)(),r.useState(!1));return h[0],h[1],r.createElement(r.Fragment,null,r.createElement(u.ButtonGroup,{vertical:!0,style:{position:"absolute",left:30,top:30}},r.createElement(u.Button,{icon:"plus",title:(0,E.tr)("NAVIGATOR_ZOOM_IN"),onClick:function(){return s(d.DefaultCommands.ZoomIn)}}),r.createElement(u.Button,{icon:"minus",title:(0,E.tr)("NAVIGATOR_ZOOM_OUT"),onClick:function(){return s(d.DefaultCommands.ZoomOut)}}),r.createElement(u.Button,{icon:"hand",intent:p==c.ActiveMapTool.Pan?u.Intent.PRIMARY:u.Intent.NONE,onClick:function(){return s(d.DefaultCommands.Pan)}}),r.createElement(u.Button,{icon:"zoom-to-fit",title:(0,E.tr)("LAYER_MANAGER_TT_ZOOM_EXTENTS"),onClick:function(){return s(d.DefaultCommands.ZoomExtents)}}),r.createElement(u.Button,{icon:"select",intent:p==c.ActiveMapTool.Select?u.Intent.PRIMARY:u.Intent.NONE,onClick:function(){return l(c.ActiveMapTool.Select)}}),r.createElement(u.Button,{icon:"layers",title:(0,E.tr)("MANAGE_LAYERS",t),intent:m?u.Intent.PRIMARY:u.Intent.NONE,onClick:function(){return _(!m)}}),o&&r.createElement(u.Button,{icon:"comment",title:(0,E.tr)("FEATURE_TOOLTIPS",t),intent:n?u.Intent.PRIMARY:u.Intent.NONE,onClick:function(){return y(!n)}}),r.createElement(u.Button,{icon:"th",intent:i?u.Intent.SUCCESS:u.Intent.NONE,title:(0,E.tr)("TPL_TITLE_SELECTION_PANEL",t),onClick:function(){return g(!0)}}),o&&r.createElement(u.Button,{icon:"properties",title:(0,E.tr)("TPL_TITLE_LEGEND",t),onClick:function(){return v(!0)}}),r.createElement(u.Popover,{usePortal:!1,position:"right",minimal:!1},r.createElement(u.Button,{icon:"map"}),r.createElement(u.Card,{interactive:!0,elevation:u.Elevation.TWO,style:{minWidth:200}},r.createElement("h5",{className:"bp3-heading"},r.createElement("a",{href:"#"},"Active Base Layer")),r.createElement(a.PlaceholderComponent,{id:a.DefaultComponentNames.BaseMapSwitcher,locale:t}),r.createElement("h5",{className:"bp3-heading"},r.createElement("a",{href:"#"},"Current Map")),r.createElement(a.PlaceholderComponent,{id:a.DefaultComponentNames.MapMenu,locale:t}))),r.createElement(u.Popover,{usePortal:!1,position:"right",minimal:!1},r.createElement(u.Button,{icon:"cog",title:(0,E.tr)("VIEWER_OPTIONS",t)}),r.createElement(a.PlaceholderComponent,{id:a.DefaultComponentNames.ViewerOptions})),r.createElement(u.Button,{icon:"print",onClick:function(){return s(d.DefaultCommands.Print)}})))};t.GenericLayout=function(){var e=r.useState(!1),t=e[0],n=e[1],f=r.useState(!1),y=f[0],h=f[1],S=r.useState(!1),T=S[0],L=S[1],I=(0,v.useCommonTemplateState)(),A=I.locale,C=I.dispatch,b=(0,_.useActiveMapState)(),N=(0,m.useReducedToolbarAppState)(),O=(0,m.useViewerActiveTool)();return r.createElement("div",{style:{width:"100%",height:"100%"}},r.createElement(o.ModalLauncher,null),r.createElement(a.PlaceholderComponent,{id:a.DefaultComponentNames.Map,locale:A,componentProps:{children:r.createElement(g,{locale:A,featureTooltipsEnabled:N.featureTooltipsEnabled,hasSelection:N.hasClientSelection||N.hasSelection,map:b,activeTool:O,isLayerManagerOpen:t,setIsLegendOpen:function(e){return h(e)},setIsSelectionPanelOpen:function(e){return L(e)},setIsLayerManagerOpen:function(e){return n(e)},onInvokeCommand:function(e){var t=(0,d.getCommand)(e);t&&C((0,p.invokeCommand)(t))},onSetActiveTool:function(e){C((0,p.setActiveTool)(c.ActiveMapTool.Select))},onSetFeatureTooltips:function(e){C((0,p.setFeatureTooltipsEnabled)(e))}})}}),r.createElement(u.Drawer,{icon:"layers",size:u.DrawerSize.SMALL,canOutsideClickClose:!0,onClose:function(){return n(!1)},title:(0,E.tr)("MANAGE_LAYERS",A),position:u.Position.LEFT,usePortal:!1,isOpen:t},r.createElement("div",{style:{overflowY:"auto"}},r.createElement(a.PlaceholderComponent,{id:a.DefaultComponentNames.AddManageLayers,locale:A}))),r.createElement(u.Drawer,{icon:"properties",size:u.DrawerSize.SMALL,canOutsideClickClose:!0,onClose:function(){return h(!1)},title:(0,E.tr)("TPL_TITLE_LEGEND",A),position:u.Position.LEFT,usePortal:!1,isOpen:y},r.createElement("div",{style:{overflowY:"auto"}},r.createElement(a.PlaceholderComponent,{id:a.DefaultComponentNames.Legend,locale:A}))),r.createElement(u.Drawer,{icon:"th",size:u.DrawerSize.SMALL,canOutsideClickClose:!0,onClose:function(){return L(!1)},title:(0,E.tr)("TPL_TITLE_SELECTION_PANEL",A),position:u.Position.LEFT,usePortal:!1,isOpen:T},r.createElement("div",{style:{width:"100%",height:"100%",position:"relative"}},r.createElement(a.PlaceholderComponent,{id:a.DefaultComponentNames.SelectionPanel,locale:A}))),r.createElement(a.PlaceholderComponent,{id:a.DefaultComponentNames.Navigator,locale:A}),r.createElement(i.ViewerApiShim,null),r.createElement(s.FlyoutRegionContainer,null),r.createElement(l.InitWarningDisplay,null),r.createElement(a.PlaceholderComponent,{id:a.DefaultComponentNames.MouseCoordinates,locale:A}))}},43158:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.useCommonTemplateState=void 0;var r=(0,n(70655).__importStar)(n(67294)),a=n(51380),i=n(75210),o=n(93762),s=n(95451),l=n(61220);t.useCommonTemplateState=function(e){var t=r.useState(!1),n=t[0],u=t[1],c=(0,a.useViewerLocale)(),p=(0,a.useConfiguredCapabilities)(),d=(0,a.useTemplateSelectionVisible)(),m=(0,a.useTemplateLegendVisible)(),f=(0,a.useTemplateTaskPaneVisible)(),_=(0,l.useReduxDispatch)();return r.useEffect((function(){e&&(0,i.setCustomTemplateReducer)(e)}),[]),{isResizing:n,setIsResizing:u,locale:c,capabilities:p,showSelection:d,showLegend:m,showTaskPane:f,onDragStart:function(){return u(!0)},onDragEnd:function(){return u(!1)},onSplitterChanged:function(){var e=(0,o.getViewer)();e&&e.updateSize()},onActiveElementChanged:function(e){var t={legendVisible:!1,taskPaneVisible:!1,selectionPanelVisible:!1};switch(e){case"Legend":t.legendVisible=!0;break;case"TaskPane":t.taskPaneVisible=!0;break;case"Selection":t.selectionPanelVisible=!0}(t.legendVisible||t.taskPaneVisible||t.selectionPanelVisible)&&function(e){_((0,s.setElementStates)(e))}(t)},dispatch:_}}},84783:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.LimeGoldTemplateLayout=void 0;var r=n(70655),a=(0,r.__importStar)(n(67294)),i=n(37979),o=n(70102),s=n(64738),l=n(86356),u=n(32297),c=n(99275),p=n(48720),d=n(75210),m=n(39760),f=(0,r.__importDefault)(n(35513)),_=n(10737),E=n(27058),v=n(43158),g=n(51380);function y(e,t,n){switch(n.type){case _.ActionType.FUSION_SET_LEGEND_VISIBILITY:if("boolean"==typeof(i=n.payload)){var a=void 0;return a=!0===i?{legendVisible:!0,taskPaneVisible:!1,selectionPanelVisible:!1}:{legendVisible:i},(0,r.__assign)((0,r.__assign)({},t),a)}case _.ActionType.FUSION_SET_SELECTION_PANEL_VISIBILITY:if("boolean"==typeof(i=n.payload))return a=void 0,a=!0===i?{legendVisible:!1,taskPaneVisible:!1,selectionPanelVisible:!0}:{selectionPanelVisible:i},(0,r.__assign)((0,r.__assign)({},t),a);case _.ActionType.TASK_INVOKE_URL:return a={taskPaneVisible:!0,selectionPanelVisible:!1,legendVisible:!1},(0,r.__assign)((0,r.__assign)({},t),a);case _.ActionType.FUSION_SET_TASK_PANE_VISIBILITY:if("boolean"==typeof(i=n.payload))return a=void 0,a=!0===i?{legendVisible:!1,taskPaneVisible:!0,selectionPanelVisible:!1}:{taskPaneVisible:i},(0,r.__assign)((0,r.__assign)({},t),a);case _.ActionType.FUSION_SET_ELEMENT_STATE:var i=n.payload;if((0,d.isElementState)(i))return(0,r.__assign)((0,r.__assign)({},t),i)}return t}t.LimeGoldTemplateLayout=function(){var e=(0,v.useCommonTemplateState)(y),t=e.isResizing,n=e.locale,d=e.capabilities,_=e.showSelection,h=e.showLegend,S=e.showTaskPane,T=e.onDragStart,L=e.onDragEnd,I=e.onSplitterChanged,A=e.onActiveElementChanged,C=!1,b=!1,N=!1,O=!1,M=!1;d&&(C=d.hasTaskPane,b=d.hasStatusBar,N=d.hasNavigator,O=d.hasSelectionPanel,M=d.hasLegend);var P=b?18:0,R=35+2*o.DEFAULT_TOOLBAR_SIZE,D=(0,g.useTemplateInitialInfoPaneWidth)(),w=(0,g.useTemplateInitialTaskPaneWidth)(),F=Math.max(D,w),U={position:"absolute",top:30,left:0,right:0,bottom:0},V=[{id:"Selection",visible:_},{id:"TaskPane",visible:S},{id:"Legend",visible:h}].filter((function(e){return e.visible})),x={};1==V.length&&(x.selectedTabId=V[0].id);var k=(0,p.tr)("TPL_TITLE_TASKPANE",n),B=(0,p.tr)("TPL_TITLE_LEGEND",n),G=(0,p.tr)("TPL_TITLE_SELECTION_PANEL",n);return a.createElement("div",{style:{width:"100%",height:"100%"}},a.createElement(s.ToolbarContainer,{id:"FileMenu",containerClass:"limegold-file-menu",containerStyle:{position:"absolute",left:0,top:(35-o.DEFAULT_TOOLBAR_SIZE)/2,zIndex:0,right:0}}),a.createElement(s.ToolbarContainer,{id:"Toolbar",containerClass:"limegold-toolbar",containerStyle:{position:"absolute",left:0,top:35,zIndex:0,right:0}}),a.createElement(s.ToolbarContainer,{id:"ToolbarSecondary",containerClass:"limegold-toolbar-secondary",containerStyle:{position:"absolute",left:0,top:35+o.DEFAULT_TOOLBAR_SIZE,zIndex:0,right:0}}),a.createElement("div",{style:{position:"absolute",left:0,top:R,bottom:P+0,right:0}},a.createElement(f.default,{customClassName:"limegold-splitter",primaryIndex:0,secondaryInitialSize:F,onSecondaryPaneSizeChange:I,onDragStart:T,onDragEnd:L},a.createElement("div",{style:{position:"absolute",left:0,right:0,top:0,bottom:0}},a.createElement(i.PlaceholderComponent,{id:i.DefaultComponentNames.Map,locale:n}),function(){if(N)return a.createElement(i.PlaceholderComponent,{id:i.DefaultComponentNames.Navigator,locale:n})}()),function(){if(_||S||h)return a.createElement("div",{className:"limegold-sidebar",style:{position:"absolute",right:0,top:0,left:0,bottom:0}},a.createElement(E.Tabs,(0,r.__assign)({className:"limegold-sidebar-tabs",id:"SidebarTabs",onChange:A},x),function(){if(C){var e=a.createElement("div",{style:U},a.createElement(i.PlaceholderComponent,{id:i.DefaultComponentNames.TaskPane,locale:n,componentProps:{isResizing:t}}));return a.createElement(E.Tab,{id:"TaskPane",title:k,panel:e})}}(),function(){if(M){var e=a.createElement("div",{style:(0,r.__assign)((0,r.__assign)({},U),{overflow:"auto"})},a.createElement(i.PlaceholderComponent,{id:i.DefaultComponentNames.Legend,locale:n,componentProps:{inlineBaseLayerSwitcher:!1}}));return a.createElement(E.Tab,{id:"Legend",title:B,panel:e})}}(),function(){if(O){var e=a.createElement("div",{style:U},a.createElement(i.PlaceholderComponent,{id:i.DefaultComponentNames.SelectionPanel,locale:n}));return a.createElement(E.Tab,{id:"Selection",title:G,panel:e})}}()))}())),function(){if(b)return a.createElement("div",{className:"limegold-status-bar",style:{position:"absolute",left:0,bottom:0,right:0,height:P}},a.createElement(i.PlaceholderComponent,{id:i.DefaultComponentNames.MouseCoordinates,locale:n}),a.createElement(i.PlaceholderComponent,{id:i.DefaultComponentNames.ScaleDisplay,locale:n}),a.createElement(i.PlaceholderComponent,{id:i.DefaultComponentNames.SelectedFeatureCount,locale:n}),a.createElement(i.PlaceholderComponent,{id:i.DefaultComponentNames.ViewSize,locale:n}),a.createElement(i.PlaceholderComponent,{id:i.DefaultComponentNames.PoweredByMapGuide,locale:n}))}(),a.createElement(l.ViewerApiShim,null),a.createElement(u.ModalLauncher,null),a.createElement(c.FlyoutRegionContainer,null),a.createElement(m.InitWarningDisplay,null))}},64364:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.MaroonTemplateLayout=void 0;var r=n(70655),a=(0,r.__importStar)(n(67294)),i=n(37979),o=n(70102),s=n(64738),l=n(86356),u=n(32297),c=n(99275),p=n(48720),d=n(65947),m=n(75210),f=n(39760),_=(0,r.__importDefault)(n(35513)),E=n(10737),v=n(43158),g=n(51380);function y(e,t,n){switch(n.type){case E.ActionType.FUSION_SET_LEGEND_VISIBILITY:if("boolean"==typeof(i=n.payload)){var a=void 0;return a=!0===i?{legendVisible:!0,taskPaneVisible:!1,selectionPanelVisible:!1}:{legendVisible:i},(0,r.__assign)((0,r.__assign)({},t),a)}case E.ActionType.FUSION_SET_SELECTION_PANEL_VISIBILITY:if("boolean"==typeof(i=n.payload))return a=void 0,a=!0===i?{legendVisible:!1,taskPaneVisible:!1,selectionPanelVisible:!0}:{selectionPanelVisible:i},(0,r.__assign)((0,r.__assign)({},t),a);case E.ActionType.TASK_INVOKE_URL:return a={taskPaneVisible:!0,selectionPanelVisible:!1,legendVisible:!1},(0,r.__assign)((0,r.__assign)({},t),a);case E.ActionType.FUSION_SET_TASK_PANE_VISIBILITY:if("boolean"==typeof(i=n.payload))return a=void 0,a=!0===i?{legendVisible:!1,taskPaneVisible:!0,selectionPanelVisible:!1}:{taskPaneVisible:i},(0,r.__assign)((0,r.__assign)({},t),a);case E.ActionType.FUSION_SET_ELEMENT_STATE:var i=n.payload;if((0,m.isElementState)(i))return(0,r.__assign)((0,r.__assign)({},t),i)}return t}t.MaroonTemplateLayout=function(){var e=(0,v.useCommonTemplateState)(y),t=e.isResizing,n=e.locale,r=e.capabilities,m=e.showSelection,E=e.showLegend,h=e.showTaskPane,S=e.onDragStart,T=e.onDragEnd,L=e.onSplitterChanged,I=e.onActiveElementChanged,A=!1,C=!1;r&&(A=r.hasStatusBar,C=r.hasNavigator);var b,N=A?18:0,O=2*o.DEFAULT_TOOLBAR_SIZE+3,M=[{id:"Legend",title:(0,p.tr)("TPL_TITLE_LEGEND",n),contentRenderer:function(e){return a.createElement("div",{style:{width:e.width,height:e.height,overflowY:"auto"}},a.createElement(i.PlaceholderComponent,{id:i.DefaultComponentNames.Legend,locale:n,componentProps:{inlineBaseLayerSwitcher:!1}}))}},{id:"Selection",title:(0,p.tr)("TPL_TITLE_SELECTION_PANEL",n),contentRenderer:function(e){return a.createElement("div",{style:{width:e.width,height:e.height,overflowY:"auto"}},a.createElement(i.PlaceholderComponent,{id:i.DefaultComponentNames.SelectionPanel,locale:n}))}},{id:"TaskPane",title:(0,p.tr)("TPL_TITLE_TASKPANE",n),contentRenderer:function(e,t){return a.createElement("div",{style:{width:e.width,height:e.height,overflowY:"auto"}},a.createElement(i.PlaceholderComponent,{id:i.DefaultComponentNames.TaskPane,locale:n,componentProps:{isResizing:t}}))}}],P=[{id:"Selection",visible:m},{id:"TaskPane",visible:h},{id:"Legend",visible:E}].filter((function(e){return e.visible}));1==P.length&&(b=P[0].id);var R=(0,g.useTemplateInitialInfoPaneWidth)(),D=(0,g.useTemplateInitialTaskPaneWidth)(),w=Math.max(R,D);return a.createElement("div",{style:{width:"100%",height:"100%"}},a.createElement("div",{style:{position:"absolute",left:0,top:0,bottom:N,right:0}},a.createElement(_.default,{customClassName:"maroon-splitter",primaryIndex:0,secondaryInitialSize:w,onSecondaryPaneSizeChange:L,onDragStart:S,onDragEnd:T},a.createElement("div",null,a.createElement(s.ToolbarContainer,{id:"FileMenu",containerClass:"maroon-file-menu",containerStyle:{position:"absolute",left:3,top:3,right:0,zIndex:0}}),a.createElement(s.ToolbarContainer,{id:"Toolbar",containerClass:"maroon-toolbar",containerStyle:{position:"absolute",left:3,top:o.DEFAULT_TOOLBAR_SIZE+3,right:0,zIndex:0}}),a.createElement(s.ToolbarContainer,{id:"ToolbarVertical",containerClass:"maroon-toolbar-vertical",vertical:!0,containerStyle:{position:"absolute",left:3,top:O,bottom:0,zIndex:0,right:0}}),a.createElement("div",{style:{position:"absolute",left:3+o.DEFAULT_TOOLBAR_SIZE,right:0,top:O,bottom:0}},a.createElement(i.PlaceholderComponent,{id:i.DefaultComponentNames.Map,locale:n}),function(){if(C)return a.createElement(i.PlaceholderComponent,{id:i.DefaultComponentNames.Navigator,locale:n})}())),function(){if(m||h||E)return a.createElement("div",null,a.createElement(d.Accordion,{style:{position:"absolute",top:3,bottom:0,right:3,left:0},onActivePanelChanged:I,activePanelId:b,panels:M,isResizing:t}))}())),function(){if(A)return a.createElement("div",{className:"maroon-status-bar",style:{position:"absolute",left:0,bottom:0,right:0,height:N}},a.createElement(i.PlaceholderComponent,{id:i.DefaultComponentNames.MouseCoordinates,locale:n}),a.createElement(i.PlaceholderComponent,{id:i.DefaultComponentNames.ScaleDisplay,locale:n}),a.createElement(i.PlaceholderComponent,{id:i.DefaultComponentNames.SelectedFeatureCount,locale:n}),a.createElement(i.PlaceholderComponent,{id:i.DefaultComponentNames.ViewSize,locale:n}),a.createElement(i.PlaceholderComponent,{id:i.DefaultComponentNames.PoweredByMapGuide,locale:n}))}(),a.createElement(l.ViewerApiShim,null),a.createElement(u.ModalLauncher,null),a.createElement(c.FlyoutRegionContainer,null),a.createElement(f.InitWarningDisplay,null))}},26030:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SidebarLayout=void 0;var r=n(70655),a=(0,r.__importStar)(n(67294)),i=n(37979),o=n(64738),s=n(86356),l=n(32297),u=n(99275),c=n(48720),p=n(39760),d=n(10737),m=n(27058),f=n(51380),_=n(43158),E=n(75210),v=n(95601),g=(0,r.__importDefault)(n(90891)),y=n(95451);function h(e,t,n){switch(n.type){case d.ActionType.MAP_SET_SELECTION:var a=n.payload.selection;if(a&&a.SelectedFeatures){var i=e.autoDisplaySelectionPanelOnSelection;if((0,g.default)(navigator.userAgent).phone)return e;if(a.SelectedFeatures.SelectedLayer.length&&i)return(0,r.__assign)((0,r.__assign)({},e),{selectionPanelVisible:!0,taskPaneVisible:!1,legendVisible:!1})}return t;case d.ActionType.MAP_ADD_CLIENT_SELECTED_FEATURE:var o=n.payload.feature;if(null==o?void 0:o.properties){if(i=e.autoDisplaySelectionPanelOnSelection,(0,g.default)(navigator.userAgent).phone)return e;if(i)return(0,r.__assign)((0,r.__assign)({},e),{selectionPanelVisible:!0,taskPaneVisible:!1,legendVisible:!1})}case d.ActionType.FUSION_SET_LEGEND_VISIBILITY:if("boolean"==typeof(l=n.payload)){var s=void 0;return s=!0===l?{legendVisible:!0,taskPaneVisible:!1,selectionPanelVisible:!1}:{legendVisible:l},(0,r.__assign)((0,r.__assign)({},t),s)}case d.ActionType.FUSION_SET_SELECTION_PANEL_VISIBILITY:if("boolean"==typeof(l=n.payload))return s=void 0,s=!0===l?{legendVisible:!1,taskPaneVisible:!1,selectionPanelVisible:!0}:{selectionPanelVisible:l},(0,r.__assign)((0,r.__assign)({},t),s);case d.ActionType.TASK_INVOKE_URL:return s={taskPaneVisible:!0,selectionPanelVisible:!1,legendVisible:!1},(0,r.__assign)((0,r.__assign)({},t),s);case d.ActionType.FUSION_SET_TASK_PANE_VISIBILITY:if("boolean"==typeof(l=n.payload))return s=void 0,s=!0===l?{legendVisible:!1,taskPaneVisible:!0,selectionPanelVisible:!1}:{taskPaneVisible:l},(0,r.__assign)((0,r.__assign)({},t),s);case d.ActionType.FUSION_SET_ELEMENT_STATE:var l=n.payload;if((0,E.isElementState)(l))return(0,r.__assign)((0,r.__assign)({},t),l)}return t}var S=function(e){return a.createElement("h1",{style:{position:"absolute",top:0,right:0,height:40,left:0,margin:0,paddingLeft:10},className:"sidebar-header"},e.text,a.createElement("span",{className:"sidebar-close",onClick:e.onCloseClick},a.createElement("i",{className:"icon-left-open"})))},T=function(e){var t=function(t){var n=e.onActivateTab;return t.preventDefault(),n("tasks"),!1},n=function(t){var n=e.onActivateTab;return t.preventDefault(),n("legend"),!1},r=function(t){var n=e.onActivateTab;return t.preventDefault(),n("selection"),!1},o=function(t){var n=e.onCollapse;return t.preventDefault(),n(),!1},s=(0,f.useLastDispatchedAction)();a.useEffect((function(){switch(s.type){case d.ActionType.TASK_INVOKE_URL:e.onActivateTab("tasks",!1);break;case d.ActionType.MAP_SET_SELECTION:case d.ActionType.MAP_ADD_CLIENT_SELECTED_FEATURE:}}),[s]);var l=e.position,u=e.busy,p=e.collapsed,_=e.activeTab;return a.createElement("div",{className:"sidebar "+(p?"collapsed":"")+" sidebar-"+l},a.createElement("div",{className:"sidebar-tabs"},a.createElement("ul",{role:"tablist"},a.createElement("li",null,!0===u?a.createElement("a",null,a.createElement(m.Spinner,{intent:m.Intent.WARNING,size:m.Spinner.SIZE_SMALL})):p?a.createElement("a",{onClick:function(t){var n=e.onExpand;return t.preventDefault(),n(),!1}},a.createElement(m.Icon,{icon:"menu-open"})):a.createElement("a",{onClick:o},a.createElement(m.Icon,{icon:"menu-closed"}))),function(){if(e.taskpane)return a.createElement("li",{className:0==p&&"tasks"==_?"active":""},a.createElement("a",{onClick:t,title:(0,c.tr)("TPL_SIDEBAR_OPEN_TASKPANE",e.locale),role:"tab"},a.createElement(m.Icon,{icon:"application"})))}(),function(){if(e.legend)return a.createElement("li",{className:0==p&&"legend"==_?"active":""},a.createElement("a",{onClick:n,title:(0,c.tr)("TPL_SIDEBAR_OPEN_LEGEND",e.locale),role:"tab"},a.createElement(m.Icon,{icon:"layers"})))}(),function(){if(e.selection)return a.createElement("li",{className:0==p&&"selection"==_?"active":""},a.createElement("a",{onClick:r,title:(0,c.tr)("TPL_SIDEBAR_OPEN_SELECTION_PANEL",e.locale),role:"tab"},a.createElement(m.Icon,{icon:"th"})),e.hasSelection&&a.createElement("div",{className:"sidebar-has-selection-badge"},v.NBSP))}(),a.createElement("li",{className:"sidebar-separator"}))),a.createElement("div",{className:"sidebar-content"},function(){if(e.taskpane)return a.createElement("div",{className:"sidebar-pane "+("tasks"==_?"active":"")},a.createElement(S,{text:(0,c.tr)("TPL_TITLE_TASKPANE",e.locale),onCloseClick:o}),a.createElement("div",{style:{position:"absolute",top:40,bottom:0,right:0,left:0}},a.createElement(i.PlaceholderComponent,{id:i.DefaultComponentNames.TaskPane,locale:e.locale})))}(),function(){if(e.legend)return a.createElement("div",{className:"sidebar-pane "+("legend"==_?"active":"")},a.createElement(S,{text:(0,c.tr)("TPL_TITLE_LEGEND",e.locale),onCloseClick:o}),a.createElement("div",{style:{position:"absolute",top:40,bottom:0,right:0,left:0,overflow:"auto"}},a.createElement(i.PlaceholderComponent,{id:i.DefaultComponentNames.Legend,locale:e.locale,componentProps:{inlineBaseLayerSwitcher:!0}})))}(),function(){if(e.selection)return a.createElement("div",{className:"sidebar-pane "+("selection"==_?"active":"")},a.createElement(S,{text:(0,c.tr)("TPL_TITLE_SELECTION_PANEL",e.locale),onCloseClick:o}),a.createElement("div",{style:{position:"absolute",top:40,bottom:0,right:0,left:0}},a.createElement(i.PlaceholderComponent,{id:i.DefaultComponentNames.SelectionPanel,locale:e.locale})))}()))};t.SidebarLayout=function(){var e=(0,_.useCommonTemplateState)(h),t=e.dispatch,n=e.locale,r=e.capabilities,c=e.showSelection,d=e.showLegend,m=e.showTaskPane,E=(0,f.useReducedToolbarAppState)(),g=function(e){return t((0,y.setElementStates)(e))},S=r.hasTaskPane,L=r.hasStatusBar,I=r.hasNavigator,A=r.hasSelectionPanel,C=r.hasLegend,b=r.hasViewSize,N=r.hasToolbar,O=(0,f.useViewerBusyCount)(),M="tasks";d?M="legend":c&&(M="selection");var P=a.useState(M),R=P[0],D=P[1];a.useEffect((function(){var e="tasks";d?e="legend":c&&(e="selection"),D(e)}),[d,c,m]);var w=!(d||c||m);return a.createElement("div",{style:{width:"100%",height:"100%"}},a.createElement(T,{position:"left",busy:O>0,legend:C,selection:A,taskpane:S,hasSelection:E.hasSelection||E.hasClientSelection,locale:n,collapsed:w||!1,activeTab:R||"tasks",onCollapse:function(){g({taskPaneVisible:!1,legendVisible:!1,selectionPanelVisible:!1})},onActivateTab:function(e){var t={legendVisible:!1,selectionPanelVisible:!1,taskPaneVisible:!1};switch(e){case"legend":t.legendVisible=!0;break;case"selection":t.selectionPanelVisible=!0;break;case"tasks":t.taskPaneVisible=!0}(t.legendVisible||t.selectionPanelVisible||t.taskPaneVisible)&&(g(t),D(e))},onExpand:function(){var e={legendVisible:!1,selectionPanelVisible:!1,taskPaneVisible:!1};switch(R){case"legend":e.legendVisible=!0;break;case"selection":e.selectionPanelVisible=!0;break;case"tasks":e.taskPaneVisible=!0}(e.legendVisible||e.selectionPanelVisible||e.taskPaneVisible)&&g(e)}}),function(){if(N){var e=180;return A||(e-=40),C||(e-=40),S||(e-=40),a.createElement("div",{id:"toolbar-region",style:{top:e}},a.createElement(o.ToolbarContainer,{id:v.WEBLAYOUT_TOOLBAR,containerClass:"sidebar-toolbar",vertical:!0,hideVerticalLabels:!0,containerStyle:{position:"absolute",left:4,right:6,zIndex:100}}))}}(),function(){if(I)return a.createElement(i.PlaceholderComponent,{id:i.DefaultComponentNames.Navigator,locale:n})}(),function(){if(L)return a.createElement(i.PlaceholderComponent,{id:i.DefaultComponentNames.MouseCoordinates,locale:n})}(),function(){if(L)return a.createElement(i.PlaceholderComponent,{id:i.DefaultComponentNames.ScaleDisplay,locale:n})}(),function(){if(b)return a.createElement(i.PlaceholderComponent,{id:i.DefaultComponentNames.ViewSize,locale:n})}(),function(){if(L)return a.createElement(i.PlaceholderComponent,{id:i.DefaultComponentNames.SelectedFeatureCount,locale:n})}(),a.createElement(s.ViewerApiShim,null),a.createElement(l.ModalLauncher,null),a.createElement(u.FlyoutRegionContainer,null),a.createElement(p.InitWarningDisplay,null),a.createElement(i.PlaceholderComponent,{id:i.DefaultComponentNames.Map,locale:n}),a.createElement(i.PlaceholderComponent,{id:i.DefaultComponentNames.PoweredByMapGuide,locale:n}))}},94787:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SlateTemplateLayout=void 0;var r=n(70655),a=(0,r.__importStar)(n(67294)),i=n(37979),o=n(70102),s=n(64738),l=n(86356),u=n(32297),c=n(99275),p=n(48720),d=n(65947),m=n(75210),f=n(39760),_=(0,r.__importDefault)(n(35513)),E=n(10737),v=n(43158),g=n(51380);function y(e,t,n){switch(n.type){case E.ActionType.FUSION_SET_LEGEND_VISIBILITY:if("boolean"==typeof(i=n.payload)){var a=void 0;return a=!0===i?{legendVisible:!0,taskPaneVisible:!1,selectionPanelVisible:!1}:{legendVisible:i},(0,r.__assign)((0,r.__assign)({},t),a)}case E.ActionType.FUSION_SET_SELECTION_PANEL_VISIBILITY:if("boolean"==typeof(i=n.payload))return a=void 0,a=!0===i?{legendVisible:!1,taskPaneVisible:!1,selectionPanelVisible:!0}:{selectionPanelVisible:i},(0,r.__assign)((0,r.__assign)({},t),a);case E.ActionType.TASK_INVOKE_URL:return a={taskPaneVisible:!0,selectionPanelVisible:!1,legendVisible:!1},(0,r.__assign)((0,r.__assign)({},t),a);case E.ActionType.FUSION_SET_TASK_PANE_VISIBILITY:if("boolean"==typeof(i=n.payload))return a=void 0,a=!0===i?{legendVisible:!1,taskPaneVisible:!0,selectionPanelVisible:!1}:{taskPaneVisible:i},(0,r.__assign)((0,r.__assign)({},t),a);case E.ActionType.FUSION_SET_ELEMENT_STATE:var i=n.payload;if((0,m.isElementState)(i))return(0,r.__assign)((0,r.__assign)({},t),i)}return t}t.SlateTemplateLayout=function(){var e=(0,v.useCommonTemplateState)(y),t=e.isResizing,n=e.locale,r=e.capabilities,m=e.showSelection,E=e.showLegend,h=e.showTaskPane,S=e.onDragStart,T=e.onDragEnd,L=e.onSplitterChanged,I=e.onActiveElementChanged,A=!1,C=!1;r&&(A=r.hasStatusBar,C=r.hasNavigator);var b,N=(0,g.useTemplateInitialInfoPaneWidth)(),O=(0,g.useTemplateInitialTaskPaneWidth)(),M=Math.max(N,O),P=A?18:0,R=3*o.DEFAULT_TOOLBAR_SIZE,D=[{id:"Legend",title:(0,p.tr)("TPL_TITLE_LEGEND",n),contentRenderer:function(e){return a.createElement("div",{style:{width:e.width,height:e.height,overflowY:"auto"}},a.createElement(i.PlaceholderComponent,{id:i.DefaultComponentNames.Legend,locale:n,componentProps:{inlineBaseLayerSwitcher:!1}}))}},{id:"Selection",title:(0,p.tr)("TPL_TITLE_SELECTION_PANEL",n),contentRenderer:function(e){return a.createElement("div",{style:{width:e.width,height:e.height,overflowY:"auto"}},a.createElement(i.PlaceholderComponent,{id:i.DefaultComponentNames.SelectionPanel,locale:n}))}},{id:"TaskPane",title:(0,p.tr)("TPL_TITLE_TASKPANE",n),contentRenderer:function(e,t){return a.createElement("div",{style:{width:e.width,height:e.height,overflowY:"auto"}},a.createElement(i.PlaceholderComponent,{id:i.DefaultComponentNames.TaskPane,locale:n,componentProps:{isResizing:t}}))}}],w=[{id:"Selection",visible:m},{id:"TaskPane",visible:h},{id:"Legend",visible:E}].filter((function(e){return e.visible}));return 1==w.length&&(b=w[0].id),a.createElement("div",{style:{width:"100%",height:"100%"}},a.createElement("div",{style:{position:"absolute",left:0,top:0,bottom:P,right:0}},a.createElement(_.default,{customClassName:"slate-splitter",primaryIndex:1,secondaryInitialSize:M,onSecondaryPaneSizeChange:L,onDragStart:S,onDragEnd:T},function(){if(m||h||E)return a.createElement("div",null,a.createElement(d.Accordion,{style:{position:"absolute",top:0,bottom:0,left:0,right:0},onActivePanelChanged:I,activePanelId:b,panels:D,isResizing:t}))}(),a.createElement("div",null,a.createElement(s.ToolbarContainer,{id:"FileMenu",containerClass:"slate-file-menu",containerStyle:{position:"absolute",left:0,top:0,zIndex:0,right:0}}),a.createElement(s.ToolbarContainer,{id:"Toolbar",containerClass:"slate-toolbar",containerStyle:{position:"absolute",left:0,top:o.DEFAULT_TOOLBAR_SIZE,zIndex:0,right:0}}),a.createElement(s.ToolbarContainer,{id:"ToolbarSecondary",containerClass:"slate-toolbar-secondary",containerStyle:{position:"absolute",left:0,top:2*o.DEFAULT_TOOLBAR_SIZE,zIndex:0,right:0}}),a.createElement("div",{style:{position:"absolute",left:0,right:0,top:R,bottom:0}},a.createElement(i.PlaceholderComponent,{id:i.DefaultComponentNames.Map,locale:n}),function(){if(C)return a.createElement(i.PlaceholderComponent,{id:i.DefaultComponentNames.Navigator,locale:n})}()),a.createElement(l.ViewerApiShim,null)))),function(){if(A)return a.createElement("div",{className:"slate-status-bar",style:{position:"absolute",left:0,bottom:0,right:0,height:P}},a.createElement(i.PlaceholderComponent,{id:i.DefaultComponentNames.MouseCoordinates,locale:n}),a.createElement(i.PlaceholderComponent,{id:i.DefaultComponentNames.ScaleDisplay,locale:n}),a.createElement(i.PlaceholderComponent,{id:i.DefaultComponentNames.SelectedFeatureCount,locale:n}),a.createElement(i.PlaceholderComponent,{id:i.DefaultComponentNames.ViewSize,locale:n}),a.createElement(i.PlaceholderComponent,{id:i.DefaultComponentNames.PoweredByMapGuide,locale:n}))}(),a.createElement(u.ModalLauncher,null),a.createElement(c.FlyoutRegionContainer,null),a.createElement(f.InitWarningDisplay,null))}},30768:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TurquoiseYellowTemplateLayout=void 0;var r=n(70655),a=(0,r.__importStar)(n(67294)),i=n(37979),o=n(70102),s=n(64738),l=n(86356),u=n(32297),c=n(99275),p=n(48720),d=n(75210),m=n(39760),f=(0,r.__importDefault)(n(35513)),_=n(10737),E=n(27058),v=n(43158),g=n(51380);function y(e,t,n){switch(n.type){case _.ActionType.FUSION_SET_LEGEND_VISIBILITY:if("boolean"==typeof(i=n.payload)){var a=void 0;return a=!0===i?{legendVisible:!0,taskPaneVisible:!1,selectionPanelVisible:!1}:{legendVisible:i},(0,r.__assign)((0,r.__assign)({},t),a)}case _.ActionType.FUSION_SET_SELECTION_PANEL_VISIBILITY:if("boolean"==typeof(i=n.payload))return a=void 0,a=!0===i?{legendVisible:!1,taskPaneVisible:!1,selectionPanelVisible:!0}:{selectionPanelVisible:i},(0,r.__assign)((0,r.__assign)({},t),a);case _.ActionType.TASK_INVOKE_URL:return a={taskPaneVisible:!0,selectionPanelVisible:!1,legendVisible:!1},(0,r.__assign)((0,r.__assign)({},t),a);case _.ActionType.FUSION_SET_TASK_PANE_VISIBILITY:if("boolean"==typeof(i=n.payload))return a=void 0,a=!0===i?{legendVisible:!1,taskPaneVisible:!0,selectionPanelVisible:!1}:{taskPaneVisible:i},(0,r.__assign)((0,r.__assign)({},t),a);case _.ActionType.FUSION_SET_ELEMENT_STATE:var i=n.payload;if((0,d.isElementState)(i))return(0,r.__assign)((0,r.__assign)({},t),i)}return t}t.TurquoiseYellowTemplateLayout=function(){var e=(0,v.useCommonTemplateState)(y),t=e.isResizing,n=e.locale,d=e.capabilities,_=e.showSelection,h=e.showLegend,S=e.showTaskPane,T=e.onDragStart,L=e.onDragEnd,I=e.onSplitterChanged,A=e.onActiveElementChanged,C=!1,b=!1,N=!1,O=!1,M=!1;d&&(C=d.hasTaskPane,b=d.hasStatusBar,N=d.hasNavigator,O=d.hasSelectionPanel,M=d.hasLegend);var P=b?18:0,R=(0,g.useTemplateInitialInfoPaneWidth)(),D=(0,g.useTemplateInitialTaskPaneWidth)(),w=Math.max(R,D),F={position:"absolute",top:30,left:0,right:0,bottom:0},U=[{id:"Selection",visible:_},{id:"TaskPane",visible:S},{id:"Legend",visible:h}].filter((function(e){return e.visible})),V={};1==U.length&&(V.selectedTabId=U[0].id);var x=(0,p.tr)("TPL_TITLE_TASKPANE",n),k=(0,p.tr)("TPL_TITLE_LEGEND",n),B=(0,p.tr)("TPL_TITLE_SELECTION_PANEL",n);return a.createElement("div",{style:{width:"100%",height:"100%"}},a.createElement("div",{style:{position:"absolute",left:0,top:0,bottom:P,right:0}},a.createElement(f.default,{customClassName:"turquoise-yellow-splitter",primaryIndex:1,secondaryInitialSize:w,onSecondaryPaneSizeChange:I,onDragStart:T,onDragEnd:L},function(){if(_||S||h)return a.createElement("div",{className:"turquoise-yellow-sidebar",style:{position:"absolute",left:3,top:35,bottom:3,right:0}},a.createElement(E.Tabs,(0,r.__assign)({className:"turquoise-yellow-sb-tabs",id:"SidebarTabs",onChange:A},V),function(){if(C){var e=a.createElement("div",{style:F},a.createElement(i.PlaceholderComponent,{id:i.DefaultComponentNames.TaskPane,locale:n,componentProps:{isResizing:t}}));return a.createElement(E.Tab,{id:"TaskPane",title:x,panel:e})}}(),function(){if(M){var e=a.createElement("div",{style:(0,r.__assign)((0,r.__assign)({},F),{overflow:"auto"})},a.createElement(i.PlaceholderComponent,{id:i.DefaultComponentNames.Legend,locale:n,componentProps:{inlineBaseLayerSwitcher:!1}}));return a.createElement(E.Tab,{id:"Legend",title:k,panel:e})}}(),function(){if(O){var e=a.createElement("div",{style:F},a.createElement(i.PlaceholderComponent,{id:i.DefaultComponentNames.SelectionPanel,locale:n}));return a.createElement(E.Tab,{id:"Selection",title:B,panel:e})}}()))}(),a.createElement("div",null,a.createElement(s.ToolbarContainer,{id:"FileMenu",containerClass:"turquoise-yellow-file-menu",containerStyle:{position:"absolute",left:0,top:35-o.DEFAULT_TOOLBAR_SIZE,zIndex:0,right:0}}),a.createElement(s.ToolbarContainer,{id:"Toolbar",containerClass:"turquoise-yellow-toolbar",containerStyle:{position:"absolute",left:0,top:35,zIndex:0,right:0}}),a.createElement(s.ToolbarContainer,{id:"ToolbarVertical",containerClass:"turquoise-yellow-toolbar-vertical",vertical:!0,containerStyle:{position:"absolute",left:0,top:35+o.DEFAULT_TOOLBAR_SIZE,zIndex:0,bottom:3}}),a.createElement("div",{style:{position:"absolute",left:o.DEFAULT_TOOLBAR_SIZE,top:35+o.DEFAULT_TOOLBAR_SIZE,bottom:3,right:0}},a.createElement(i.PlaceholderComponent,{id:i.DefaultComponentNames.Map,locale:n}),function(){if(N)return a.createElement(i.PlaceholderComponent,{id:i.DefaultComponentNames.Navigator,locale:n})}())))),function(){if(b)return a.createElement("div",{className:"turquoise-yellow-status-bar",style:{position:"absolute",left:0,bottom:0,right:0,height:P}},a.createElement(i.PlaceholderComponent,{id:i.DefaultComponentNames.MouseCoordinates,locale:n}),a.createElement(i.PlaceholderComponent,{id:i.DefaultComponentNames.ScaleDisplay,locale:n}),a.createElement(i.PlaceholderComponent,{id:i.DefaultComponentNames.SelectedFeatureCount,locale:n}),a.createElement(i.PlaceholderComponent,{id:i.DefaultComponentNames.ViewSize,locale:n}),a.createElement(i.PlaceholderComponent,{id:i.DefaultComponentNames.PoweredByMapGuide,locale:n}))}(),a.createElement(l.ViewerApiShim,null),a.createElement(u.ModalLauncher,null),a.createElement(c.FlyoutRegionContainer,null),a.createElement(m.InitWarningDisplay,null))}},45638:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.configReducer=t.CONFIG_INITIAL_STATE=void 0;var r=n(70655),a=n(29256),i=n(48720),o=n(10737),s=n(36645),l=n(57600),u=n(12694);t.CONFIG_INITIAL_STATE={agentUri:void 0,agentKind:"mapagent",locale:i.DEFAULT_LOCALE,activeMapName:void 0,availableMaps:void 0,viewRotation:0,viewRotationEnabled:!0,viewSizeUnits:a.UnitOfMeasure.Meters,manualFeatureTooltips:!1,cancelDigitizationKey:a.KC_ESCAPE,undoLastPointKey:a.KC_U,selectCanDragPan:!1,coordinates:{decimals:6},viewer:{isStateless:!1,imageFormat:"PNG",selectionImageFormat:"PNG8",selectionColor:"0x0000FFAA",activeSelectedFeatureColor:"0xFF0000AA",pointSelectionBuffer:2,loadIndicatorPositioning:"top",loadIndicatorColor:"rgba(34, 153, 221, 0.9)"},capabilities:{hasTaskPane:!1,hasTaskBar:!1,hasStatusBar:!1,hasNavigator:!1,hasSelectionPanel:!1,hasLegend:!1,hasToolbar:!1,hasViewSize:!1}},t.configReducer=function(e,n){var a,c;switch(void 0===e&&(e=t.CONFIG_INITIAL_STATE),n.type){case o.ActionType.SET_LOCALE:return(0,r.__assign)((0,r.__assign)({},e),{locale:n.payload});case o.ActionType.INIT_APP:for(var p=null!==(a=n.payload)&&void 0!==a?a:{},d=p.maps,m=[],f=p.activeMapName,_=Object.keys(d),E=0,v=_;E<v.length;E++){var g=v[E];m.push({name:d[g].mapGroupId,value:g})}_.indexOf(f)<0&&((0,s.warn)("Invalid initial active map name: "+f+". Probably because we haven't properly implemented recovery of runtime maps on reload yet"),f=_[0]);var y={locale:p.locale||i.DEFAULT_LOCALE,capabilities:p.capabilities,activeMapName:f,availableMaps:m},h=(0,r.__assign)((0,r.__assign)({},e),y);if(null!=p.config&&Object.keys(p.config).length>0){var S=(0,r.__assign)({},e.coordinates),T=(0,r.__assign)({},e.viewer);null!=p.config.isStateless&&(T.isStateless=p.config.isStateless),null!=p.config.imageFormat&&(T.imageFormat=p.config.imageFormat),null!=p.config.selectionImageFormat&&(T.selectionImageFormat=p.config.selectionImageFormat),null!=p.config.selectionColor&&(T.selectionColor=p.config.selectionColor),null!=p.config.pointSelectionBuffer&&(T.pointSelectionBuffer=p.config.pointSelectionBuffer),null!=p.config.coordinateProjection&&(S.projection=p.config.coordinateProjection),null!=p.config.coordinateDecimals&&(S.decimals=p.config.coordinateDecimals),null!=p.config.coordinateDisplayFormat&&(S.format=p.config.coordinateDisplayFormat);var L={viewer:T,coordinates:S},I=Object.keys(p.maps);if(null!=p.config.viewSizeUnits)L.viewSizeUnits=p.config.viewSizeUnits;else if(1==I.length){var A=p.maps[I[0]].map;if(A){var C;(C=(0,u.isRuntimeMap)(A)?(0,l.tryParseArbitraryCs)(A.CoordinateSystem.MentorCode):(0,l.tryParseArbitraryCs)(null===(c=null==A?void 0:A.meta)||void 0===c?void 0:c.projection))&&(L.viewSizeUnits=C.units)}}return(0,r.__assign)((0,r.__assign)({},h),L)}return h;case o.ActionType.MAP_ENABLE_SELECT_DRAGPAN:return(0,r.__assign)((0,r.__assign)({},e),{selectCanDragPan:n.payload});case o.ActionType.MAP_SET_VIEW_ROTATION:return(0,r.__assign)((0,r.__assign)({},e),{viewRotation:n.payload});case o.ActionType.MAP_SET_VIEW_ROTATION_ENABLED:return(0,r.__assign)((0,r.__assign)({},e),{viewRotationEnabled:n.payload});case o.ActionType.MAP_SET_ACTIVE_MAP:var b=n.payload;if(b)return y={activeMapName:b},(0,r.__assign)((0,r.__assign)({},e),y);case o.ActionType.MAP_SET_VIEW_SIZE_UNITS:return y={viewSizeUnits:n.payload},(0,r.__assign)((0,r.__assign)({},e),y);case o.ActionType.MAP_SET_MANUAL_MAPTIP:return(0,r.__assign)((0,r.__assign)({},e),{manualFeatureTooltips:n.payload})}return e}},16491:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.initErrorReducer=t.INIT_ERROR_INITIAL_STATE=void 0;var r=n(70655),a=n(41407),i=n(10737);t.INIT_ERROR_INITIAL_STATE={options:{},error:void 0,includeStack:!0,warnings:[]},t.initErrorReducer=function(e,n){switch(void 0===e&&(e=t.INIT_ERROR_INITIAL_STATE),n.type){case i.ActionType.INIT_ACKNOWLEDGE_WARNINGS:return(0,r.__assign)((0,r.__assign)({},e),{warnings:[]});case i.ActionType.INIT_APP:return(0,r.__assign)((0,r.__assign)({},e),{warnings:(0,a.makeUnique)(n.payload.warnings)});case i.ActionType.INIT_ERROR:var o=n.payload,s=o.error,l=o.options,u=o.includeStack;return void 0===u&&(u=!0),{error:s,options:l,includeStack:u,warnings:[]}}return e}},12485:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.lastAction=t.NULL_ACTION=void 0;var r=n(12694),a=n(10737);t.NULL_ACTION={},t.lastAction=function(e,n){if(void 0===e&&(e=null),(0,r.isAction)(n))switch(n.type){case a.ActionType.MAP_SET_BUSY_COUNT:case a.ActionType.TASK_INVOKE_URL:case a.ActionType.MAP_SET_SELECTION:case a.ActionType.MAP_ADD_CLIENT_SELECTED_FEATURE:case a.ActionType.MAP_SET_MAPTIP:case a.ActionType.MAP_SET_ACTIVE_TOOL:return n}return t.NULL_ACTION}},55906:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.mapStateReducer=t.MAP_STATE_INITIAL_SUB_STATE=t.MG_INITIAL_SUB_STATE=t.MAP_STATE_INITIAL_STATE=void 0;var r=n(70655),a=n(12694),i=n(41407),o=n(10737),s=n(2939),l=n(36645),u=n(78113),c=n(57600);function p(e,t,n){var a=e[t];if(a){var i=a.mapguide;if(i){var o=n(i),s=(0,r.__assign)((0,r.__assign)({},i),o);return m(e,t,(0,r.__assign)((0,r.__assign)({},a),{mapguide:s}))}}return e}function d(e,t,n,a){var i=e[t];if(i&&i.layers){var o={layers:i.layers.map((function(e){return e.name==n?(0,r.__assign)((0,r.__assign)({},e),a(e)):e}))};return m(e,t,(0,r.__assign)((0,r.__assign)({},i),o))}return e}function m(e,t,n){var a={};return a[t]=(0,r.__assign)((0,r.__assign)({},e[t]),n),(0,r.__assign)((0,r.__assign)({},e),a)}t.MAP_STATE_INITIAL_STATE={},t.MG_INITIAL_SUB_STATE={selectionSet:void 0,layerTransparency:{},selectableLayers:{},expandedGroups:{},runtimeMap:void 0,isArbitraryCs:!1,showLayers:[],showGroups:[],hideLayers:[],hideGroups:[],activeSelectedFeature:void 0},t.MAP_STATE_INITIAL_SUB_STATE={currentView:void 0,initialView:void 0,history:[],historyIndex:-1,externalBaseLayers:[],initialExternalLayers:[],layers:void 0,mapguide:void 0,generic:void 0,clientSelection:void 0},t.mapStateReducer=function(e,n){var f,_,E,v,g,y,h,S;switch(void 0===e&&(e=t.MAP_STATE_INITIAL_STATE),n.type){case o.ActionType.MAP_REFRESH:var T=n.payload;return p(e,T.mapName,(function(e){return{runtimeMap:T.map,isArbitraryCs:null!=(0,c.tryParseArbitraryCs)(T.map.CoordinateSystem.MentorCode)}}));case o.ActionType.INIT_APP:var L=(Ee=n.payload).maps,I=Object.keys(L),A={},C=Ee.activeMapName;C||1!=I.length||(C=I[0]);for(var b=0,N=I;b<N.length;b++){var O=N[b],M=void 0;Ee.initialView&&O==C&&(M={currentView:(0,r.__assign)({},Ee.initialView)});var P=void 0;Ee.initialSelections&&Ee.initialSelections[O]&&(P={selectionSet:Ee.initialSelections[O]},(0,l.debug)("Restoring client-side selection set for: "+O));var R=[],D=[],w=[],F=[],U=void 0,V=void 0,x=L[O].map;if(x&&((0,s.isGenericSubjectMapLayer)(x)?V={subject:(0,r.__assign)({},x)}:U={runtimeMap:x,isArbitraryCs:null!=(0,c.tryParseArbitraryCs)(x.CoordinateSystem.MentorCode)}),O==C&&x&&!(0,s.isGenericSubjectMapLayer)(x)){var k=null!==(f=Ee.initialShowLayers)&&void 0!==f?f:[],B=null!==(_=Ee.initialShowGroups)&&void 0!==_?_:[],G=null!==(E=Ee.initialHideLayers)&&void 0!==E?E:[],Y=null!==(v=Ee.initialHideGroups)&&void 0!==v?v:[];if(x.Layer)for(var z=0,W=x.Layer;z<W.length;z++){var j=W[z];k.indexOf(j.Name)>=0&&!j.Visible?R.push(j.ObjectId):G.indexOf(j.Name)>=0&&j.Visible&&w.push(j.ObjectId)}if(x.Group)for(var H=0,K=x.Group;H<K.length;H++){var Z=K[H];B.indexOf(Z.Name)>=0&&!Z.Visible?D.push(Z.ObjectId):Y.indexOf(Z.Name)>=0&&Z.Visible&&F.push(Z.ObjectId)}(0,l.debug)("Initially showing layers: "+k.join("|")),(0,l.debug)("Initially showing groups: "+B.join("|")),(0,l.debug)("Initially hiding layers: "+G.join("|")),(0,l.debug)("Initially hiding groups: "+Y.join("|")),(0,l.debug)("Initially showing layer ids: "+R.join("|")),(0,l.debug)("Initially showing group ids: "+D.join("|")),(0,l.debug)("Initially hiding layer ids: "+w.join("|")),(0,l.debug)("Initially hiding group ids: "+F.join("|"))}var X=(0,r.__assign)((0,r.__assign)((0,r.__assign)((0,r.__assign)((0,r.__assign)((0,r.__assign)((0,r.__assign)({},t.MG_INITIAL_SUB_STATE),U),P||{}),R.length>0?{showLayers:(0,r.__spreadArray)([],R,!0)}:{}),D.length>0?{showGroups:(0,r.__spreadArray)([],D,!0)}:{}),w.length>0?{hideLayers:(0,r.__spreadArray)([],w,!0)}:{}),F.length>0?{hideGroups:(0,r.__spreadArray)([],F,!0)}:{}),q=(0,r.__assign)((0,r.__assign)((0,r.__assign)((0,r.__assign)((0,r.__assign)((0,r.__assign)((0,r.__assign)({},t.MAP_STATE_INITIAL_SUB_STATE),{generic:V}),{externalBaseLayers:L[O].externalBaseLayers}),{initialExternalLayers:L[O].initialExternalLayers}),{initialView:L[O].initialView}),M||{}),{mapguide:X});(null===(g=null==e?void 0:e[O])||void 0===g?void 0:g.currentView)&&(q.currentView=e[O].currentView),A[O]=q}return(0,r.__assign)((0,r.__assign)({},e),A);case o.ActionType.MAP_PREVIOUS_VIEW:if((Ce=e[(Ee=n.payload).mapName])&&(Ne=Ce.historyIndex-1)>=0){var Q={historyIndex:Ne,currentView:Ce.history[Ne]};return m(e,Ee.mapName,(0,r.__assign)((0,r.__assign)({},Ce),Q))}return e;case o.ActionType.MAP_NEXT_VIEW:return(Ce=e[(Ee=n.payload).mapName])&&(Ne=Ce.historyIndex+1)<Ce.history.length?(Q={historyIndex:Ne,currentView:Ce.history[Ne]},m(e,Ee.mapName,(0,r.__assign)((0,r.__assign)({},Ce),Q))):e;case o.ActionType.MAP_SET_SCALE:if(Ce=e[(Ee=n.payload).mapName]){var J=Ce.currentView,$=Ee.scale;if("object"==typeof J&&"number"==typeof $){var ee={scale:$,resolution:Ee.resolution};J=(0,r.__assign)((0,r.__assign)({},J),ee)}return Q={currentView:J},(te=(0,r.__assign)((0,r.__assign)({},Q),{historyIndex:Ce.historyIndex})).history=(0,r.__spreadArray)([],Ce.history,!0),J&&te.history&&null!=te.historyIndex&&(te.historyIndex++,te.history[te.historyIndex]=J,te.history.length>te.historyIndex+1&&te.history.splice(te.historyIndex+1)),m(e,Ee.mapName,te)}return e;case o.ActionType.MAP_SET_VIEW:if(Ce=e[(Ee=n.payload).mapName]){var te,ne=Ee.view;if((0,a.isMapView)(ne))return Q={currentView:ne},(te=(0,r.__assign)((0,r.__assign)({},Q),{historyIndex:Ce.historyIndex})).history=(0,r.__spreadArray)([],Ce.history,!0),te.history&&null!=te.historyIndex&&(te.historyIndex++,te.history[te.historyIndex]=ne,te.history.length>te.historyIndex+1&&te.history.splice(te.historyIndex+1)),m(e,Ee.mapName,te)}return e;case o.ActionType.MAP_SET_LAYER_TRANSPARENCY:var re=n.payload;return p(e,re.mapName,(function(e){var t=(0,r.__assign)({},e.layerTransparency);return t[re.layerName]=re.opacity,{layerTransparency:t}}));case o.ActionType.LEGEND_SET_LAYER_SELECTABLE:var ae=n.payload;return p(e,ae.mapName,(function(e){var t=(0,r.__assign)({},e.selectableLayers);return t[ae.id]=ae.value,{selectableLayers:t}}));case o.ActionType.LEGEND_SET_GROUP_EXPANDABLE:var ie=n.payload;return p(e,ie.mapName,(function(e){var t=(0,r.__assign)({},e.expandedGroups);return t[ie.id]=ie.value,{expandedGroups:t}}));case o.ActionType.LEGEND_SET_GROUP_VISIBILITY:var oe=n.payload;return p(e,oe.mapName,(function(e){var t=(0,r.__spreadArray)([],e.showGroups,!0),n=(0,r.__spreadArray)([],e.hideGroups,!0);return!0===oe.value?(t.push(oe.id),t=(0,i.makeUnique)(t),n=n.filter((function(e){return e!=oe.id}))):(n.push(oe.id),n=(0,i.makeUnique)(n),t=t.filter((function(e){return e!=oe.id}))),{showLayers:e.showLayers,showGroups:t,hideLayers:e.hideLayers,hideGroups:n}}));case o.ActionType.LEGEND_SET_LAYER_VISIBILITY:var se=n.payload;return p(e,se.mapName,(function(e){var t=(0,r.__spreadArray)([],e.showLayers,!0),n=(0,r.__spreadArray)([],e.hideLayers,!0);return!0===se.value?(t.push(se.id),t=(0,i.makeUnique)(t),n=n.filter((function(e){return e!=se.id}))):(n.push(se.id),n=(0,i.makeUnique)(n),t=t.filter((function(e){return e!=se.id}))),{showLayers:t,showGroups:e.showGroups,hideLayers:n,hideGroups:e.hideGroups}}));case o.ActionType.MAP_SET_SELECTION:var le=n.payload;return p(e,le.mapName,(function(e){return{selectionSet:le.selection,layerIndex:-1,featureIndex:-1,activeSelectedFeature:void 0}}));case o.ActionType.MAP_ADD_CLIENT_SELECTED_FEATURE:var ue=n.payload;if(Ce=e[ue.mapName]){var ce=null!==(y=Ce.clientSelection)&&void 0!==y?y:{layers:[]},pe=ce.layers.find((function(e){return e.name==ue.layerName}));return pe||(pe={name:ue.layerName,features:[]},ce.layers.push(pe)),pe.features.push(ue.feature),m(e,ue.mapName,(0,r.__assign)((0,r.__assign)({},Ce),{clientSelection:ce}))}return e;case o.ActionType.MAP_CLEAR_CLIENT_SELECTION:return(Ce=e[(Ee=n.payload).mapName])?m(e,Ee.mapName,(0,r.__assign)((0,r.__assign)({},Ce),{clientSelection:void 0})):e;case o.ActionType.MAP_SHOW_SELECTED_FEATURE:var de=n.payload;return p(e,de.mapName,(function(e){return{activeSelectedFeature:{layerId:de.layerId,selectionKey:de.selectionKey}}}));case o.ActionType.MAP_SET_BASE_LAYER:var me=n.payload;return(Ce=e[me.mapName])?(Q={externalBaseLayers:(Oe=Ce.externalBaseLayers||[]).map((function(e){return"UTFGrid"!=e.kind&&(e.visible=!1),e.name==me.layerName&&(e.visible=!0),e}))},m(e,me.mapName,(0,r.__assign)((0,r.__assign)({},Ce),Q))):e;case o.ActionType.EXTERNAL_LAYERS_READY:return(Ce=e[(Ee=n.payload).mapName])?(Q={layers:Oe=null!==(h=Ce.layers)&&void 0!==h?h:[]},m(e,Ee.mapName,(0,r.__assign)((0,r.__assign)({},Ce),Q))):e;case o.ActionType.LAYER_ADDED:var fe=n.payload;if(Ce=e[fe.mapName]){Q={layers:Oe=(0,r.__spreadArray)([fe.layer],null!==(S=Ce.layers)&&void 0!==S?S:[],!0)};var _e=m(e,fe.mapName,(0,r.__assign)((0,r.__assign)({},Ce),Q));return fe.defaultStyle?d(_e,fe.mapName,fe.layer.name,(function(){return{vectorStyle:fe.defaultStyle}})):_e}return e;case o.ActionType.REMOVE_LAYER:var Ee;return(Ce=e[(Ee=n.payload).mapName])&&Ce.layers?(Q={layers:Oe=Ce.layers.filter((function(e){return e.name!=n.payload.layerName}))},m(e,Ee.mapName,(0,r.__assign)((0,r.__assign)({},Ce),Q))):e;case o.ActionType.SET_LAYER_VISIBILITY:var ve=n.payload,ge=(O=ve.mapName,ve.layerName),ye=ve.visible;return d(e,O,ge,(function(){return{visible:ye}}));case o.ActionType.SET_LAYER_OPACITY:var he=n.payload,Se=(O=he.mapName,ge=he.layerName,he.opacity);return d(e,O,ge,(function(){return{opacity:Se}}));case o.ActionType.SET_HEATMAP_LAYER_BLUR:var Te=n.payload,Le=(O=Te.mapName,ge=Te.layerName,Te.blur);return d(e,O,ge,(function(e){var t;return{heatmap:(0,r.__assign)((0,r.__assign)({},null!==(t=e.heatmap)&&void 0!==t?t:{blur:15,radius:5}),{blur:Le})}}));case o.ActionType.SET_HEATMAP_LAYER_RADIUS:var Ie=n.payload,Ae=(O=Ie.mapName,ge=Ie.layerName,Ie.radius);return d(e,O,ge,(function(e){var t;return{heatmap:(0,r.__assign)((0,r.__assign)({},null!==(t=e.heatmap)&&void 0!==t?t:{blur:15,radius:5}),{radius:Ae})}}));case o.ActionType.SET_LAYER_INDEX:var Ce,be=n.payload,Ne=(O=be.mapName,be.index);if(ge=be.layerName,(Ce=e[O])&&Ce.layers){for(var Oe=(0,r.__spreadArray)([],Ce.layers,!0),Me=-1,Pe=0;Pe<Oe.length;Pe++)if(Oe[Pe].name==ge){Me=Pe;break}if(Me>=0&&Me!=Ne&&Ne<Oe.length&&Ne>=0){var Re=Oe[Me];return Oe.splice(Me,1),Oe.splice(Ne,0,Re),Q={layers:Oe},m(e,O,(0,r.__assign)((0,r.__assign)({},Ce),Q))}}return e;case o.ActionType.SET_LAYER_VECTOR_STYLE:var De=n.payload,we=(O=De.mapName,ge=De.layerName,De.style),Fe=De.which;return d(e,O,ge,(function(e){return Fe==u.VectorStyleSource.Base?{vectorStyle:we}:Fe==u.VectorStyleSource.Cluster?{cluster:(0,r.__assign)((0,r.__assign)({},e.cluster),{style:(0,r.__assign)({},we)})}:{}}));case o.ActionType.ADD_LAYER_BUSY_WORKER:var Ue=n.payload;return d(e,O=Ue.mapName,ge=Ue.layerName,(function(e){return{busyWorkerCount:e.busyWorkerCount+1}}));case o.ActionType.REMOVE_LAYER_BUSY_WORKER:var Ve=n.payload;return d(e,O=Ve.mapName,ge=Ve.layerName,(function(e){return{busyWorkerCount:e.busyWorkerCount-1}}))}return e}},59632:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.modalReducer=t.MODAL_INITIAL_STATE=void 0;var r=n(70655),a=n(10737);t.MODAL_INITIAL_STATE={},t.modalReducer=function(e,n){switch(void 0===e&&(e=t.MODAL_INITIAL_STATE),n.type){case a.ActionType.MODAL_SHOW_COMPONENT:return(i={})[n.payload.name]={modal:n.payload.modal,component:n.payload.component,componentProps:n.payload.componentProps},(0,r.__assign)((0,r.__assign)({},e),i);case a.ActionType.MODAL_SHOW_URL:var i;return(i={})[n.payload.name]=(0,r.__assign)({},n.payload),(0,r.__assign)((0,r.__assign)({},e),i);case a.ActionType.MODAL_CLOSE:var o=(0,r.__assign)({},e);return delete o[n.payload],o}return e}},88979:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.mouseReducer=t.MOUSE_INITIAL_STATE=void 0;var r=n(70655),a=n(12694),i=n(10737);t.MOUSE_INITIAL_STATE={coords:void 0},t.mouseReducer=function(e,n){switch(void 0===e&&(e=t.MOUSE_INITIAL_STATE),n.type){case i.ActionType.UPDATE_MOUSE_COORDINATES:var o=n.payload.coord;if((0,a.isCoordinate)(o)){var s={coords:o};return(0,r.__assign)((0,r.__assign)({},e),s)}}return e}},39774:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.rootReducer=void 0;var r=n(45638),a=n(95017),i=n(98495),o=n(12485),s=n(59632),l=n(16491),u=n(55906),c=n(93059),p=n(88979),d=n(75210);t.rootReducer={initError:l.initErrorReducer,config:r.configReducer,template:d.templateReducer,mapState:u.mapStateReducer,viewer:c.viewerReducer,toolbar:a.toolbarReducer,taskpane:i.taskPaneReducer,modal:s.modalReducer,mouse:p.mouseReducer,lastaction:o.lastAction}},98495:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.taskPaneReducer=t.TASK_PANE_INITIAL_STATE=void 0;var r=n(70655),a=n(10737);function i(e,t){var n=e.navIndex,a=e.navigation;a[++n]=t,a.length>n+1&&a.splice(n+1);var i={navIndex:n,navigation:a,lastUrlPushed:!1};return(0,r.__assign)((0,r.__assign)({},e),i)}t.TASK_PANE_INITIAL_STATE={navIndex:-1,navigation:[],initialUrl:void 0,lastUrlPushed:!1},t.taskPaneReducer=function(e,n){switch(void 0===e&&(e=t.TASK_PANE_INITIAL_STATE),n.type){case a.ActionType.INIT_APP:var o={initialUrl:(u=n.payload).initialUrl,navIndex:0,navigation:[u.initialUrl]};return(0,r.__assign)((0,r.__assign)({},e),o);case a.ActionType.TASK_PANE_HOME:return null!=e.initialUrl?i(e,e.initialUrl):e;case a.ActionType.TASK_PANE_BACK:var s=e.navIndex;return o={navIndex:--s,navigation:l=e.navigation,lastUrlPushed:!1},(0,r.__assign)((0,r.__assign)({},e),o);case a.ActionType.TASK_PANE_FORWARD:return s=e.navIndex,o={navIndex:++s,navigation:l=e.navigation,lastUrlPushed:!1},(0,r.__assign)((0,r.__assign)({},e),o);case a.ActionType.TASK_PANE_PUSH_URL:var l,u=n.payload;return s=e.navIndex,(l=e.navigation)[s+1]=u.url,l.length>s+2&&l.splice(s+2),!0===u.silent?(o={navigation:l},(0,r.__assign)((0,r.__assign)({},e),o)):(o={navIndex:s+1,navigation:l,lastUrlPushed:!0},(0,r.__assign)((0,r.__assign)({},e),o));case a.ActionType.TASK_INVOKE_URL:return i(e,n.payload.url)}return e}},75210:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.templateReducer=t.setCustomTemplateReducer=t.isElementState=t.TEMPLATE_INITIAL_STATE=void 0;var r,a=n(70655),i=n(10737);function o(e){return null!=e&&void 0!==e.legendVisible&&void 0!==e.selectionPanelVisible&&void 0!==e.taskPaneVisible}t.TEMPLATE_INITIAL_STATE={initialInfoPaneWidth:250,initialTaskPaneWidth:300,taskPaneVisible:!0,selectionPanelVisible:!0,legendVisible:!0,autoDisplaySelectionPanelOnSelection:!0},t.isElementState=o,t.setCustomTemplateReducer=function(e){r=e},t.templateReducer=function(e,n){void 0===e&&(e=t.TEMPLATE_INITIAL_STATE);var s=e;if(n.type==i.ActionType.MAP_SET_SELECTION){var l=n.payload.selection;l&&l.SelectedFeatures&&l.SelectedFeatures.SelectedLayer.length&&e.autoDisplaySelectionPanelOnSelection&&(s=(0,a.__assign)((0,a.__assign)({},e),{selectionPanelVisible:!0,legendVisible:!1,taskPaneVisible:!1}))}if(n.type==i.ActionType.MAP_ADD_CLIENT_SELECTED_FEATURE){var u=n.payload.feature;(null==u?void 0:u.properties)&&(s=(0,a.__assign)((0,a.__assign)({},e),{selectionPanelVisible:!0,legendVisible:!1,taskPaneVisible:!1}))}if("function"==typeof r)return r(e,s,n);switch(n.type){case i.ActionType.FUSION_SET_ELEMENT_STATE:return o(n.payload)?(0,a.__assign)((0,a.__assign)({},s),n.payload):s;case i.ActionType.INIT_APP:var c={};return n.payload.initialTaskPaneWidth&&(c.initialTaskPaneWidth=n.payload.initialTaskPaneWidth),n.payload.initialInfoPaneWidth&&(c.initialInfoPaneWidth=n.payload.initialInfoPaneWidth),(0,a.__assign)((0,a.__assign)({},s),c)}return s}},95017:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.toolbarReducer=t.TOOLBAR_INITIAL_STATE=void 0;var r=n(70655),a=(0,r.__importDefault)(n(7145)),i=n(10737),o=n(75210),s=n(95601);function l(e,t,n,r,i,o){void 0===i&&(i=!1),void 0===o&&(o=!1);var s={flyouts:{}};if(!t.flyouts[e]&&o)return t;var l={};if(l[r]=n,s.flyouts[e]=l,i)for(var u in t.flyouts)u!=e&&(s.flyouts[u]={$merge:{open:!1}});return(0,a.default)(t,s)}function u(e,t,n){return void 0===n&&(n=!1),l(e,t,{open:!1,metrics:null},"$merge",!1,n)}t.TOOLBAR_INITIAL_STATE={toolbars:{},flyouts:{}},t.toolbarReducer=function(e,n){switch(void 0===e&&(e=t.TOOLBAR_INITIAL_STATE),n.type){case i.ActionType.INIT_APP:return(0,r.__assign)((0,r.__assign)({},e),n.payload.toolbars);case i.ActionType.COMPONENT_OPEN:var a=n.payload;return(c=a.flyoutId)?l(c,e,{open:!0,metrics:a.metrics,componentName:a.name,componentProps:a.props},"$set",!0):e;case i.ActionType.COMPONENT_CLOSE:return e.flyouts[s.WEBLAYOUT_CONTEXTMENU]&&(c=n.payload.flyoutId)?l(c,e,{open:!1,metrics:null,componentName:null,componentProps:null},"$set"):e;case i.ActionType.CONTEXT_MENU_OPEN:return e.flyouts[s.WEBLAYOUT_CONTEXTMENU]?l(s.WEBLAYOUT_CONTEXTMENU,e,{open:!0,metrics:{posX:n.payload.x,posY:n.payload.y}},"$merge",!0):e;case i.ActionType.FLYOUT_OPEN:return(c=n.payload.flyoutId)?l(c,e,{open:!0,metrics:n.payload.metrics},"$merge",!0):e;case i.ActionType.FUSION_SET_ELEMENT_STATE:return(0,o.isElementState)(n.payload)&&!n.payload.taskPaneVisible?u(s.WEBLAYOUT_TASKMENU,e,!0):e;case i.ActionType.FUSION_SET_TASK_PANE_VISIBILITY:return n.payload?e:u(s.WEBLAYOUT_TASKMENU,e);case i.ActionType.FLYOUT_CLOSE:var c;if(c=n.payload.flyoutId)return u(c,e);case i.ActionType.CONTEXT_MENU_CLOSE:return u(s.WEBLAYOUT_CONTEXTMENU,e)}return e}},93059:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.viewerReducer=t.VIEWER_INITIAL_STATE=void 0;var r=n(70655),a=n(29256),i=n(10737);t.VIEWER_INITIAL_STATE={busyCount:0,size:void 0,tool:a.ActiveMapTool.None,featureTooltipsEnabled:!0},t.viewerReducer=function(e,n){switch(void 0===e&&(e=t.VIEWER_INITIAL_STATE),n.type){case i.ActionType.INIT_APP:var a=n.payload.initialActiveTool,o=n.payload.featureTooltipsEnabled,s=void 0;null!=a&&(s={tool:a});var l=void 0;return void 0!==o&&(l={featureTooltipsEnabled:o}),(0,r.__assign)((0,r.__assign)((0,r.__assign)({},e),s),l);case i.ActionType.MAP_SET_ACTIVE_TOOL:return s={tool:n.payload},(0,r.__assign)((0,r.__assign)({},e),s);case i.ActionType.MAP_SET_MAPTIP:return s={featureTooltipsEnabled:n.payload},(0,r.__assign)((0,r.__assign)({},e),s);case i.ActionType.MAP_ENABLE_SELECT_DRAGPAN:return s={selectCanDragPan:n.payload},(0,r.__assign)((0,r.__assign)({},e),s);case i.ActionType.MAP_SET_BUSY_COUNT:return s={busyCount:n.payload},(0,r.__assign)((0,r.__assign)({},e),s);case i.ActionType.MAP_RESIZED:return s={size:[n.payload.width,n.payload.height]},(0,r.__assign)((0,r.__assign)({},e),s)}return e}},87930:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.configureStore=void 0;var r=n(70655),a=n(97779),i=(0,r.__importDefault)(n(53894)),o=n(57351),s=(n(94614),n(39774));t.configureStore=function(e,t){var n,l=t?(0,a.combineReducers)((0,r.__assign)((0,r.__assign)({},s.rootReducer),t)):(0,a.combineReducers)(s.rootReducer);return a.compose.apply(void 0,(0,r.__spreadArray)([(n=[o.promiseMiddleware,i.default],a.applyMiddleware.apply(void 0,n))],[],!1))(a.createStore)(l,e)}},94614:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.logger=void 0;var r=n(10737),a=n(5549).hu;t.logger=a({collapsed:!0,stateTransformer:function(e){return e},predicate:function(e,t){var n=t.type;return"redux-form/BLUR"!==n&&"redux-form/CHANGE"!==n&&"redux-form/FOCUS"!==n&&"redux-form/TOUCH"!==n&&n!==r.ActionType.MAP_RESIZED&&n!==r.ActionType.UPDATE_MOUSE_COORDINATES&&n!==r.ActionType.MAP_SET_BUSY_COUNT&&n!==r.ActionType.ADD_LAYER_BUSY_WORKER&&n!==r.ActionType.REMOVE_LAYER_BUSY_WORKER}})},57351:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.promiseMiddleware=void 0;var r=n(70655);t.promiseMiddleware=function(e){var t=e.dispatch;return function(e){return function(n){if(!function(e){if(null!==e&&"object"==typeof e)return e.promise&&"function"==typeof e.promise.then}(n.payload))return e(n);var a=n.types,i=n.payload,o=n.meta,s=i.promise,l=i.data,u=a[0],c=a[1],p=a[2],d={type:u},m=l?{payload:l}:{},f=o?{meta:o}:{};return t((0,r.__assign)((0,r.__assign)((0,r.__assign)({},d),m),f)),s.then((function(e){t({type:c,payload:e,meta:o})}),(function(e){t({type:p,payload:e,meta:o})}))}}}},99818:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.STRINGS_EN=void 0;var r=n(95601);t.STRINGS_EN={OK:"OK",NONE:"NONE",ERROR:"Error",WARNING:"Warning",PBMG:"Powered by <a href='https://mapguide.osgeo.org' target='_blank'>MapGuide</a>",INIT_WARNINGS_FOUND:"The following warnings were encountered loading the viewer",INIT_WARNING_BING_API_KEY_REQD:"A Bing Maps API key is required. Sign up for an API key at http://www.bingmapsportal.com/",INIT_WARNING_BING_UNKNOWN_LAYER:"Unknown bing maps layer type {type}. This layer was skipped",INIT_WARNING_UNSUPPORTED_GOOGLE_MAPS:"This viewer does not support Google Maps base layers",INIT_WARNING_NO_CONTEXT_MENU:"Could not find the context menu configuration. Right-clicking the map will show an empty context menu. If you are loading from a Flexible Layout, it must have a container named '{containerName}'",LAYER_TRANSPARENCY:"Layer Transparency",LAYER_ID_BASE:"Base Layers",LAYER_ID_MG_BASE:"MapGuide Map",LAYER_ID_SUBJECT:"Subject Layer",LAYER_ID_MG_SEL_OVERLAY:"MapGuide Selection Overlay",UNKNOWN_WIDGET:"This button references an unknown or unsupported widget: {widget}",UNKNOWN_COMMAND_REFERENCE:"This button references an unknown command or unsupported: {command}",INIT:"Initializing",INIT_DESC:"Please wait while the viewer is loading required assets ...",INIT_ERROR_TITLE:"An error occurred during startup",INIT_ERROR_UNKNOWN_RESOURCE_TYPE:"<p>Unknown or unsupported resource type for resource: <strong>{resourceId}</strong></p>",INIT_ERROR_MISSING_RESOURCE_PARAM:"<p>No <strong>resource</strong> parameter found. This viewer assumes this parameter to be set in the query string and must refer to a valid Web Layout or Application Definition. If not specified, it will try to init from a Application Definition document at <strong>appdef.json</strong></p>",INIT_ERROR_UNSUPPORTED_COORD_SYS:"<p>The Map Definition <strong>{mapDefinition}</strong>, uses a coordinate system that does not resolve to a valid EPSG code and cannot be loaded in this viewer</p><p>Solution:</p><ul><li>Change the coordinate system of this Map Definition to one that resolves to an EPSG code</li><li>Please note: There will be a small performance overhead for server-side re-projection as a result of doing this</li></ul>",INIT_ERROR_UNREGISTERED_EPSG_CODE:"<p>The Map Definition <strong>{mapDefinition}</strong>, uses a coordinate system that resolves to a valid EPSG code (<strong>EPSG:{epsg}</strong>), but no projection for this EPSG code has been registered</p><p>Solution:</p><ol><li>Search for the matching proj4js definition at <a href='http://epsg.io/'>http://epsg.io/</a></li><li>Register this projection to the viewer before mounting it</li></ol>",INIT_ERROR_EXPIRED_SESSION:"<p>The session id given has expired: <strong>{sessionId}</strong></p><p>Reload the viewer without the <strong>session</strong> parameter, or supply a valid session id for the <strong>session</strong> parameter</p>",INIT_ERROR_RESOURCE_NOT_FOUND:"Attempted to load the following resource, but it was not found: <strong>{resourceId}</strong>",INIT_ERROR_NO_CONNECTION:"<p>There is no connection between the MapGuide Web Tier and the MapGuide Server.</p><p>Possible causes:</p><ul><li>MapGuide Server is not running or is no longer responding</li><li>Internet connection problems</li></ul><p>Possible solutions:</p><ul><li>Restart the MapGuide Server Service</li><li>Contact your server administrator</li></ul>",TPL_SIDEBAR_OPEN_TASKPANE:"Open Task Pane",TPL_SIDEBAR_OPEN_LEGEND:"Open Legend",TPL_SIDEBAR_OPEN_SELECTION_PANEL:"Open Selection Panel",TPL_TITLE_TASKPANE:"Task Pane",TPL_TITLE_LEGEND:"Legend",TPL_TITLE_SELECTION_PANEL:"Selection",TT_GO_HOME:"Go home",TT_GO_BACK:"Go back",TT_GO_FORWARD:"Go forward",SESSION_EXPIRED:"Session Expired",SESSION_EXPIRED_DETAILED:"Your current MapGuide session has expired",SESSION_EXPIRED_AVAILABLE_ACTIONS:"Available Actions:",SESSION_EXPIRED_RELOAD_VIEWER:"Reload the viewer",ERR_UNREGISTERED_LAYOUT:"ERROR: No layout named ({layout}) registered",ERR_UNREGISTERED_COMPONENT:"ERROR: No such registered component ({componentId}). Ensure the component has been registered in the component registry with an id of: {componentId}",ERR_NO_COMPONENT_ID:"No component id specified",LOADING_MSG:"Loading ...",MENU_TASKS:"Tasks",NO_SELECTED_FEATURES:"No selected features",FMT_SCALE_DISPLAY:"Scale - 1:{scale}",FMT_SELECTION_COUNT:"Selected {total} feature(s) in {layerCount} layer(s)",DIGITIZE_POINT_PROMPT:"Click to finish and draw a point at this location<br/><br/>Press ESC to cancel",DIGITIZE_LINE_PROMPT:"Click to set this position as the start.<br/>Click again to finish the line at this position<br/><br/>Press ESC to cancel",DIGITIZE_LINESTRING_PROMPT:"Click to set this position as the start.<br/>Click again to add a vertex at this position.<br/>If you drew a vertex at the wrong spot, you can press {key} to undo.<br/>Hold SHIFT and drag while digitizing to draw in freehand mode<br/></br>Double click to finish<br/>Press ESC to cancel",DIGITIZE_CIRCLE_PROMPT:"Click to set this position as the center.<br/>Move out to the desired radius and click again to finish<br/><br/>Press ESC to cancel",DIGITIZE_RECT_PROMPT:"Click to set this position as one corner.<br/>Click again to finish and set this position as the other corner<br/><br/>Press ESC to cancel",DIGITIZE_POLYGON_PROMPT:"Click to set this positon as the start.<br/>Click again to add a vertex at this position.<br/>If you drew a vertex at the wrong spot, you can press {key} to undo<br/>Hold SHIFT and drag while digitizing to draw in freehand mode<br/><br/>Double click to finish and close the polygon<br/>Press ESC to cancel",MEASURE:"Measure",MEASURE_SEGMENT:"Segment",MEASURE_LENGTH:"Length",MEASURE_SEGMENT_PART:"Segment {segment}",MEASURE_TOTAL_AREA:"Total Area",MEASURE_TOTAL_LENGTH:"Total Length",MEASURING:"Measuring",MEASURING_MESSAGE:"You are currently measuring",MEASUREMENT:"Measurement",MEASUREMENT_TYPE:"Measurement Type",MEASUREMENT_TYPE_LENGTH:"Length (LineString)",MEASUREMENT_TYPE_AREA:"Area (Polygon)",MEASUREMENT_CLEAR:"Clear",MEASUREMENT_CONTINUE_POLYGON:"Click to continue drawing the polygon. Double-click to finish.",MEASUREMENT_CONTINUE_LINE:"Click to continue drawing the line. Double-click to finish.",MEASUREMENT_START_DRAWING:"Click to start drawing",MEASUREMENT_START:"Start",MEASUREMENT_END:"End",NAVIGATOR_PAN_EAST:"Pan East",NAVIGATOR_PAN_WEST:"Pan West",NAVIGATOR_PAN_SOUTH:"Pan South",NAVIGATOR_PAN_NORTH:"Pan North",NAVIGATOR_ZOOM_OUT:"Zoom Out",NAVIGATOR_ZOOM_IN:"Zoom In",FMT_NAVIGATOR_ZOOM_TO_SCALE:"Zoom to 1:{scale}",EXTERNAL_BASE_LAYERS:"External Base Layers",SELECTION_PROPERTY:"Property",SELECTION_VALUE:"Value",SELECTION_PREV_FEATURE:"Previous Feature",SELECTION_NEXT_FEATURE:"Next Feature",SELECTION_ZOOMTO_FEATURE:"Zoom to selected feature",VIEWER_OPTIONS:"Viewer Options",ABOUT:"About",HELP:"Help",QUICKPLOT_HEADER:"Quick Plot",QUICKPLOT_TITLE:"Title",QUICKPLOT_SUBTITLE:"Sub-Title",QUICKPLOT_PAPER_SIZE:"Paper Size",QUICKPLOT_ORIENTATION:"Orientation",QUICKPLOT_ORIENTATION_P:"Portrait",QUICKPLOT_ORIENTATION_L:"Landscape",QUICKPLOT_SHOWELEMENTS:"Show Elements",QUICKPLOT_SHOWLEGEND:"Show Legend",QUICKPLOT_SHOWNORTHARROW:"Show North Arrow",QUICKPLOT_SHOWCOORDINTES:"Show Coordinates",QUICKPLOT_SHOWSCALEBAR:"Show Scalebar",QUICKPLOT_SHOWDISCLAIMER:"Show Disclaimer",QUICKPLOT_ADVANCED_OPTIONS:"Advanced Options",QUICKPLOT_SCALING:"Scale",QUICKPLOT_DPI:"DPI",QUICKPLOT_BOX_INFO:"Quick Plot Map Capture box is active. Map rotation is disabled while box is active",QUICKPLOT_BOX_ROTATION:"Capture Box Rotation",QUICKPLOT_GENERATE:"Generate Plot",QUICKPLOT_COMMERCIAL_LAYER_WARNING:"Quick Plot will NOT include any visible commercial map layers",FEATURE_TOOLTIPS:"Feature Tooltips",MANUAL_FEATURE_TOOLTIPS:"Manual Feature Tooltips (click to show)",GEOLOCATION_SUCCESS:"Zoomed to your position",GEOLOCATION_WARN_OUTSIDE_MAP:"Zoomed to your position. It is outside the extents of your map",GEOLOCATION_ERROR:"Geolocation error: {message} ({code})",TASK_PANE_RESIZING:"Task Pane is resizing ...",TASK_PANE_LOADING:"Loading",TASK_PANE_LOADING_DESC:"Task Pane content is loading ...",COORDTRACKER:"Coordinate Tracker",COORDTRACKER_NO_PROJECTIONS:"You have no projections configured for this component",MAP_SIZE_DISPLAY_UNITS:"Map view size display units",ADD_MANAGE_LAYERS:"Add/Manage Layers",ADD_LAYER:"Add Layer",ADD_LAYER_TILED:"Add Tiled Layer",MANAGE_LAYERS:"Manage Layers",LAYER_TYPE:"Layer Type",SELECT_LAYER_TYPE:"Select Layer Type ...",ADD_WMS_LAYER_URL:"WMS Service URL",ADD_WMS_LAYER_LOADING:"Loading",ADD_WMS_LAYER_LOADING_DESC:"Loading WMS Capabilities",ADD_WMS_LAYER_NO_LAYERS:"No WMS Layers",WMS_VERSION:"WMS Version: {version}",ADD_WFS_LAYER_URL:"WFS Service URL",ADD_WFS_LAYER_LOADING:"Loading",ADD_WFS_LAYER_LOADING_DESC:"Loading WFS Capabilities",ADD_WFS_LAYER_NO_LAYERS:"No WFS Layers",WFS_NO_LAYER_DESCRIPTION:"Enter a WFS Service URL above and click the button beside it to load available layers",WFS_VERSION:"WFS Version: {version}",OWS_SERVICE_NAME:"Name: {name}",OWS_SERVICE_TITLE:"Title: {title}",OWS_SERVICE_ABSTRACT:"Abstract: {abstract}",WMS_LAYERS:"WMS Layers",WFS_LAYERS:"WFS Layers",OWS_LAYER_NAME:"Name: {name}",OWS_LAYER_TITLE:"Title: {title}",OWS_LAYER_ABSTRACT:"Abstract: {abstract}",OWS_LAYER_CRS:"CRS: {crs}",OWS_ADD_LAYER_PROMPT:"Click this layer to add it to the map",ADDED_LAYER:"Added layer: {name}",REMOVED_LAYER:"Removed layer: {name}",ADD_WFS_LAYER:"Add WFS Layer",SHARE_LINK_COPY_CLIPBOARD:"Copy Link",SHARE_LINK_COPIED:"Link copied",WMS_NO_LAYER_DESCRIPTION:"Enter a WMS Service URL above and click the button beside it to load available layers",UNIT_UNKNOWN:"Unknown",UNIT_INCHES:"Inches",UNIT_FEET:"Feet",UNIT_YARDS:"Yards",UNIT_MILES:"Miles",UNIT_NAUT_MILES:"Nautical Miles",UNIT_MILLIMETERS:"Millimeters",UNIT_CENTIMETERS:"Centimeters",UNIT_METERS:"Meters",UNIT_KILOMETERS:"Kilometers",UNIT_DEGREES:"Degrees",UNIT_DEC_DEGREES:"Decimal Degrees",UNIT_DMS:"Degrees Minutes Seconds",UNIT_PIXELS:"Pixels",UNIT_ABBR_UNKNOWN:"unk",UNIT_ABBR_INCHES:"in",UNIT_ABBR_FEET:"ft",UNIT_ABBR_YARDS:"yd",UNIT_ABBR_MILES:"mi",UNIT_ABBR_NAUT_MILES:"nm",UNIT_ABBR_MILLIMETERS:"mm",UNIT_ABBR_CENTIMETERS:"cm",UNIT_ABBR_METERS:"m",UNIT_ABBR_KILOMETERS:"km",UNIT_ABBR_DEGREES:r.DEG,UNIT_ABBR_DEC_DEGREES:r.DEG,UNIT_ABBR_DMS:r.DEG,UNIT_ABBR_PIXELS:"px",UNIT_FMT_M:"{value} m",UNIT_FMT_KM:"{value} km",UNIT_FMT_SQM:"{value} m<sup>2</sup>",UNIT_FMT_SQKM:"{value} km<sup>2</sup>",OL_ATTRIBUTION_TIP:"Attributions",OL_OVERVIEWMAP_TIP:"Overview Map",OL_RESET_ROTATION_TIP:"Reset Rotation",FEATURE_TOOLTIP_URL_HELP_TEXT:"Click for more information",SHARE_LINK_INCLUDE_SESSION:"Include Session ID",WINDOW_RESIZING:"Resizing Window",WINDOW_MOVING:"Moving Window",OTHER_THEME_RULE_COUNT:"... ({count} other theme rules)",LEGEND_FILTER_LAYERS:"Filter/search for layers or groups",ADD_LAYER_KIND_PROMPT:"What kind of layer do you want to add?",LAYER_KIND_FILE:"A local file-based layer",LAYER_KIND_URL:"A remote url-based layer",ADD_FILE:"Add Local File",ADD_FILE_INSTRUCTIONS:"Browse and select a file to view it locally on the map (it won't be saved or uploaded to the internet)",FMT_UPLOADED_FILE:"(size: {size} bytes, type: {type})",ADD_LOCAL_FILE_LAYER_FAILURE_NOT_TEXT:"Could not read text content from this file",ADD_LOCAL_FILE_LAYER_FAILURE:"Failed to load file as layer. It is probably an unsupported file format",WMS_UNSUPPORTED_VERSION:"Unsupported WMS version: {version}",NO_EXTERNAL_LAYERS:"No Layers",NO_EXTERNAL_LAYERS_DESC:"Add layers via the {tabName} tab above",LAYER_OPACITY:"Opacity",LAYER_HEATMAP_BLUR:"Heatmap Blur Size",LAYER_HEATMAP_RADIUS:"Heatmap Radius Size",LAYER_NAME_EXISTS:"A layer named {name} already exists",LAYER_MANAGER_TT_MOVE_UP:"Move this layer up the draw order",LAYER_MANAGER_TT_MOVE_DOWN:"Move this layer down the draw order",LAYER_MANAGER_TT_ZOOM_EXTENTS:"Zoom to the extents of this layer",LAYER_MANAGER_TT_REMOVE:"Remove this layer",LAYER_MANAGER_TT_EDIT_STYLE:"Edit style",LAYER_MANAGER_TT_MORE_OPTIONS:"Show more layer options",CANCEL:"Cancel",UNKNOWN_FILE_TYPE:"Unknown",WMS_SERVICE_INFO:"WMS Service Info",WFS_SERVICE_INFO:"WFS Service Info",WMS_AVAILABLE_LAYERS:"Available WMS Layers",WFS_AVAILABLE_LAYERS:"Available WFS Layers",ADD_LAYER_WITH_WMS_STYLE:"Add layer ({style})",ADD_LAYER_WITH_WMS_STYLE_TILED:"Add tiled layer ({style})",WMS_LEGEND:"WMS Legend",VSED_NO_STYLES_TITLE:"No Styles",VSED_NO_STYLES_DESC:"This editor is not configured to edit any styles",VECTOR_LAYER_STYLE:"Vector Layer Style",VSED_PT_FILL_COLOR:"Point Fill Color",VSED_PT_FILL_COLOR_ALPHA:"Point Fill Color Alpha",VSED_PT_RADIUS:"Point Radius",VSED_PT_OUTLINE_COLOR:"Point Outline Color",VSED_PT_OUTLINE_COLOR_ALPHA:"Point Outline Color Alpha",VSED_PT_OUTLINE_WIDTH:"Point Outline Thickness",VSED_LN_OUTLINE_COLOR:"Line Color",VSED_LN_OUTLINE_COLOR_ALPHA:"Line Color Alpha",VSED_LN_OUTLINE_THICKNESS:"Line Thickness",VSED_PL_FILL_COLOR:"Fill Color",VSED_PL_FILL_COLOR_ALPHA:"Fill Color Alpha",VSED_PL_OUTLINE_COLOR:"Outline Color",VSED_PL_OUTLINE_COLOR_ALPHA:"Outline Color Alpha",VSED_PL_OUTLINE_THICKNESS:"Outline Thickness",VSED_TAB_POINT:"Point",VSED_TAB_LINE:"Line",VSED_TAB_POLY:"Polygon",VSED_PT_TYPE:"Point Style Type",VSED_PT_TYPE_CIRCLE:"Circle",VSED_PT_TYPE_ICON:"Icon",VSED_PT_ICON_ANCHOR:"Anchor",VSED_PT_ICON_ANCHOR_H:"Horizontal",VSED_PT_ICON_ANCHOR_V:"Vertical",VSED_PT_ICON_SRC:"Image URL",VSED_PT_ICON_ROTATE_WITH_VIEW:"Rotate with view",VSED_PT_ICON_ROTATION:"Rotation",VSED_PT_ICON_SCALE:"Scale",ADD_LAYER_PROJECTION:"Projection of this layer",ADDING_LAYER_ERROR:"Error adding layer",LOADING_LAYER:"Loading layer: {name}",ACTION_CLOSE:"Close",MORE_LAYER_OPTIONS:"More Layer Options",CHOOSE_FILE:"Choose file ...",BROWSE:"Browse",SEL_FEATURE_PROPERTIES:"Feature Properties",SEL_FEATURE_PROPERTIES_NONE:"No properties",SEL_CLUSTER_PROPERTIES:"Cluster Properties (size: {size})",ADD_LOCAL_FILE_LAYER_FAILURE_NO_FORMATS:"Failed to add layer. No format drivers registered",ENABLE_CLUSTERING:"Enable Clustering",POINT_CLUSTER_DISTANCE:"Point Cluster Distance",EXPR_NOT_SET:"(Not set)",ENABLE_LABELS:"Enable Labels",LABEL_TEXT:"Label Text",LABEL_SIZE:"Label Size",LABEL_COLOR:"Label Color",LABEL_OUTLINE_COLOR:"Label Outline Color",LABEL_OUTLINE_THICKNESS:"Label Outline Thickness",LABEL_BOLD:"Bold",LABEL_ITALIC:"Italic",LABEL_LINE_PLACEMENT:"Line Placement",ADD_FILE_PROCESSING:"Processing file ...",GENERATE_THEMABLE_LAYER:"Generate Themable Layer",THEME_ON_PROPERTY:"Theme On Property",COLORBREWER_THEME:"<a href='https://colorbrewer2.org/' target='_blank'>ColorBrewer</a> theme",LABEL_USING_PROPERTY:"Label Using Property",CLUSTER_CLICK_ACTION:"Action to perform when cluster is clicked",CLUSTER_CLICK_ACTION_SHOW_POPUP:"Display attributes of points in a popup",CLUSTER_CLICK_ACTION_ZOOM_EXTENTS:"Zoom into selected cluster",EXTERNAL_LAYERS:"External Layers",CREATE_VECTOR_LAYER:"Vector Layer",CREATE_VECTOR_THEMED:"Themed Vector Layer",CREATE_VECTOR_CLUSTERED:"Clustered Point Layer",CREATE_VECTOR_HEATMAP:"Heatmap Layer",ENABLE_SELECT_DRAGPAN:"Enable pan dragging for select tool",INIT_WARNING_ARBITRARY_COORDSYS_INCOMPATIBLE_LAYER:"This viewer refers to a map ({mapId}) with an arbitrary coordinate system, which is incompatible with this layer type ({type})",INIT_WARNING_ARBITRARY_COORDSYS_UNSUPPORTED_WIDGET:"This viewer refers to a map ({mapId}) with an arbitrary coordinate system, which is incompatible with this widget ({widget})"}},41407:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.areArraysDifferent=t.makeUnique=void 0,t.makeUnique=function(e){for(var t=[],n=0,r=e.length;n<r;n++)-1===t.indexOf(e[n])&&""!==e[n]&&t.push(e[n]);return t},t.areArraysDifferent=function(e,t,n){if(e&&t){if(e.length!=t.length)return!0;for(var r=0;r<e.length;r++)if(n){if(!n(e[r],t[r]))return!0}else if(e[r]!==t[r])return!0;return!1}return!0}},83467:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.assertIsDefined=void 0,t.assertIsDefined=function(e){if(null==e)throw new Error("Expected 'val' to be defined, but received "+e)}},57394:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getRelativeIconPath=t.setAssetRoot=t.getAssetRoot=t.getAssetPath=void 0,t.getAssetPath=function(e){return e};var r=n(44839),a=null===r.ICON_ZOOM_OUT_FIXED||void 0===r.ICON_ZOOM_OUT_FIXED?void 0:r.ICON_ZOOM_OUT_FIXED.replace("/zoom-out-fixed.png","/../../");t.getAssetRoot=function(){return a},t.setAssetRoot=function(e){a=e},t.getRelativeIconPath=function(e){return"images/icons/"+e+".png"}},36645:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.debug=t.error=t.warn=t.info=void 0,t.info=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n]},t.warn=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n]},t.error=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n]},t.debug=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n]}},55865:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.processMenuItems=void 0,t.processMenuItems=function(e){var t=[];if(null!=e)for(var n=0,r=e;n<r.length;n++){var a=r[n];null!=a&&t.push(a)}return t}},85261:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.assertNever=void 0,t.assertNever=function(e){throw new Error("Should never get here")}},65539:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.roundTo=t.sum=t.rad2deg=t.deg2rad=t.getFiniteScaleIndexForScale=t.getClosestScaleIndex=t.scaleRangeBetween=t.areNumbersEqual=t.restrictToRange=void 0;var n=Math.pow(2,-52);function r(e,t){return Math.abs(e[0]-t)<Math.abs(e[1]-t)?0:1}t.restrictToRange=function(e,t,n){return Math.min(Math.max(e,t),n)},t.areNumbersEqual=function(e,t){return Math.abs(e-t)<(Number.EPSILON||n)},t.scaleRangeBetween=function(e,t,n){return e>=t&&e<n},t.getClosestScaleIndex=r,t.getFiniteScaleIndexForScale=function(e,t){for(var n=0;n<e.length;n++)if(t>=e[n]){if(!(n+1<e.length))return n;if(t<=e[n+1])return 0==r([e[n],e[n+1]],t)?n:n+1}else if(t<=e[n])return n>0&&0==r([e[n-1],e[n]],t)?n-1:n;return 0},t.deg2rad=function(e){return e*(Math.PI/180)},t.rad2deg=function(e){return e*(180/Math.PI)},t.sum=function(e,t){for(var n=0,r=0,a=e;r<a.length;r++)n+=t(a[r]);return n},t.roundTo=function(e,t){void 0===t&&(t=2);var n=Math.pow(10,t);return Math.round(e*n)/n}},17626:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.canUseQueryMapFeaturesV4=t.getSiteVersion=void 0,t.getSiteVersion=function(e){var t=e.SiteVersion.split("."),n=t[0],r=t[1],a=t[2],i=t[3];return[parseInt(n,10),parseInt(r,10),parseInt(a,10),parseInt(i,10)]},t.canUseQueryMapFeaturesV4=function(e){var t=e[0],n=e[1],r=e[2],a=e[3];return t>=4&&(4==t&&0==n&&0==r&&0==a||4!=t||0!=n||0!=r||a>9592)}},7275:function(e,t){"use strict";function n(e,t){return 0===e.lastIndexOf(t,0)}Object.defineProperty(t,"__esModule",{value:!0}),t.isResourceId=t.extractPlaceholderTokens=t.strTrim=t.strIsNullOrEmpty=t.STR_EMPTY=t.strReplaceAll=t.strStartsWith=t.strEndsWith=void 0,t.strEndsWith=function(e,t){return-1!==e.indexOf(t,e.length-t.length)},t.strStartsWith=n,t.strReplaceAll=function(e,t,n){return e.split(t).join(n)},t.STR_EMPTY="",t.strIsNullOrEmpty=function(e){return null==e||""===e},t.strTrim=function(e){return String.prototype.trim?e.trim():e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"")},t.extractPlaceholderTokens=function(e,t,n){var r,a=new RegExp(t+"(.*?)"+n,"g"),i=e.match(a);return null!==(r=null==i?void 0:i.map((function(e){return e.replace(t,"").replace(n,"")})))&&void 0!==r?r:[]},t.isResourceId=function(e){return n(e,"Library://")}},12694:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isRuntimeMap=t.isAction=t.isCoordinate=t.isMapView=t.isLayer=t.isMenu=t.isComponentFlyout=t.isMenuRef=t.isInitError=t.isError=t.isModalComponentDisplayOptions=t.isModalDisplayOptions=void 0,t.isModalDisplayOptions=function(e){return void 0!==e.url},t.isModalComponentDisplayOptions=function(e){return void 0!==e.component},t.isError=function(e){return e instanceof Error},t.isInitError=function(e){return void 0!==e.message&&null!=typeof e.stack},t.isMenuRef=function(e){return void 0!==e.flyoutId},t.isComponentFlyout=function(e){return void 0!==e.componentName},t.isMenu=function(e){return void 0!==e.childItems},t.isLayer=function(e){return void 0!==e.LayerDefinition},t.isMapView=function(e){return"number"==typeof e.x&&"number"==typeof e.y&&"number"==typeof e.scale},t.isCoordinate=function(e){return e instanceof Array&&2==e.length&&"number"==typeof e[0]&&"number"==typeof e[1]},t.isAction=function(e){return void 0!==e.type&&void 0!==e.payload},t.isRuntimeMap=function(e){return null!=e.Extents&&null!=e.BackgroundColor&&null!=e.CoordinateSystem&&null!=e.MapDefinition&&null!=e.DisplayDpi}},57600:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.tryParseArbitraryCs=t.getMapSize=t.getUnitOfMeasure=t.getUnits=t.getUnitsOfMeasure=void 0;var r=n(48720),a=n(29256),i=n(7275),o=[{name:"Unknown",localizedName:function(e){return(0,r.tr)("UNIT_UNKNOWN",e)},abbreviation:function(e){return(0,r.tr)("UNIT_ABBR_UNKNOWN",e)},unitsPerMeter:1,metersPerUnit:1},{name:"Inches",localizedName:function(e){return(0,r.tr)("UNIT_INCHES",e)},abbreviation:function(e){return(0,r.tr)("UNIT_ABBR_INCHES",e)},unitsPerMeter:39.370079,metersPerUnit:.0254},{name:"Feet",localizedName:function(e){return(0,r.tr)("UNIT_FEET",e)},abbreviation:function(e){return(0,r.tr)("UNIT_ABBR_FEET",e)},unitsPerMeter:3.2808,metersPerUnit:.3048},{name:"Yards",localizedName:function(e){return(0,r.tr)("UNIT_YARDS",e)},abbreviation:function(e){return(0,r.tr)("UNIT_ABBR_YARDS",e)},unitsPerMeter:1.0936133,metersPerUnit:.9144},{name:"Miles",localizedName:function(e){return(0,r.tr)("UNIT_MILES",e)},abbreviation:function(e){return(0,r.tr)("UNIT_ABBR_MILES",e)},unitsPerMeter:62137e-8,metersPerUnit:1609.344},{name:"Nautical Miles",localizedName:function(e){return(0,r.tr)("UNIT_NAUT_MILES",e)},abbreviation:function(e){return(0,r.tr)("UNIT_ABBR_NAUT_MILES",e)},unitsPerMeter:.000539956803,metersPerUnit:1852},{name:"Millimeters",localizedName:function(e){return(0,r.tr)("UNIT_MILLIMETERS",e)},abbreviation:function(e){return(0,r.tr)("UNIT_ABBR_MILLIMETERS",e)},unitsPerMeter:1e3,metersPerUnit:.001},{name:"Centimeters",localizedName:function(e){return(0,r.tr)("UNIT_CENTIMETERS",e)},abbreviation:function(e){return(0,r.tr)("UNIT_ABBR_CENTIMETERS",e)},unitsPerMeter:100,metersPerUnit:.01},{name:"Meters",localizedName:function(e){return(0,r.tr)("UNIT_METERS",e)},abbreviation:function(e){return(0,r.tr)("UNIT_ABBR_METERS",e)},unitsPerMeter:1,metersPerUnit:1},{name:"Kilometers",localizedName:function(e){return(0,r.tr)("UNIT_KILOMETERS",e)},abbreviation:function(e){return(0,r.tr)("UNIT_ABBR_KILOMETERS",e)},unitsPerMeter:.001,metersPerUnit:1e3},{name:"Degrees",localizedName:function(e){return(0,r.tr)("UNIT_DEGREES",e)},abbreviation:function(e){return(0,r.tr)("UNIT_ABBR_DEGREES",e)},unitsPerMeter:9044e-9,metersPerUnit:111061.75033},{name:"Decimal Degrees",localizedName:function(e){return(0,r.tr)("UNIT_DEC_DEGREES",e)},abbreviation:function(e){return(0,r.tr)("UNIT_ABBR_DEC_DEGREES",e)},unitsPerMeter:9044e-9,metersPerUnit:111061.75033},{name:"Degrees Minutes Seconds",localizedName:function(e){return(0,r.tr)("UNIT_DMS",e)},abbreviation:function(e){return(0,r.tr)("UNIT_ABBR_DMS",e)},unitsPerMeter:9044e-9,metersPerUnit:111061.75033},{name:"Pixels",localizedName:function(e){return(0,r.tr)("UNIT_PIXELS",e)},abbreviation:function(e){return(0,r.tr)("UNIT_ABBR_PIXELS",e)},unitsPerMeter:1,metersPerUnit:1}];function s(e){return o[e]||o[0]}t.getUnitsOfMeasure=function(){return[a.UnitOfMeasure.Centimeters,a.UnitOfMeasure.DecimalDegrees,a.UnitOfMeasure.Degrees,a.UnitOfMeasure.DMS,a.UnitOfMeasure.Feet,a.UnitOfMeasure.Inches,a.UnitOfMeasure.Kilometers,a.UnitOfMeasure.Meters,a.UnitOfMeasure.Miles,a.UnitOfMeasure.Millimeters,a.UnitOfMeasure.NauticalMiles,a.UnitOfMeasure.Pixels,a.UnitOfMeasure.Unknown,a.UnitOfMeasure.Yards]},t.getUnits=function(){return[[a.UnitOfMeasure.Centimeters,"Centimeters"],[a.UnitOfMeasure.DecimalDegrees,"Decimal Degrees"],[a.UnitOfMeasure.Degrees,"Degrees"],[a.UnitOfMeasure.DMS,"Degrees Minutes Seconds"],[a.UnitOfMeasure.Feet,"Feet"],[a.UnitOfMeasure.Inches,"Inches"],[a.UnitOfMeasure.Kilometers,"Kilometers"],[a.UnitOfMeasure.Meters,"Meters"],[a.UnitOfMeasure.Miles,"Miles"],[a.UnitOfMeasure.Millimeters,"Millimeters"],[a.UnitOfMeasure.NauticalMiles,"Nautical Miles"],[a.UnitOfMeasure.Pixels,"Pixels"],[a.UnitOfMeasure.Unknown,"Unknown"],[a.UnitOfMeasure.Yards,"Yards"]]},t.getUnitOfMeasure=s,t.getMapSize=function(e,t,n,r,i){var o=e[0],l=e[1],u=o,c=l,p=s(n);if(r&&n!=a.UnitOfMeasure.Pixels){u=r*o,c=r*l,n!=a.UnitOfMeasure.Unknown&&(u=p.unitsPerMeter*u*t,c=p.unitsPerMeter*c*t);var d=i||2;if(d>=0){var m=Math.pow(10,d);u=Math.round(u*m)/m,c=Math.round(c*m)/m}}return[u,c]},t.tryParseArbitraryCs=function(e){if(!(0,i.strIsNullOrEmpty)(e)&&(0,i.strStartsWith)(e,"XY-"))switch(e.substring(3)){case"M":return{code:e,units:a.UnitOfMeasure.Meters};case"FT":return{code:e,units:a.UnitOfMeasure.Feet};case"IN":return{code:e,units:a.UnitOfMeasure.Inches};case"CM":return{code:e,units:a.UnitOfMeasure.Centimeters};case"KM":return{code:e,units:a.UnitOfMeasure.Kilometers};case"YD":return{code:e,units:a.UnitOfMeasure.Yards};case"MM":return{code:e,units:a.UnitOfMeasure.Millimeters};case"MI":return{code:e,units:a.UnitOfMeasure.Miles};case"NM":return{code:e,units:a.UnitOfMeasure.NauticalMiles};case"PX":return{code:e,units:a.UnitOfMeasure.Pixels}}}},87755:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.parseUrlParameters=t.appendParameters=t.stringifyQuery=t.parseUrl=t.ensureParameters=t.parseComponentUri=t.isComponentUri=t.areUrlsSame=void 0;var r=(0,n(70655).__importDefault)(n(80129)),a=n(7275),i=n(84564),o={ignoreQueryPrefix:!0};function s(e){return e.indexOf("component://")>=0}function l(e){var t=e.lastIndexOf("?");return{url:t<0?e:e.substring(0,t),query:t<0?{}:r.default.parse(e.substring(t),o)}}function u(e,t,n,a,s){void 0===n&&(n=!0),void 0===a&&(a=!1),void 0===s&&(s=!1);var l,u=i(e);l=s?{}:null!=u.query?r.default.parse(u.query,o):{};var c={};for(var p in l)c[p.toUpperCase()]=p;for(var d in t)(p=c[d.toUpperCase()]||d)&&l[p]&&!n||(l[p]=t[d]);if(a){var m={};for(var f in l)m[f.toUpperCase()]=l[f];l=m}u.query=r.default.stringify(l);var _=u.toString();return e.indexOf(u.protocol)>=0||e.indexOf("/"),_}t.areUrlsSame=function(e,t){var n=i(e),a=i(t),s=r.default.parse(n.query,o),l=r.default.parse(a.query,o);return n.protocol==a.protocol&&n.slashes==a.slashes&&n.auth==a.auth&&n.username==a.username&&n.password==a.password&&n.host==a.host&&n.hostname==a.hostname&&n.port==a.port&&n.pathname==a.pathname&&n.hash==a.hash&&n.host==a.host&&function(e,t){var n=Object.keys(e).filter((function(e){return"locale"!=e.toLowerCase()})).sort();if(function(e,t){if(e===t)return!0;if(null==e||null==t)return!1;if(e.length!=t.length)return!1;for(var n=0;n<e.length;++n)if(e[n]!==t[n])return!1;return!0}(n,Object.keys(t).filter((function(e){return"locale"!=e.toLowerCase()})).sort())){for(var r=0,a=n;r<a.length;r++){var i=a[r];if(e[i]!=t[i])return!1}return!0}return!1}(s,l)},t.isComponentUri=s,t.parseComponentUri=function(e){if(s(e)){var t=e.lastIndexOf("?");return{name:t<0?e.substring(12):e.substring(12,t),props:t<0?{}:r.default.parse(e.substring(t),o)}}},t.ensureParameters=function(e,t,n,i,c,p){if(void 0===c&&(c=!0),void 0===p&&(p=[]),s(e))return e;var d=l(e),m=null!=d.query?r.default.parse(d.query,o):{},f=!0,_=!0,E=!0;for(var v in m)switch(v.toLowerCase()){case"session":_=!1;break;case"mapname":f=!1;break;case"locale":E=!1}f&&!(0,a.strIsNullOrEmpty)(t)&&(c?m.MAPNAME=t:m.mapname=t),_&&!(0,a.strIsNullOrEmpty)(n)&&(c?m.SESSION=n:m.session=n),E&&(c?m.LOCALE=i:m.locale=i);for(var g=0,y=p;g<y.length;g++){var h=y[g];m[h.name]=h.value}return u(e,m,!0,!1)},t.parseUrl=l,t.stringifyQuery=function(e){return r.default.stringify(e)},t.appendParameters=u,t.parseUrlParameters=function(e){var t=i(e);return null!=t.query?r.default.parse(t.query,o):{}}},97936:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.layerTransparencyChanged=t.areMapsSame=t.areViewsCloseToEqual=void 0;var r=n(65539),a=n(41407);t.areViewsCloseToEqual=function(e,t){if(e&&t){var n=(0,r.areNumbersEqual)(e.x,t.x)&&(0,r.areNumbersEqual)(e.y,t.y)&&(0,r.areNumbersEqual)(e.scale,t.scale);return null!=e.resolution&&null!=t.resolution?n&&(0,r.areNumbersEqual)(e.resolution,t.resolution):!(null==e.resolution&&null!=t.resolution||null!=e.resolution&&null==t.resolution)&&n}return!1},t.areMapsSame=function(e,t){return e==t||e.Name==t.Name},t.layerTransparencyChanged=function(e,t){if(!e&&t||e&&!t)return!0;var n=null!=e?e:{},r=null!=t?t:{},i=Object.keys(n),o=Object.keys(r);if((0,a.areArraysDifferent)(i,o))return!0;for(var s=0,l=i;s<l.length;s++){var u=l[s];if(n[u]!=r[u])return!0}return!1}},48114:function(e,t,n){"use strict";n.d(t,{q:function(){return r},V:function(){return a}});const r={"arrow-left":["M13.99 6.99H4.41L7.7 3.7a1.003 1.003 0 00-1.42-1.42l-5 5a1.014 1.014 0 000 1.42l5 5a1.003 1.003 0 001.42-1.42L4.41 8.99H14c.55 0 1-.45 1-1s-.46-1-1.01-1z"],"arrow-right":["M14.7 7.29l-5-5a.965.965 0 00-.71-.3 1.003 1.003 0 00-.71 1.71l3.29 3.29H1.99c-.55 0-1 .45-1 1s.45 1 1 1h9.59l-3.29 3.29a1.003 1.003 0 001.42 1.42l5-5c.18-.18.29-.43.29-.71s-.12-.52-.3-.7z"],"arrows-horizontal":["M15.7 7.3l-4-4c-.2-.2-.4-.3-.7-.3-.6 0-1 .5-1 1 0 .3.1.5.3.7L12.6 7H3.4l2.3-2.3c.2-.2.3-.4.3-.7 0-.5-.4-1-1-1-.3 0-.5.1-.7.3l-4 4c-.2.2-.3.4-.3.7s.1.5.3.7l4 4c.2.2.4.3.7.3.6 0 1-.4 1-1 0-.3-.1-.5-.3-.7L3.4 9h9.2l-2.3 2.3c-.2.2-.3.4-.3.7 0 .6.4 1 1 1 .3 0 .5-.1.7-.3l4-4c.2-.2.3-.4.3-.7s-.1-.5-.3-.7z"],application:["M3.5 7h7c.28 0 .5-.22.5-.5s-.22-.5-.5-.5h-7c-.28 0-.5.22-.5.5s.22.5.5.5zM15 1H1c-.55 0-1 .45-1 1v12c0 .55.45 1 1 1h14c.55 0 1-.45 1-1V2c0-.55-.45-1-1-1zm-1 12H2V5h12v8zM3.5 9h4c.28 0 .5-.22.5-.5S7.78 8 7.5 8h-4c-.28 0-.5.22-.5.5s.22.5.5.5zm0 2h5c.28 0 .5-.22.5-.5s-.22-.5-.5-.5h-5c-.28 0-.5.22-.5.5s.22.5.5.5z"],"caret-down":["M12 6.5c0-.28-.22-.5-.5-.5h-7a.495.495 0 00-.37.83l3.5 4c.09.1.22.17.37.17s.28-.07.37-.17l3.5-4c.08-.09.13-.2.13-.33z"],"caret-up":["M11.87 9.17s.01 0 0 0l-3.5-4C8.28 5.07 8.15 5 8 5s-.28.07-.37.17l-3.5 4a.495.495 0 00.37.83h7a.495.495 0 00.37-.83z"],"chevron-down":["M12 5c-.28 0-.53.11-.71.29L8 8.59l-3.29-3.3a1.003 1.003 0 00-1.42 1.42l4 4c.18.18.43.29.71.29s.53-.11.71-.29l4-4A1.003 1.003 0 0012 5z"],"chevron-right":["M10.71 7.29l-4-4a1.003 1.003 0 00-1.42 1.42L8.59 8 5.3 11.29c-.19.18-.3.43-.3.71a1.003 1.003 0 001.71.71l4-4c.18-.18.29-.43.29-.71 0-.28-.11-.53-.29-.71z"],"chevron-up":["M12.71 9.29l-4-4C8.53 5.11 8.28 5 8 5s-.53.11-.71.29l-4 4a1.003 1.003 0 001.42 1.42L8 7.41l3.29 3.29c.18.19.43.3.71.3a1.003 1.003 0 00.71-1.71z"],cross:["M9.41 8l3.29-3.29c.19-.18.3-.43.3-.71a1.003 1.003 0 00-1.71-.71L8 6.59l-3.29-3.3a1.003 1.003 0 00-1.42 1.42L6.59 8 3.3 11.29c-.19.18-.3.43-.3.71a1.003 1.003 0 001.71.71L8 9.41l3.29 3.29c.18.19.43.3.71.3a1.003 1.003 0 00.71-1.71L9.41 8z"],cog:["M15.19 6.39h-1.85c-.11-.37-.27-.71-.45-1.04l1.36-1.36c.31-.31.31-.82 0-1.13l-1.13-1.13a.803.803 0 00-1.13 0l-1.36 1.36c-.33-.17-.67-.33-1.04-.44V.79c0-.44-.36-.8-.8-.8h-1.6c-.44 0-.8.36-.8.8v1.86c-.39.12-.75.28-1.1.47l-1.3-1.3c-.3-.3-.79-.3-1.09 0L1.82 2.91c-.3.3-.3.79 0 1.09l1.3 1.3c-.2.34-.36.7-.48 1.09H.79c-.44 0-.8.36-.8.8v1.6c0 .44.36.8.8.8h1.85c.11.37.27.71.45 1.04l-1.36 1.36c-.31.31-.31.82 0 1.13l1.13 1.13c.31.31.82.31 1.13 0l1.36-1.36c.33.18.67.33 1.04.44v1.86c0 .44.36.8.8.8h1.6c.44 0 .8-.36.8-.8v-1.86c.39-.12.75-.28 1.1-.47l1.3 1.3c.3.3.79.3 1.09 0l1.09-1.09c.3-.3.3-.79 0-1.09l-1.3-1.3c.19-.35.36-.71.48-1.1h1.85c.44 0 .8-.36.8-.8v-1.6a.816.816 0 00-.81-.79zm-7.2 4.6c-1.66 0-3-1.34-3-3s1.34-3 3-3 3 1.34 3 3-1.34 3-3 3z"],comment:["M14 1H1c-.55 0-1 .45-1 1v9c0 .55.45 1 1 1h2v3a1.003 1.003 0 001.71.71L8.41 12H14c.55 0 1-.45 1-1V2c0-.55-.45-1-1-1zM3.5 8C2.67 8 2 7.33 2 6.5S2.67 5 3.5 5 5 5.67 5 6.5 4.33 8 3.5 8zm4 0C6.67 8 6 7.33 6 6.5S6.67 5 7.5 5 9 5.67 9 6.5 8.33 8 7.5 8zm4 0c-.83 0-1.5-.67-1.5-1.5S10.67 5 11.5 5s1.5.67 1.5 1.5S12.33 8 11.5 8z"],delete:["M11.99 4.99a1.003 1.003 0 00-1.71-.71l-2.29 2.3L5.7 4.29a.965.965 0 00-.71-.3 1.003 1.003 0 00-.71 1.71l2.29 2.29-2.29 2.29A1.003 1.003 0 005.7 11.7l2.29-2.29 2.29 2.29a1.003 1.003 0 001.42-1.42L9.41 7.99 11.7 5.7c.18-.18.29-.43.29-.71zm-4-5c-4.42 0-8 3.58-8 8s3.58 8 8 8 8-3.58 8-8-3.58-8-8-8zm0 14c-3.31 0-6-2.69-6-6s2.69-6 6-6 6 2.69 6 6-2.68 6-6 6z"],disable:["M7.99-.01c-4.42 0-8 3.58-8 8s3.58 8 8 8 8-3.58 8-8-3.58-8-8-8zm-6 8c0-3.31 2.69-6 6-6 1.3 0 2.49.42 3.47 1.12l-8.35 8.35c-.7-.98-1.12-2.17-1.12-3.47zm6 6c-1.3 0-2.49-.42-3.47-1.12l8.35-8.35c.7.98 1.12 2.17 1.12 3.47 0 3.32-2.68 6-6 6z"],"double-caret-vertical":["M5 7h6a1.003 1.003 0 00.71-1.71l-3-3C8.53 2.11 8.28 2 8 2s-.53.11-.71.29l-3 3A1.003 1.003 0 005 7zm6 2H5a1.003 1.003 0 00-.71 1.71l3 3c.18.18.43.29.71.29s.53-.11.71-.29l3-3A1.003 1.003 0 0011 9z"],edit:["M3.25 10.26l2.47 2.47 6.69-6.69-2.46-2.48-6.7 6.7zM.99 14.99l3.86-1.39-2.46-2.44-1.4 3.83zm12.25-14c-.48 0-.92.2-1.24.51l-1.44 1.44 2.47 2.47 1.44-1.44c.32-.32.51-.75.51-1.24.01-.95-.77-1.74-1.74-1.74z"],error:["M7.99-.01c-4.42 0-8 3.58-8 8s3.58 8 8 8 8-3.58 8-8-3.58-8-8-8zm1 13h-2v-2h2v2zm0-3h-2v-7h2v7z"],"folder-close":["M-.01 14c0 .55.45 1 1 1h14c.55 0 1-.45 1-1V7h-16v7zm15-10H7.41L5.7 2.3a.965.965 0 00-.71-.3h-4c-.55 0-1 .45-1 1v3h16V5c0-.55-.45-1-1-1z"],geosearch:["M8.82 12.4h.66c.23 0 .36-.17.36-.4v-1.48l.19-.18c-.27.03-.55.06-.83.06-.28 0-.56-.03-.84-.07.02.04.05.08.07.13V12c0 .23.15.4.39.4zM6.4 15.1A5.51 5.51 0 01.9 9.6c0-.49.06-.98.18-1.43.03 0 .05-.01.08-.01h.08v.44c0 .19.17.34.36.34.03 0 .07-.01.1-.01l.71.7c.07.07.19.07.26 0s.07-.19 0-.26l-.7-.72c0-.02.03-.03.03-.05v-.11c0-.15.08-.2.23-.33h.42c.08 0 .15-.01.22-.04h.02c.02-.02.03-.02.04-.04.01-.01.01-.01.02-.01l.02-.01.9-.9c-.13-.26-.24-.52-.34-.8h-.5v-.43c0-.01.05.05.04-.08h.31c-.03-.13-.06-.26-.08-.39h-.57c.16-.12.34-.24.51-.36-.02-.23-.04-.46-.04-.7 0-.12.01-.23.02-.34A6.385 6.385 0 000 9.6C0 13.13 2.87 16 6.4 16c3.1 0 5.67-2.22 6.26-5.15l-.78-.88c-.21 2.85-2.58 5.13-5.48 5.13zm-1.7-2.93v-.28h.12c.23 0 .39-.19.39-.42v-.54s.01-.01 0-.01L3.77 9.45h-.62c-.23 0-.38.19-.38.42v1.6c0 .23.14.42.38.42h.26v1.61c0 .23.22.41.45.41s.45-.18.45-.41v-.97H4.3c.24 0 .4-.13.4-.36zm11.07-2.34l-2.94-2.94c.11-.17.21-.34.3-.52.01-.03.03-.06.04-.09.08-.18.16-.36.22-.55v-.01c.06-.19.1-.38.14-.58.01-.05.01-.09.02-.14.03-.2.05-.4.05-.61a4.4 4.4 0 00-4.4-4.4C6.77 0 4.8 1.97 4.8 4.4s1.97 4.4 4.4 4.4c.21 0 .41-.02.61-.05.04 0 .09-.01.14-.02.2-.03.39-.08.58-.14h.01c.19-.06.37-.14.55-.22.03-.01.06-.03.09-.04.18-.09.35-.19.52-.3l2.94 2.94a.8.8 0 00.57.23c.44 0 .8-.36.8-.8a.895.895 0 00-.24-.57zM9.2 7.6C7.43 7.6 6 6.17 6 4.4c0-1.77 1.43-3.2 3.2-3.2s3.2 1.43 3.2 3.2c0 1.77-1.43 3.2-3.2 3.2zm1.54 4.26v-.52c0-.09-.1-.17-.19-.17s-.19.07-.19.17v.52c0 .09.1.17.19.17s.19-.07.19-.17z"],hand:["M15 5c0-.55-.45-1-1-1-.41 0-.76.24-.91.59v.01s0 .01-.01.01L11.57 8h-.36l.78-4.84C12 3.11 12 3.05 12 3a1 1 0 00-1.99-.16v.01L9.18 8H9V1c0-.55-.45-1-1-1S7 .45 7 1v7h-.09l-.93-5.18A1 1 0 005 2c-.55 0-1 .45-1 1 0 .05 0 .11.01.16L5.26 11h-.04L2.83 7.44C2.65 7.18 2.35 7 2 7c-.55 0-1 .45-1 1 0 .17.04.33.12.47l3 5.69h.01v.01A5.002 5.002 0 0013 11v-.59l1.93-5.05c.05-.11.07-.23.07-.36z"],home:["M2 10v5c0 .55.45 1 1 1h3v-5h4v5h3c.55 0 1-.45 1-1v-5L8 4l-6 6zm13.71-2.71L14 5.59V2c0-.55-.45-1-1-1s-1 .45-1 1v1.59L8.71.29C8.53.11 8.28 0 8 0s-.53.11-.71.29l-7 7a1.003 1.003 0 001.42 1.42L8 2.41l6.29 6.29c.18.19.43.3.71.3a1.003 1.003 0 00.71-1.71z"],"info-sign":["M8 0C3.58 0 0 3.58 0 8s3.58 8 8 8 8-3.58 8-8-3.58-8-8-8zM7 3h2v2H7V3zm3 10H6v-1h1V7H6V6h3v6h1v1z"],issue:["M8 16A8 8 0 118 0a8 8 0 010 16zm0-2A6 6 0 108 2a6 6 0 000 12zm1-2H7v-2h2v2zm0-3H7V4h2v5z"],layer:["M16 8c0-.37-.21-.68-.51-.85l.01-.01-7-4-.01.01C8.34 3.06 8.18 3 8 3s-.34.06-.49.15l-.01-.02-7 4 .01.01C.21 7.32 0 7.63 0 8s.21.68.51.85l-.01.01 7 4 .01-.01c.15.09.31.15.49.15s.34-.06.49-.15l.01.01 7-4-.01-.01c.3-.17.51-.48.51-.85z"],layers:["M.55 4.89l7 3.5c.14.07.29.11.45.11s.31-.04.45-.11l7-3.5a.998.998 0 00-.06-1.81L8.4.08a1.006 1.006 0 00-.79 0l-6.99 3a.992.992 0 00-.07 1.81zM15 10c-.16 0-.31.04-.45.11L8 13.38 1.45 10.1c-.14-.06-.29-.1-.45-.1-.55 0-1 .45-1 1 0 .39.23.73.55.89l7 3.5c.14.07.29.11.45.11s.31-.04.45-.11l7-3.5c.32-.16.55-.5.55-.89 0-.55-.45-1-1-1zm0-3.5c-.16 0-.31.04-.45.11L8 9.88 1.45 6.61A.997.997 0 001 6.5c-.55 0-1 .45-1 1 0 .39.23.73.55.89l7 3.5c.14.07.29.11.45.11s.31-.04.45-.11l7-3.5c.32-.16.55-.5.55-.89 0-.55-.45-1-1-1z"],map:["M15.55 3.17l-4.49-3A.975.975 0 009.99.15L5.53 2.82 1.56.17A1.003 1.003 0 000 1v11c0 .35.18.65.45.83l4.49 3a.975.975 0 001.07.02l4.46-2.67 3.97 2.65A1.003 1.003 0 0016 15V4c0-.35-.18-.65-.45-.83zM5 13.46l-3-2v-8.6l2.94 1.96c.02.02.04.03.06.04v8.6zm5-2.32s-.01 0-.01.01L6 13.53V4.86s.01 0 .01-.01L10 2.47v8.67zm4 1.99l-2.94-1.96c-.02-.01-.04-.02-.05-.03v-8.6l3 2v8.59z"],media:["M11.99 6.99c.55 0 1-.45 1-1s-.45-1-1-1-1 .45-1 1 .45 1 1 1zm3-5h-14c-.55 0-1 .45-1 1v10c0 .55.45 1 1 1h14c.55 0 1-.45 1-1v-10c0-.55-.45-1-1-1zm-1 9l-5-3-1 2-3-4-3 5v-7h12v7z"],"menu-closed":["M14.99 6.99h-9c-.55 0-1 .45-1 1s.45 1 1 1h9c.55 0 1-.45 1-1s-.45-1-1-1zm-12-2c-.28 0-.53.11-.71.29l-2 2a1.014 1.014 0 000 1.42l2 2a1.003 1.003 0 001.71-.71v-4c0-.55-.45-1-1-1zm3-1h9c.55 0 1-.45 1-1s-.45-1-1-1h-9c-.55 0-1 .45-1 1s.45 1 1 1zm9 8h-9c-.55 0-1 .45-1 1s.45 1 1 1h9c.55 0 1-.45 1-1s-.45-1-1-1z"],"menu-open":["M9.99 11.99h-9c-.55 0-1 .45-1 1s.45 1 1 1h9c.55 0 1-.45 1-1s-.45-1-1-1zm0-5h-9c-.55 0-1 .45-1 1s.45 1 1 1h9c.55 0 1-.45 1-1s-.45-1-1-1zm0-5h-9c-.55 0-1 .45-1 1s.45 1 1 1h9c.55 0 1-.45 1-1s-.45-1-1-1zm5.71 5.3l-2-2a1.003 1.003 0 00-1.71.71v4a1.003 1.003 0 001.71.71l2-2c.18-.18.29-.43.29-.71s-.11-.53-.29-.71z"],minus:["M13 7H3c-.55 0-1 .45-1 1s.45 1 1 1h10c.55 0 1-.45 1-1s-.45-1-1-1z"],"multi-select":["M12 3.98H4c-.55 0-1 .45-1 1v1h8v5h1c.55 0 1-.45 1-1v-5c0-.55-.45-1-1-1zm3-3H7c-.55 0-1 .45-1 1v1h8v5h1c.55 0 1-.45 1-1v-5c0-.55-.45-1-1-1zm-6 6H1c-.55 0-1 .45-1 1v5c0 .55.45 1 1 1h8c.55 0 1-.45 1-1v-5c0-.55-.45-1-1-1zm-1 5H2v-3h6v3z"],"new-layer":["M13.982 6.272l1.518.868-.01.01c.3.17.51.48.51.85s-.21.68-.51.85l.01.01-7 4-.01-.01A.94.94 0 018 13a.94.94 0 01-.49-.15l-.01.01-7-4 .01-.01A.977.977 0 010 8c0-.37.21-.68.51-.86L.5 7.13l7-4 .01.02A.94.94 0 018 3c.086 0 .168.014.246.038a2 2 0 105.736 3.234zM14 3c.55 0 1 .45 1 1s-.45 1-1 1h-1v1c0 .55-.45 1-1 1s-1-.45-1-1V5h-1c-.55 0-1-.45-1-1s.45-1 1-1h1V2c0-.55.45-1 1-1s1 .45 1 1v1h1z"],"path-search":["M15 14.62l-4-2.4V9.77c-.32.09-.66.15-1 .18v2.27l-4 2.4V8.71c-.38-.31-.72-.66-1-1.06v6.97l-4-2.4V8c.55 0 1-.45 1-1s-.45-1-1-1V1.38l3.15 1.89c.08-.34.18-.66.32-.97L.76.07v.01A.496.496 0 00.5 0C.22 0 0 .22 0 .5v12c0 .18.1.33.25.42v.01l5 3v-.01c.07.05.16.08.25.08s.18-.03.25-.08v.01l4.74-2.85 4.74 2.85v-.01c.09.05.18.08.27.08.28 0 .5-.22.5-.5v-3.78c-.3.17-.63.28-1 .28v2.62zM2 5c0 .55.45 1 1 1s1-.45 1-1-.45-1-1-1-1 .45-1 1zm6-1c-.55 0-1 .45-1 1s.45 1 1 1 1-.45 1-1-.45-1-1-1zm7.75-.92l-1.19-.72c.18.43.29.9.36 1.38l.08.04v3.39l1 1V3.5c0-.18-.1-.33-.25-.42zM10 2c-.55 0-1 .45-1 1s.45 1 1 1 1-.45 1-1-.45-1-1-1zm3.3 4.89c.44-.7.7-1.51.7-2.39C14 2.01 11.99 0 9.5 0S5 2.01 5 4.5 7.01 9 9.5 9c.88 0 1.69-.26 2.39-.7l2.41 2.41c.17.18.42.29.7.29a1.003 1.003 0 00.71-1.71l-2.41-2.4zM9.5 8C7.57 8 6 6.43 6 4.5S7.57 1 9.5 1 13 2.57 13 4.5 11.43 8 9.5 8z"],play:["M12 8c0-.35-.19-.64-.46-.82l.01-.02-6-4-.01.02A.969.969 0 005 3c-.55 0-1 .45-1 1v8c0 .55.45 1 1 1 .21 0 .39-.08.54-.18l.01.02 6-4-.01-.02c.27-.18.46-.47.46-.82z"],plus:["M13 7H9V3c0-.55-.45-1-1-1s-1 .45-1 1v4H3c-.55 0-1 .45-1 1s.45 1 1 1h4v4c0 .55.45 1 1 1s1-.45 1-1V9h4c.55 0 1-.45 1-1s-.45-1-1-1z"],print:["M12 2.02c0-.55-.45-1-1-1H5c-.55 0-1 .45-1 1v1h8v-1zm3 2H1c-.55 0-1 .45-1 1v6c0 .55.45 1 1 1h1v-3h12v3h1c.55 0 1-.45 1-1v-6c0-.56-.45-1-1-1zm-1 3h-2v-1h2v1zm-3 6H5v-3H3v4c0 .55.45 1 1 1h8c.55 0 1-.45 1-1v-4h-2v3z"],properties:["M2 6C.9 6 0 6.9 0 8s.9 2 2 2 2-.9 2-2-.9-2-2-2zm4-3h9c.55 0 1-.45 1-1s-.45-1-1-1H6c-.55 0-1 .45-1 1s.45 1 1 1zm-4 9c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm13-5H6c-.55 0-1 .45-1 1s.45 1 1 1h9c.55 0 1-.45 1-1s-.45-1-1-1zm0 6H6c-.55 0-1 .45-1 1s.45 1 1 1h9c.55 0 1-.45 1-1s-.45-1-1-1zM2 0C.9 0 0 .9 0 2s.9 2 2 2 2-.9 2-2-.9-2-2-2z"],search:["M15.55 13.43l-2.67-2.68a6.94 6.94 0 001.11-3.76c0-3.87-3.13-7-7-7s-7 3.13-7 7 3.13 7 7 7c1.39 0 2.68-.42 3.76-1.11l2.68 2.67a1.498 1.498 0 102.12-2.12zm-8.56-1.44c-2.76 0-5-2.24-5-5s2.24-5 5-5 5 2.24 5 5-2.24 5-5 5z"],select:["M16 15c0-.28-.12-.52-.31-.69l.02-.02-3.12-3.12 3.41-.84-8.05-2.86c.03-.09.05-.17.05-.27V2c0-.55-.45-1-1-1H3c0-.55-.45-1-1-1S1 .45 1 1c-.55 0-1 .45-1 1s.45 1 1 1v4c0 .55.45 1 1 1h5.2c.1 0 .18-.02.27-.05L10.33 16l.85-3.41 3.12 3.12.02-.02c.16.19.4.31.68.31.04 0 .07-.02.1-.02s.06.02.1.02c.44 0 .8-.36.8-.8 0-.04-.02-.07-.02-.1s.02-.06.02-.1zM6 6H3V3h3v3z"],"small-cross":["M9.41 8l2.29-2.29c.19-.18.3-.43.3-.71a1.003 1.003 0 00-1.71-.71L8 6.59l-2.29-2.3a1.003 1.003 0 00-1.42 1.42L6.59 8 4.3 10.29c-.19.18-.3.43-.3.71a1.003 1.003 0 001.71.71L8 9.41l2.29 2.29c.18.19.43.3.71.3a1.003 1.003 0 00.71-1.71L9.41 8z"],stop:["M12 3H4c-.55 0-1 .45-1 1v8c0 .55.45 1 1 1h8c.55 0 1-.45 1-1V4c0-.55-.45-1-1-1z"],tag:["M1 3a2 2 0 012-2h4.584a2 2 0 011.414.586l5.413 5.412a2 2 0 010 2.829L9.827 14.41a2 2 0 01-2.829 0L1.586 8.998A2 2 0 011 7.584V3zm3.487-.007a1.494 1.494 0 100 2.988 1.494 1.494 0 000-2.988z"],th:["M15 1H1c-.6 0-1 .5-1 1v12c0 .6.4 1 1 1h14c.6 0 1-.4 1-1V2c0-.5-.4-1-1-1zM6 13H2v-2h4v2zm0-3H2V8h4v2zm0-3H2V5h4v2zm8 6H7v-2h7v2zm0-3H7V8h7v2zm0-3H7V5h7v2z"],tick:["M14 3c-.28 0-.53.11-.71.29L6 10.59l-3.29-3.3a1.003 1.003 0 00-1.42 1.42l4 4c.18.18.43.29.71.29s.53-.11.71-.29l8-8A1.003 1.003 0 0014 3z"],trash:["M14.49 3.99h-13c-.28 0-.5.22-.5.5s.22.5.5.5h.5v10c0 .55.45 1 1 1h10c.55 0 1-.45 1-1v-10h.5c.28 0 .5-.22.5-.5s-.22-.5-.5-.5zm-8.5 9c0 .55-.45 1-1 1s-1-.45-1-1v-6c0-.55.45-1 1-1s1 .45 1 1v6zm3 0c0 .55-.45 1-1 1s-1-.45-1-1v-6c0-.55.45-1 1-1s1 .45 1 1v6zm3 0c0 .55-.45 1-1 1s-1-.45-1-1v-6c0-.55.45-1 1-1s1 .45 1 1v6zm2-12h-4c0-.55-.45-1-1-1h-2c-.55 0-1 .45-1 1h-4c-.55 0-1 .45-1 1v1h14v-1c0-.55-.45-1-1-1z"],upload:["M8 0C3.58 0 0 3.58 0 8s3.58 8 8 8 8-3.58 8-8-3.58-8-8-8zm3 8c-.28 0-.53-.11-.71-.29L9 6.41V12c0 .55-.45 1-1 1s-1-.45-1-1V6.41l-1.29 1.3a1.003 1.003 0 01-1.42-1.42l3-3C7.47 3.11 7.72 3 8 3s.53.11.71.29l3 3A1.003 1.003 0 0111 8z"],"warning-sign":["M15.84 13.5l.01-.01-7-12-.01.01c-.17-.3-.48-.5-.85-.5s-.67.2-.85.5l-.01-.01-7 12 .01.01c-.09.15-.15.31-.15.5 0 .55.45 1 1 1h14c.55 0 1-.45 1-1 0-.19-.06-.35-.15-.5zm-6.85-.51h-2v-2h2v2zm0-3h-2v-5h2v5z"],"zoom-to-fit":["M11 10a1.003 1.003 0 001.71.71l2-2c.18-.18.29-.43.29-.71 0-.28-.11-.53-.29-.71l-2-2a1.003 1.003 0 00-1.42 1.42L12.59 8 11.3 9.29c-.19.18-.3.43-.3.71zM1 5c.55 0 1-.45 1-1V2h2c.55 0 1-.45 1-1s-.45-1-1-1H1C.45 0 0 .45 0 1v3c0 .55.45 1 1 1zm4 1a1.003 1.003 0 00-1.71-.71l-2 2C1.11 7.47 1 7.72 1 8c0 .28.11.53.29.71l2 2a1.003 1.003 0 001.42-1.42L3.41 8 4.7 6.71c.19-.18.3-.43.3-.71zm1-1c.28 0 .53-.11.71-.29L8 3.41 9.29 4.7c.18.19.43.3.71.3a1.003 1.003 0 00.71-1.71l-2-2C8.53 1.11 8.28 1 8 1s-.53.11-.71.29l-2 2A1.003 1.003 0 006 5zm9 6c-.55 0-1 .45-1 1v2h-2c-.55 0-1 .45-1 1s.45 1 1 1h3c.55 0 1-.45 1-1v-3c0-.55-.45-1-1-1zm0-11h-3c-.55 0-1 .45-1 1s.45 1 1 1h2v2c0 .55.45 1 1 1s1-.45 1-1V1c0-.55-.45-1-1-1zM4 14H2v-2c0-.55-.45-1-1-1s-1 .45-1 1v3c0 .55.45 1 1 1h3c.55 0 1-.45 1-1s-.45-1-1-1zm6-3c-.28 0-.53.11-.71.29L8 12.59 6.71 11.3A.965.965 0 006 11a1.003 1.003 0 00-.71 1.71l2 2c.18.18.43.29.71.29s.53-.11.71-.29l2-2A1.003 1.003 0 0010 11z"]},a={"arrow-left":["M18 9H4.41L8.7 4.71c.19-.18.3-.43.3-.71a1.003 1.003 0 00-1.71-.71l-6 6c-.18.18-.29.43-.29.71 0 .28.11.53.29.71l6 6a1.003 1.003 0 001.42-1.42L4.41 11H18c.55 0 1-.45 1-1s-.45-1-1-1z"],"arrow-right":["M18.71 9.29l-6-6a1.003 1.003 0 00-1.42 1.42L15.59 9H2c-.55 0-1 .45-1 1s.45 1 1 1h13.59l-4.29 4.29c-.19.18-.3.43-.3.71a1.003 1.003 0 001.71.71l6-6c.18-.18.29-.43.29-.71 0-.28-.11-.53-.29-.71z"],"arrows-horizontal":["M19.7 9.3l-5-5c-.2-.2-.4-.3-.7-.3-.6 0-1 .4-1 1 0 .3.1.5.3.7L16.6 9H3.4l3.3-3.3c.2-.2.3-.4.3-.7 0-.6-.4-1-1-1-.3 0-.5.1-.7.3l-5 5c-.2.2-.3.4-.3.7s.1.5.3.7l5 5c.2.2.4.3.7.3.6 0 1-.4 1-1 0-.3-.1-.5-.3-.7L3.4 11h13.2l-3.3 3.3c-.2.2-.3.4-.3.7 0 .6.4 1 1 1 .3 0 .5-.1.7-.3l5-5c.2-.2.3-.4.3-.7s-.1-.5-.3-.7z"],application:["M3.5 9h9c.28 0 .5-.22.5-.5s-.22-.5-.5-.5h-9c-.28 0-.5.22-.5.5s.22.5.5.5zm0 2h5c.28 0 .5-.22.5-.5s-.22-.5-.5-.5h-5c-.28 0-.5.22-.5.5s.22.5.5.5zM19 1H1c-.55 0-1 .45-1 1v16c0 .55.45 1 1 1h18c.55 0 1-.45 1-1V2c0-.55-.45-1-1-1zm-1 16H2V6h16v11zM3.5 13h7c.28 0 .5-.22.5-.5s-.22-.5-.5-.5h-7c-.28 0-.5.22-.5.5s.22.5.5.5z"],"caret-down":["M16 7c0-.55-.45-1-1-1H5c-.55 0-1 .45-1 1 0 .24.1.46.24.63l-.01.01 5 6 .01-.01c.19.22.45.37.76.37s.57-.15.76-.37l.01.01 5-6-.01-.01c.14-.17.24-.39.24-.63z"],"caret-up":["M15.76 12.37l.01-.01-5-6-.01.01C10.57 6.15 10.31 6 10 6s-.57.15-.76.37l-.01-.01-5 6 .01.01c-.14.17-.24.39-.24.63 0 .55.45 1 1 1h10c.55 0 1-.45 1-1 0-.24-.1-.46-.24-.63z"],"chevron-down":["M16 6c-.28 0-.53.11-.71.29L10 11.59l-5.29-5.3a1.003 1.003 0 00-1.42 1.42l6 6c.18.18.43.29.71.29s.53-.11.71-.29l6-6A1.003 1.003 0 0016 6z"],"chevron-right":["M13.71 9.29l-6-6a1.003 1.003 0 00-1.42 1.42l5.3 5.29-5.29 5.29c-.19.18-.3.43-.3.71a1.003 1.003 0 001.71.71l6-6c.18-.18.29-.43.29-.71 0-.28-.11-.53-.29-.71z"],"chevron-up":["M16.71 12.29l-6-6C10.53 6.11 10.28 6 10 6s-.53.11-.71.29l-6 6a1.003 1.003 0 001.42 1.42L10 8.41l5.29 5.29c.18.19.43.3.71.3a1.003 1.003 0 00.71-1.71z"],cross:["M11.41 10l4.29-4.29c.19-.18.3-.43.3-.71a1.003 1.003 0 00-1.71-.71L10 8.59l-4.29-4.3a1.003 1.003 0 00-1.42 1.42L8.59 10 4.3 14.29c-.19.18-.3.43-.3.71a1.003 1.003 0 001.71.71l4.29-4.3 4.29 4.29c.18.19.43.3.71.3a1.003 1.003 0 00.71-1.71L11.41 10z"],cog:["M19 8h-2.31c-.14-.46-.33-.89-.56-1.3l1.7-1.7a.996.996 0 000-1.41l-1.41-1.41a.996.996 0 00-1.41 0l-1.7 1.7c-.41-.22-.84-.41-1.3-.55V1c0-.55-.45-1-1-1H9c-.55 0-1 .45-1 1v2.33c-.48.14-.94.34-1.37.58L5 2.28a.972.972 0 00-1.36 0L2.28 3.64c-.37.38-.37.99 0 1.36L3.9 6.62c-.24.44-.44.89-.59 1.38H1c-.55 0-1 .45-1 1v2c0 .55.45 1 1 1h2.31c.14.46.33.89.56 1.3L2.17 15a.996.996 0 000 1.41l1.41 1.41c.39.39 1.02.39 1.41 0l1.7-1.7c.41.22.84.41 1.3.55V19c0 .55.45 1 1 1h2c.55 0 1-.45 1-1v-2.33c.48-.14.94-.35 1.37-.59L15 17.72c.37.37.98.37 1.36 0l1.36-1.36c.37-.37.37-.98 0-1.36l-1.62-1.62c.24-.43.45-.89.6-1.38H19c.55 0 1-.45 1-1V9c0-.55-.45-1-1-1zm-9 6c-2.21 0-4-1.79-4-4s1.79-4 4-4 4 1.79 4 4-1.79 4-4 4z"],comment:["M19 1H1c-.55 0-1 .45-1 1v12c0 .55.45 1 1 1h3v4a1.003 1.003 0 001.71.71l4.7-4.71H19c.55 0 1-.45 1-1V2c0-.55-.45-1-1-1zM4 10c-1.1 0-2-.9-2-2s.9-2 2-2 2 .9 2 2-.9 2-2 2zm6 0c-1.1 0-2-.9-2-2s.9-2 2-2 2 .9 2 2-.9 2-2 2zm6 0c-1.1 0-2-.9-2-2s.9-2 2-2 2 .9 2 2-.9 2-2 2z"],delete:["M15 6a1.003 1.003 0 00-1.71-.71L10 8.59l-3.29-3.3a1.003 1.003 0 00-1.42 1.42L8.59 10 5.3 13.29c-.19.18-.3.43-.3.71a1.003 1.003 0 001.71.71l3.29-3.3 3.29 3.29c.18.19.43.3.71.3a1.003 1.003 0 00.71-1.71L11.41 10l3.29-3.29c.19-.18.3-.43.3-.71zm-5-6C4.48 0 0 4.48 0 10s4.48 10 10 10 10-4.48 10-10S15.52 0 10 0zm0 18c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8z"],disable:["M10 0C4.48 0 0 4.48 0 10s4.48 10 10 10 10-4.48 10-10S15.52 0 10 0zM2 10c0-4.42 3.58-8 8-8 1.85 0 3.55.63 4.9 1.69L3.69 14.9A7.902 7.902 0 012 10zm8 8c-1.85 0-3.55-.63-4.9-1.69L16.31 5.1A7.902 7.902 0 0118 10c0 4.42-3.58 8-8 8z"],"double-caret-vertical":["M5 9h10c.55 0 1-.45 1-1 0-.24-.1-.46-.24-.63l.01-.01-5-6-.01.01C10.57 1.15 10.31 1 10 1s-.57.15-.76.37l-.01-.01-5 6 .01.01C4.1 7.54 4 7.76 4 8c0 .55.45 1 1 1zm10 2H5c-.55 0-1 .45-1 1 0 .24.1.46.24.63l-.01.01 5 6 .01-.01c.19.22.45.37.76.37s.57-.15.76-.37l.01.01 5-6-.01-.01c.14-.17.24-.39.24-.63 0-.55-.45-1-1-1z"],edit:["M4.59 12.59l2.83 2.83 7.65-7.65-2.83-2.83-7.65 7.65zM2 18l4.41-1.59-2.81-2.79L2 18zM16 2c-.55 0-1.05.22-1.41.59l-1.65 1.65 2.83 2.83 1.65-1.65A2.006 2.006 0 0016 2z"],error:["M10 0C4.48 0 0 4.48 0 10s4.48 10 10 10 10-4.48 10-10S15.52 0 10 0zm1 16H9v-2h2v2zm0-3H9V4h2v9z"],"folder-close":["M0 17c0 .55.45 1 1 1h18c.55 0 1-.45 1-1V7H0v10zM19 4H9.41l-1.7-1.71A.997.997 0 007 2H1c-.55 0-1 .45-1 1v3h20V5c0-.55-.45-1-1-1z"],geosearch:["M8 18.88c-3.79 0-6.88-3.09-6.88-6.88 0-.61.08-1.22.23-1.79.03.01.06-.01.1-.01h.09v.55c0 .23.21.42.44.42.04 0 .09-.01.12-.02l.9.88c.09.09.23.09.32 0s.09-.23 0-.32l-.86-.9c0-.02.05-.04.05-.07v-.13c0-.18.1-.25.29-.41h.53c.1 0 .19-.01.27-.05.01-.01.02 0 .03-.01.02-.01.03-.02.05-.04.01-.01.02-.01.02-.02l.02-.02 1.13-1.13c-.16-.32-.3-.65-.42-.99h-.64v-.53c0-.01.06.06.06-.1h.38c-.04-.16-.08-.32-.1-.48h-.71c.2-.16.42-.31.64-.45C4.02 6.09 4 5.8 4 5.5c0-.14.01-.28.02-.43C1.62 6.46 0 9.04 0 12c0 4.41 3.59 8 8 8 3.87 0 7.09-2.77 7.82-6.44l-.97-1.1c-.26 3.57-3.23 6.42-6.85 6.42zm-2.12-3.67v-.35h.15c.29 0 .49-.23.49-.53v-.68c0-.01.01-.01 0-.02L4.71 11.8h-.77c-.29 0-.47.24-.47.53v2c0 .29.18.53.47.53h.33v2.02c0 .28.28.51.56.51s.56-.23.56-.51v-1.22h-.01c.29 0 .5-.16.5-.45zm13.83-2.92l-3.68-3.68c.14-.21.27-.42.38-.65.02-.04.04-.07.05-.11.11-.22.2-.45.28-.69v-.01c.07-.24.13-.48.17-.73l.03-.17c.04-.24.06-.49.06-.75C17 2.46 14.54 0 11.5 0S6 2.46 6 5.5 8.46 11 11.5 11c.26 0 .51-.02.76-.06l.17-.03c.25-.04.49-.1.73-.17h.01c.24-.08.47-.17.69-.28.04-.02.07-.04.11-.05.23-.11.44-.24.65-.38l3.68 3.68c.17.18.42.29.7.29a1.003 1.003 0 00.71-1.71zM11.5 9.5c-2.21 0-4-1.79-4-4s1.79-4 4-4 4 1.79 4 4-1.79 4-4 4zm1.93 5.33v-.65c0-.11-.13-.21-.24-.21-.11 0-.24.09-.24.21v.65c0 .11.13.21.24.21.11 0 .24-.1.24-.21zm-2.41.67h.83c.29 0 .46-.21.46-.5v-1.86l.23-.22c-.34.05-.69.08-1.04.08-.36 0-.7-.03-1.05-.08.03.05.06.1.08.16V15c.01.29.2.5.49.5z"],hand:["M17 5c-.42 0-.79.27-.93.64L14.38 10h-.77l1.34-6.67c.03-.1.05-.21.05-.33a.998.998 0 00-1.98-.19h-.01L11.57 10H11V1c0-.55-.45-1-1-1S9 .45 9 1v9h-.2L6.97 2.76a.997.997 0 00-1.73-.41l-.03.03c-.01.02-.02.03-.03.04-.01.02-.01.03-.02.04v.01c-.01.01-.02.02-.02.03v.01c-.02.01-.02.02-.03.03 0 0 0 .01-.01.01 0 .01 0 .02-.01.03 0 0 0 .01-.01.01 0 .01-.01.02-.01.03 0 0 0 .01-.01.01 0 .01-.01.02-.01.03 0 .01 0 .01-.01.02 0 .01-.01.02-.01.03 0 .01 0 .01-.01.02 0 .01-.01.02-.01.03v.02c0 .01 0 .02-.01.03V3c0 .05 0 .09.01.14l1.45 10.25L6 12.7v.01L3.84 9.45h-.01A.98.98 0 003 9c-.55 0-1 .45-1 1 0 .2.06.39.17.55L6 18.44C7.06 19.4 8.46 20 10 20c3.31 0 6-2.69 6-6v-1.84l.01-.03v-.06l1.94-5.75A1.003 1.003 0 0017 5z"],home:["M2 12v7c0 .55.45 1 1 1h5v-7h4v7h5c.55 0 1-.45 1-1v-7l-8-8-8 8zm17.71-2.71L17 6.59V3c0-.55-.45-1-1-1s-1 .45-1 1v1.59L10.71.3C10.53.11 10.28 0 10 0s-.53.11-.71.29l-9 9a1.003 1.003 0 001.42 1.42L10 2.41l8.29 8.29c.18.19.43.3.71.3a1.003 1.003 0 00.71-1.71z"],"info-sign":["M10 0C4.48 0 0 4.48 0 10s4.48 10 10 10 10-4.48 10-10S15.52 0 10 0zM9 4h2v2H9V4zm4 12H7v-1h2V8H8V7h3v8h2v1z"],issue:["M10 20C4.477 20 0 15.523 0 10S4.477 0 10 0s10 4.477 10 10-4.477 10-10 10zm0-2a8 8 0 100-16 8 8 0 000 16zm1-2H9v-2h2v2zm0-3H9V4h2v9z"],layer:["M19.5 9.1l-9-5c-.2-.1-.3-.1-.5-.1s-.3 0-.5.1l-9 5c-.3.2-.5.5-.5.9s.2.7.5.9l9 5c.2.1.3.1.5.1s.3 0 .5-.1l9-5c.3-.2.5-.5.5-.9s-.2-.7-.5-.9z"],layers:["M.5 6.9l9 5c.2.1.3.1.5.1s.3 0 .5-.1l9-5c.3-.2.5-.5.5-.9s-.2-.7-.5-.9l-9-5c-.2-.1-.3-.1-.5-.1s-.3 0-.5.1l-9 5c-.3.2-.5.5-.5.9s.2.7.5.9z","M19 9c-.2 0-.3 0-.5.1L10 13.9 1.5 9.1C1.3 9 1.2 9 1 9c-.6 0-1 .4-1 1 0 .4.2.7.5.9l9 5c.2.1.3.1.5.1s.3 0 .5-.1l9-5c.3-.2.5-.5.5-.9 0-.6-.4-1-1-1z","M19 13c-.2 0-.3 0-.5.1L10 17.9l-8.5-4.7c-.2-.2-.3-.2-.5-.2-.6 0-1 .4-1 1 0 .4.2.7.5.9l9 5c.2.1.3.1.5.1s.3 0 .5-.1l9-5c.3-.2.5-.5.5-.9 0-.6-.4-1-1-1z"],map:["M19.54 4.18l.01-.02-6-4-.01.02C13.39.08 13.21 0 13 0s-.39.08-.54.18l-.01-.02L7 3.8 1.55.17l-.01.01A.969.969 0 001 0C.45 0 0 .45 0 1v14c0 .35.19.64.46.82l-.01.02 6 4 .01-.02c.15.1.33.18.54.18s.39-.08.54-.18l.01.02L13 16.2l5.45 3.63.01-.02c.15.11.33.19.54.19.55 0 1-.45 1-1V5c0-.35-.19-.64-.46-.82zM6 17.13l-4-2.67V2.87l4 2.67v11.59zm6-2.67l-4 2.67V5.54l4-2.67v11.59zm6 2.67l-4-2.67V2.87l4 2.67v11.59z"],media:["M15 9c1.1 0 2-.9 2-2s-.9-2-2-2-2 .9-2 2 .9 2 2 2zm4-7H1c-.55 0-1 .45-1 1v14c0 .55.45 1 1 1h18c.55 0 1-.45 1-1V3c0-.55-.45-1-1-1zm-1 13l-6-5-2 2-4-5-4 8V4h16v11z"],"menu-closed":["M8 6h11c.55 0 1-.45 1-1s-.45-1-1-1H8c-.55 0-1 .45-1 1s.45 1 1 1zM4 6c-.28 0-.53.11-.71.29l-3 3C.11 9.47 0 9.72 0 10c0 .28.11.53.29.71l3 3A1.003 1.003 0 005 13V7c0-.55-.45-1-1-1zm15 8H8c-.55 0-1 .45-1 1s.45 1 1 1h11c.55 0 1-.45 1-1s-.45-1-1-1zm0-5H8c-.55 0-1 .45-1 1s.45 1 1 1h11c.55 0 1-.45 1-1s-.45-1-1-1z"],"menu-open":["M12 9H1c-.55 0-1 .45-1 1s.45 1 1 1h11c.55 0 1-.45 1-1s-.45-1-1-1zm0 5H1c-.55 0-1 .45-1 1s.45 1 1 1h11c.55 0 1-.45 1-1s-.45-1-1-1zm0-10H1c-.55 0-1 .45-1 1s.45 1 1 1h11c.55 0 1-.45 1-1s-.45-1-1-1zm7.71 5.29l-3-3A1.003 1.003 0 0015 7v6a1.003 1.003 0 001.71.71l3-3c.18-.18.29-.43.29-.71 0-.28-.11-.53-.29-.71z"],minus:["M16 9H4c-.55 0-1 .45-1 1s.45 1 1 1h12c.55 0 1-.45 1-1s-.45-1-1-1z"],"multi-select":["M19 3H7c-.55 0-1 .45-1 1v1h12v6h1c.55 0 1-.45 1-1V4c0-.55-.45-1-1-1zm-6 6H1c-.55 0-1 .45-1 1v6c0 .55.45 1 1 1h12c.55 0 1-.45 1-1v-6c0-.55-.45-1-1-1zm-1 6H2v-4h10v4zm4-9H4c-.55 0-1 .45-1 1v1h12v6h1c.55 0 1-.45 1-1V7c0-.55-.45-1-1-1z"],"new-layer":["M11.513 2.663A2 2 0 0013 6h1v1a2 2 0 104 0v-.733l1.5.833c.3.2.5.5.5.9s-.2.7-.5.9l-9 5c-.2.1-.3.1-.5.1s-.3 0-.5-.1l-9-5C.2 8.7 0 8.4 0 8s.2-.7.5-.9l9-5c.2-.1.3-.1.5-.1s.3 0 .5.1l1.013.563zM17 3h2a1 1 0 010 2h-2v2a1 1 0 01-2 0V5h-2a1 1 0 010-2h2V1a1 1 0 012 0v2z"],"path-search":["M4 7c-.55 0-1 .45-1 1s.45 1 1 1 1-.45 1-1-.45-1-1-1zm15 11.69l-5-2.5v-3.63c-.32.11-.66.22-1 .29v3.32l-6 2.57v-7.25c-.36-.27-.69-.57-1-.9v8.1l-5-2.5V10c.55 0 1-.45 1-1s-.45-1-1-1V1.31l3.43 1.71c.11-.31.24-.62.39-.92L.72.05A.545.545 0 00.5 0C.22 0 0 .22 0 .5v16c0 .2.12.36.28.44l6 3c.07.04.14.06.22.06.07 0 .14-.01.2-.04l6.79-2.91 5.79 2.9c.07.03.14.05.22.05.28 0 .5-.22.5-.5v-4.21c-.31.13-.64.21-1 .21v3.19zM10 5c-.55 0-1 .45-1 1s.45 1 1 1 1-.45 1-1-.45-1-1-1zm3-1c-.55 0-1 .45-1 1s.45 1 1 1 1-.45 1-1-.45-1-1-1zm6.72-.94l-1.43-.72c.2.43.36.89.48 1.36l.23.11V5.5c-.55 0-1 .45-1 1s.45 1 1 1v1.96l1 1V3.5c0-.2-.12-.36-.28-.44zm-3.69 5.56c.14-.21.27-.42.38-.65.02-.04.04-.07.05-.11.11-.22.2-.45.28-.69v-.01c.07-.24.13-.48.17-.73l.03-.17c.04-.25.06-.5.06-.76C17 2.46 14.54 0 11.5 0S6 2.46 6 5.5 8.46 11 11.5 11c.26 0 .51-.02.76-.06l.17-.03c.25-.04.49-.1.73-.17h.01c.24-.08.47-.17.69-.28.04-.02.07-.03.11-.05.23-.11.44-.24.65-.38l.18.18 3.5 3.5c.17.18.42.29.7.29a1.003 1.003 0 00.71-1.71l-3.68-3.67zm-4.53.88c-2.21 0-4-1.79-4-4s1.79-4 4-4 4 1.79 4 4-1.79 4-4 4z"],play:["M16 10c0-.36-.2-.67-.49-.84l.01-.01-10-6-.01.01A.991.991 0 005 3c-.55 0-1 .45-1 1v12c0 .55.45 1 1 1 .19 0 .36-.07.51-.16l.01.01 10-6-.01-.01c.29-.17.49-.48.49-.84z"],plus:["M16 9h-5V4c0-.55-.45-1-1-1s-1 .45-1 1v5H4c-.55 0-1 .45-1 1s.45 1 1 1h5v5c0 .55.45 1 1 1s1-.45 1-1v-5h5c.55 0 1-.45 1-1s-.45-1-1-1z"],print:["M14 16H6v-4H4v5c0 .55.45 1 1 1h10c.55 0 1-.45 1-1v-5h-2v4zm2-13c0-.55-.45-1-1-1H5c-.55 0-1 .45-1 1v1h12V3zm3 2H1c-.55 0-1 .45-1 1v7c0 .55.45 1 1 1h2v-3h14v3h2c.55 0 1-.45 1-1V6c0-.55-.45-1-1-1zm-1 4h-2V7h2v2z"],properties:["M2 15c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm0-7c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm5-4h12c.55 0 1-.45 1-1s-.45-1-1-1H7c-.55 0-1 .45-1 1s.45 1 1 1zM2 1C.9 1 0 1.9 0 3s.9 2 2 2 2-.9 2-2-.9-2-2-2zm17 8H7c-.55 0-1 .45-1 1s.45 1 1 1h12c.55 0 1-.45 1-1s-.45-1-1-1zm0 7H7c-.55 0-1 .45-1 1s.45 1 1 1h12c.55 0 1-.45 1-1s-.45-1-1-1z"],select:["M19.71 18.29l-4.25-4.25L20 12.91 9.93 9.33c.04-.1.07-.21.07-.33V3c0-.55-.45-1-1-1H4V1c0-.55-.45-1-1-1S2 .45 2 1v1H1c-.55 0-1 .45-1 1s.45 1 1 1h1v5c0 .55.45 1 1 1h6c.12 0 .23-.03.34-.07L12.91 20l1.14-4.54 4.25 4.25c.17.18.42.29.7.29a1.003 1.003 0 00.71-1.71zM8 8H4V4h4v4z"],search:["M19.56 17.44l-4.94-4.94A8.004 8.004 0 0016 8c0-4.42-3.58-8-8-8S0 3.58 0 8s3.58 8 8 8c1.67 0 3.21-.51 4.5-1.38l4.94 4.94a1.498 1.498 0 102.12-2.12zM8 14c-3.31 0-6-2.69-6-6s2.69-6 6-6 6 2.69 6 6-2.69 6-6 6z"],"small-cross":["M11.41 10l3.29-3.29c.19-.18.3-.43.3-.71a1.003 1.003 0 00-1.71-.71L10 8.59l-3.29-3.3a1.003 1.003 0 00-1.42 1.42L8.59 10 5.3 13.29c-.19.18-.3.43-.3.71a1.003 1.003 0 001.71.71l3.29-3.3 3.29 3.29c.18.19.43.3.71.3a1.003 1.003 0 00.71-1.71L11.41 10z"],stop:["M16 3H4c-.55 0-1 .45-1 1v12c0 .55.45 1 1 1h12c.55 0 1-.45 1-1V4c0-.55-.45-1-1-1z"],tag:["M2 4a2 2 0 012-2h4.588a2 2 0 011.414.586l7.41 7.41a2 2 0 010 2.828l-4.588 4.588a2 2 0 01-2.829 0l-7.41-7.41A2 2 0 012 8.588V4zm3.489-.006a1.495 1.495 0 100 2.99 1.495 1.495 0 000-2.99z"],th:["M19 1H1c-.6 0-1 .5-1 1v16c0 .5.4 1 1 1h18c.5 0 1-.5 1-1V2c0-.5-.5-1-1-1zM7 17H2v-3h5v3zm0-4H2v-3h5v3zm0-4H2V6h5v3zm11 8H8v-3h10v3zm0-4H8v-3h10v3zm0-4H8V6h10v3z"],tick:["M17 4c-.28 0-.53.11-.71.29L7 13.59 3.71 10.3A.965.965 0 003 10a1.003 1.003 0 00-.71 1.71l4 4c.18.18.43.29.71.29s.53-.11.71-.29l10-10A1.003 1.003 0 0017 4z"],trash:["M17 1h-5c0-.55-.45-1-1-1H9c-.55 0-1 .45-1 1H3c-.55 0-1 .45-1 1v1h16V2c0-.55-.45-1-1-1zm.5 3h-15c-.28 0-.5.22-.5.5s.22.5.5.5H3v14c0 .55.45 1 1 1h12c.55 0 1-.45 1-1V5h.5c.28 0 .5-.22.5-.5s-.22-.5-.5-.5zM7 16c0 .55-.45 1-1 1s-1-.45-1-1V8c0-.55.45-1 1-1s1 .45 1 1v8zm4 0c0 .55-.45 1-1 1s-1-.45-1-1V8c0-.55.45-1 1-1s1 .45 1 1v8zm4 0c0 .55-.45 1-1 1s-1-.45-1-1V8c0-.55.45-1 1-1s1 .45 1 1v8z"],upload:["M10 0C4.48 0 0 4.48 0 10s4.48 10 10 10 10-4.48 10-10S15.52 0 10 0zm4 10c-.28 0-.53-.11-.71-.29L11 7.41V15c0 .55-.45 1-1 1s-1-.45-1-1V7.41l-2.29 2.3a1.003 1.003 0 01-1.42-1.42l4-4c.18-.18.43-.29.71-.29s.53.11.71.29l4 4A1.003 1.003 0 0114 10z"],"warning-sign":["M19.86 17.52l.01-.01-9-16-.01.01C10.69 1.21 10.37 1 10 1s-.69.21-.86.52l-.01-.01-9 16 .01.01c-.08.14-.14.3-.14.48 0 .55.45 1 1 1h18c.55 0 1-.45 1-1 0-.18-.06-.34-.14-.48zM11 17H9v-2h2v2zm0-3H9V6h2v8z"],"zoom-to-fit":["M1 7c.55 0 1-.45 1-1V2h4c.55 0 1-.45 1-1s-.45-1-1-1H1C.45 0 0 .45 0 1v5c0 .55.45 1 1 1zm5 1a1.003 1.003 0 00-1.71-.71l-2 2c-.18.18-.29.43-.29.71 0 .28.11.53.29.71l2 2a1.003 1.003 0 001.42-1.42L4.41 10 5.7 8.71c.19-.18.3-.43.3-.71zm2-2c.28 0 .53-.11.71-.29L10 4.41l1.29 1.29c.18.19.43.3.71.3a1.003 1.003 0 00.71-1.71l-2-2C10.53 2.11 10.28 2 10 2s-.53.11-.71.29l-2 2A1.003 1.003 0 008 6zM6 18H2v-4c0-.55-.45-1-1-1s-1 .45-1 1v5c0 .55.45 1 1 1h5c.55 0 1-.45 1-1s-.45-1-1-1zm8-6a1.003 1.003 0 001.71.71l2-2c.18-.18.29-.43.29-.71 0-.28-.11-.53-.29-.71l-2-2a1.003 1.003 0 00-1.42 1.42l1.3 1.29-1.29 1.29c-.19.18-.3.43-.3.71zm5-12h-5c-.55 0-1 .45-1 1s.45 1 1 1h4v4c0 .55.45 1 1 1s1-.45 1-1V1c0-.55-.45-1-1-1zm-7 14c-.28 0-.53.11-.71.29L10 15.59 8.71 14.3A.965.965 0 008 14a1.003 1.003 0 00-.71 1.71l2 2c.18.18.43.29.71.29s.53-.11.71-.29l2-2A1.003 1.003 0 0012 14zm7-1c-.55 0-1 .45-1 1v4h-4c-.55 0-1 .45-1 1s.45 1 1 1h5c.55 0 1-.45 1-1v-5c0-.55-.45-1-1-1z"]}},24654:function(){}},a={};function i(e){var t=a[e];if(void 0!==t)return t.exports;var n=a[e]={exports:{}};return r[e].call(n.exports,n,n.exports,i),n.exports}i.m=r,e=[],i.O=function(t,n,r,a){if(!n){var o=1/0;for(c=0;c<e.length;c++){n=e[c][0],r=e[c][1],a=e[c][2];for(var s=!0,l=0;l<n.length;l++)(!1&a||o>=a)&&Object.keys(i.O).every((function(e){return i.O[e](n[l])}))?n.splice(l--,1):(s=!1,a<o&&(o=a));if(s){e.splice(c--,1);var u=r();void 0!==u&&(t=u)}}return t}a=a||0;for(var c=e.length;c>0&&e[c-1][2]>a;c--)e[c]=e[c-1];e[c]=[n,r,a]},i.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return i.d(t,{a:t}),t},n=Object.getPrototypeOf?function(e){return Object.getPrototypeOf(e)}:function(e){return e.__proto__},i.t=function(e,r){if(1&r&&(e=this(e)),8&r)return e;if("object"==typeof e&&e){if(4&r&&e.__esModule)return e;if(16&r&&"function"==typeof e.then)return e}var a=Object.create(null);i.r(a);var o={};t=t||[null,n({}),n([]),n(n)];for(var s=2&r&&e;"object"==typeof s&&!~t.indexOf(s);s=n(s))Object.getOwnPropertyNames(s).forEach((function(t){o[t]=function(){return e[t]}}));return o.default=function(){return e},i.d(a,o),a},i.d=function(e,t){for(var n in t)i.o(t,n)&&!i.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},i.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},function(){var e={428:0};i.O.j=function(t){return 0===e[t]};var t=function(t,n){var r,a,o=n[0],s=n[1],l=n[2],u=0;if(o.some((function(t){return 0!==e[t]}))){for(r in s)i.o(s,r)&&(i.m[r]=s[r]);if(l)var c=l(i)}for(t&&t(n);u<o.length;u++)a=o[u],i.o(e,a)&&e[a]&&e[a][0](),e[o[u]]=0;return i.O(c)},n=self.webpackChunkMapGuide=self.webpackChunkMapGuide||[];n.forEach(t.bind(null,0)),n.push=t.bind(null,n.push.bind(n))}();var o=i.O(void 0,[736],(function(){return i(78539)}));o=i.O(o),MapGuide=o}();
//# sourceMappingURL=viewer.js.map